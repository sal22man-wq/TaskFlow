{"file_contents":{"DEPLOYMENT.md":{"content":"# تشغيل المشروع خارج Replit\n\n## سبب عدم عمل الواتساب في Replit\nالبيئة المجانية في Replit لها قيود صارمة على:\n- الذاكرة (أقل من 512MB)\n- معالجة العمليات الثقيلة\n- تشغيل متصفح Puppeteer المطلوب للواتساب\n\n## خطوات التشغيل المحلي\n\n### 1. متطلبات النظام\n```bash\n- Node.js 18+ \n- PostgreSQL 12+\n- ذاكرة متاحة 2GB+\n- نظام تشغيل: Windows/Mac/Linux\n```\n\n### 2. التحضير\n```bash\n# تحميل المشروع (إذا من GitHub)\ngit clone YOUR_REPO_URL\ncd taskflow\n\n# أو فك ضغط ملف ZIP المُصدَّر من Replit\n```\n\n### 3. تثبيت المكتبات\n```bash\nnpm install\n```\n\n### 4. إعداد قاعدة البيانات\n```bash\n# إنشاء قاعدة بيانات PostgreSQL جديدة\ncreatedb taskflow\n\n# نسخ إعدادات البيئة\ncp .env.example .env\n\n# تعديل .env بمعلومات قاعدة البيانات الصحيحة\n# DATABASE_URL=\"postgresql://username:password@localhost:5432/taskflow\"\n```\n\n### 5. إعداد قاعدة البيانات\n```bash\nnpm run db:push\n```\n\n### 6. تشغيل المشروع\n```bash\n# للتطوير\nnpm run dev\n\n# للإنتاج\nnpm run build\nnpm start\n```\n\n### 7. اختبار الواتساب\n- اذهب للإعدادات المتقدمة\n- فعل الواتساب الحقيقي\n- امسح رمز QR\n- يجب أن يعمل بشكل طبيعي!\n\n## نشر على خادم سحابي\n\n### Railway (مجاني)\n1. اربط GitHub مع Railway\n2. انشر المشروع مباشرة\n3. أضف متغيرات البيئة\n4. سيعمل الواتساب تلقائياً\n\n### Render (مجاني)\n1. اربط GitHub مع Render\n2. أضف Build Command: `npm install && npm run build`\n3. أضف Start Command: `npm start`\n4. أضف قاعدة بيانات PostgreSQL\n\n### DigitalOcean ($4/شهر)\n1. أنشئ Droplet جديد\n2. ثبت Node.js وPostgreSQL\n3. ارفع المشروع وشغله\n\n## استكشاف الأخطاء\n\n### مشكلة قاعدة البيانات\n```bash\n# تحقق من اتصال PostgreSQL\npsql $DATABASE_URL\n\n# إعادة إنشاء الجداول\nnpm run db:push --force\n```\n\n### مشكلة الواتساب\n```bash\n# تأكد من توفر الذاكرة الكافية\nfree -m\n\n# إعادة تشغيل الخدمة\npm2 restart taskflow\n```\n\n## الفوائد خارج Replit\n✅ الواتساب الحقيقي يعمل 100%\n✅ أداء أسرع وأكثر استقراراً  \n✅ ذاكرة وموارد أكبر\n✅ تحكم كامل في البيئة\n✅ لا توجد قيود على الاستخدام","size_bytes":2679},"EXPORT_GUIDE.md":{"content":"# دليل تصدير المشروع من Replit\n\n## سبب الحاجة للتصدير\nبيئة Replit المجانية لها قيود على:\n- الذاكرة المتاحة (محدودة جداً)\n- المعالجات (أقل قوة)\n- الموارد المتاحة للمكتبات الثقيلة مثل WhatsApp Web.js\n\n## طرق التصدير\n\n### 1. التصدير المباشر كملف ZIP\n1. اذهب لقائمة الملفات في Replit\n2. ابحث عن أيقونة التحميل أو \"Export as ZIP\"\n3. حمل المشروع كاملاً\n4. فك الضغط في بيئة التطوير المحلية\n\n### 2. الرفع لـ GitHub\n1. أنشئ حساب GitHub إذا لم يكن لديك\n2. أنشئ repository جديد\n3. في Replit، استخدم Git لربط المشروع:\n   ```bash\n   git init\n   git add .\n   git commit -m \"Initial commit\"\n   git remote add origin https://github.com/username/repo-name.git\n   git push -u origin main\n   ```\n\n## البيئات المقترحة للنشر\n\n### 1. خوادم مجانية\n- **Railway**: سهل الاستخدام، دعم ممتاز لـ Node.js\n- **Render**: موثوق ومجاني للمشاريع الصغيرة\n- **Heroku**: خطة مجانية محدودة لكن كافية للاختبار\n\n### 2. خوادم مدفوعة (اقتصادية)\n- **DigitalOcean Droplet**: 4$ شهرياً\n- **Linode VPS**: 5$ شهرياً\n- **AWS EC2**: متغير حسب الاستخدام\n\n### 3. بيئة محلية للاختبار\n```bash\n# متطلبات النظام\n- Node.js 18+\n- PostgreSQL\n- ذاكرة 2GB+ متاحة\n- معالج حديث\n\n# خطوات التشغيل\nnpm install\nnpm run db:push\nnpm run dev\n```\n\n## ملفات مهمة للتصدير\n- جميع ملفات المشروع\n- متغيرات البيئة (.env)\n- إعدادات قاعدة البيانات\n- مفاتيح API والأسرار\n\n## بعد التصدير\n1. تأكد من تحديث متغيرات البيئة\n2. قم بإعداد قاعدة بيانات PostgreSQL جديدة\n3. شغل المشروع واختبر الواتساب الحقيقي\n4. الواتساب الحقيقي يجب أن يعمل بشكل طبيعي خارج Replit\n\n## نصائح للنجاح\n- ابدأ بالاختبار المحلي أولاً\n- تأكد من تشغيل جميع الوظائف قبل النشر\n- احتفظ بنسخة احتياطية من البيانات\n- اختبر الواتساب في بيئة آمنة أولاً","size_bytes":2472},"PRODUCTION_TEAM_FIX.md":{"content":"# دليل إصلاح أعضاء الفريق في بيئة الإنتاج\n\n## المشكلة\nعند نشر التطبيق في بيئة الإنتاج، قد تجد أن المستخدمين الجدد لا يظهرون في صفحة الفريق رغم وجودهم في النظام. هذا يحدث عندما لا يتم إنشاء سجل \"عضو فريق\" مقابل كل \"مستخدم\".\n\n## الحل\nتم إضافة ميزة جديدة للمدير لإصلاح هذه المشكلة تلقائياً.\n\n### خطوات الإصلاح:\n\n1. **تسجيل الدخول كمدير**\n   - استخدم حساب المدير للوصول إلى الأدوات الإدارية\n\n2. **الذهاب إلى صفحة الفريق**\n   - انقر على تبويب \"الفريق\" في الشريط السفلي\n\n3. **استخدام زر الإصلاح**\n   - ستجد زر أخضر بعنوان \"إصلاح أعضاء الفريق المفقودين\"\n   - انقر على هذا الزر\n\n4. **النتيجة**\n   - سيقوم النظام بفحص جميع المستخدمين\n   - سينشئ عضو فريق لكل مستخدم ليس له عضو فريق مقابل\n   - ستظهر رسالة تأكيد تخبرك بعدد الأعضاء الذين تم إنشاؤهم\n\n## المميزات الإضافية:\n\n### معلومات العضو الجديد\n- **الاسم**: سيستخدم الاسم الأول والأخير إن وجد، وإلا سيستخدم اسم المستخدم\n- **الدور**: سيتم تحديده بناءً على دور المستخدم (مدير النظام/مشرف/عضو فريق)\n- **البريد الإلكتروني**: سيستخدم بريد المستخدم إن وجد، وإلا سينشئ بريد افتراضي\n- **الحالة**: متاح (available)\n\n### التسجيل التلقائي\n- جميع عمليات الإصلاح تُسجل في سجل النظام\n- يمكن للمدير مراجعة هذه العمليات في صفحة \"سجل النظام\"\n\n### الاستخدام الآمن\n- هذه الميزة متاحة فقط للمدير\n- لن تؤثر على البيانات الموجودة\n- تنشئ فقط السجلات المفقودة\n\n## نصائح مهمة:\n\n1. **استخدم هذه الميزة بعد كل نشر جديد** للتأكد من سلامة البيانات\n2. **تأكد من صحة البيانات** بعد الإصلاح من خلال مراجعة قائمة الفريق\n3. **راجع سجل النظام** للاطلاع على تفاصيل عمليات الإصلاح\n\n## في حالة عدم ظهور الزر:\n- تأكد من أنك مسجل دخول كمدير\n- قم بإعادة تحميل الصفحة\n- تأكد من أن النظام يتعرف على صلاحياتك الإدارية\n\nهذا الحل يضمن أن جميع المستخدمين في النظام سيظهرون بشكل صحيح في قائمة الفريق.","size_bytes":2922},"README_DATASHEET.md":{"content":"# دليل استخدام DataSheet\n\n## الملفات المُنشأة:\n\n### 1. TaskFlow_DataSheet.md\n- ملف Markdown شامل باللغة العربية\n- يحتوي على جميع تفاصيل المشروع\n- يمكن تحويله إلى أي صيغة أخرى\n\n### 2. TaskFlow_DataSheet_Word.html\n- ملف HTML منسق بالكامل باللغة العربية\n- جاهز للطباعة أو التحويل إلى Word\n- تصميم احترافي مع ألوان وتنسيق متقدم\n- يدعم اتجاه النص من اليمين لليسار (RTL)\n\n## طرق التحويل إلى Word:\n\n### الطريقة الأولى: فتح بـ Microsoft Word\n1. حمل ملف `TaskFlow_DataSheet_Word.html`\n2. افتح Microsoft Word\n3. اذهب إلى File > Open\n4. اختر \"All Files\" في نوع الملفات\n5. اختر الملف HTML\n6. Word سيحوله تلقائياً\n7. احفظ كـ .docx\n\n### الطريقة الثانية: المتصفح\n1. افتح ملف HTML في أي متصفح\n2. اضغط Ctrl+P (للطباعة)\n3. اختر \"Save as PDF\" أو \"Microsoft Print to PDF\"\n4. يمكن تحويل PDF إلى Word باستخدام أدوات أونلاين\n\n### الطريقة الثالثة: أدوات أونلاين\n1. استخدم مواقع مثل:\n   - SmallPDF\n   - ILovePDF\n   - Zamzar\n2. ارفع ملف HTML\n3. حوله إلى DOCX\n\n## المحتويات الموجودة:\n\n✅ نظرة عامة على المنتج  \n✅ الميزات الأساسية مفصلة  \n✅ نظام الصلاحيات الثلاثي  \n✅ التكامل مع الواتساب  \n✅ نظام النقاط والمكافآت  \n✅ إدارة المستخدمين والفريق  \n✅ الإحصائيات والتقارير  \n✅ الأمان والخصوصية  \n✅ التكنولوجيا المستخدمة  \n✅ التصميم المتجاوب  \n✅ مؤشرات الأداء الرئيسية  \n✅ الصيانة والدعم  \n✅ خطط التطوير المستقبلية  \n✅ معلومات الاتصال  \n\n## التنسيق والتصميم:\n\n- ✨ تصميم احترافي بألوان الشركة\n- 📊 جداول منسقة للصلاحيات\n- 🎨 بطاقات ملونة للميزات\n- 📈 إحصائيات مرئية\n- 🖼️ تخطيط متجاوب لجميع الأجهزة\n- 🔄 دعم كامل للغة العربية واتجاه RTL\n\nالملف جاهز للاستخدام الفوري ويمكن طباعته أو تحويله حسب الحاجة!","size_bytes":2496},"TaskFlow_DataSheet.md":{"content":"# نظام TaskFlow - دليل المنتج الشامل\n## منصة إدارة المهام والتعاون الجماعي مع دعم الواتساب\n\n---\n\n## 📋 نظرة عامة على المنتج\n\n**اسم المنتج:** TaskFlow  \n**الشركة:** شركة اشراق الودق لتكنولوجيا المعلومات  \n**النوع:** منصة إدارة مهام ويب متطورة  \n**اللغة:** العربية (واجهة كاملة باللغة العربية)  \n**المنصة:** تطبيق ويب متجاوب يعمل على جميع الأجهزة  \n\n### الهدف الأساسي\nمنصة شاملة لإدارة المهام والتعاون الجماعي مصممة خصيصاً للفرق العربية، مع تكامل مع تطبيق الواتساب لضمان التواصل الفعال وقياس رضا العملاء.\n\n---\n\n## 🎯 الميزات الأساسية\n\n### 1. نظام إدارة المهام المتقدم\n- **إنشاء وتتبع المهام:** إضافة مهام جديدة مع تفاصيل شاملة\n- **نظام الترقيم التلقائي:** كل مهمة تحصل على رقم فريد تلقائياً\n- **حالات المهام:** قيد التنفيذ، مكتمل، متأخر، ملغي\n- **مستويات الأولوية:** عالية، متوسطة، منخفضة\n- **تتبع التقدم:** نسبة إنجاز مع شريط تقدم مرئي\n- **تواريخ الاستحقاق:** تنبيهات للمهام المتأخرة\n- **ملاحظات وتعليقات:** نظام تعليقات داخلي لكل مهمة\n\n### 2. نظام الصلاحيات الثلاثي المستويات\n#### مدير النظام (Admin)\n- إدارة كاملة للنظام والمستخدمين\n- تغيير أدوار المستخدمين\n- الوصول لجميع الإحصائيات والتقارير\n- إدارة إعدادات الواتساب\n\n#### المشرف (Supervisor)\n- إنشاء وتعديل المهام\n- عرض جميع المهام في النظام\n- إدارة أعضاء الفريق\n- عرض تقارير الأداء\n\n#### المستخدم العادي (User)\n- عرض المهام المُسندة له فقط\n- تحديث حالة وتقدم المهام\n- إضافة ملاحظات للمهام\n- تسجيل الوقت المُستغرق\n\n### 3. نظام التكامل مع الواتساب\n#### إرسال تقييم رضا العملاء\n- إرسال تلقائي لرسائل تقييم الرضا عند إنهاء المهام\n- ثلاثة مستويات تقييم: غاضب، راضي، راضي جداً\n- تتبع الردود وتحليل رضا العملاء\n- إحصائيات شاملة لتقييمات العملاء\n\n#### إعدادات الواتساب\n- وضع المحاكاة للاختبار\n- الوضع الحقيقي للتشغيل المباشر\n- مسح QR Code للربط مع الحساب\n- تتبع حالة الاتصال\n\n### 4. نظام النقاط والمكافآت\n- **نقاط الإنجاز:** نقاط تلقائية عند إكمال المهام\n- **ترتيب الأعضاء:** قائمة أفضل المؤدين\n- **إحصائيات الفريق:** متوسط النقاط وإجمالي الإنجازات\n- **نظام الحوافز:** تشجيع الأداء المتميز\n\n---\n\n## 👥 إدارة المستخدمين والفريق\n\n### نظام المستخدمين المتحد\n- **حساب موحد:** كل مستخدم هو عضو فريق تلقائياً\n- **ملفات شخصية:** اسم، إيميل، رقم هاتف، صورة شخصية\n- **إدارة كلمات المرور:** تغيير آمن بالتحقق من الحالي\n- **حالة الحساب:** تفعيل/إيقاف المستخدمين\n\n### إدارة الفريق\n- **قائمة الأعضاء:** عرض جميع أعضاء الفريق\n- **الأدوار والصلاحيات:** تحديد دور كل عضو\n- **إحصائيات الأداء:** متابعة إنجاز كل عضو\n- **النقاط والترتيب:** نظام ترتيب الأعضاء\n\n---\n\n## 📊 الإحصائيات والتقارير\n\n### إحصائيات عامة\n- إجمالي المهام النشطة\n- المهام المكتملة\n- المهام المتأخرة\n- معدل الإنجاز اليومي\n\n### إحصائيات الفريق\n- عدد أعضاء الفريق\n- إجمالي نقاط الفريق\n- متوسط النقاط لكل عضو\n- أفضل المؤدين\n\n### تقييمات العملاء\n- إجمالي التقييمات المُرسلة\n- نسبة الردود\n- توزيع مستويات الرضا\n- تحليل اتجاهات الرضا\n\n---\n\n## 🔒 الأمان والخصوصية\n\n### تشفير البيانات\n- تشفير كلمات المرور باستخدام bcrypt\n- حماية جلسات المستخدمين\n- تخزين آمن للبيانات الحساسة\n\n### سجلات النشاط\n- تسجيل جميع العمليات المهمة\n- تتبع تغييرات المهام\n- سجل تسجيل الدخول والخروج\n- سجل تغييرات الصلاحيات\n\n### النسخ الاحتياطي\n- نسخ احتياطية تلقائية للبيانات\n- إمكانية استرداد البيانات\n- حماية من فقدان المعلومات\n\n---\n\n## 💬 نظام المراسلة والإشعارات\n\n### المراسلة الداخلية\n- نظام رسائل داخلي بين الأعضاء\n- إشعارات فورية للرسائل الجديدة\n- سجل محادثات شامل\n- واجهة سهلة الاستخدام\n\n### الإشعارات\n- إشعارات المهام الجديدة\n- تنبيهات المواعيد النهائية\n- إشعارات الرسائل الجديدة\n- تحديثات حالة المهام\n\n---\n\n## 🖥️ التكنولوجيا والمواصفات التقنية\n\n### تكنولوجيا الواجهة الأمامية\n- **React 18:** إطار عمل حديث للواجهات\n- **TypeScript:** لضمان جودة الكود\n- **Tailwind CSS:** تصميم متجاوب وحديث\n- **Radix UI:** مكونات واجهة متقدمة\n\n### تكنولوجيا الخادم الخلفي\n- **Node.js:** بيئة تشغيل سريعة\n- **Express.js:** إطار عمل خادم قوي\n- **PostgreSQL:** قاعدة بيانات متقدمة\n- **Drizzle ORM:** تفاعل آمن مع قاعدة البيانات\n\n### المكتبات المساعدة\n- **WhatsApp Web.js:** تكامل مع الواتساب\n- **React Query:** إدارة حالة الخادم\n- **Zod:** التحقق من صحة البيانات\n- **Date-fns:** معالجة التواريخ\n\n---\n\n## 📱 التصميم المتجاوب\n\n### دعم جميع الأجهزة\n- **الهواتف الذكية:** تصميم محسن للهواتف\n- **الأجهزة اللوحية:** واجهة ملائمة للتابلت\n- **أجهزة الكمبيوتر:** استغلال كامل للشاشة\n- **دعم RTL:** واجهة من اليمين لليسار\n\n### التنقل السهل\n- **شريط تنقل سفلي:** سهولة الوصول بإبهام واحد\n- **أزرار عائمة:** إضافة سريعة للمهام\n- **قوائم منسدلة:** تنظيم الخيارات\n- **بحث سريع:** العثور على المحتوى بسرعة\n\n---\n\n## 📈 مؤشرات الأداء الرئيسية (KPIs)\n\n### مؤشرات الإنتاجية\n- **معدل إكمال المهام:** نسبة المهام المنجزة في الوقت\n- **متوسط وقت الإنجاز:** الوقت المتوسط لإنهاء المهام\n- **كفاءة الفريق:** نسبة النشاط والمشاركة\n- **التحسن المستمر:** تتبع تحسن الأداء عبر الوقت\n\n### مؤشرات رضا العملاء\n- **معدل الاستجابة:** نسبة العملاء الذين يردون على التقييم\n- **مؤشر الرضا العام:** نسبة العملاء الراضين\n- **تحليل الاتجاهات:** تطور مستوى الرضا عبر الوقت\n- **مؤشرات التحسن:** تحديد نقاط التحسين\n\n---\n\n## 🔧 الصيانة والدعم\n\n### التحديثات التلقائية\n- تحديثات أمان منتظمة\n- إضافة ميزات جديدة\n- تحسينات الأداء\n- إصلاح الأخطاء\n\n### الدعم التقني\n- دعم فني متخصص\n- دليل المستخدم الشامل\n- فيديوهات تعليمية\n- دعم عبر الإنترنت\n\n---\n\n## 🚀 خطط التطوير المستقبلية\n\n### ميزات قادمة\n- **تطبيق الهاتف المحمول:** تطبيق أصلي للهواتف\n- **تقارير متقدمة:** تحليلات أعمق للبيانات\n- **تكامل APIs:** ربط مع أنظمة أخرى\n- **الذكاء الاصطناعي:** توصيات ذكية للمهام\n\n### التحسينات المخططة\n- **أداء محسن:** استجابة أسرع\n- **واجهة محسنة:** تجربة مستخدم أفضل\n- **ميزات إضافية:** أدوات جديدة للإنتاجية\n- **أمان معزز:** حماية أقوى للبيانات\n\n---\n\n## 💰 نموذج التسعير\n\n### الباقات المتاحة\n- **باقة أساسية:** للفرق الصغيرة (حتى 10 مستخدمين)\n- **باقة احترافية:** للشركات المتوسطة (حتى 50 مستخدم)\n- **باقة مؤسسية:** للشركات الكبيرة (مستخدمين غير محدودين)\n- **حلول مخصصة:** حسب احتياجات العميل\n\n### الميزات المضمنة\n- دعم تقني شامل\n- نسخ احتياطية منتظمة\n- تحديثات مجانية\n- تدريب المستخدمين\n\n---\n\n## 📞 معلومات الاتصال والدعم\n\n**شركة اشراق الودق لتكنولوجيا المعلومات**\n\n- **الموقع الإلكتروني:** [www.company-website.com]\n- **البريد الإلكتروني:** support@company.com\n- **الهاتف:** +966-XX-XXX-XXXX\n- **العنوان:** [عنوان الشركة]\n\n### أوقات الدعم\n- **الأيام:** الأحد إلى الخميس\n- **الساعات:** 8:00 ص - 6:00 م\n- **الدعم الطارئ:** متاح 24/7\n\n---\n\n**© 2025 شركة اشراق الودق لتكنولوجيا المعلومات - جميع الحقوق محفوظة**","size_bytes":10393},"WHATSAPP_REAL_SETUP.md":{"content":"# تفعيل الواتساب الحقيقي في TaskFlow\n\n## المشكلة الحالية\nالنظام حالياً يعمل في وضع المحاكاة. رمز QR المعروض هو رمز تجريبي وليس حقيقي من WhatsApp Web.\n\n## الحل: تفعيل الواتساب الحقيقي\n\n### الطريقة 1: تفعيل الواتساب الحقيقي (في بيئة الإنتاج)\n```bash\n# في terminal أو في متغيرات البيئة\nexport ENABLE_REAL_WHATSAPP=true\n# أو\nexport NODE_ENV=production\n```\n\n### الطريقة 2: تعديل الكود مباشرة\nفي ملف `server/whatsapp-service.ts`، غير السطر:\n```javascript\nif (process.env.NODE_ENV === 'production' || process.env.ENABLE_REAL_WHATSAPP === 'true') {\n```\nإلى:\n```javascript\nif (true) { // تفعيل الواتساب الحقيقي دائماً\n```\n\n## خطوات تفعيل الواتساب الحقيقي:\n\n### 1. تأكد من تثبيت المتطلبات\n```bash\nnpm install whatsapp-web.js qrcode-terminal\n```\n\n### 2. تفعيل الواتساب الحقيقي\nاختر إحدى الطرق أعلاه.\n\n### 3. إعادة تشغيل الخادم\n```bash\nnpm run dev\n```\n\n### 4. مسح رمز QR الحقيقي\n- بعد إعادة التشغيل، ستظهر رسالة QR حقيقي في terminal\n- افتح الواتساب على هاتفك\n- اذهب إلى الإعدادات > الأجهزة المرتبطة\n- امسح رمز QR المعروض في terminal\n\n### 5. تأكيد الاتصال\n- عند النجاح، ستظهر رسالة \"✅ خدمة الواتساب جاهزة ومتصلة!\"\n- سيتم عرض رقم الواتساب المتصل\n\n## ميزات الواتساب الحقيقي:\n\n1. **إرسال رسائل تقييم حقيقية** للعملاء\n2. **استقبال ردود العملاء** وتسجيل التقييمات تلقائياً\n3. **إرسال رسائل تجريبية** للاختبار\n4. **عرض حالة الاتصال الحقيقية**\n\n## استكشاف الأخطاء:\n\n### إذا فشل الاتصال:\n1. تأكد من تثبيت المكتبات المطلوبة\n2. تأكد من وجود اتصال إنترنت مستقر\n3. تأكد من أن الواتساب مفتوح على الهاتف\n4. جرب إعادة تشغيل الخدمة من واجهة الويب\n\n### إذا انقطع الاتصال:\n- استخدم زر \"إعادة تشغيل وتجديد QR\" في واجهة إعدادات الواتساب\n- أو استخدم زر \"إعادة اتصال\"\n\n## ملاحظات مهمة:\n\n1. **الواتساب الحقيقي يتطلب بقاء الهاتف متصلاً بالإنترنت**\n2. **لا تسجل الخروج من Whatsapp Web على الهاتف** وإلا ستحتاج لإعادة مسح QR\n3. **يمكن ربط الواتساب بـ 4 أجهزة كحد أقصى**\n4. **في حالة انقطاع الاتصال، سيتم إنشاء QR جديد تلقائياً**\n\n## للوصول لإعدادات الواتساب:\n- ادخل كمدير أو مشرف\n- اذهب إلى `/admin/whatsapp-settings` في المتصفح\n- أو استخدم القائمة الجانبية > إعدادات الواتساب","size_bytes":3195},"WHATSAPP_SETUP.md":{"content":"# دليل ربط الواتساب برقم المرسل\n\n## نظرة عامة\n\nيدعم النظام عدة طرق لربط الواتساب وإرسال تقييمات العملاء تلقائياً عند إكمال المهام.\n\n## الطرق المتاحة\n\n### 1. WhatsApp Business API (مُوصى للشركات)\n\n**المتطلبات:**\n- حساب WhatsApp Business\n- موافقة من Meta (فيسبوك)\n- رقم هاتف مخصص للأعمال\n\n**خطوات الإعداد:**\n1. التسجيل في [WhatsApp Business Platform](https://business.whatsapp.com/)\n2. تقديم طلب للحصول على API\n3. إضافة الرقم المعتمد في متغيرات البيئة:\n   ```\n   WHATSAPP_SENDER_NUMBER=966501234567\n   WHATSAPP_ACCESS_TOKEN=your_access_token\n   ```\n\n**المميزات:**\n- إرسال رسائل تجارية رسمية\n- قوالب رسائل معتمدة\n- إحصائيات مفصلة\n- استقرار عالي\n\n### 2. WhatsApp Web.js (للمشاريع الصغيرة)\n\n**المتطلبات:**\n- رقم واتساب شخصي أو تجاري\n- مسح QR Code للربط\n\n**خطوات الإعداد:**\n1. تثبيت المكتبة:\n   ```bash\n   npm install whatsapp-web.js qrcode-terminal\n   ```\n\n2. إضافة الكود في `server/whatsapp-service.ts`:\n   ```javascript\n   import { Client, LocalAuth } from 'whatsapp-web.js';\n   import qrcode from 'qrcode-terminal';\n\n   const client = new Client({\n     authStrategy: new LocalAuth()\n   });\n\n   client.on('qr', (qr) => {\n     qrcode.generate(qr, { small: true });\n   });\n\n   client.on('ready', () => {\n     console.log('WhatsApp connected!');\n   });\n\n   client.initialize();\n   ```\n\n**المميزات:**\n- سهولة الإعداد\n- مجاني\n- يدعم جميع مميزات الواتساب\n\n**العيوب:**\n- قد يحتاج إعادة ربط\n- مخالف لشروط الاستخدام التجاري\n\n### 3. خدمات API خارجية\n\n#### أ. Twilio WhatsApp API\n\n```javascript\nconst twilio = require('twilio');\nconst client = twilio(accountSid, authToken);\n\nawait client.messages.create({\n  from: 'whatsapp:+14155238886',\n  to: `whatsapp:+966${phoneNumber}`,\n  body: 'رسالة التقييم...'\n});\n```\n\n#### ب. MessageBird WhatsApp API\n\n```javascript\nconst messagebird = require('messagebird')('your-access-key');\n\nmessagebird.conversations.start({\n  to: phoneNumber,\n  channelId: 'whatsapp-channel-id',\n  type: 'text',\n  content: { text: 'رسالة التقييم...' }\n});\n```\n\n## إعداد متغيرات البيئة\n\nأضف في ملف `.env`:\n\n```env\n# رقم المرسل\nWHATSAPP_SENDER_NUMBER=966501234567\n\n# WhatsApp Business API\nWHATSAPP_ACCESS_TOKEN=your_access_token\nWHATSAPP_PHONE_NUMBER_ID=your_phone_number_id\n\n# Twilio\nTWILIO_ACCOUNT_SID=your_account_sid\nTWILIO_AUTH_TOKEN=your_auth_token\n\n# MessageBird\nMESSAGEBIRD_ACCESS_KEY=your_access_key\n```\n\n## رسالة التقييم الافتراضية\n\n```text\nمرحباً {customerName}\n\n✅ تم إتمام مهمة \"{taskTitle}\" بنجاح من قبل شركة اشراق الودق لتكنولوجيا المعلومات.\n\n🌟 نرجو تقييم مستوى رضاكم عن أدائنا:\n\nرد برقم واحد فقط:\n1️⃣ - غاضب 😠\n2️⃣ - راضي 😊  \n3️⃣ - راضي جدا 😍\n\nشكراً لثقتكم بنا 🙏\n```\n\n## تفعيل الربط\n\n1. اختر الطريقة المناسبة لمشروعك\n2. أضف متغيرات البيئة المطلوبة\n3. عدل ملف `server/whatsapp-service.ts` حسب الطريقة المختارة\n4. أعد تشغيل الخادم\n\n## اختبار النظام\n\n1. أكمل إحدى المهام (غير الحالة إلى \"مكتملة\")\n2. تحقق من console logs للتأكد من إرسال الطلب\n3. افحص صفحة تقييمات العملاء في لوحة الإدارة\n\n## ملاحظات مهمة\n\n- تأكد من صحة تنسيق أرقام الهواتف (966501234567)\n- احفظ نسخة احتياطية من بيانات التوثيق\n- راقب حدود الإرسال لتجنب الحظر\n- استخدم القوالب المعتمدة للرسائل التجارية\n\n## الدعم الفني\n\nعند مواجهة مشاكل:\n1. تحقق من صحة متغيرات البيئة\n2. راجع console logs للأخطاء\n3. تأكد من اتصال الإنترنت\n4. تحقق من صلاحية التوكن/المفاتيح","size_bytes":4412},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Overview\n\nTaskFlow is a mobile-first task management and team collaboration platform designed for \"شركة اشراق الودق لتكنولوجيا المعلومات\" with full Arabic language support. The application features unified user-team member system where each user account automatically corresponds to a team member with the same username, three-tier permission system (Admin, Supervisor, Regular User), comprehensive messaging system, notifications for new tasks and messages, administrator-controlled user approval system, and mobile-optimized interface with Arabic as the primary interface language.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n- **Framework**: React 18 with TypeScript for type safety and modern development patterns\n- **Build Tool**: Vite for fast development and optimized production builds\n- **UI Framework**: Custom component library built on Radix UI primitives with shadcn/ui styling\n- **Styling**: Tailwind CSS with custom design system using CSS variables for theming\n- **State Management**: TanStack Query (React Query) for server state management and caching\n- **Routing**: Wouter for lightweight client-side routing optimized for mobile applications\n- **Mobile-First Design**: Responsive layout with bottom navigation, floating action buttons, and touch-optimized interactions\n\n## Backend Architecture\n- **Runtime**: Node.js with Express.js framework for REST API endpoints\n- **Language**: TypeScript throughout the entire application for consistency\n- **API Design**: RESTful endpoints for CRUD operations on tasks, team members, and statistics\n- **Data Storage**: PostgreSQL database integration using DatabaseStorage implementation with full CRUD operations\n- **Validation**: Zod schemas for runtime type checking and API request validation\n- **Development Server**: Custom Vite integration for seamless full-stack development\n\n## Data Layer\n- **ORM**: Drizzle ORM configured for PostgreSQL with type-safe database operations\n- **Schema Management**: Shared schema definitions between client and server using drizzle-zod\n- **Database**: PostgreSQL configured through Neon Database serverless connection with persistent session storage\n- **Migration System**: Drizzle Kit for database schema migrations and management\n- **User-Team Integration**: Unified system where each user account automatically creates corresponding team member record\n- **Messaging & Notifications**: Database-backed real-time messaging system with automatic task notifications\n- **Type Safety**: End-to-end type safety from database schema to frontend components\n\n## Key Design Patterns\n- **Unified User-Team System**: Each user account automatically creates a corresponding team member with the same username\n- **Arabic-First Interface**: Comprehensive Arabic localization with RTL support throughout the application\n- **Shared Types**: Common TypeScript interfaces and Zod schemas shared between frontend and backend\n- **Component Architecture**: Modular React components with consistent naming and structure\n- **Mobile-First Approach**: Touch-friendly interfaces with optimized mobile navigation patterns\n- **Real-Time Messaging**: Database-backed messaging system with automatic notifications for task assignments\n- **Error Handling**: Comprehensive error boundaries and user feedback through toast notifications\n- **Performance Optimization**: Query caching, lazy loading, and optimized bundle splitting\n\n## Recent Changes (2025-08-24)\n- **Arabic Language Fix**: Modified LanguageProvider to force Arabic as the default language system-wide, removing dependency on localStorage for language detection to ensure consistent Arabic interface\n- **Three-Tier Permission System**: Implemented comprehensive role-based access control with Admin, Supervisor, and Regular User levels\n- **Admin Panel**: Added complete user management interface with role assignment and approval controls\n- **Task Access Control**: Users only see assigned tasks, Supervisors can create and view all tasks, Admins have full system access\n- **Permission-Based UI**: Dynamic interface elements based on user role with appropriate action restrictions\n- **Role Management**: Admin can change user roles with automatic team member role synchronization\n- **Unified User-Team System**: Integrated user accounts with team member records - each user now automatically becomes a team member\n- **Messaging System**: Complete implementation with real-time notifications for new tasks and messages\n- **Database Migration**: Successfully migrated from memory storage to persistent PostgreSQL database\n- **Arabic Interface**: Full translation of dashboard, messaging, and notification interfaces\n- **Navigation Updates**: Added messaging and notifications to bottom navigation with Arabic labels\n- **Advanced User Management**: Added disable/delete user functionality for administrators with confirmation dialogs\n- **Comprehensive Logging**: Implemented complete system logging for all user actions, task activities, and system events\n- **Task Activity Logging**: Added detailed logging for task creation, status changes, progress updates, and deletions\n- **Sorting Functionality**: Added date-based sorting options for tasks, system logs, and notifications with compact UI controls\n- **Profile Management System**: Complete profile editing functionality with personal information updates (firstName, lastName, email, phone) and secure password change with current password verification\n- **Database Schema Updates**: Added firstName, lastName, email, and phone fields to users table with automatic team member synchronization\n- **Profile API Endpoints**: Implemented secure profile update and password change endpoints with proper validation and automatic logging\n- **WhatsApp Integration**: Implemented WhatsApp Web.js integration for customer satisfaction rating requests with QR Code authentication and automatic message sending upon task completion\n- **Customer Rating System**: Complete customer satisfaction rating system with automatic WhatsApp message sending when tasks are marked as completed, supporting three rating levels (غاضب، راضي، راضي جداً)\n- **Rating Management Interface**: Comprehensive admin interface for viewing, filtering, and managing customer ratings with statistics and response tracking\n- **Profile Image Upload System**: Complete implementation of profile image upload functionality using Object Storage with Uppy.js, featuring real-time image updates, cache busting, and seamless integration with team member cards\n- **Object Storage Integration**: Full integration with Replit Object Storage for secure file uploads, automatic ACL policy management, and optimized image serving with proper caching headers\n- **Real-time Image Display**: Implemented immediate image display updates after upload with force re-rendering, local state management, and fallback handling for failed image loads\n- **WhatsApp Broadcast System**: Comprehensive broadcast messaging system for sending single message to all registered users with statistics tracking and result reporting\n- **Task Status Color System**: Updated visual representation of tasks with status-based colors - pending tasks (red/orange background), started tasks (yellow background), completed tasks (green background) for better visual identification\n\n### Permission System Details:\n- **Admin (مدير النظام)**: Full system access, user management, role changes, all CRUD operations, profile management\n- **Supervisor (مشرف)**: Task creation, view all tasks, team management, cannot change user roles, profile management\n- **User (مستخدم عادي)**: View only assigned tasks, update task status/progress/notes, limited access, profile management\n\n### Profile Management Features:\n- **Personal Information Editing**: Users can update firstName, lastName, email, and phone number through an intuitive form interface\n- **Password Management**: Secure password change functionality with current password verification and confirmation matching\n- **Automatic Synchronization**: Profile updates automatically sync with team member records (name and email)\n- **Form Validation**: Comprehensive client-side and server-side validation with Arabic error messages\n- **Security Logging**: All profile changes are automatically logged in the system for audit purposes\n- **Real-time Updates**: Profile changes reflect immediately in the interface after successful updates\n\n# External Dependencies\n\n## Core Dependencies\n- **@neondatabase/serverless**: Serverless PostgreSQL database connectivity\n- **drizzle-orm**: Type-safe ORM for database operations\n- **@tanstack/react-query**: Server state management and caching\n- **express**: Web application framework for Node.js\n- **zod**: Runtime type validation and schema definition\n\n## UI and Styling\n- **@radix-ui/***: Comprehensive set of unstyled, accessible UI primitives\n- **tailwindcss**: Utility-first CSS framework\n- **class-variance-authority**: Utility for creating variant-based component APIs\n- **clsx**: Utility for constructing className strings conditionally\n\n## Development Tools\n- **vite**: Fast build tool and development server\n- **typescript**: Static type checking\n- **@replit/vite-plugin-runtime-error-modal**: Development error handling for Replit environment\n- **tsx**: TypeScript execution environment for Node.js\n\n## Form Handling and Validation\n- **react-hook-form**: Performant forms with easy validation\n- **@hookform/resolvers**: Resolvers for various schema validation libraries\n- **date-fns**: Modern JavaScript date utility library\n\n## Additional Utilities\n- **wouter**: Minimalist routing for React applications\n- **cmdk**: Command menu component for React\n- **embla-carousel-react**: Carousel component library\n- **nanoid**: Unique string ID generator","size_bytes":9903},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n          dark: \"var(--primary-dark)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        success: {\n          DEFAULT: \"var(--success)\",\n          foreground: \"var(--success-foreground)\",\n        },\n        warning: {\n          DEFAULT: \"var(--warning)\",\n          foreground: \"var(--warning-foreground)\",\n        },\n        error: {\n          DEFAULT: \"var(--error)\",\n          foreground: \"var(--error-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        surface: \"var(--surface)\",\n        \"on-surface\": \"var(--on-surface)\",\n        \"surface-variant\": \"var(--surface-variant)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        roboto: [\"Roboto\", \"sans-serif\"],\n      },\n      spacing: {\n        \"18\": \"4.5rem\",\n        \"88\": \"22rem\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n        ripple: {\n          to: {\n            transform: \"scale(2)\",\n            opacity: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n        ripple: \"ripple 0.3s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":3547},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { whatsappService } from \"./whatsapp-service\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  // Initialize WhatsApp service\n  try {\n    await whatsappService.initialize();\n    // تسجيل الخدمة في المتغير العام للوصول إليها من routes\n    (global as any).whatsappService = whatsappService;\n    log('✅ WhatsApp service initialized successfully');\n  } catch (error) {\n    log('❌ WhatsApp service initialization failed:', String(error));\n  }\n\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2508},"server/objectAcl.ts":{"content":"import { File } from \"@google-cloud/storage\";\n\nconst ACL_POLICY_METADATA_KEY = \"custom:aclPolicy\";\n\n// The type of the access group.\n//\n// Can be flexibly defined according to the use case.\n//\n// Examples:\n// - USER_LIST: the users from a list stored in the database;\n// - EMAIL_DOMAIN: the users whose email is in a specific domain;\n// - GROUP_MEMBER: the users who are members of a specific group;\n// - SUBSCRIBER: the users who are subscribers of a specific service / content\n//   creator.\nexport enum ObjectAccessGroupType {}\n\n// The logic user group that can access the object.\nexport interface ObjectAccessGroup {\n  // The type of the access group.\n  type: ObjectAccessGroupType;\n  // The logic id that is enough to identify the qualified group members.\n  //\n  // It may have different format for different types. For example:\n  // - for USER_LIST, the id could be the user list db entity id, and the\n  //   user list db entity could contain a bunch of user ids. User needs\n  //   to be a member of the user list to be able to access the object.\n  // - for EMAIL_DOMAIN, the id could be the email domain, and the user needs\n  //   to have an email with the domain to be able to access the object.\n  // - for GROUP_MEMBER, the id could be the group db entity id, and the\n  //   group db entity could contain a bunch of user ids. User needs to be\n  //   a member of the group to be able to access the object.\n  // - for SUBSCRIBER, the id could be the subscriber db entity id, and the\n  //   subscriber db entity could contain a bunch of user ids. User needs to\n  //   be a subscriber to be able to access the object.\n  id: string;\n}\n\nexport enum ObjectPermission {\n  READ = \"read\",\n  WRITE = \"write\",\n}\n\nexport interface ObjectAclRule {\n  group: ObjectAccessGroup;\n  permission: ObjectPermission;\n}\n\n// The ACL policy of the object.\n// This would be set as part of the object custom metadata:\n// - key: \"custom:aclPolicy\"\n// - value: JSON string of the ObjectAclPolicy object.\nexport interface ObjectAclPolicy {\n  owner: string;\n  visibility: \"public\" | \"private\";\n  aclRules?: Array<ObjectAclRule>;\n}\n\n// Check if the requested permission is allowed based on the granted permission.\nfunction isPermissionAllowed(\n  requested: ObjectPermission,\n  granted: ObjectPermission,\n): boolean {\n  // Users granted with read or write permissions can read the object.\n  if (requested === ObjectPermission.READ) {\n    return [ObjectPermission.READ, ObjectPermission.WRITE].includes(granted);\n  }\n\n  // Only users granted with write permissions can write the object.\n  return granted === ObjectPermission.WRITE;\n}\n\n// The base class for all access groups.\n//\n// Different types of access groups can be implemented according to the use case.\nabstract class BaseObjectAccessGroup implements ObjectAccessGroup {\n  constructor(\n    public readonly type: ObjectAccessGroupType,\n    public readonly id: string,\n  ) {}\n\n  // Check if the user is a member of the group.\n  public abstract hasMember(userId: string): Promise<boolean>;\n}\n\nfunction createObjectAccessGroup(\n  group: ObjectAccessGroup,\n): BaseObjectAccessGroup {\n  switch (group.type) {\n    // Implement the case for each type of access group to instantiate.\n    //\n    // For example:\n    // case \"USER_LIST\":\n    //   return new UserListAccessGroup(group.id);\n    // case \"EMAIL_DOMAIN\":\n    //   return new EmailDomainAccessGroup(group.id);\n    // case \"GROUP_MEMBER\":\n    //   return new GroupMemberAccessGroup(group.id);\n    // case \"SUBSCRIBER\":\n    //   return new SubscriberAccessGroup(group.id);\n    default:\n      throw new Error(`Unknown access group type: ${group.type}`);\n  }\n}\n\n// Sets the ACL policy to the object metadata.\nexport async function setObjectAclPolicy(\n  objectFile: File,\n  aclPolicy: ObjectAclPolicy,\n): Promise<void> {\n  const [exists] = await objectFile.exists();\n  if (!exists) {\n    throw new Error(`Object not found: ${objectFile.name}`);\n  }\n\n  await objectFile.setMetadata({\n    metadata: {\n      [ACL_POLICY_METADATA_KEY]: JSON.stringify(aclPolicy),\n    },\n  });\n}\n\n// Gets the ACL policy from the object metadata.\nexport async function getObjectAclPolicy(\n  objectFile: File,\n): Promise<ObjectAclPolicy | null> {\n  const [metadata] = await objectFile.getMetadata();\n  const aclPolicy = metadata?.metadata?.[ACL_POLICY_METADATA_KEY];\n  if (!aclPolicy) {\n    return null;\n  }\n  return JSON.parse(aclPolicy as string);\n}\n\n// Checks if the user can access the object.\nexport async function canAccessObject({\n  userId,\n  objectFile,\n  requestedPermission,\n}: {\n  userId?: string;\n  objectFile: File;\n  requestedPermission: ObjectPermission;\n}): Promise<boolean> {\n  // When this function is called, the acl policy is required.\n  const aclPolicy = await getObjectAclPolicy(objectFile);\n  if (!aclPolicy) {\n    return false;\n  }\n\n  // Public objects are always accessible for read.\n  if (\n    aclPolicy.visibility === \"public\" &&\n    requestedPermission === ObjectPermission.READ\n  ) {\n    return true;\n  }\n\n  // Access control requires the user id.\n  if (!userId) {\n    return false;\n  }\n\n  // The owner of the object can always access it.\n  if (aclPolicy.owner === userId) {\n    return true;\n  }\n\n  // Go through the ACL rules to check if the user has the required permission.\n  for (const rule of aclPolicy.aclRules || []) {\n    const accessGroup = createObjectAccessGroup(rule.group);\n    if (\n      (await accessGroup.hasMember(userId)) &&\n      isPermissionAllowed(requestedPermission, rule.permission)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}","size_bytes":5543},"server/objectStorage.ts":{"content":"import { Storage, File } from \"@google-cloud/storage\";\nimport { Response } from \"express\";\nimport { randomUUID } from \"crypto\";\nimport {\n  ObjectAclPolicy,\n  ObjectPermission,\n  canAccessObject,\n  getObjectAclPolicy,\n  setObjectAclPolicy,\n} from \"./objectAcl\";\n\nconst REPLIT_SIDECAR_ENDPOINT = \"http://127.0.0.1:1106\";\n\n// The object storage client is used to interact with the object storage service.\nexport const objectStorageClient = new Storage({\n  credentials: {\n    audience: \"replit\",\n    subject_token_type: \"access_token\",\n    token_url: `${REPLIT_SIDECAR_ENDPOINT}/token`,\n    type: \"external_account\",\n    credential_source: {\n      url: `${REPLIT_SIDECAR_ENDPOINT}/credential`,\n      format: {\n        type: \"json\",\n        subject_token_field_name: \"access_token\",\n      },\n    },\n    universe_domain: \"googleapis.com\",\n  },\n  projectId: \"\",\n});\n\nexport class ObjectNotFoundError extends Error {\n  constructor() {\n    super(\"Object not found\");\n    this.name = \"ObjectNotFoundError\";\n    Object.setPrototypeOf(this, ObjectNotFoundError.prototype);\n  }\n}\n\n// The object storage service is used to interact with the object storage service.\nexport class ObjectStorageService {\n  constructor() {}\n\n  // Gets the public object search paths.\n  getPublicObjectSearchPaths(): Array<string> {\n    const pathsStr = process.env.PUBLIC_OBJECT_SEARCH_PATHS || \"\";\n    const paths = Array.from(\n      new Set(\n        pathsStr\n          .split(\",\")\n          .map((path) => path.trim())\n          .filter((path) => path.length > 0)\n      )\n    );\n    if (paths.length === 0) {\n      throw new Error(\n        \"PUBLIC_OBJECT_SEARCH_PATHS not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PUBLIC_OBJECT_SEARCH_PATHS env var (comma-separated paths).\"\n      );\n    }\n    return paths;\n  }\n\n  // Gets the private object directory.\n  getPrivateObjectDir(): string {\n    const dir = process.env.PRIVATE_OBJECT_DIR || \"\";\n    if (!dir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n    return dir;\n  }\n\n  // Search for a public object from the search paths.\n  async searchPublicObject(filePath: string): Promise<File | null> {\n    for (const searchPath of this.getPublicObjectSearchPaths()) {\n      const fullPath = `${searchPath}/${filePath}`;\n\n      // Full path format: /<bucket_name>/<object_name>\n      const { bucketName, objectName } = parseObjectPath(fullPath);\n      const bucket = objectStorageClient.bucket(bucketName);\n      const file = bucket.file(objectName);\n\n      // Check if file exists\n      const [exists] = await file.exists();\n      if (exists) {\n        return file;\n      }\n    }\n\n    return null;\n  }\n\n  // Downloads an object to the response.\n  async downloadObject(file: File, res: Response, cacheTtlSec: number = 3600) {\n    try {\n      // Get file metadata\n      const [metadata] = await file.getMetadata();\n      // Get the ACL policy for the object.\n      const aclPolicy = await getObjectAclPolicy(file);\n      const isPublic = aclPolicy?.visibility === \"public\";\n      // Set appropriate headers\n      res.set({\n        \"Content-Type\": metadata.contentType || \"application/octet-stream\",\n        \"Content-Length\": metadata.size,\n        \"Cache-Control\": `${\n          isPublic ? \"public\" : \"private\"\n        }, max-age=${cacheTtlSec}`,\n      });\n\n      // Stream the file to the response\n      const stream = file.createReadStream();\n\n      stream.on(\"error\", (err) => {\n        console.error(\"Stream error:\", err);\n        if (!res.headersSent) {\n          res.status(500).json({ error: \"Error streaming file\" });\n        }\n      });\n\n      stream.pipe(res);\n    } catch (error) {\n      console.error(\"Error downloading file:\", error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: \"Error downloading file\" });\n      }\n    }\n  }\n\n  // Gets the upload URL for an object entity.\n  async getObjectEntityUploadURL(): Promise<string> {\n    const privateObjectDir = this.getPrivateObjectDir();\n    if (!privateObjectDir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n\n    const objectId = randomUUID();\n    const fullPath = `${privateObjectDir}/uploads/${objectId}`;\n\n    const { bucketName, objectName } = parseObjectPath(fullPath);\n\n    // Sign URL for PUT method with TTL\n    return signObjectURL({\n      bucketName,\n      objectName,\n      method: \"PUT\",\n      ttlSec: 900,\n    });\n  }\n\n  // Gets the object entity file from the object path.\n  async getObjectEntityFile(objectPath: string): Promise<File> {\n    if (!objectPath.startsWith(\"/objects/\")) {\n      throw new ObjectNotFoundError();\n    }\n\n    const parts = objectPath.slice(1).split(\"/\");\n    if (parts.length < 2) {\n      throw new ObjectNotFoundError();\n    }\n\n    const entityId = parts.slice(1).join(\"/\");\n    let entityDir = this.getPrivateObjectDir();\n    if (!entityDir.endsWith(\"/\")) {\n      entityDir = `${entityDir}/`;\n    }\n    const objectEntityPath = `${entityDir}${entityId}`;\n    const { bucketName, objectName } = parseObjectPath(objectEntityPath);\n    const bucket = objectStorageClient.bucket(bucketName);\n    const objectFile = bucket.file(objectName);\n    const [exists] = await objectFile.exists();\n    if (!exists) {\n      throw new ObjectNotFoundError();\n    }\n    return objectFile;\n  }\n\n  normalizeObjectEntityPath(\n    rawPath: string,\n  ): string {\n    if (!rawPath.startsWith(\"https://storage.googleapis.com/\")) {\n      return rawPath;\n    }\n  \n    // Extract the path from the URL by removing query parameters and domain\n    const url = new URL(rawPath);\n    const rawObjectPath = url.pathname;\n  \n    let objectEntityDir = this.getPrivateObjectDir();\n    if (!objectEntityDir.endsWith(\"/\")) {\n      objectEntityDir = `${objectEntityDir}/`;\n    }\n  \n    if (!rawObjectPath.startsWith(objectEntityDir)) {\n      return rawObjectPath;\n    }\n  \n    // Extract the entity ID from the path\n    const entityId = rawObjectPath.slice(objectEntityDir.length);\n    return `/objects/${entityId}`;\n  }\n\n  // Tries to set the ACL policy for the object entity and return the normalized path.\n  async trySetObjectEntityAclPolicy(\n    rawPath: string,\n    aclPolicy: ObjectAclPolicy\n  ): Promise<string> {\n    const normalizedPath = this.normalizeObjectEntityPath(rawPath);\n    if (!normalizedPath.startsWith(\"/\")) {\n      return normalizedPath;\n    }\n\n    const objectFile = await this.getObjectEntityFile(normalizedPath);\n    await setObjectAclPolicy(objectFile, aclPolicy);\n    return normalizedPath;\n  }\n\n  // Checks if the user can access the object entity.\n  async canAccessObjectEntity({\n    userId,\n    objectFile,\n    requestedPermission,\n  }: {\n    userId?: string;\n    objectFile: File;\n    requestedPermission?: ObjectPermission;\n  }): Promise<boolean> {\n    return canAccessObject({\n      userId,\n      objectFile,\n      requestedPermission: requestedPermission ?? ObjectPermission.READ,\n    });\n  }\n}\n\nfunction parseObjectPath(path: string): {\n  bucketName: string;\n  objectName: string;\n} {\n  if (!path.startsWith(\"/\")) {\n    path = `/${path}`;\n  }\n  const pathParts = path.split(\"/\");\n  if (pathParts.length < 3) {\n    throw new Error(\"Invalid path: must contain at least a bucket name\");\n  }\n\n  const bucketName = pathParts[1];\n  const objectName = pathParts.slice(2).join(\"/\");\n\n  return {\n    bucketName,\n    objectName,\n  };\n}\n\nasync function signObjectURL({\n  bucketName,\n  objectName,\n  method,\n  ttlSec,\n}: {\n  bucketName: string;\n  objectName: string;\n  method: \"GET\" | \"PUT\" | \"DELETE\" | \"HEAD\";\n  ttlSec: number;\n}): Promise<string> {\n  const request = {\n    bucket_name: bucketName,\n    object_name: objectName,\n    method,\n    expires_at: new Date(Date.now() + ttlSec * 1000).toISOString(),\n  };\n  const response = await fetch(\n    `${REPLIT_SIDECAR_ENDPOINT}/object-storage/signed-object-url`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(request),\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign object URL, errorcode: ${response.status}, ` +\n        `make sure you're running on Replit`\n    );\n  }\n\n  const { signed_url: signedURL } = await response.json();\n  return signedURL;\n}","size_bytes":8407},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertTeamMemberSchema, insertTaskSchema, updateTaskSchema, insertCustomerSchema, insertUserSchema, insertMessageSchema, insertNotificationSchema, insertSystemLogSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\nimport session from \"express-session\";\nimport connectPgSimple from \"connect-pg-simple\";\nimport { pool } from \"./db\";\nimport { whatsappService } from \"./whatsapp-service\";\nimport * as XLSX from 'xlsx';\nimport archiver from 'archiver';\nimport path from 'path';\nimport { Readable } from 'stream';\nimport {\n  ObjectStorageService,\n  ObjectNotFoundError,\n} from \"./objectStorage\";\n\n// Extend Express session interface\ndeclare module 'express-session' {\n  interface SessionData {\n    userId?: string;\n    username?: string;\n  }\n}\n\n// Authentication middleware\nconst requireAuth = (req: Request, res: Response, next: NextFunction) => {\n  if (req.session && req.session.userId) {\n    return next();\n  } else {\n    return res.status(401).json({ message: \"Authentication required\" });\n  }\n};\n\n// Admin middleware\nconst requireAdmin = async (req: Request, res: Response, next: NextFunction) => {\n  if (!req.session || !req.session.userId) {\n    return res.status(401).json({ message: \"Authentication required\" });\n  }\n  \n  try {\n    const user = await storage.getUser(req.session.userId);\n    if (!user || user.role !== \"admin\") {\n      return res.status(403).json({ message: \"Admin access required\" });\n    }\n    return next();\n  } catch (error) {\n    return res.status(500).json({ message: \"Authorization check failed\" });\n  }\n};\n\n// Supervisor or Admin middleware\nconst requireSupervisorOrAdmin = async (req: Request, res: Response, next: NextFunction) => {\n  if (!req.session || !req.session.userId) {\n    return res.status(401).json({ message: \"Authentication required\" });\n  }\n  \n  try {\n    const user = await storage.getUser(req.session.userId);\n    if (!user || (user.role !== \"admin\" && user.role !== \"supervisor\")) {\n      return res.status(403).json({ message: \"Supervisor or admin access required\" });\n    }\n    return next();\n  } catch (error) {\n    return res.status(500).json({ message: \"Authorization check failed\" });\n  }\n};\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Configure session store with PostgreSQL\n  const PgSession = connectPgSimple(session);\n  const sessionStore = new PgSession({\n    pool: pool,\n    tableName: 'sessions',\n    createTableIfMissing: true\n  });\n\n  // Configure session middleware\n  app.use(session({\n    store: sessionStore,\n    secret: 'wdq-task-management-secret-2025',\n    resave: false,\n    saveUninitialized: false,\n    rolling: true,\n    cookie: {\n      secure: false, // Set to true in production with HTTPS\n      maxAge: 7 * 24 * 60 * 60 * 1000 // 7 days\n    }\n  }));\n\n  // Health check endpoint\n  app.get('/health', (req, res) => {\n    res.status(200).json({ \n      status: 'OK', \n      timestamp: new Date().toISOString(),\n      uptime: process.uptime()\n    });\n  });\n\n  // Setup initial users endpoint for production deployment\n  app.post('/api/setup-users', async (req, res) => {\n    try {\n      const { secretKey } = req.body;\n      \n      // Simple security check - use a secret key\n      if (secretKey !== 'wdq-setup-2025') {\n        return res.status(403).json({ message: \"Invalid secret key\" });\n      }\n\n      const usersToCreate = [\n        {\n          username: \"admin\",\n          password: \"123456\",\n          role: \"admin\",\n          isApproved: \"approved\",\n          isActive: \"true\",\n          firstName: \"مدير\",\n          lastName: \"النظام\",\n          email: \"admin@company.com\"\n        },\n        {\n          username: \"supervisor\",\n          password: \"123456\",\n          role: \"supervisor\",\n          isApproved: \"approved\",\n          isActive: \"true\",\n          firstName: \"مشرف\",\n          lastName: \"النظام\",\n          email: \"supervisor@company.com\"\n        },\n        {\n          username: \"user1\",\n          password: \"123456\",\n          role: \"user\",\n          isApproved: \"approved\",\n          isActive: \"true\",\n          firstName: \"مستخدم\",\n          lastName: \"عادي\",\n          email: \"user1@company.com\"\n        }\n      ];\n\n      const createdUsers = [];\n      const existingUsers = [];\n\n      for (const userData of usersToCreate) {\n        const existingUser = await storage.getUserByUsername(userData.username);\n        \n        if (existingUser) {\n          existingUsers.push(userData.username);\n          continue;\n        }\n        \n        await storage.createUser(userData);\n        createdUsers.push(userData.username);\n      }\n\n      res.json({\n        message: \"تم إعداد المستخدمين بنجاح\",\n        createdUsers,\n        existingUsers,\n        instructions: \"المستخدمين المتاحين: admin/123456, supervisor/123456, user1/123456\"\n      });\n\n    } catch (error) {\n      console.error(\"Error setting up users:\", error);\n      res.status(500).json({ message: \"فشل في إعداد المستخدمين\" });\n    }\n  });\n\n  // Authentication routes\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n      \n      if (!username || !password) {\n        return res.status(400).json({ message: \"Username and password are required\" });\n      }\n\n      const user = await storage.getUserByUsername(username);\n      if (!user) {\n        return res.status(401).json({ message: \"Invalid username or password\" });\n      }\n\n      const isValidPassword = await bcrypt.compare(password, user.password);\n      if (!isValidPassword) {\n        return res.status(401).json({ message: \"Invalid username or password\" });\n      }\n\n      // Check if account is approved (except for admin)\n      if (user.role !== \"admin\" && user.isApproved !== \"approved\") {\n        return res.status(403).json({ message: \"Account pending approval\" });\n      }\n\n      // Set session\n      req.session.userId = user.id;\n      req.session.username = user.username;\n\n      // Log successful login\n      await storage.logUserAction(\n        \"login_success\",\n        user.id,\n        username,\n        { role: user.role, isApproved: user.isApproved },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"Login successful\",\n        user: { \n          id: user.id, \n          username: user.username, \n          role: user.role,\n          isApproved: user.isApproved\n        }\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ message: \"Login failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", async (req, res) => {\n    const userId = req.session.userId;\n    const username = req.session.username;\n    \n    // Log logout action\n    if (userId && username) {\n      await storage.logUserAction(\n        \"logout\",\n        userId,\n        username,\n        null,\n        req.ip,\n        req.get('User-Agent')\n      );\n    }\n    \n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Logout failed\" });\n      }\n      res.json({ message: \"Logout successful\" });\n    });\n  });\n\n  app.get(\"/api/auth/user\", requireAuth, async (req, res) => {\n    try {\n      const userWithTeamMember = await storage.getUserWithTeamMember(req.session.userId!);\n      if (!userWithTeamMember) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json({ \n        id: userWithTeamMember.id, \n        username: userWithTeamMember.username,\n        role: userWithTeamMember.role,\n        isApproved: userWithTeamMember.isApproved,\n        firstName: userWithTeamMember.firstName,\n        lastName: userWithTeamMember.lastName,\n        email: userWithTeamMember.email,\n        phone: userWithTeamMember.phone,\n        teamMember: userWithTeamMember.teamMember\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to get user info\" });\n    }\n  });\n\n  // Profile update schema\n  const profileUpdateSchema = z.object({\n    firstName: z.string().min(1, \"First name is required\"),\n    lastName: z.string().min(1, \"Last name is required\"), \n    email: z.string().email(\"Invalid email\"),\n    phone: z.string().optional(),\n  });\n\n  // Password change schema\n  const passwordChangeSchema = z.object({\n    currentPassword: z.string().min(1, \"Current password is required\"),\n    newPassword: z.string().min(6, \"New password must be at least 6 characters\"),\n    confirmPassword: z.string().min(1, \"Password confirmation is required\"),\n  });\n\n  // Update user profile\n  app.put(\"/api/auth/profile\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = profileUpdateSchema.parse(req.body);\n      const userId = req.session.userId!;\n      \n      // Update user\n      const updatedUser = await storage.updateUser(userId, {\n        firstName: validatedData.firstName,\n        lastName: validatedData.lastName,\n        email: validatedData.email,\n        phone: validatedData.phone,\n      });\n\n      // Update corresponding team member name\n      const teamMember = await storage.getTeamMemberByUserId(userId);\n      if (teamMember) {\n        await storage.updateTeamMember(teamMember.id, {\n          name: `${validatedData.firstName} ${validatedData.lastName}`,\n          email: validatedData.email,\n        });\n      }\n\n      // Log the profile update\n      await storage.logUserAction(\n        \"profile_updated\",\n        userId,\n        req.session.username!,\n        {\n          firstName: validatedData.firstName,\n          lastName: validatedData.lastName,\n          email: validatedData.email,\n          phone: validatedData.phone,\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json(updatedUser);\n    } catch (error) {\n      console.error(\"Error updating profile:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update profile\" });\n    }\n  });\n\n  // Change password\n  app.put(\"/api/auth/change-password\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = passwordChangeSchema.parse(req.body);\n      const userId = req.session.userId!;\n\n      // Verify passwords match\n      if (validatedData.newPassword !== validatedData.confirmPassword) {\n        return res.status(400).json({ message: \"Passwords do not match\" });\n      }\n\n      // Get current user\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Verify current password\n      const isCurrentPasswordValid = await bcrypt.compare(validatedData.currentPassword, user.password);\n      if (!isCurrentPasswordValid) {\n        return res.status(400).json({ message: \"Current password is incorrect\" });\n      }\n\n      // Hash new password\n      const saltRounds = 10;\n      const hashedNewPassword = await bcrypt.hash(validatedData.newPassword, saltRounds);\n\n      // Update password\n      await storage.updateUser(userId, {\n        password: hashedNewPassword,\n      });\n\n      // Log the password change\n      await storage.logUserAction(\n        \"password_changed\",\n        userId,\n        req.session.username!,\n        { message: \"تم تغيير كلمة المرور بنجاح\" },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Password changed successfully\" });\n    } catch (error) {\n      console.error(\"Error changing password:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to change password\" });\n    }\n  });\n\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n      \n      if (!username || !password) {\n        return res.status(400).json({ message: \"Username and password are required\" });\n      }\n\n      // Check if username already exists\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(409).json({ message: \"Username already exists\" });\n      }\n\n      // Create user (this will also create team member automatically)\n      const user = await storage.createUser({\n        username,\n        password\n      });\n\n      res.status(201).json({\n        message: \"User created successfully\",\n        user: { id: user.id, username: user.username }\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ message: \"Registration failed\" });\n    }\n  });\n\n  // System Logs routes (admin only)\n  app.get(\"/api/admin/logs\", requireAdmin, async (req, res) => {\n    try {\n      const { limit } = req.query;\n      const logs = await storage.getSystemLogs(limit ? parseInt(limit as string) : 100);\n      res.json(logs);\n    } catch (error) {\n      console.error(\"Get logs error:\", error);\n      res.status(500).json({ message: \"Failed to fetch logs\" });\n    }\n  });\n\n\n\n  // Admin routes (protected)\n  app.get(\"/api/admin/users\", requireAdmin, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error(\"Admin get users error:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/approve\", requireAdmin, async (req, res) => {\n    try {\n      const { isApproved } = req.body;\n      const userId = req.params.id;\n\n      if (![\"approved\", \"rejected\"].includes(isApproved)) {\n        return res.status(400).json({ message: \"Invalid approval status\" });\n      }\n\n      const user = await storage.updateUserApproval(userId, isApproved);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      res.json({\n        message: `User ${isApproved} successfully`,\n        user: { \n          id: user.id, \n          username: user.username,\n          isApproved: user.isApproved\n        }\n      });\n    } catch (error) {\n      console.error(\"Admin approval error:\", error);\n      res.status(500).json({ message: \"Failed to update user approval\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/role\", requireAdmin, async (req, res) => {\n    try {\n      const { role } = req.body;\n      const userId = req.params.id;\n\n      if (![\"user\", \"supervisor\", \"admin\"].includes(role)) {\n        return res.status(400).json({ message: \"Invalid role\" });\n      }\n\n      const user = await storage.updateUserRole(userId, role);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Log role change\n      await storage.logUserAction(\n        \"role_changed\",\n        req.session.userId!,\n        req.session.username!,\n        { targetUser: user.username, newRole: role },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({\n        message: `User role updated successfully`,\n        user: { \n          id: user.id, \n          username: user.username,\n          role: user.role\n        }\n      });\n    } catch (error) {\n      console.error(\"Admin role update error:\", error);\n      res.status(500).json({ message: \"Failed to update user role\" });\n    }\n  });\n\n  // Toggle user status (admin only)\n  app.patch(\"/api/admin/users/:id/toggle\", requireAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      if (id === req.session.userId) {\n        return res.status(400).json({ message: \"Cannot disable your own account\" });\n      }\n      \n      const user = await storage.toggleUserStatus(id);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Log admin action\n      await storage.logUserAction(\n        user.isActive === \"true\" ? \"user_enabled\" : \"user_disabled\",\n        req.session.userId!,\n        req.session.username!,\n        { targetUserId: id, username: user.username },\n        req.ip,\n        req.get('User-Agent')\n      );\n      \n      res.json({\n        message: `User ${user.isActive === \"true\" ? \"enabled\" : \"disabled\"} successfully`,\n        user: { \n          id: user.id, \n          username: user.username,\n          isActive: user.isActive\n        }\n      });\n    } catch (error) {\n      console.error(\"Error toggling user status:\", error);\n      res.status(500).json({ message: \"Failed to toggle user status\" });\n    }\n  });\n\n  // Admin reset user password (admin only)\n  app.patch(\"/api/admin/users/:id/reset-password\", requireAdmin, async (req, res) => {\n    try {\n      const { newPassword } = req.body;\n      const userId = req.params.id;\n\n      if (!newPassword || newPassword.length < 6) {\n        return res.status(400).json({ message: \"New password must be at least 6 characters\" });\n      }\n\n      // Check if target user exists\n      const targetUser = await storage.getUser(userId);\n      if (!targetUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Prevent admin from resetting their own password this way\n      if (userId === req.session.userId) {\n        return res.status(400).json({ message: \"Cannot reset your own password. Use profile settings instead.\" });\n      }\n\n      // Hash new password\n      const saltRounds = 10;\n      const hashedPassword = await bcrypt.hash(newPassword, saltRounds);\n\n      // Update password\n      await storage.updateUser(userId, {\n        password: hashedPassword,\n      });\n\n      // Log the password reset action\n      await storage.logUserAction(\n        \"admin_password_reset\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          targetUserId: userId, \n          targetUsername: targetUser.username,\n          message: `تم إعادة تعيين كلمة مرور المستخدم ${targetUser.username}`\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"Password reset successfully\",\n        targetUser: {\n          id: targetUser.id,\n          username: targetUser.username\n        }\n      });\n    } catch (error) {\n      console.error(\"Error resetting user password:\", error);\n      res.status(500).json({ message: \"Failed to reset password\" });\n    }\n  });\n\n  // Delete user (admin only)\n  app.delete(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      if (id === req.session.userId) {\n        return res.status(400).json({ message: \"Cannot delete your own account\" });\n      }\n      \n      // Get user info for logging\n      const userToDelete = await storage.getUser(id);\n      if (!userToDelete) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const success = await storage.deleteUser(id);\n      if (!success) {\n        return res.status(500).json({ message: \"Failed to delete user\" });\n      }\n      \n      // Log admin action\n      await storage.logUserAction(\n        \"user_deleted\",\n        req.session.userId!,\n        req.session.username!,\n        { targetUserId: id, username: userToDelete.username },\n        req.ip,\n        req.get('User-Agent')\n      );\n      \n      res.json({ message: \"User deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting user:\", error);\n      res.status(500).json({ message: \"Failed to delete user\" });\n    }\n  });\n\n  // Team member routes (protected)\n  app.get(\"/api/team-members\", requireAuth, async (req, res) => {\n    try {\n      const members = await storage.getTeamMembers();\n      res.json(members);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch team members\" });\n    }\n  });\n\n  // Debug upload page - remove in production\n  app.get(\"/debug-upload.html\", (req, res) => {\n    res.sendFile(path.join(process.cwd(), \"debug-upload.html\"));\n  });\n\n  // Object storage endpoints for profile images\n  app.get(\"/objects/:objectPath(*)\", async (req, res) => {\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const objectFile = await objectStorageService.getObjectEntityFile(\n        req.path,\n      );\n      objectStorageService.downloadObject(objectFile, res);\n    } catch (error) {\n      console.error(\"Error checking object access:\", error);\n      if (error instanceof ObjectNotFoundError) {\n        return res.sendStatus(404);\n      }\n      return res.sendStatus(500);\n    }\n  });\n\n  app.post(\"/api/objects/upload\", requireAuth, async (req, res) => {\n    try {\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error getting upload URL:\", error);\n      res.status(500).json({ error: \"Failed to get upload URL\" });\n    }\n  });\n\n  // Update team member profile image\n  app.put(\"/api/team-members/:id/profile-image\", requireAuth, async (req, res) => {\n    if (!req.body.profileImageURL) {\n      return res.status(400).json({ error: \"profileImageURL is required\" });\n    }\n\n    try {\n      const objectStorageService = new ObjectStorageService();\n      const objectPath = objectStorageService.normalizeObjectEntityPath(\n        req.body.profileImageURL,\n      );\n\n      // Update team member with the profile image path\n      const updatedMember = await storage.updateTeamMember(req.params.id, {\n        profileImage: objectPath,\n      });\n      \n      // Also update the user's profile image since they are linked\n      if (updatedMember && updatedMember.userId) {\n        // Don't update user table with profileImageUrl as it doesn't exist\n        console.log('Profile image updated for team member, userId:', updatedMember.userId);\n      }\n      \n      console.log('Profile image updated:', {\n        memberId: req.params.id,\n        originalURL: req.body.profileImageURL,\n        objectPath,\n        updatedMember: updatedMember?.name,\n        memberData: updatedMember\n      });\n\n      // Log the profile image update\n      if (updatedMember) {\n        await storage.createSystemLog({\n          userId: req.session.userId!,\n          action: \"team_member_profile_image_updated\",\n          details: `تم تحديث الصورة الشخصية لعضو الفريق ${updatedMember.name}`,\n        });\n      }\n\n      res.status(200).json({\n        message: \"تم تحديث الصورة الشخصية بنجاح\",\n        objectPath: objectPath,\n        teamMember: updatedMember,\n      });\n    } catch (error) {\n      console.error(\"Error setting profile image:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/team-members/:id\", requireAuth, async (req, res) => {\n    try {\n      const member = await storage.getTeamMember(req.params.id);\n      if (!member) {\n        return res.status(404).json({ message: \"Team member not found\" });\n      }\n      res.json(member);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch team member\" });\n    }\n  });\n\n  app.post(\"/api/team-members\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertTeamMemberSchema.parse(req.body);\n      const member = await storage.createTeamMember(validatedData);\n      res.status(201).json(member);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid team member data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create team member\" });\n    }\n  });\n\n  app.put(\"/api/team-members/:id\", async (req, res) => {\n    try {\n      const updates = req.body;\n      const member = await storage.updateTeamMember(req.params.id, updates);\n      if (!member) {\n        return res.status(404).json({ message: \"Team member not found\" });\n      }\n      res.json(member);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update team member\" });\n    }\n  });\n\n  // Delete team member (admin only)\n  app.delete(\"/api/team-members/:id\", requireAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Get member info for logging before deletion\n      const memberToDelete = await storage.getTeamMember(id);\n      if (!memberToDelete) {\n        return res.status(404).json({ message: \"Team member not found\" });\n      }\n\n      // Check if this team member has an associated user account\n      const associatedUser = memberToDelete.userId ? await storage.getUser(memberToDelete.userId) : null;\n      \n      // If there's an associated user, prevent deletion if it's the current admin\n      if (associatedUser && associatedUser.id === req.session.userId) {\n        return res.status(400).json({ message: \"Cannot delete your own team member record\" });\n      }\n\n      const deleted = await storage.deleteTeamMember(id);\n      if (!deleted) {\n        return res.status(500).json({ message: \"Failed to delete team member\" });\n      }\n\n      // Log admin action\n      await storage.logUserAction(\n        \"team_member_deleted\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          targetMemberId: id, \n          memberName: memberToDelete.name,\n          memberEmail: memberToDelete.email,\n          hadAssociatedUser: !!memberToDelete.userId,\n          message: `تم حذف عضو الفريق: ${memberToDelete.name}`\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"Team member deleted successfully\",\n        deletedMember: {\n          id: memberToDelete.id,\n          name: memberToDelete.name\n        }\n      });\n    } catch (error) {\n      console.error(\"Error deleting team member:\", error);\n      res.status(500).json({ message: \"Failed to delete team member\" });\n    }\n  });\n\n  // Clean up default/example team members (admin only)\n  app.post(\"/api/admin/cleanup-default-members\", requireAdmin, async (req, res) => {\n    try {\n      // Find team members that look like default/example data\n      const allMembers = await storage.getTeamMembers();\n      const defaultMembers = allMembers.filter(member => \n        // Check for typical default/example names and emails\n        member.name.toLowerCase().includes('example') ||\n        member.name.toLowerCase().includes('test') ||\n        member.name.toLowerCase().includes('demo') ||\n        member.email.toLowerCase().includes('example') ||\n        member.email.toLowerCase().includes('test') ||\n        member.email.toLowerCase().includes('demo') ||\n        member.name === 'John Doe' ||\n        member.name === 'Jane Smith' ||\n        member.name === 'أحمد محمد' ||\n        member.name === 'فاطمة علي' ||\n        // Check if they don't have a linked user account (likely default data)\n        !member.userId\n      );\n\n      if (defaultMembers.length === 0) {\n        return res.json({ \n          message: \"No default members found to clean up\",\n          cleaned: 0\n        });\n      }\n\n      let cleanedCount = 0;\n      const cleanedMembers = [];\n\n      for (const member of defaultMembers) {\n        try {\n          const deleted = await storage.deleteTeamMember(member.id);\n          if (deleted) {\n            cleanedCount++;\n            cleanedMembers.push({\n              id: member.id,\n              name: member.name,\n              email: member.email\n            });\n\n            // Log the cleanup action\n            await storage.logUserAction(\n              \"default_member_cleaned\",\n              req.session.userId!,\n              req.session.username!,\n              { \n                cleanedMember: {\n                  id: member.id,\n                  name: member.name,\n                  email: member.email\n                },\n                reason: \"تنظيف البيانات الافتراضية\"\n              },\n              req.ip,\n              req.get('User-Agent')\n            );\n          }\n        } catch (error) {\n          console.error(`Error deleting default member ${member.name}:`, error);\n        }\n      }\n\n      res.json({ \n        message: `تم تنظيف ${cleanedCount} من الأعضاء الافتراضيين بنجاح`,\n        cleaned: cleanedCount,\n        cleanedMembers\n      });\n    } catch (error) {\n      console.error(\"Error cleaning up default members:\", error);\n      res.status(500).json({ message: \"Failed to clean up default members\" });\n    }\n  });\n\n  // Fix missing team members for existing users (admin only)\n  app.post(\"/api/admin/fix-missing-team-members\", requireAdmin, async (req, res) => {\n    try {\n      const allUsers = await storage.getAllUsers();\n      const allMembers = await storage.getTeamMembers();\n      \n      // Find users that don't have corresponding team members\n      const usersWithoutTeamMembers = allUsers.filter(user => \n        !allMembers.some(member => member.userId === user.id)\n      );\n\n      if (usersWithoutTeamMembers.length === 0) {\n        return res.json({ \n          message: \"All users already have team member records\",\n          created: 0\n        });\n      }\n\n      let createdCount = 0;\n      const createdMembers = [];\n\n      for (const user of usersWithoutTeamMembers) {\n        try {\n          // Create team member role based on user role\n          const teamMemberRole = \n            user.role === 'admin' ? 'مدير النظام' : \n            user.role === 'supervisor' ? 'مشرف' : \n            'عضو فريق';\n\n          const teamMember = await storage.createTeamMember({\n            userId: user.id,\n            name: user.firstName && user.lastName ? \n              `${user.firstName} ${user.lastName}` : user.username,\n            role: teamMemberRole,\n            email: user.email || `${user.username}@company.com`,\n            status: 'available',\n            avatar: user.username.charAt(0).toUpperCase(),\n          });\n\n          createdCount++;\n          createdMembers.push({\n            userId: user.id,\n            username: user.username,\n            teamMemberId: teamMember.id,\n            teamMemberName: teamMember.name\n          });\n\n          // Log the fix action\n          await storage.logUserAction(\n            \"missing_team_member_created\",\n            req.session.userId!,\n            req.session.username!,\n            { \n              fixedUser: {\n                id: user.id,\n                username: user.username\n              },\n              createdTeamMember: {\n                id: teamMember.id,\n                name: teamMember.name\n              },\n              reason: \"إنشاء عضو فريق مفقود\"\n            },\n            req.ip,\n            req.get('User-Agent')\n          );\n        } catch (error) {\n          console.error(`Error creating team member for user ${user.username}:`, error);\n        }\n      }\n\n      res.json({ \n        message: `تم إنشاء ${createdCount} عضو فريق للمستخدمين المفقودين`,\n        created: createdCount,\n        createdMembers\n      });\n    } catch (error) {\n      console.error(\"Error fixing missing team members:\", error);\n      res.status(500).json({ message: \"Failed to fix missing team members\" });\n    }\n  });\n\n  // Customer routes (protected)\n  app.get(\"/api/customers\", requireAuth, async (req, res) => {\n    try {\n      const customers = await storage.getCustomers();\n      res.json(customers);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch customers\" });\n    }\n  });\n\n  // Customer ratings routes (admin and supervisor only)\n  app.get(\"/api/customer-ratings\", requireSupervisorOrAdmin, async (req, res) => {\n    try {\n      const ratings = await storage.getCustomerRatings();\n      res.json(ratings);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch customer ratings\" });\n    }\n  });\n\n  // WhatsApp service status (admin only)\n  app.get(\"/api/whatsapp/status\", requireAdmin, async (req, res) => {\n    try {\n      const isReady = whatsappService.isServiceReady();\n      const status = whatsappService.getStatus();\n      res.json({ \n        isConnected: isReady,\n        isReady,\n        status: isReady ? \"متصل\" : \"غير متصل\",\n        message: isReady ? \"خدمة الواتساب تعمل بشكل طبيعي\" : \"خدمة الواتساب غير متاحة حالياً\",\n        senderNumber: status.senderNumber,\n        lastConnected: status.lastConnected,\n        qrCode: status.qrCode,\n        messagesCount: status.messagesCount || 0\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to check WhatsApp status\" });\n    }\n  });\n\n  // WhatsApp disconnect endpoint\n  app.post(\"/api/whatsapp/disconnect\", requireAdmin, async (req, res) => {\n    try {\n      await whatsappService.disconnect();\n      res.json({ \n        message: \"تم قطع الاتصال مع الواتساب بنجاح\",\n        success: true\n      });\n    } catch (error) {\n      console.error(\"Error disconnecting WhatsApp:\", error);\n      res.status(500).json({ message: \"Failed to disconnect WhatsApp\" });\n    }\n  });\n\n  app.get(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const customer = await storage.getCustomer(req.params.id);\n      if (!customer) {\n        return res.status(404).json({ message: \"Customer not found\" });\n      }\n      res.json(customer);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch customer\" });\n    }\n  });\n\n  app.post(\"/api/customers\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertCustomerSchema.parse(req.body);\n      const customer = await storage.createCustomer(validatedData);\n      res.status(201).json(customer);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid customer data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create customer\" });\n    }\n  });\n\n  app.put(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const updates = req.body;\n      const customer = await storage.updateCustomer(req.params.id, updates);\n      if (!customer) {\n        return res.status(404).json({ message: \"Customer not found\" });\n      }\n      res.json(customer);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update customer\" });\n    }\n  });\n\n  app.delete(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteCustomer(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Customer not found\" });\n      }\n      res.json({ message: \"Customer deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete customer\" });\n    }\n  });\n\n  // Task routes (protected)\n  app.get(\"/api/tasks\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      let tasks;\n      \n      // Admin and supervisors can see all tasks, regular users only see their assigned tasks\n      if (currentUser.role === 'admin' || currentUser.role === 'supervisor') {\n        tasks = await storage.getAllTasks();\n      } else {\n        tasks = await storage.getTasksForUser(currentUser.id);\n      }\n\n      const { status, assigneeId } = req.query;\n      \n      // Filter tasks by status if provided\n      if (status) {\n        tasks = tasks.filter(task => task.status === status);\n      }\n      \n      // Filter tasks by assignee if provided\n      if (assigneeId) {\n        tasks = tasks.filter(task => \n          task.assigneeIds && task.assigneeIds.includes(assigneeId as string)\n        );\n      }\n      \n      res.json(tasks);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch tasks\" });\n    }\n  });\n\n  app.get(\"/api/tasks/:id\", async (req, res) => {\n    try {\n      const task = await storage.getTask(req.params.id);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      res.json(task);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch task\" });\n    }\n  });\n\n  app.post(\"/api/tasks\", requireSupervisorOrAdmin, async (req, res) => {\n    try {\n      console.log(\"Received task data:\", JSON.stringify(req.body, null, 2));\n      \n      // Convert dueDate string to Date object if provided\n      const taskData = { ...req.body };\n      if (taskData.dueDate && typeof taskData.dueDate === 'string') {\n        taskData.dueDate = new Date(taskData.dueDate);\n      }\n      \n      const validatedData = insertTaskSchema.parse(taskData);\n      console.log(\"Validated task data:\", JSON.stringify(validatedData, null, 2));\n      const task = await storage.createTask(validatedData);\n      \n      // Create notifications for assigned team members\n      await storage.createTaskNotifications(task, \"task_assigned\");\n\n      // Send WhatsApp messages to assigned team members\n      if (task.assigneeIds && task.assigneeIds.length > 0) {\n        for (const assigneeId of task.assigneeIds) {\n          try {\n            const teamMember = await storage.getTeamMemberByUserId(assigneeId);\n            if (teamMember && teamMember.phone) {\n              console.log(`📱 إرسال رسالة واتساب لعضو الفريق: ${teamMember.name}`);\n              await whatsappService.sendTaskAssignmentMessage(\n                teamMember.phone,\n                task.taskNumber || `TSK-${task.id.slice(-4).toUpperCase()}`,\n                task.title,\n                teamMember.name\n              );\n            } else if (teamMember && !teamMember.phone) {\n              console.log(`⚠️ لا يوجد رقم هاتف لعضو الفريق: ${teamMember.name}`);\n            }\n          } catch (whatsappError) {\n            console.error('❌ خطأ في إرسال رسالة الواتساب:', whatsappError);\n            // Don't fail the task creation if WhatsApp fails\n          }\n        }\n      }\n      \n      // Send WhatsApp confirmation message to customer\n      if (task.customerPhone && task.customerName) {\n        try {\n          const confirmationSent = await whatsappService.sendTaskConfirmationMessage(\n            task.customerPhone,\n            task.customerName,\n            task.title,\n            task.taskNumber || '',\n            task.customerAddress || ''\n          );\n          \n          if (confirmationSent) {\n            console.log(`📱 تم إرسال رسالة تأكيد المهمة للعميل: ${task.customerName}`);\n          } else {\n            console.log(`❌ فشل في إرسال رسالة تأكيد المهمة للعميل: ${task.customerName}`);\n          }\n        } catch (error) {\n          console.error('❌ خطأ في إرسال رسالة تأكيد المهمة:', error);\n        }\n      }\n\n      // Log task creation\n      await storage.logUserAction(\n        \"task_created\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          taskId: task.id, \n          taskTitle: task.title,\n          customerName: task.customerName,\n          customerPhone: task.customerPhone || 'غير محدد',\n          priority: task.priority,\n          assignees: task.assigneeIds?.length || 0,\n          dueDate: task.dueDate?.toISOString().split('T')[0] || 'غير محدد',\n          confirmationSent: task.customerPhone ? 'تم المحاولة' : 'رقم الهاتف غير متوفر'\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n      \n      res.status(201).json(task);\n    } catch (error) {\n      console.error(\"Task creation error:\", error);\n      if (error instanceof z.ZodError) {\n        console.log(\"Validation errors:\", JSON.stringify(error.errors, null, 2));\n        return res.status(400).json({ message: \"Invalid task data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create task\" });\n    }\n  });\n\n  app.put(\"/api/tasks/:id\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const task = await storage.getTask(req.params.id);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n\n      // Check permissions based on user role\n      if (currentUser.role === 'user') {\n        // Regular users can only update their assigned tasks and only status/progress/notes/finalReport\n        const teamMember = await storage.getTeamMemberByUserId(currentUser.id);\n        if (!teamMember || !task.assigneeIds?.includes(teamMember.id)) {\n          return res.status(403).json({ message: \"You can only update tasks assigned to you\" });\n        }\n        \n        // Regular users can only update status, progress, notes, and finalReport\n        const allowedUpdates = ['status', 'progress', 'notes', 'finalReport'];\n        const updateKeys = Object.keys(req.body);\n        const hasUnauthorizedUpdate = updateKeys.some(key => !allowedUpdates.includes(key));\n        \n        if (hasUnauthorizedUpdate) {\n          return res.status(403).json({ message: \"You can only update task status, progress, notes, and final report\" });\n        }\n      }\n\n      const validatedData = updateTaskSchema.parse(req.body);\n      const originalTask = task; // We already fetched it above\n      const updatedTask = await storage.updateTask(req.params.id, validatedData);\n      if (!updatedTask) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      \n      // Create notifications for assigned team members when task is updated\n      await storage.createTaskNotifications(updatedTask, \"task_updated\");\n\n      // Log task status change if status was updated\n      if (req.body.status && originalTask.status !== req.body.status) {\n        await storage.logUserAction(\n          \"task_status_changed\",\n          req.session.userId!,\n          req.session.username!,\n          { \n            taskId: updatedTask.id, \n            taskTitle: updatedTask.title,\n            oldStatus: originalTask.status,\n            newStatus: req.body.status,\n            customerName: updatedTask.customerName\n          },\n          req.ip,\n          req.get('User-Agent')\n        );\n\n        // Send WhatsApp customer satisfaction rating when task is completed\n        if (req.body.status === 'completed' && originalTask.status !== 'completed') {\n          try {\n            if (updatedTask.customerName && updatedTask.customerPhone) {\n              const wasMessageSent = await whatsappService.sendCustomerRatingRequest(\n                updatedTask.customerPhone,\n                updatedTask.customerName,\n                updatedTask.title,\n                updatedTask.id\n              );\n              \n              if (wasMessageSent) {\n                console.log(`✅ تم إرسال رسالة تقييم العميل: ${updatedTask.customerName}`);\n              } else {\n                console.log(`❌ فشل إرسال رسالة تقييم للعميل: ${updatedTask.customerName}`);\n              }\n            }\n          } catch (error) {\n            console.error('خطأ في إرسال رسالة تقييم العميل:', error);\n          }\n        }\n      }\n\n      // Log task progress update if progress was updated\n      if (req.body.progress !== undefined && originalTask.progress !== req.body.progress) {\n        await storage.logUserAction(\n          \"task_progress_updated\",\n          req.session.userId!,\n          req.session.username!,\n          { \n            taskId: updatedTask.id, \n            taskTitle: updatedTask.title,\n            oldProgress: originalTask.progress || 0,\n            newProgress: req.body.progress,\n            customerName: updatedTask.customerName\n          },\n          req.ip,\n          req.get('User-Agent')\n        );\n      }\n      \n      res.json(updatedTask);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid task data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update task\" });\n    }\n  });\n\n  app.delete(\"/api/tasks/:id\", requireSupervisorOrAdmin, async (req, res) => {\n    try {\n      // Get task details before deletion for logging\n      const task = await storage.getTask(req.params.id);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n\n      const deleted = await storage.deleteTask(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n\n      // Log task deletion\n      await storage.logUserAction(\n        \"task_deleted\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          taskId: task.id, \n          taskTitle: task.title,\n          customerName: task.customerName,\n          status: task.status\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete task\" });\n    }\n  });\n\n  // Reschedule task endpoint (supervisor/admin only)\n  app.put(\"/api/tasks/:id/reschedule\", requireSupervisorOrAdmin, async (req, res) => {\n    try {\n      const taskId = req.params.id;\n      const { newDueDate, rescheduleReason } = req.body;\n      \n      if (!newDueDate || !rescheduleReason) {\n        return res.status(400).json({ message: \"New due date and reschedule reason are required\" });\n      }\n\n      // Get current task info\n      const currentTask = await storage.getTask(taskId);\n      if (!currentTask) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n\n      // Prevent rescheduling completed or cancelled tasks\n      if (currentTask.status === \"complete\" || currentTask.status === \"cancelled\") {\n        return res.status(400).json({ message: \"Cannot reschedule completed or cancelled tasks\" });\n      }\n\n      // Validate that new date is in the future\n      const newDate = new Date(newDueDate);\n      const currentDate = currentTask.dueDate ? new Date(currentTask.dueDate) : new Date();\n      \n      if (newDate <= currentDate) {\n        return res.status(400).json({ message: \"New due date must be after current date\" });\n      }\n\n      // Update task with reschedule info\n      const updatedTask = await storage.updateTask(taskId, {\n        dueDate: newDate,\n        originalDueDate: currentTask.dueDate ? new Date(currentTask.dueDate) : null,\n        rescheduleCount: (currentTask as any).rescheduleCount ? (currentTask as any).rescheduleCount + 1 : 1,\n        rescheduleReason,\n        status: currentTask.status, // Keep current status, don't change to rescheduled\n        updatedAt: new Date()\n      });\n\n      if (!updatedTask) {\n        return res.status(500).json({ message: \"Failed to reschedule task\" });\n      }\n\n      // Create notification for all assignees\n      if (currentTask.assigneeIds && currentTask.assigneeIds.length > 0) {\n        for (const assigneeId of currentTask.assigneeIds) {\n          await storage.createNotification({\n            userId: assigneeId,\n            title: \"تم تأجيل المهمة\",\n            content: `تم تأجيل المهمة \"${currentTask.title}\" إلى ${new Date(newDate).toLocaleDateString('ar-SA')}. السبب: ${rescheduleReason}`,\n            type: \"task_rescheduled\",\n            relatedId: taskId\n          });\n        }\n      }\n\n      // Log the reschedule action\n      await storage.logUserAction(\n        \"task_rescheduled\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          taskId, \n          taskTitle: currentTask.title,\n          oldDueDate: currentTask.dueDate,\n          newDueDate: newDate,\n          rescheduleReason,\n          rescheduleCount: ((currentTask as any).rescheduleCount || 0) + 1,\n          message: `تم تأجيل المهمة: ${currentTask.title}` \n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"Task rescheduled successfully\", \n        task: updatedTask \n      });\n    } catch (error) {\n      console.error(\"Error rescheduling task:\", error);\n      res.status(500).json({ message: \"Failed to reschedule task\" });\n    }\n  });\n\n  // Cancel task endpoint (supervisor/admin only)\n  app.put(\"/api/tasks/:id/cancel\", requireSupervisorOrAdmin, async (req, res) => {\n    try {\n      const taskId = req.params.id;\n      const { cancelledBy, cancellationReason } = req.body;\n      \n      if (!cancelledBy || !cancellationReason) {\n        return res.status(400).json({ message: \"Cancelled by and cancellation reason are required\" });\n      }\n\n      // Validate cancelledBy value\n      const validCancelledBy = [\"customer\", \"admin\", \"system\"];\n      if (!validCancelledBy.includes(cancelledBy)) {\n        return res.status(400).json({ message: \"Invalid cancelled by value\" });\n      }\n\n      // Get current task info\n      const currentTask = await storage.getTask(taskId);\n      if (!currentTask) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n\n      // Prevent cancelling already completed or cancelled tasks\n      if (currentTask.status === \"complete\" || currentTask.status === \"cancelled\") {\n        return res.status(400).json({ message: \"Task is already completed or cancelled\" });\n      }\n\n      // Update task with cancellation info\n      const updatedTask = await storage.updateTask(taskId, {\n        status: \"cancelled\",\n        cancelledBy,\n        cancellationReason,\n        updatedAt: new Date()\n      });\n\n      if (!updatedTask) {\n        return res.status(500).json({ message: \"Failed to cancel task\" });\n      }\n\n      // Create notification for all assignees\n      if (currentTask.assigneeIds && currentTask.assigneeIds.length > 0) {\n        const cancelledByText = cancelledBy === \"customer\" ? \"العميل\" : \n                              cancelledBy === \"admin\" ? \"الإدارة\" : \"النظام\";\n        \n        for (const assigneeId of currentTask.assigneeIds) {\n          await storage.createNotification({\n            userId: assigneeId,\n            title: \"تم إلغاء المهمة\",\n            content: `تم إلغاء المهمة \"${currentTask.title}\" بواسطة ${cancelledByText}. السبب: ${cancellationReason}`,\n            type: \"task_cancelled\",\n            relatedId: taskId\n          });\n        }\n      }\n\n      // Log the cancellation action\n      await storage.logUserAction(\n        \"task_cancelled\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          taskId, \n          taskTitle: currentTask.title,\n          customerName: currentTask.customerName,\n          cancelledBy,\n          cancellationReason,\n          message: `تم إلغاء المهمة: ${currentTask.title}` \n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"Task cancelled successfully\", \n        task: updatedTask \n      });\n    } catch (error) {\n      console.error(\"Error cancelling task:\", error);\n      res.status(500).json({ message: \"Failed to cancel task\" });\n    }\n  });\n\n  // Statistics route (protected)\n  app.get(\"/api/stats\", requireAuth, async (req, res) => {\n    try {\n      const allTasks = await storage.getAllTasks();\n      \n      const stats = {\n        activeTasks: allTasks.filter(task => task.status !== \"complete\" && task.status !== \"cancelled\").length,\n        completed: allTasks.filter(task => task.status === \"complete\").length,\n        cancelled: allTasks.filter(task => task.status === \"cancelled\").length,\n        overdue: allTasks.filter(task => {\n          if (!task.dueDate) return false;\n          return new Date(task.dueDate) < new Date() && task.status !== \"complete\" && task.status !== \"cancelled\";\n        }).length,\n        total: allTasks.length\n      };\n      const teamMembers = await storage.getTeamMembers();\n      \n      res.json({\n        ...stats,\n        teamMembers: teamMembers.length\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch statistics\" });\n    }\n  });\n\n  // Admin routes - User management\n  app.get(\"/api/admin/users\", requireAuth, async (req, res) => {\n    try {\n      // Check if user is admin\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== \"admin\") {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const users = await storage.getAllUsers();\n      res.json(users.map(user => ({\n        id: user.id,\n        username: user.username,\n        role: user.role,\n        isApproved: user.isApproved,\n        createdAt: user.createdAt\n      })));\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/approval\", requireAuth, async (req, res) => {\n    try {\n      // Check if user is admin\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== \"admin\") {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const { isApproved } = req.body;\n      const updatedUser = await storage.updateUserApproval(req.params.id, isApproved);\n      \n      if (!updatedUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      res.json({\n        message: `User ${isApproved === 'approved' ? 'approved' : 'rejected'} successfully`,\n        user: {\n          id: updatedUser.id,\n          username: updatedUser.username,\n          isApproved: updatedUser.isApproved\n        }\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update user approval\" });\n    }\n  });\n\n  // Messages routes\n  app.get(\"/api/messages\", requireAuth, async (req, res) => {\n    try {\n      const currentUserId = req.session.userId!;\n      const messages = await storage.getAllMessagesForUser(currentUserId);\n      res.json(messages);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch messages\" });\n    }\n  });\n\n  app.post(\"/api/messages\", requireAuth, async (req, res) => {\n    try {\n      const senderId = req.session.userId!;\n      const { receiverId, content, messageScope = \"private\" } = req.body;\n      \n      const messageData = {\n        senderId,\n        receiverId: messageScope === \"group\" ? null : receiverId,\n        content,\n        messageScope\n      };\n      \n      const validatedData = insertMessageSchema.parse(messageData);\n      const message = await storage.createMessage(validatedData);\n      \n      // If it's a group message, create notifications for all team members except sender\n      if (messageScope === \"group\") {\n        await storage.createGroupMessageNotifications(senderId, message.id, content);\n      }\n      \n      // Log the message action\n      const currentUser = await storage.getUser(senderId);\n      await storage.logUserAction(\n        messageScope === \"group\" ? \"group_message_sent\" : \"private_message_sent\",\n        senderId,\n        currentUser?.username || \"unknown\",\n        { messageId: message.id, content: content.substring(0, 50) + (content.length > 50 ? '...' : '') }\n      );\n      \n      res.status(201).json(message);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid message data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to send message\" });\n    }\n  });\n\n  app.patch(\"/api/messages/:id/read\", requireAuth, async (req, res) => {\n    try {\n      const message = await storage.markMessageAsRead(req.params.id);\n      if (!message) {\n        return res.status(404).json({ message: \"Message not found\" });\n      }\n      res.json(message);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to mark message as read\" });\n    }\n  });\n\n  app.get(\"/api/messages/unread-count\", requireAuth, async (req, res) => {\n    try {\n      const count = await storage.getUnreadMessagesCount(req.session.userId!);\n      res.json({ count });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch unread messages count\" });\n    }\n  });\n\n  app.get(\"/api/messages/conversation/:participantId/:type\", requireAuth, async (req, res) => {\n    try {\n      const currentUserId = req.session.userId!;\n      const { participantId, type } = req.params;\n      \n      let messages: any[] = [];\n      if (type === \"group\") {\n        // Get group messages\n        messages = await storage.getGroupMessages();\n      } else if (participantId && participantId !== \"undefined\") {\n        // Get private messages between current user and participant\n        messages = await storage.getConversationMessages(currentUserId, participantId);\n      }\n      \n      res.json(messages || []);\n    } catch (error) {\n      console.error(\"Error fetching conversation messages:\", error);\n      res.status(500).json({ message: \"Failed to fetch conversation messages\" });\n    }\n  });\n\n  // Notifications routes\n  app.get(\"/api/notifications\", requireAuth, async (req, res) => {\n    try {\n      const notifications = await storage.getNotifications(req.session.userId!);\n      res.json(notifications);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch notifications\" });\n    }\n  });\n\n  app.patch(\"/api/notifications/:id/read\", requireAuth, async (req, res) => {\n    try {\n      const notification = await storage.markNotificationAsRead(req.params.id);\n      if (!notification) {\n        return res.status(404).json({ message: \"Notification not found\" });\n      }\n      res.json(notification);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to mark notification as read\" });\n    }\n  });\n\n  app.get(\"/api/notifications/unread-count\", requireAuth, async (req, res) => {\n    try {\n      const count = await storage.getUnreadNotificationsCount(req.session.userId!);\n      res.json({ count });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch unread notifications count\" });\n    }\n  });\n\n  // Admin password verification endpoint\n  app.post(\"/api/admin/verify-password\", requireAuth, async (req, res) => {\n    try {\n      const { password } = req.body;\n      const userId = req.session.userId!;\n\n      if (!password) {\n        return res.status(400).json({ message: \"Password is required\" });\n      }\n\n      // Get current user\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Check if user is admin\n      if (user.role !== \"admin\") {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n\n      // Verify password\n      const isPasswordValid = await bcrypt.compare(password, user.password);\n      if (!isPasswordValid) {\n        await storage.logUserAction(\n          \"admin_access_denied\",\n          userId,\n          req.session.username!,\n          { message: \"فشل في الوصول للوحة الإدارة - كلمة مرور خاطئة\" },\n          req.ip,\n          req.get('User-Agent')\n        );\n        return res.status(401).json({ message: \"Invalid password\" });\n      }\n\n      // Log successful admin access\n      await storage.logUserAction(\n        \"admin_access_granted\",\n        userId,\n        req.session.username!,\n        { message: \"تم منح الوصول للوحة الإدارة بنجاح\" },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Password verified successfully\" });\n    } catch (error) {\n      console.error(\"Error verifying admin password:\", error);\n      res.status(500).json({ message: \"Failed to verify password\" });\n    }\n  });\n\n  // WhatsApp management routes\n  app.get(\"/api/whatsapp/status\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const whatsappService = (global as any).whatsappService;\n      const status = {\n        isConnected: whatsappService?.isReady || false,\n        isReady: whatsappService?.isReady || false,\n        senderNumber: whatsappService?.senderNumber || null,\n        lastConnected: whatsappService?.lastConnected || null,\n        qrCode: whatsappService?.getCurrentQRCode ? whatsappService.getCurrentQRCode() : null,\n        messagesCount: whatsappService?.messageCount || 0\n      };\n\n      res.json(status);\n    } catch (error) {\n      console.error(\"Error fetching WhatsApp status:\", error);\n      res.status(500).json({ message: \"Failed to fetch WhatsApp status\" });\n    }\n  });\n\n  app.get(\"/api/whatsapp/settings\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const settings = await storage.getWhatsAppSettings();\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching WhatsApp settings:\", error);\n      res.status(500).json({ message: \"Failed to fetch WhatsApp settings\" });\n    }\n  });\n\n  app.put(\"/api/whatsapp/settings\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      const { defaultMessage } = req.body;\n      if (!defaultMessage || typeof defaultMessage !== 'string') {\n        return res.status(400).json({ message: \"Default message is required\" });\n      }\n\n      await storage.updateWhatsAppSettings({ defaultMessage });\n      \n      // Log the action\n      await storage.logUserAction(\n        \"update_whatsapp_settings\",\n        req.session.userId!,\n        req.session.username!,\n        { details: `تم تحديث نص رسالة التقييم الافتراضية` },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Settings updated successfully\" });\n    } catch (error) {\n      console.error(\"Error updating WhatsApp settings:\", error);\n      res.status(500).json({ message: \"Failed to update WhatsApp settings\" });\n    }\n  });\n\n  app.post(\"/api/whatsapp/reconnect\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const whatsappService = (global as any).whatsappService;\n      if (whatsappService) {\n        await whatsappService.reconnect();\n        \n        // Log the action\n        await storage.logUserAction(\n          \"whatsapp_reconnect\",\n          req.session.userId!,\n          req.session.username!,\n          { details: `تم طلب إعادة ربط خدمة الواتساب` },\n          req.ip,\n          req.get('User-Agent')\n        );\n      }\n\n      res.json({ message: \"Reconnection initiated\" });\n    } catch (error) {\n      console.error(\"Error reconnecting WhatsApp:\", error);\n      res.status(500).json({ message: \"Failed to reconnect WhatsApp\" });\n    }\n  });\n\n  app.post(\"/api/whatsapp/test-message\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const { phoneNumber } = req.body;\n      if (!phoneNumber || typeof phoneNumber !== 'string') {\n        return res.status(400).json({ message: \"Phone number is required\" });\n      }\n\n      const whatsappService = (global as any).whatsappService;\n      if (!whatsappService || !whatsappService.isReady) {\n        return res.status(400).json({ message: \"WhatsApp service is not ready\" });\n      }\n\n      const settings = await storage.getWhatsAppSettings();\n      const testMessage = `رسالة تجريبية من نظام إدارة المهام\\n\\n${settings.defaultMessage}\\n\\n--- رسالة تجريبية ---`;\n\n      await whatsappService.sendMessage(phoneNumber, testMessage);\n      \n      // Log the action\n      await storage.logUserAction(\n        \"send_test_message\",\n        req.session.userId!,\n        req.session.username!,\n        { phoneNumber, details: `تم إرسال رسالة تجريبية إلى ${phoneNumber}` },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Test message sent successfully\" });\n    } catch (error) {\n      console.error(\"Error sending test message:\", error);\n      res.status(500).json({ message: \"Failed to send test message\" });\n    }\n  });\n\n  // إعادة تشغيل خدمة الواتساب وتجديد QR Code\n  app.post(\"/api/whatsapp/restart\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const whatsappService = (global as any).whatsappService;\n      if (whatsappService) {\n        await whatsappService.restart();\n        \n        // Log the action\n        await storage.logUserAction(\n          \"whatsapp_restart\",\n          req.session.userId!,\n          req.session.username!,\n          { details: `تم إعادة تشغيل خدمة الواتساب وتجديد رمز QR` },\n          req.ip,\n          req.get('User-Agent')\n        );\n      }\n\n      res.json({ \n        message: \"تم إعادة تشغيل الواتساب بنجاح\",\n        success: true\n      });\n    } catch (error) {\n      console.error(\"Error restarting WhatsApp:\", error);\n      res.status(500).json({ message: \"Failed to restart WhatsApp service\" });\n    }\n  });\n\n  // تفعيل الواتساب الحقيقي\n  app.post(\"/api/whatsapp/enable-real\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      console.log('🔄 تفعيل الواتساب الحقيقي من routes...');\n      \n      // استخدام الطريقة الجديدة لتفعيل الوضع الحقيقي\n      const whatsappService = (global as any).whatsappService;\n      if (whatsappService) {\n        console.log('✅ تم العثور على خدمة الواتساب - بدء التفعيل...');\n        await whatsappService.enableRealMode();\n        console.log('✅ انتهى استدعاء enableRealMode()');\n      } else {\n        console.error('❌ خدمة الواتساب غير موجودة!');\n      }\n      \n      // Log the action\n      await storage.logUserAction(\n        \"enable_real_whatsapp\",\n        req.session.userId!,\n        req.session.username!,\n        { details: `تم تفعيل الواتساب الحقيقي` },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"تم تفعيل الواتساب الحقيقي بنجاح - امسح الآن رمز QR الجديد\",\n        success: true\n      });\n    } catch (error) {\n      console.error(\"Error enabling real WhatsApp:\", error);\n      res.status(500).json({ message: \"Failed to enable real WhatsApp\" });\n    }\n  });\n\n  // إلغاء تفعيل الواتساب الحقيقي والعودة للمحاكاة\n  app.post(\"/api/whatsapp/disable-real\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      console.log('🔄 العودة لوضع المحاكاة...');\n      \n      // استخدام الطريقة الجديدة لإلغاء تفعيل الوضع الحقيقي\n      const whatsappService = (global as any).whatsappService;\n      if (whatsappService) {\n        await whatsappService.disableRealMode();\n      }\n      \n      // Log the action\n      await storage.logUserAction(\n        \"disable_real_whatsapp\",\n        req.session.userId!,\n        req.session.username!,\n        { details: `تم إلغاء تفعيل الواتساب الحقيقي والعودة للمحاكاة` },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ \n        message: \"تم إلغاء تفعيل الواتساب الحقيقي والعودة لوضع المحاكاة\",\n        success: true\n      });\n    } catch (error) {\n      console.error(\"Error disabling real WhatsApp:\", error);\n      res.status(500).json({ message: \"Failed to disable real WhatsApp\" });\n    }\n  });\n\n  // Get users count for broadcast\n  app.get(\"/api/users/count\", requireAuth, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      const activeUsers = users.filter(user => user.isActive === undefined || user.isActive === \"true\").length;\n      \n      res.json({\n        totalUsers: users.length,\n        activeUsers: activeUsers,\n      });\n    } catch (error) {\n      console.error(\"Error getting users count:\", error);\n      res.status(500).json({ message: \"Failed to get users count\" });\n    }\n  });\n\n  // Send broadcast WhatsApp message\n  app.post(\"/api/whatsapp/broadcast\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'supervisor')) {\n        return res.status(403).json({ message: \"Access denied. Admin or Supervisor role required.\" });\n      }\n\n      const { message } = req.body;\n      \n      if (!message || !message.trim()) {\n        return res.status(400).json({ message: \"Message content is required\" });\n      }\n\n      // Get all users with phone numbers\n      const users = await storage.getAllUsers();\n      const usersWithPhone = users.filter(user => \n        user.phone && \n        user.phone.trim() !== '' && \n        (user.isActive === undefined || user.isActive === \"true\")\n      );\n\n      if (usersWithPhone.length === 0) {\n        return res.status(400).json({ message: \"No users with phone numbers found\" });\n      }\n\n      // Send messages\n      const results = {\n        totalUsers: usersWithPhone.length,\n        successCount: 0,\n        failedCount: 0,\n        failedUsers: [] as string[]\n      };\n\n      const whatsappService = (global as any).whatsappService;\n      if (!whatsappService) {\n        return res.status(400).json({ message: \"WhatsApp service is not available\" });\n      }\n\n      for (const user of usersWithPhone) {\n        try {\n          const phone = user.phone!.replace(/[^\\d]/g, ''); // Clean phone number\n          const whatsappNumber = phone.startsWith('966') ? phone : `966${phone}`;\n          \n          if (whatsappService.sendMessage) {\n            await whatsappService.sendMessage(whatsappNumber, message.trim());\n            results.successCount++;\n          } else {\n            throw new Error(\"sendMessage method not available\");\n          }\n          \n          // Log the broadcast message\n          await storage.logUserAction(\n            \"whatsapp_broadcast_sent\",\n            req.session.userId!,\n            req.session.username!,\n            { \n              recipientUser: user.username,\n              recipientPhone: user.phone,\n              messageContent: message.trim().substring(0, 100) + (message.trim().length > 100 ? \"...\" : \"\"),\n              details: `WhatsApp broadcast message sent to ${user.username} (${user.phone})`\n            },\n            req.ip,\n            req.get('User-Agent')\n          );\n          \n        } catch (error) {\n          console.error(`Failed to send WhatsApp message to ${user.username}:`, error);\n          results.failedCount++;\n          results.failedUsers.push(user.username || user.phone || 'Unknown');\n          \n          // Log the failed broadcast\n          await storage.logUserAction(\n            \"whatsapp_broadcast_failed\",\n            req.session.userId!,\n            req.session.username!,\n            { \n              recipientUser: user.username,\n              recipientPhone: user.phone,\n              error: error?.toString(),\n              details: `Failed to send WhatsApp broadcast to ${user.username} (${user.phone}): ${error}`\n            },\n            req.ip,\n            req.get('User-Agent')\n          );\n        }\n      }\n\n      // Log the overall broadcast action\n      await storage.logUserAction(\n        \"whatsapp_broadcast_completed\",\n        req.session.userId!,\n        req.session.username!,\n        { \n          totalUsers: results.totalUsers,\n          successCount: results.successCount,\n          failedCount: results.failedCount,\n          messageContent: message.trim().substring(0, 100) + (message.trim().length > 100 ? \"...\" : \"\"),\n          details: `WhatsApp broadcast completed: ${results.successCount}/${results.totalUsers} messages sent successfully`\n        },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Error sending broadcast WhatsApp message:\", error);\n      res.status(500).json({ message: \"Failed to send broadcast message\" });\n    }\n  });\n\n  // Team Points stats for dashboard\n  app.get(\"/api/team-points/stats\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const allPoints = await storage.getAllTeamMemberPoints();\n      \n      // إحصائيات عامة\n      const totalMembers = allPoints.length;\n      const totalPoints = allPoints.reduce((sum, p) => sum + (p.points || 0), 0);\n      const averagePoints = totalMembers > 0 ? Math.round(totalPoints / totalMembers) : 0;\n      const topScorer = allPoints.length > 0 ? allPoints[0] : null;\n\n      // الحصول على نقاط المستخدم الحالي\n      const teamMember = await storage.getTeamMemberByUserId(req.session.userId!);\n      let userPoints = null;\n      if (teamMember) {\n        userPoints = await storage.getTeamMemberPoints(teamMember.id);\n      }\n\n      // أظهر جميع الإحصائيات لجميع المستخدمين\n      res.json({\n        totalMembers,\n        totalPoints,\n        averagePoints,\n        topScorer: topScorer ? {\n          name: topScorer.teamMember.name,\n          points: topScorer.points || 0,\n          role: topScorer.teamMember.role\n        } : null,\n        topPerformers: allPoints.slice(0, 3).map(p => ({\n          name: p.teamMember.name,\n          points: p.points || 0,\n          role: p.teamMember.role\n        })),\n        userPoints: userPoints?.points || 0,\n        userTotalEarned: userPoints?.totalEarned || 0,\n        userRank: userPoints ? allPoints.findIndex(p => p.teamMemberId === teamMember?.id) + 1 : null,\n        canViewAll: true\n      });\n    } catch (error) {\n      console.error(\"Error fetching team points stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch team points stats\" });\n    }\n  });\n\n  // Team Points routes\n  app.get(\"/api/team-points\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Admin can see all points, others only their own\n      if (currentUser.role === 'admin') {\n        const allPoints = await storage.getAllTeamMemberPoints();\n        res.json(allPoints);\n      } else {\n        const teamMember = await storage.getTeamMemberByUserId(req.session.userId!);\n        if (!teamMember) {\n          return res.status(404).json({ message: \"Team member not found\" });\n        }\n        \n        const points = await storage.getTeamMemberPoints(teamMember.id);\n        if (!points) {\n          // تهيئة النقاط إذا لم تكن موجودة\n          const newPoints = await storage.initializeTeamMemberPoints(teamMember.id);\n          res.json([{ ...newPoints, teamMember }]);\n        } else {\n          res.json([{ ...points, teamMember }]);\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching team points:\", error);\n      res.status(500).json({ message: \"Failed to fetch team points\" });\n    }\n  });\n\n  app.post(\"/api/team-points/:teamMemberId/add\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      const { teamMemberId } = req.params;\n      const { points, reason } = req.body;\n\n      if (typeof points !== 'number' || points <= 0) {\n        return res.status(400).json({ message: \"Points must be a positive number\" });\n      }\n\n      if (!reason || typeof reason !== 'string') {\n        return res.status(400).json({ message: \"Reason is required\" });\n      }\n\n      await storage.addPointsToTeamMember(\n        teamMemberId,\n        points,\n        reason,\n        undefined,\n        undefined,\n        req.session.userId!\n      );\n\n      // تسجيل العملية\n      await storage.logUserAction(\n        \"add_team_points\",\n        req.session.userId!,\n        req.session.username!,\n        { teamMemberId, points, reason },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Points added successfully\" });\n    } catch (error) {\n      console.error(\"Error adding team points:\", error);\n      res.status(500).json({ message: \"Failed to add team points\" });\n    }\n  });\n\n  app.post(\"/api/team-points/:teamMemberId/reset\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      const { teamMemberId } = req.params;\n      await storage.resetTeamMemberPoints(teamMemberId, req.session.userId!);\n\n      // تسجيل العملية\n      await storage.logUserAction(\n        \"reset_team_member_points\",\n        req.session.userId!,\n        req.session.username!,\n        { teamMemberId },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"Team member points reset successfully\" });\n    } catch (error) {\n      console.error(\"Error resetting team member points:\", error);\n      res.status(500).json({ message: \"Failed to reset team member points\" });\n    }\n  });\n\n  app.post(\"/api/team-points/reset-all\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser || currentUser.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied. Admin role required.\" });\n      }\n\n      await storage.resetAllTeamMemberPoints(req.session.userId!);\n\n      // تسجيل العملية\n      await storage.logUserAction(\n        \"reset_all_team_points\",\n        req.session.userId!,\n        req.session.username!,\n        { details: \"تم تصفير جميع نقاط أعضاء الفريق\" },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n      res.json({ message: \"All team points reset successfully\" });\n    } catch (error) {\n      console.error(\"Error resetting all team points:\", error);\n      res.status(500).json({ message: \"Failed to reset all team points\" });\n    }\n  });\n\n  app.get(\"/api/points-history\", requireAuth, async (req, res) => {\n    try {\n      const currentUser = await storage.getUser(req.session.userId!);\n      if (!currentUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const { teamMemberId, limit } = req.query;\n      const limitNum = limit ? parseInt(limit as string) : 50;\n\n      // Admin can see all history, others only their own\n      if (currentUser.role === 'admin') {\n        const history = await storage.getPointsHistory(\n          teamMemberId as string | undefined,\n          limitNum\n        );\n        res.json(history);\n      } else {\n        const teamMember = await storage.getTeamMemberByUserId(req.session.userId!);\n        if (!teamMember) {\n          return res.status(404).json({ message: \"Team member not found\" });\n        }\n        \n        const history = await storage.getPointsHistory(teamMember.id, limitNum);\n        res.json(history);\n      }\n    } catch (error) {\n      console.error(\"Error fetching points history:\", error);\n      res.status(500).json({ message: \"Failed to fetch points history\" });\n    }\n  });\n\n  // Admin backup and export routes\n  app.get(\"/api/admin/export/customers\", requireAdmin, async (req, res) => {\n    try {\n      const customers = await storage.getAllCustomers();\n      \n      // Prepare data for Excel\n      const excelData = customers.map(customer => ({\n        'اسم العميل': customer.name,\n        'رقم الهاتف': customer.phone || '',\n        'البريد الإلكتروني': customer.email || '',\n        'العنوان': customer.address || '',\n        'الموقع الجغرافي (خط الطول)': customer.gpsLongitude || '',\n        'الموقع الجغرافي (خط العرض)': customer.gpsLatitude || '',\n        'تاريخ الإضافة': customer.createdAt ? new Date(customer.createdAt).toLocaleDateString('en-GB') : ''\n      }));\n\n      // Create workbook and worksheet\n      const wb = XLSX.utils.book_new();\n      const ws = XLSX.utils.json_to_sheet(excelData);\n      \n      // Add worksheet to workbook\n      XLSX.utils.book_append_sheet(wb, ws, 'العملاء');\n      \n      // Generate buffer\n      const buffer = XLSX.write(wb, { type: 'buffer', bookType: 'xlsx' });\n      \n      // Set headers for download\n      const fileName = `customers_export_${new Date().toISOString().split('T')[0]}.xlsx`;\n      res.setHeader('Content-Disposition', `attachment; filename=\"${fileName}\"`);\n      res.setHeader('Content-Type', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n      \n      // Log the export action\n      await storage.logUserAction(\n        \"customers_export\",\n        req.session.userId!,\n        req.session.username!,\n        { exportedCount: customers.length, fileName },\n        req.ip,\n        req.get('User-Agent')\n      );\n      \n      res.send(buffer);\n    } catch (error) {\n      console.error(\"Error exporting customers:\", error);\n      res.status(500).json({ message: \"Failed to export customers data\" });\n    }\n  });\n\n  app.get(\"/api/admin/backup/full\", requireAdmin, async (req, res) => {\n    try {\n      // Get all data\n      const [\n        users,\n        tasks,\n        customers,\n        teamMembers,\n        messages,\n        notifications,\n        systemLogs,\n        customerRatings,\n        pointsHistory\n      ] = await Promise.all([\n        storage.getAllUsers(),\n        storage.getAllTasks(),\n        storage.getAllCustomers(),\n        storage.getTeamMembers(),\n        storage.getAllMessages(),\n        storage.getAllNotifications(),\n        storage.getAllSystemLogs(),\n        storage.getAllCustomerRatings(),\n        storage.getPointsHistory(undefined, 1000)\n      ]);\n\n      // Create ZIP archive\n      const archive = archiver('zip', {\n        zlib: { level: 9 }\n      });\n\n      // Set headers for download\n      const fileName = `backup_${new Date().toISOString().split('T')[0]}_${Date.now()}.zip`;\n      res.setHeader('Content-Disposition', `attachment; filename=\"${fileName}\"`);\n      res.setHeader('Content-Type', 'application/zip');\n\n      // Pipe archive to response\n      archive.pipe(res);\n\n      // Add JSON files to archive\n      archive.append(JSON.stringify(users, null, 2), { name: 'users.json' });\n      archive.append(JSON.stringify(tasks, null, 2), { name: 'tasks.json' });\n      archive.append(JSON.stringify(customers, null, 2), { name: 'customers.json' });\n      archive.append(JSON.stringify(teamMembers, null, 2), { name: 'team_members.json' });\n      archive.append(JSON.stringify(messages, null, 2), { name: 'messages.json' });\n      archive.append(JSON.stringify(notifications, null, 2), { name: 'notifications.json' });\n      archive.append(JSON.stringify(systemLogs, null, 2), { name: 'system_logs.json' });\n      archive.append(JSON.stringify(customerRatings, null, 2), { name: 'customer_ratings.json' });\n      archive.append(JSON.stringify(pointsHistory, null, 2), { name: 'points_history.json' });\n\n      // Create Excel files for key data\n      // Users Excel\n      const usersExcel = users.map(user => ({\n        'اسم المستخدم': user.username,\n        'الاسم الأول': user.firstName || '',\n        'الاسم الأخير': user.lastName || '',\n        'البريد الإلكتروني': user.email || '',\n        'الهاتف': user.phone || '',\n        'الدور': user.role,\n        'حالة الموافقة': user.isApproved,\n        'تاريخ الإنشاء': user.createdAt ? new Date(user.createdAt).toLocaleDateString('en-GB') : ''\n      }));\n      const usersWb = XLSX.utils.book_new();\n      const usersWs = XLSX.utils.json_to_sheet(usersExcel);\n      XLSX.utils.book_append_sheet(usersWb, usersWs, 'المستخدمين');\n      const usersBuffer = XLSX.write(usersWb, { type: 'buffer', bookType: 'xlsx' });\n      archive.append(usersBuffer, { name: 'users.xlsx' });\n\n      // Tasks Excel\n      const tasksExcel = tasks.map(task => ({\n        'رقم المهمة': task.taskNumber,\n        'عنوان المهمة': task.title,\n        'الوصف': task.description || '',\n        'المكلف بالمهمة': task.assignees?.map(a => a.name).join(', ') || '',\n        'اسم العميل': task.customerName || '',\n        'هاتف العميل': task.customerPhone || '',\n        'عنوان العميل': task.customerAddress || '',\n        'الحالة': task.status,\n        'الأولوية': task.priority,\n        'النسبة المكتملة': task.progress + '%',\n        'تاريخ الاستحقاق': task.dueDate ? new Date(task.dueDate).toLocaleDateString('en-GB') : '',\n        'تاريخ الإنشاء': task.createdAt ? new Date(task.createdAt).toLocaleDateString('en-GB') : ''\n      }));\n      const tasksWb = XLSX.utils.book_new();\n      const tasksWs = XLSX.utils.json_to_sheet(tasksExcel);\n      XLSX.utils.book_append_sheet(tasksWb, tasksWs, 'المهام');\n      const tasksBuffer = XLSX.write(tasksWb, { type: 'buffer', bookType: 'xlsx' });\n      archive.append(tasksBuffer, { name: 'tasks.xlsx' });\n\n      // Customers Excel\n      const customersExcel = customers.map(customer => ({\n        'اسم العميل': customer.name,\n        'رقم الهاتف': customer.phone || '',\n        'البريد الإلكتروني': customer.email || '',\n        'العنوان': customer.address || '',\n        'الموقع الجغرافي (خط الطول)': customer.gpsLongitude || '',\n        'الموقع الجغرافي (خط العرض)': customer.gpsLatitude || '',\n        'تاريخ الإضافة': customer.createdAt ? new Date(customer.createdAt).toLocaleDateString('en-GB') : ''\n      }));\n      const customersWb = XLSX.utils.book_new();\n      const customersWs = XLSX.utils.json_to_sheet(customersExcel);\n      XLSX.utils.book_append_sheet(customersWb, customersWs, 'العملاء');\n      const customersBuffer = XLSX.write(customersWb, { type: 'buffer', bookType: 'xlsx' });\n      archive.append(customersBuffer, { name: 'customers.xlsx' });\n\n      // Add backup info file\n      const backupInfo = {\n        backupDate: new Date().toISOString(),\n        backupVersion: '1.0',\n        dataCount: {\n          users: users.length,\n          tasks: tasks.length,\n          customers: customers.length,\n          teamMembers: teamMembers.length,\n          messages: messages.length,\n          notifications: notifications.length,\n          systemLogs: systemLogs.length,\n          customerRatings: customerRatings.length,\n          pointsHistory: pointsHistory.length\n        }\n      };\n      archive.append(JSON.stringify(backupInfo, null, 2), { name: 'backup_info.json' });\n\n      // Finalize archive\n      await archive.finalize();\n\n      // Log the backup action\n      await storage.logUserAction(\n        \"full_backup_created\",\n        req.session.userId!,\n        req.session.username!,\n        { fileName, ...backupInfo.dataCount },\n        req.ip,\n        req.get('User-Agent')\n      );\n\n    } catch (error) {\n      console.error(\"Error creating backup:\", error);\n      res.status(500).json({ message: \"Failed to create backup\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":89928},"server/storage-old.ts":{"content":"import { type User, type InsertUser, type TeamMember, type InsertTeamMember, type Task, type InsertTask, type UpdateTask, type TaskWithAssignees, type Customer, type InsertCustomer, users, teamMembers, tasks, customers } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { db } from \"./db\";\nimport { eq, and, inArray, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  getAllUsers(): Promise<User[]>;\n  updateUserApproval(id: string, isApproved: string): Promise<User | undefined>;\n  createAdminUser(): Promise<User>;\n\n  // Team member methods\n  getTeamMembers(): Promise<TeamMember[]>;\n  getTeamMember(id: string): Promise<TeamMember | undefined>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n  updateTeamMember(id: string, updates: Partial<TeamMember>): Promise<TeamMember | undefined>;\n  deleteTeamMember(id: string): Promise<boolean>;\n\n  // Customer methods\n  getCustomers(): Promise<Customer[]>;\n  getCustomer(id: string): Promise<Customer | undefined>;\n  getCustomerByName(name: string): Promise<Customer | undefined>;\n  createCustomer(customer: InsertCustomer): Promise<Customer>;\n  updateCustomer(id: string, updates: Partial<Customer>): Promise<Customer | undefined>;\n  deleteCustomer(id: string): Promise<boolean>;\n\n  // Task methods\n  getTasks(): Promise<TaskWithAssignees[]>;\n  getTask(id: string): Promise<TaskWithAssignees | undefined>;\n  getTasksByStatus(status: string): Promise<TaskWithAssignees[]>;\n  getTasksByAssignee(assigneeId: string): Promise<TaskWithAssignees[]>;\n  createTask(task: InsertTask): Promise<TaskWithAssignees>;\n  updateTask(id: string, updates: UpdateTask): Promise<TaskWithAssignees | undefined>;\n  deleteTask(id: string): Promise<boolean>;\n\n  // Statistics\n  getTaskStats(): Promise<{\n    activeTasks: number;\n    completed: number;\n    overdue: number;\n    total: number;\n  }>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private teamMembers: Map<string, TeamMember>;\n  private tasks: Map<string, Task>;\n  private customers: Map<string, Customer>;\n\n  constructor() {\n    this.users = new Map();\n    this.teamMembers = new Map();\n    this.tasks = new Map();\n    this.customers = new Map();\n    \n    // Initialize with some default team members and admin user\n    this.seedData();\n  }\n\n  private async seedData() {\n    // Add default team members\n    const defaultMembers = [\n      {\n        name: \"Sarah Chen\",\n        role: \"UI/UX Designer\",\n        email: \"sarah.chen@company.com\",\n        status: \"available\",\n        activeTasks: 0,\n        avatar: \"SC\"\n      },\n      {\n        name: \"Mike Johnson\",\n        role: \"Backend Developer\", \n        email: \"mike.johnson@company.com\",\n        status: \"busy\",\n        activeTasks: 0,\n        avatar: \"MJ\"\n      },\n      {\n        name: \"Emma Davis\",\n        role: \"Frontend Developer\",\n        email: \"emma.davis@company.com\", \n        status: \"available\",\n        activeTasks: 0,\n        avatar: \"ED\"\n      },\n      {\n        name: \"Alex Rodriguez\",\n        role: \"Product Manager\",\n        email: \"alex.rodriguez@company.com\",\n        status: \"available\", \n        activeTasks: 0,\n        avatar: \"AR\"\n      }\n    ];\n\n    for (const member of defaultMembers) {\n      await this.createTeamMember(member);\n    }\n    \n    // Create admin user if doesn't exist\n    const adminExists = await this.getUserByUsername(\"administrator\");\n    if (!adminExists) {\n      await this.createAdminUser();\n    }\n  }\n\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { \n      ...insertUser, \n      id,\n      role: insertUser.role || \"user\",\n      isApproved: insertUser.isApproved || \"pending\",\n      createdAt: new Date()\n    };\n    this.users.set(id, user);\n    return user;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return Array.from(this.users.values());\n  }\n\n  async updateUserApproval(id: string, isApproved: string): Promise<User | undefined> {\n    const user = this.users.get(id);\n    if (!user) return undefined;\n    \n    const updatedUser = { ...user, isApproved };\n    this.users.set(id, updatedUser);\n    return updatedUser;\n  }\n\n  async createAdminUser(): Promise<User> {\n    const bcrypt = require('bcryptjs');\n    const hashedPassword = await bcrypt.hash(\"wdq@#$\", 10);\n    \n    return await this.createUser({\n      username: \"administrator\",\n      password: hashedPassword,\n      role: \"admin\",\n      isApproved: \"approved\"\n    });\n  }\n\n  // Team member methods\n  async getTeamMembers(): Promise<TeamMember[]> {\n    return Array.from(this.teamMembers.values());\n  }\n\n  async getTeamMember(id: string): Promise<TeamMember | undefined> {\n    return this.teamMembers.get(id);\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const id = randomUUID();\n    const teamMember: TeamMember = { \n      ...member, \n      id,\n      status: member.status || \"available\",\n      activeTasks: 0,\n      avatar: member.avatar || null\n    };\n    this.teamMembers.set(id, teamMember);\n    return teamMember;\n  }\n\n  async updateTeamMember(id: string, updates: Partial<TeamMember>): Promise<TeamMember | undefined> {\n    const member = this.teamMembers.get(id);\n    if (!member) return undefined;\n    \n    const updatedMember = { ...member, ...updates };\n    this.teamMembers.set(id, updatedMember);\n    return updatedMember;\n  }\n\n  async deleteTeamMember(id: string): Promise<boolean> {\n    return this.teamMembers.delete(id);\n  }\n\n  // Customer methods\n  async getCustomers(): Promise<Customer[]> {\n    return Array.from(this.customers.values());\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    return this.customers.get(id);\n  }\n\n  async getCustomerByName(name: string): Promise<Customer | undefined> {\n    return Array.from(this.customers.values()).find(customer => customer.name.toLowerCase() === name.toLowerCase());\n  }\n\n  async createCustomer(customerData: InsertCustomer): Promise<Customer> {\n    const customer: Customer = {\n      id: randomUUID(),\n      ...customerData,\n      phone: customerData.phone || null,\n      email: customerData.email || null,\n      address: customerData.address || null,\n      createdAt: new Date(),\n    };\n    \n    this.customers.set(customer.id, customer);\n    return customer;\n  }\n\n  async updateCustomer(id: string, updates: Partial<Customer>): Promise<Customer | undefined> {\n    const customer = this.customers.get(id);\n    if (!customer) return undefined;\n\n    const updatedCustomer = { ...customer, ...updates };\n    this.customers.set(id, updatedCustomer);\n    return updatedCustomer;\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    return this.customers.delete(id);\n  }\n\n  // Task methods\n  async getTasks(): Promise<TaskWithAssignees[]> {\n    const tasks = Array.from(this.tasks.values());\n    return await Promise.all(\n      tasks.map(async (task) => {\n        const assignees = task.assigneeIds && task.assigneeIds.length > 0 \n          ? await Promise.all(task.assigneeIds.map(id => this.getTeamMember(id)).filter(Boolean)) \n          : [];\n        return { ...task, assignees: assignees.filter(a => a !== undefined) as TeamMember[] };\n      })\n    );\n  }\n\n  async getTask(id: string): Promise<TaskWithAssignees | undefined> {\n    const task = this.tasks.get(id);\n    if (!task) return undefined;\n    \n    const assignees = task.assigneeIds && task.assigneeIds.length > 0 \n      ? await Promise.all(task.assigneeIds.map(id => this.getTeamMember(id)).filter(Boolean)) \n      : [];\n    return { ...task, assignees: assignees.filter(a => a !== undefined) as TeamMember[] };\n  }\n\n  async getTasksByStatus(status: string): Promise<TaskWithAssignees[]> {\n    const allTasks = await this.getTasks();\n    return allTasks.filter(task => task.status === status);\n  }\n\n  async getTasksByAssignee(assigneeId: string): Promise<TaskWithAssignees[]> {\n    const allTasks = await this.getTasks();\n    return allTasks.filter(task => task.assigneeIds && task.assigneeIds.includes(assigneeId));\n  }\n\n  async createTask(task: InsertTask): Promise<TaskWithAssignees> {\n    const id = randomUUID();\n    const now = new Date();\n    const newTask: Task = { \n      ...task, \n      id,\n      status: task.status || \"pending\",\n      priority: task.priority || \"medium\",\n      progress: task.progress || 0,\n      assigneeIds: task.assigneeIds || [],\n      dueDate: task.dueDate || null,\n      notes: task.notes || null,\n      customerPhone: task.customerPhone || null,\n      customerAddress: task.customerAddress || null,\n      createdAt: now,\n      updatedAt: now\n    };\n    this.tasks.set(id, newTask);\n\n    // Update assignees' active task counts\n    if (task.assigneeIds && task.assigneeIds.length > 0 && task.status !== 'complete') {\n      for (const assigneeId of task.assigneeIds) {\n        const assignee = await this.getTeamMember(assigneeId);\n        if (assignee) {\n          await this.updateTeamMember(assigneeId, {\n            activeTasks: assignee.activeTasks + 1\n          });\n        }\n      }\n    }\n\n    return await this.getTask(id) as TaskWithAssignees;\n  }\n\n  async updateTask(id: string, updates: UpdateTask): Promise<TaskWithAssignees | undefined> {\n    const task = this.tasks.get(id);\n    if (!task) return undefined;\n\n    const previousStatus = task.status;\n    const previousAssigneeIds = task.assigneeIds || [];\n    \n    const updatedTask = { \n      ...task, \n      ...updates, \n      updatedAt: new Date()\n    };\n    this.tasks.set(id, updatedTask);\n\n    // Update assignees' active task counts if status changed\n    if (updates.status && updates.status !== previousStatus) {\n      const currentAssigneeIds = updatedTask.assigneeIds || [];\n      \n      // If task completed, decrease all assignees' counts\n      if (updates.status === 'complete') {\n        for (const assigneeId of currentAssigneeIds) {\n          const assignee = await this.getTeamMember(assigneeId);\n          if (assignee && assignee.activeTasks > 0) {\n            await this.updateTeamMember(assigneeId, {\n              activeTasks: assignee.activeTasks - 1\n            });\n          }\n        }\n      }\n      \n      // If task reactivated from completed, increase assignees' counts\n      if (previousStatus === 'complete' && updates.status !== 'complete') {\n        for (const assigneeId of currentAssigneeIds) {\n          const assignee = await this.getTeamMember(assigneeId);\n          if (assignee) {\n            await this.updateTeamMember(assigneeId, {\n              activeTasks: assignee.activeTasks + 1\n            });\n          }\n        }\n      }\n    }\n\n    // Handle assignee changes\n    if (updates.assigneeIds) {\n      const newAssigneeIds = updates.assigneeIds;\n      \n      // Decrease counts for removed assignees\n      for (const prevId of previousAssigneeIds) {\n        if (!newAssigneeIds.includes(prevId) && updatedTask.status !== 'completed') {\n          const assignee = await this.getTeamMember(prevId);\n          if (assignee && assignee.activeTasks > 0) {\n            await this.updateTeamMember(prevId, {\n              activeTasks: assignee.activeTasks - 1\n            });\n          }\n        }\n      }\n      \n      // Increase counts for new assignees\n      for (const newId of newAssigneeIds) {\n        if (!previousAssigneeIds.includes(newId) && updatedTask.status !== 'completed') {\n          const assignee = await this.getTeamMember(newId);\n          if (assignee) {\n            await this.updateTeamMember(newId, {\n              activeTasks: assignee.activeTasks + 1\n            });\n          }\n        }\n      }\n    }\n\n    return await this.getTask(id);\n  }\n\n  async deleteTask(id: string): Promise<boolean> {\n    const task = this.tasks.get(id);\n    if (!task) return false;\n\n    // Decrease assignees' active task counts if task was active\n    if (task.assigneeIds && task.assigneeIds.length > 0 && task.status !== 'complete') {\n      for (const assigneeId of task.assigneeIds) {\n        const assignee = await this.getTeamMember(assigneeId);\n        if (assignee && assignee.activeTasks > 0) {\n          await this.updateTeamMember(assigneeId, {\n            activeTasks: assignee.activeTasks - 1\n          });\n        }\n      }\n    }\n\n    return this.tasks.delete(id);\n  }\n\n  async getTaskStats(): Promise<{\n    activeTasks: number;\n    completed: number;\n    overdue: number;\n    total: number;\n  }> {\n    const allTasks = Array.from(this.tasks.values());\n    const now = new Date();\n    \n    const activeTasks = allTasks.filter(task => \n      task.status === 'pending' || task.status === 'start'\n    ).length;\n    \n    const completed = allTasks.filter(task => task.status === 'complete').length;\n    \n    const overdue = allTasks.filter(task => \n      task.dueDate && new Date(task.dueDate) < now && task.status !== 'complete'\n    ).length;\n\n    return {\n      activeTasks,\n      completed, \n      overdue,\n      total: allTasks.length\n    };\n  }\n}\n\nexport class DatabaseStorage implements IStorage {\n  constructor() {\n    this.initializeData();\n  }\n\n  private async initializeData() {\n    // Check if data already exists\n    const existingMembers = await this.getTeamMembers();\n    if (existingMembers.length === 0) {\n      await this.seedData();\n    }\n  }\n\n  private async seedData() {\n    // Add default team members\n    const defaultMembers = [\n      {\n        name: \"Sarah Chen\",\n        role: \"UI/UX Designer\",\n        email: \"sarah.chen@company.com\",\n        status: \"available\",\n        avatar: \"SC\"\n      },\n      {\n        name: \"Mike Johnson\",\n        role: \"Backend Developer\", \n        email: \"mike.johnson@company.com\",\n        status: \"busy\",\n        avatar: \"MJ\"\n      },\n      {\n        name: \"Emma Davis\",\n        role: \"Frontend Developer\",\n        email: \"emma.davis@company.com\", \n        status: \"available\",\n        avatar: \"ED\"\n      },\n      {\n        name: \"Alex Rodriguez\",\n        role: \"Product Manager\",\n        email: \"alex.rodriguez@company.com\",\n        status: \"available\", \n        avatar: \"AR\"\n      }\n    ];\n\n    for (const member of defaultMembers) {\n      await this.createTeamMember(member);\n    }\n    \n    // Create admin user if doesn't exist\n    const adminExists = await this.getUserByUsername(\"administrator\");\n    if (!adminExists) {\n      await this.createAdminUser();\n    }\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async updateUserApproval(id: string, isApproved: string): Promise<User | undefined> {\n    const [updatedUser] = await db\n      .update(users)\n      .set({ isApproved })\n      .where(eq(users.id, id))\n      .returning();\n    return updatedUser || undefined;\n  }\n\n  async createAdminUser(): Promise<User> {\n    const bcrypt = require('bcryptjs');\n    const hashedPassword = await bcrypt.hash(\"wdq@#$\", 10);\n    \n    return await this.createUser({\n      username: \"administrator\",\n      password: hashedPassword,\n      role: \"admin\",\n      isApproved: \"approved\"\n    });\n  }\n\n  // Team member methods\n  async getTeamMembers(): Promise<TeamMember[]> {\n    return await db.select().from(teamMembers);\n  }\n\n  async getTeamMember(id: string): Promise<TeamMember | undefined> {\n    const [member] = await db.select().from(teamMembers).where(eq(teamMembers.id, id));\n    return member || undefined;\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const [teamMember] = await db.insert(teamMembers).values(member).returning();\n    return teamMember;\n  }\n\n  async updateTeamMember(id: string, updates: Partial<TeamMember>): Promise<TeamMember | undefined> {\n    const [updatedMember] = await db\n      .update(teamMembers)\n      .set(updates)\n      .where(eq(teamMembers.id, id))\n      .returning();\n    return updatedMember || undefined;\n  }\n\n  async deleteTeamMember(id: string): Promise<boolean> {\n    const result = await db.delete(teamMembers).where(eq(teamMembers.id, id));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Customer methods\n  async getCustomers(): Promise<Customer[]> {\n    return await db.select().from(customers);\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    const [customer] = await db.select().from(customers).where(eq(customers.id, id));\n    return customer || undefined;\n  }\n\n  async getCustomerByName(name: string): Promise<Customer | undefined> {\n    const [customer] = await db.select().from(customers).where(eq(customers.name, name));\n    return customer || undefined;\n  }\n\n  async createCustomer(customer: InsertCustomer): Promise<Customer> {\n    const [newCustomer] = await db.insert(customers).values(customer).returning();\n    return newCustomer;\n  }\n\n  async updateCustomer(id: string, updates: Partial<Customer>): Promise<Customer | undefined> {\n    const [updatedCustomer] = await db\n      .update(customers)\n      .set(updates)\n      .where(eq(customers.id, id))\n      .returning();\n    return updatedCustomer || undefined;\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    const result = await db.delete(customers).where(eq(customers.id, id));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Task methods\n  async getTasks(): Promise<TaskWithAssignees[]> {\n    const allTasks = await db.select().from(tasks);\n    \n    // For each task, get its assignees\n    const tasksWithAssignees = await Promise.all(\n      allTasks.map(async (task) => {\n        let assignees: TeamMember[] = [];\n        if (task.assigneeIds && task.assigneeIds.length > 0) {\n          assignees = await db\n            .select()\n            .from(teamMembers)\n            .where(inArray(teamMembers.id, task.assigneeIds));\n        }\n        return { ...task, assignees };\n      })\n    );\n    \n    return tasksWithAssignees;\n  }\n\n  async getTask(id: string): Promise<TaskWithAssignees | undefined> {\n    const [task] = await db.select().from(tasks).where(eq(tasks.id, id));\n    if (!task) return undefined;\n    \n    let assignees: TeamMember[] = [];\n    if (task.assigneeIds && task.assigneeIds.length > 0) {\n      assignees = await db\n        .select()\n        .from(teamMembers)\n        .where(inArray(teamMembers.id, task.assigneeIds));\n    }\n    \n    return { ...task, assignees };\n  }\n\n  async getTasksByStatus(status: string): Promise<TaskWithAssignees[]> {\n    const statusTasks = await db.select().from(tasks).where(eq(tasks.status, status));\n    \n    const tasksWithAssignees = await Promise.all(\n      statusTasks.map(async (task) => {\n        let assignees: TeamMember[] = [];\n        if (task.assigneeIds && task.assigneeIds.length > 0) {\n          assignees = await db\n            .select()\n            .from(teamMembers)\n            .where(inArray(teamMembers.id, task.assigneeIds));\n        }\n        return { ...task, assignees };\n      })\n    );\n    \n    return tasksWithAssignees;\n  }\n\n  async getTasksByAssignee(assigneeId: string): Promise<TaskWithAssignees[]> {\n    const assigneeTasks = await db\n      .select()\n      .from(tasks)\n      .where(sql`${assigneeId} = ANY(${tasks.assigneeIds})`);\n    \n    const tasksWithAssignees = await Promise.all(\n      assigneeTasks.map(async (task) => {\n        let assignees: TeamMember[] = [];\n        if (task.assigneeIds && task.assigneeIds.length > 0) {\n          assignees = await db\n            .select()\n            .from(teamMembers)\n            .where(inArray(teamMembers.id, task.assigneeIds));\n        }\n        return { ...task, assignees };\n      })\n    );\n    \n    return tasksWithAssignees;\n  }\n\n  async createTask(task: InsertTask): Promise<TaskWithAssignees> {\n    const [newTask] = await db.insert(tasks).values(task).returning();\n\n    // Update assignees' active task counts\n    if (task.assigneeIds && task.assigneeIds.length > 0 && task.status !== 'complete') {\n      for (const assigneeId of task.assigneeIds) {\n        await db\n          .update(teamMembers)\n          .set({ activeTasks: sql`${teamMembers.activeTasks} + 1` })\n          .where(eq(teamMembers.id, assigneeId));\n      }\n    }\n\n    return (await this.getTask(newTask.id)) as TaskWithAssignees;\n  }\n\n  async updateTask(id: string, updates: UpdateTask): Promise<TaskWithAssignees | undefined> {\n    // Get the current task to compare changes\n    const currentTask = await this.getTask(id);\n    if (!currentTask) return undefined;\n\n    const [updatedTask] = await db\n      .update(tasks)\n      .set({ ...updates, updatedAt: sql`now()` })\n      .where(eq(tasks.id, id))\n      .returning();\n\n    if (!updatedTask) return undefined;\n\n    // Handle active task count updates\n    const previousStatus = currentTask.status;\n    const previousAssigneeIds = currentTask.assigneeIds || [];\n\n    // Update assignees' active task counts if status changed\n    if (updates.status && updates.status !== previousStatus) {\n      const currentAssigneeIds = updatedTask.assigneeIds || [];\n      \n      // If task completed, decrease all assignees' counts\n      if (updates.status === 'complete') {\n        for (const assigneeId of currentAssigneeIds) {\n          await db\n            .update(teamMembers)\n            .set({ activeTasks: sql`GREATEST(0, ${teamMembers.activeTasks} - 1)` })\n            .where(eq(teamMembers.id, assigneeId));\n        }\n      }\n      \n      // If task reactivated from completed, increase assignees' counts\n      if (previousStatus === 'complete' && updates.status !== 'complete') {\n        for (const assigneeId of currentAssigneeIds) {\n          await db\n            .update(teamMembers)\n            .set({ activeTasks: sql`${teamMembers.activeTasks} + 1` })\n            .where(eq(teamMembers.id, assigneeId));\n        }\n      }\n    }\n\n    // Handle assignee changes\n    if (updates.assigneeIds) {\n      const newAssigneeIds = updates.assigneeIds;\n      \n      // Decrease counts for removed assignees\n      for (const prevId of previousAssigneeIds) {\n        if (!newAssigneeIds.includes(prevId) && updatedTask.status !== 'complete') {\n          await db\n            .update(teamMembers)\n            .set({ activeTasks: sql`GREATEST(0, ${teamMembers.activeTasks} - 1)` })\n            .where(eq(teamMembers.id, prevId));\n        }\n      }\n      \n      // Increase counts for new assignees\n      for (const newId of newAssigneeIds) {\n        if (!previousAssigneeIds.includes(newId) && updatedTask.status !== 'complete') {\n          await db\n            .update(teamMembers)\n            .set({ activeTasks: sql`${teamMembers.activeTasks} + 1` })\n            .where(eq(teamMembers.id, newId));\n        }\n      }\n    }\n\n    return await this.getTask(id);\n  }\n\n  async deleteTask(id: string): Promise<boolean> {\n    const task = await this.getTask(id);\n    if (!task) return false;\n\n    // Decrease assignees' active task counts if task was active\n    if (task.assigneeIds && task.assigneeIds.length > 0 && task.status !== 'complete') {\n      for (const assigneeId of task.assigneeIds) {\n        await db\n          .update(teamMembers)\n          .set({ activeTasks: sql`GREATEST(0, ${teamMembers.activeTasks} - 1)` })\n          .where(eq(teamMembers.id, assigneeId));\n      }\n    }\n\n    const result = await db.delete(tasks).where(eq(tasks.id, id));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  async getTaskStats(): Promise<{\n    activeTasks: number;\n    completed: number;\n    overdue: number;\n    total: number;\n  }> {\n    const allTasks = await db.select().from(tasks);\n    const now = new Date();\n    \n    const activeTasks = allTasks.filter(task => \n      task.status === 'pending' || task.status === 'start'\n    ).length;\n    \n    const completed = allTasks.filter(task => task.status === 'complete').length;\n    \n    const overdue = allTasks.filter(task => \n      task.dueDate && new Date(task.dueDate) < now && task.status !== 'complete'\n    ).length;\n\n    return {\n      activeTasks,\n      completed, \n      overdue,\n      total: allTasks.length\n    };\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":24813},"server/storage.ts":{"content":"import {\n  users,\n  customers,\n  customerRatings,\n  teamMembers,\n  tasks,\n  messages,\n  notifications,\n  systemLogs,\n  whatsappSettings,\n  teamMemberPoints,\n  pointsHistory,\n  type User,\n  type InsertUser,\n  type Customer,\n  type InsertCustomer,\n  type CustomerRating,\n  type InsertCustomerRating,\n  type TeamMember,\n  type InsertTeamMember,\n  type Task,\n  type InsertTask,\n  type UpdateTask,\n  type TaskWithAssignees,\n  type Message,\n  type InsertMessage,\n  type MessageWithSender,\n  type Notification,\n  type InsertNotification,\n  type SystemLog,\n  type InsertSystemLog,\n  type WhatsAppSettings,\n  type UpsertWhatsAppSettings,\n  type TeamMemberPoints,\n  type InsertTeamMemberPoints,\n  type PointsHistory,\n  type InsertPointsHistory,\n} from \"@shared/schema\";\nimport { eq, desc, and, or, ne, sql, asc } from \"drizzle-orm\";\nimport { db } from \"./db\";\nimport bcrypt from \"bcryptjs\";\n\nexport interface IStorage {\n  // Tasks\n  getAllTasks(): Promise<TaskWithAssignees[]>;\n  getTasksForUser(userId: string): Promise<TaskWithAssignees[]>;\n  getTask(id: string): Promise<TaskWithAssignees | undefined>;\n  createTask(task: InsertTask): Promise<Task>;\n  updateTask(id: string, updates: UpdateTask): Promise<Task | undefined>;\n  deleteTask(id: string): Promise<boolean>;\n\n  // Team Members\n  getTeamMembers(): Promise<TeamMember[]>;\n  getTeamMember(id: string): Promise<TeamMember | undefined>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n  updateTeamMember(\n    id: string,\n    updates: Partial<TeamMember>,\n  ): Promise<TeamMember | undefined>;\n  deleteTeamMember(id: string): Promise<boolean>;\n\n  // Customers\n  getCustomers(): Promise<Customer[]>;\n  getCustomer(id: string): Promise<Customer | undefined>;\n  createCustomer(customer: InsertCustomer): Promise<Customer>;\n  updateCustomer(\n    id: string,\n    updates: Partial<Customer>,\n  ): Promise<Customer | undefined>;\n  deleteCustomer(id: string): Promise<boolean>;\n\n  // Customer Ratings\n  getCustomerRatings(): Promise<CustomerRating[]>;\n  getCustomerRating(id: string): Promise<CustomerRating | undefined>;\n  createCustomerRating(rating: InsertCustomerRating): Promise<CustomerRating>;\n  updateCustomerRating(id: string, updates: Partial<CustomerRating>): Promise<CustomerRating | undefined>;\n  getPendingCustomerRating(phoneNumber: string): Promise<CustomerRating | undefined>;\n\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserWithTeamMember(id: string): Promise<User & { teamMember?: TeamMember } | undefined>;\n  createUser(insertUser: InsertUser): Promise<User>;\n  getAllUsers(): Promise<User[]>;\n  updateUserApproval(id: string, isApproved: string): Promise<User | undefined>;\n  updateUserRole(id: string, role: string): Promise<User | undefined>;\n  updateUser(id: string, updates: Partial<User>): Promise<User | undefined>;\n  deleteUser(id: string): Promise<boolean>;\n  toggleUserStatus(id: string): Promise<User | undefined>;\n  \n  // Team Member by User\n  getTeamMemberByUserId(userId: string): Promise<TeamMember | undefined>;\n\n  // Messages\n  getMessages(userId1?: string, userId2?: string): Promise<MessageWithSender[]>;\n  getAllMessagesForUser(userId: string): Promise<MessageWithSender[]>;\n  createMessage(message: InsertMessage): Promise<Message>;\n  markMessageAsRead(messageId: string): Promise<Message | undefined>;\n  getUnreadMessagesCount(userId: string): Promise<number>;\n  createGroupMessageNotifications(senderId: string, messageId: string, content: string): Promise<void>;\n\n  // Notifications\n  getNotifications(userId: string): Promise<Notification[]>;\n  createNotification(notification: InsertNotification): Promise<Notification>;\n  markNotificationAsRead(notificationId: string): Promise<Notification | undefined>;\n  getUnreadNotificationsCount(userId: string): Promise<number>;\n\n  // System Logs\n  getSystemLogs(limit?: number): Promise<SystemLog[]>;\n  createSystemLog(log: InsertSystemLog): Promise<SystemLog>;\n  logUserAction(action: string, userId: string, username: string, details?: any, ipAddress?: string, userAgent?: string): Promise<void>;\n\n  // WhatsApp Settings\n  getWhatsAppSettings(): Promise<WhatsAppSettings>;\n  updateWhatsAppSettings(updates: Partial<UpsertWhatsAppSettings>): Promise<WhatsAppSettings>;\n\n  // Team Member Points\n  getTeamMemberPoints(teamMemberId: string): Promise<TeamMemberPoints | undefined>;\n  getAllTeamMemberPoints(): Promise<(TeamMemberPoints & { teamMember: TeamMember })[]>;\n  initializeTeamMemberPoints(teamMemberId: string): Promise<TeamMemberPoints>;\n  addPointsToTeamMember(teamMemberId: string, points: number, reason: string, taskId?: string, ratingId?: string, performedBy?: string): Promise<void>;\n  resetTeamMemberPoints(teamMemberId: string, performedBy: string): Promise<void>;\n  resetAllTeamMemberPoints(performedBy: string): Promise<void>;\n\n  // Points History\n  getPointsHistory(teamMemberId?: string, limit?: number): Promise<(PointsHistory & { teamMember: TeamMember; performedByUser?: User })[]>;\n  \n  // Backup and Export methods\n  getAllUsers(): Promise<User[]>;\n  getAllCustomers(): Promise<Customer[]>;\n  getAllMessages(): Promise<Message[]>;\n  getAllNotifications(): Promise<Notification[]>;\n  getAllSystemLogs(): Promise<SystemLog[]>;\n  getAllCustomerRatings(): Promise<CustomerRating[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  constructor() {\n    this.initializeData();\n  }\n\n  private async initializeData() {\n    try {\n      // Check if essential users exist and create them if needed\n      const adminExists = await this.getUserByUsername(\"admin\");\n      const supervisorExists = await this.getUserByUsername(\"supervisor\");\n      const user1Exists = await this.getUserByUsername(\"user1\");\n      \n      if (!adminExists) {\n        const hashedPassword = await bcrypt.hash(\"123456\", 10);\n        await this.createUser({\n          username: \"admin\",\n          password: hashedPassword,\n          role: \"admin\",\n          isApproved: \"approved\"\n        });\n        console.log(\"✅ تم إنشاء المدير: admin/123456\");\n      }\n\n      if (!supervisorExists) {\n        const hashedPassword = await bcrypt.hash(\"123456\", 10);\n        await this.createUser({\n          username: \"supervisor\", \n          password: hashedPassword,\n          role: \"supervisor\",\n          isApproved: \"approved\"\n        });\n        console.log(\"✅ تم إنشاء المشرف: supervisor/123456\");\n      }\n\n      if (!user1Exists) {\n        const hashedPassword = await bcrypt.hash(\"123456\", 10);\n        await this.createUser({\n          username: \"user1\",\n          password: hashedPassword, \n          role: \"user\",\n          isApproved: \"approved\"\n        });\n        console.log(\"✅ تم إنشاء المستخدم: user1/123456\");\n      }\n\n      // Create default team members if none exist\n      const existingMembers = await this.getTeamMembers();\n      if (existingMembers.length === 0) {\n        await this.createDefaultMembers();\n      }\n    } catch (error) {\n      console.error(\"Error initializing data:\", error);\n    }\n  }\n\n  // Removed old createAdminUser method - now using initializeData\n\n  private async createDefaultMembers() {\n    const defaultMembers = [\n      {\n        name: \"Sarah Thompson\",\n        role: \"Project Manager\", \n        email: \"sarah.thompson@company.com\",\n        status: \"available\",\n        avatar: \"ST\"\n      },\n      {\n        name: \"Mike Johnson\",\n        role: \"Backend Developer\", \n        email: \"mike.johnson@company.com\",\n        status: \"busy\",\n        avatar: \"MJ\"\n      },\n      {\n        name: \"Emma Davis\",\n        role: \"Frontend Developer\",\n        email: \"emma.davis@company.com\", \n        status: \"available\",\n        avatar: \"ED\"\n      },\n      {\n        name: \"Alex Rodriguez\",\n        role: \"Product Manager\",\n        email: \"alex.rodriguez@company.com\",\n        status: \"available\", \n        avatar: \"AR\"\n      }\n    ];\n\n    for (const member of defaultMembers) {\n      await this.createTeamMember(member);\n    }\n  }\n\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const hashedPassword = await bcrypt.hash(insertUser.password, 10);\n    const userData = { ...insertUser, password: hashedPassword };\n    \n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .returning();\n    \n    // Create corresponding team member for this user\n    const teamMemberRole = \n      insertUser.role === 'admin' ? 'مدير النظام' : \n      insertUser.role === 'supervisor' ? 'مشرف' : \n      'عضو فريق';\n      \n    await this.createTeamMember({\n      userId: user.id,\n      name: insertUser.username,\n      role: teamMemberRole,\n      email: `${insertUser.username}@company.com`,\n      status: 'available',\n      avatar: insertUser.username.charAt(0).toUpperCase(),\n    });\n    \n    return user;\n  }\n\n  async getUserWithTeamMember(id: string): Promise<User & { teamMember?: TeamMember } | undefined> {\n    const user = await this.getUser(id);\n    if (!user) return undefined;\n    \n    const teamMember = await this.getTeamMemberByUserId(id);\n    return { ...user, teamMember };\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async updateUserApproval(id: string, isApproved: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ isApproved })\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  async updateUserRole(id: string, role: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ role })\n      .where(eq(users.id, id))\n      .returning();\n    \n    // Update corresponding team member role\n    if (user) {\n      const teamMemberRole = \n        role === 'admin' ? 'مدير النظام' : \n        role === 'supervisor' ? 'مشرف' : \n        'عضو فريق';\n        \n      await db\n        .update(teamMembers)\n        .set({ role: teamMemberRole })\n        .where(eq(teamMembers.userId, user.id));\n    }\n    \n    return user;\n  }\n\n  async updateUser(id: string, updates: Partial<User>): Promise<User | undefined> {\n    try {\n      const [updatedUser] = await db\n        .update(users)\n        .set(updates)\n        .where(eq(users.id, id))\n        .returning();\n\n      return updatedUser;\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      return undefined;\n    }\n  }\n\n\n\n  // Team Member by User\n  async getTeamMemberByUserId(userId: string): Promise<TeamMember | undefined> {\n    const [member] = await db.select().from(teamMembers).where(eq(teamMembers.userId, userId));\n    return member;\n  }\n\n  // Team member methods\n  async getTeamMembers(): Promise<TeamMember[]> {\n    return await db.select().from(teamMembers);\n  }\n\n  async getTeamMember(id: string): Promise<TeamMember | undefined> {\n    const [member] = await db.select().from(teamMembers).where(eq(teamMembers.id, id));\n    return member;\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const [teamMember] = await db\n      .insert(teamMembers)\n      .values(member)\n      .returning();\n    return teamMember;\n  }\n\n  async updateTeamMember(\n    id: string,\n    updates: Partial<TeamMember>,\n  ): Promise<TeamMember | undefined> {\n    const [updated] = await db\n      .update(teamMembers)\n      .set(updates)\n      .where(eq(teamMembers.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteTeamMember(id: string): Promise<boolean> {\n    const result = await db.delete(teamMembers).where(eq(teamMembers.id, id));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Customer methods\n  async getCustomers(): Promise<Customer[]> {\n    return await db.select().from(customers);\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    const [customer] = await db.select().from(customers).where(eq(customers.id, id));\n    return customer;\n  }\n\n  async createCustomer(customer: InsertCustomer): Promise<Customer> {\n    const [newCustomer] = await db\n      .insert(customers)\n      .values(customer)\n      .returning();\n    return newCustomer;\n  }\n\n  async updateCustomer(\n    id: string,\n    updates: Partial<Customer>,\n  ): Promise<Customer | undefined> {\n    const [updated] = await db\n      .update(customers)\n      .set(updates)\n      .where(eq(customers.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    const result = await db.delete(customers).where(eq(customers.id, id));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Task methods\n  async getTasksForUser(userId: string): Promise<TaskWithAssignees[]> {\n    // Get team member ID for this user\n    const teamMember = await this.getTeamMemberByUserId(userId);\n    if (!teamMember) return [];\n    \n    // Get all tasks assigned to this team member\n    const allTasks = await db.select().from(tasks).orderBy(desc(tasks.createdAt));\n    \n    // Filter tasks where this team member is assigned\n    const userTasks = allTasks.filter(task => \n      task.assigneeIds && task.assigneeIds.includes(teamMember.id)\n    );\n    \n    // Get assignees for each task\n    const tasksWithAssignees = await Promise.all(\n      userTasks.map(async (task) => {\n        if (!task.assigneeIds || task.assigneeIds.length === 0) {\n          return { ...task, assignees: [] };\n        }\n        \n        const assignees = await Promise.all(\n          task.assigneeIds.map(async (assigneeId) => {\n            const member = await this.getTeamMember(assigneeId);\n            return member;\n          })\n        );\n        \n        return {\n          ...task,\n          assignees: assignees.filter((assignee): assignee is TeamMember => assignee !== undefined),\n        };\n      })\n    );\n    \n    return tasksWithAssignees;\n  }\n\n  async getAllTasks(): Promise<TaskWithAssignees[]> {\n    try {\n      const allTasks = await db.select().from(tasks).orderBy(desc(tasks.createdAt));\n      const allMembers = await this.getTeamMembers();\n\n      return allTasks.map((task) => ({\n        ...task,\n        assignees: task.assigneeIds && Array.isArray(task.assigneeIds)\n          ? task.assigneeIds\n              .map((id) => allMembers.find((member) => member.id === id))\n              .filter(Boolean) as TeamMember[]\n          : [],\n      }));\n    } catch (error) {\n      console.error(\"Error in getAllTasks:\", error);\n      throw error;\n    }\n  }\n\n  async getTask(id: string): Promise<TaskWithAssignees | undefined> {\n    const [task] = await db.select().from(tasks).where(eq(tasks.id, id));\n    if (!task) return undefined;\n\n    const allMembers = await this.getTeamMembers();\n    return {\n      ...task,\n      assignees: task.assigneeIds\n        ? task.assigneeIds\n            .map((id) => allMembers.find((member) => member.id === id))\n            .filter(Boolean) as TeamMember[]\n        : [],\n    };\n  }\n\n  // دالة توليد رقم المهمة التسلسلي\n  private async generateTaskNumber(): Promise<string> {\n    const currentYear = new Date().getFullYear();\n    const allTasks = await db.select({ taskNumber: tasks.taskNumber }).from(tasks);\n    \n    // البحث عن أعلى رقم في السنة الحالية\n    const currentYearTasks = allTasks\n      .filter(task => task.taskNumber && task.taskNumber.startsWith(currentYear.toString()))\n      .map(task => parseInt(task.taskNumber!.split('-')[1] || '0'))\n      .filter(num => !isNaN(num));\n    \n    const nextNumber = currentYearTasks.length > 0 ? Math.max(...currentYearTasks) + 1 : 1;\n    return `${currentYear}-${nextNumber.toString().padStart(3, '0')}`;\n  }\n\n  async createTask(task: InsertTask): Promise<Task> {\n    // توليد رقم المهمة التسلسلي\n    const taskNumber = await this.generateTaskNumber();\n    \n    const [newTask] = await db\n      .insert(tasks)\n      .values({ ...task, taskNumber })\n      .returning();\n    return newTask;\n  }\n\n  async updateTask(id: string, updates: UpdateTask): Promise<Task | undefined> {\n    const [updated] = await db\n      .update(tasks)\n      .set(updates)\n      .where(eq(tasks.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteTask(id: string): Promise<boolean> {\n    const result = await db.delete(tasks).where(eq(tasks.id, id));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Message methods\n  async getMessages(userId1?: string, userId2?: string): Promise<MessageWithSender[]> {\n    let query = db.select().from(messages).orderBy(desc(messages.createdAt));\n    \n    if (userId1 && userId2) {\n      // Get messages between two specific users\n      query = query.where(\n        and(\n          eq(messages.senderId, userId1),\n          eq(messages.receiverId, userId2)\n        )\n      ) as any;\n    } else if (userId1) {\n      // Get all messages for a user (sent or received)\n      query = query.where(\n        eq(messages.senderId, userId1)\n      ) as any;\n    }\n    \n    const allMessages = await query;\n    const allMembers = await this.getTeamMembers();\n    const allUsers = await this.getAllUsers();\n    \n    return allMessages.map((message) => {\n      let sender = allMembers.find(member => member.id === message.senderId) || \n                  allUsers.find(user => user.id === message.senderId);\n      return {\n        ...message,\n        sender\n      };\n    });\n  }\n\n  async getAllMessagesForUser(userId: string): Promise<MessageWithSender[]> {\n    try {\n      let query = db.select().from(messages).orderBy(desc(messages.createdAt));\n      \n      // Get messages where user is receiver (private messages) or all group messages not sent by user\n      query = query.where(\n        or(\n          eq(messages.receiverId, userId), // Private messages to user\n          and(eq(messages.messageScope, \"group\"), ne(messages.senderId, userId)) // Group messages not sent by user\n        )\n      ) as any;\n      \n      const allMessages = await query;\n      const allMembers = await this.getTeamMembers();\n      const allUsers = await this.getAllUsers();\n      \n      return allMessages.map((message) => {\n        let sender = allMembers.find(member => member.id === message.senderId) || \n                    allUsers.find(user => user.id === message.senderId);\n        return {\n          ...message,\n          sender\n        };\n      });\n    } catch (error) {\n      console.error(\"Error getting all messages for user:\", error);\n      return [];\n    }\n  }\n\n  async createMessage(message: InsertMessage): Promise<Message> {\n    const [newMessage] = await db\n      .insert(messages)\n      .values(message)\n      .returning();\n    \n    // Create notification for receiver if it's a direct message\n    if (message.receiverId && message.messageScope === \"private\") {\n      await this.createNotification({\n        userId: message.receiverId,\n        title: \"رسالة جديدة\",\n        content: \"لديك رسالة جديدة\",\n        type: \"new_message\",\n        relatedId: newMessage.id\n      });\n    }\n    \n    return newMessage;\n  }\n\n  async createGroupMessageNotifications(senderId: string, messageId: string, content: string): Promise<void> {\n    try {\n      // Get all users except the sender\n      const allUsers = await db.select({ id: users.id })\n        .from(users)\n        .where(and(ne(users.id, senderId), eq(users.isApproved, \"approved\")));\n\n      // Create notification for each user\n      for (const user of allUsers) {\n        await this.createNotification({\n          userId: user.id,\n          title: \"رسالة جماعية جديدة\",\n          content: `رسالة جماعية: ${content.substring(0, 50)}${content.length > 50 ? '...' : ''}`,\n          type: \"new_message\",\n          relatedId: messageId\n        });\n      }\n    } catch (error) {\n      console.error(\"Error creating group message notifications:\", error);\n    }\n  }\n\n  async markMessageAsRead(messageId: string): Promise<Message | undefined> {\n    const [updated] = await db\n      .update(messages)\n      .set({ isRead: \"true\" })\n      .where(eq(messages.id, messageId))\n      .returning();\n    return updated;\n  }\n\n  async getUnreadMessagesCount(userId: string): Promise<number> {\n    const unreadMessages = await db.select()\n      .from(messages)\n      .where(\n        and(\n          eq(messages.receiverId, userId),\n          eq(messages.isRead, \"false\")\n        )\n      );\n    return unreadMessages.length;\n  }\n\n  async getConversationMessages(userId1: string, userId2: string): Promise<MessageWithSender[]> {\n    try {\n      const query = db.select().from(messages).where(\n        or(\n          and(eq(messages.senderId, userId1), eq(messages.receiverId, userId2)),\n          and(eq(messages.senderId, userId2), eq(messages.receiverId, userId1))\n        )\n      ).orderBy(asc(messages.createdAt));\n      \n      const conversationMessages = await query;\n      const allMembers = await this.getTeamMembers();\n      const allUsers = await this.getAllUsers();\n      \n      return conversationMessages.map((message) => {\n        let sender = allMembers.find(member => member.id === message.senderId) || \n                    allUsers.find(user => user.id === message.senderId);\n        return {\n          ...message,\n          sender\n        };\n      });\n    } catch (error) {\n      console.error(\"Error getting conversation messages:\", error);\n      return [];\n    }\n  }\n\n  async getGroupMessages(): Promise<MessageWithSender[]> {\n    try {\n      const query = db.select().from(messages).where(\n        eq(messages.messageScope, \"group\")\n      ).orderBy(asc(messages.createdAt));\n      \n      const groupMessages = await query;\n      const allMembers = await this.getTeamMembers();\n      const allUsers = await this.getAllUsers();\n      \n      return groupMessages.map((message) => {\n        let sender = allMembers.find(member => member.id === message.senderId) || \n                    allUsers.find(user => user.id === message.senderId);\n        return {\n          ...message,\n          sender\n        };\n      });\n    } catch (error) {\n      console.error(\"Error getting group messages:\", error);\n      return [];\n    }\n  }\n\n  // Notification methods\n  async getNotifications(userId: string): Promise<Notification[]> {\n    return await db.select()\n      .from(notifications)\n      .where(eq(notifications.userId, userId))\n      .orderBy(desc(notifications.createdAt));\n  }\n\n  async createNotification(notification: InsertNotification): Promise<Notification> {\n    const [newNotification] = await db\n      .insert(notifications)\n      .values(notification)\n      .returning();\n    return newNotification;\n  }\n\n  async markNotificationAsRead(notificationId: string): Promise<Notification | undefined> {\n    const [updated] = await db\n      .update(notifications)\n      .set({ isRead: \"true\" })\n      .where(eq(notifications.id, notificationId))\n      .returning();\n    return updated;\n  }\n\n  async getUnreadNotificationsCount(userId: string): Promise<number> {\n    const unreadNotifications = await db.select()\n      .from(notifications)\n      .where(\n        and(\n          eq(notifications.userId, userId),\n          eq(notifications.isRead, \"false\")\n        )\n      );\n    return unreadNotifications.length;\n  }\n\n  // Helper method to create task notifications\n  async createTaskNotifications(task: Task, type: string): Promise<void> {\n    if (task.assigneeIds && task.assigneeIds.length > 0) {\n      const teamMembers = await this.getTeamMembers();\n      \n      for (const assigneeId of task.assigneeIds) {\n        const assignee = teamMembers.find(member => member.id === assigneeId);\n        if (assignee && assignee.userId) {\n          let title = \"\";\n          let content = \"\";\n          \n          switch (type) {\n            case \"task_assigned\":\n              title = \"مهمة جديدة\";\n              content = `تم تكليفك بمهمة جديدة: ${task.title}`;\n              break;\n            case \"task_updated\":\n              title = \"تحديث مهمة\";\n              content = `تم تحديث المهمة: ${task.title}`;\n              break;\n            case \"task_overdue\":\n              title = \"مهمة متأخرة\";\n              content = `المهمة ${task.title} متأخرة عن الموعد المحدد`;\n              break;\n          }\n          \n          // إرسال الإشعار إلى معرف المستخدم وليس معرف عضو الفريق\n          await this.createNotification({\n            userId: assignee.userId, // استخدام userId بدلاً من assigneeId\n            title,\n            content,\n            type: type as any,\n            relatedId: task.id\n          });\n        }\n      }\n    }\n  }\n\n  // System Logs methods\n  async getSystemLogs(limit: number = 100): Promise<SystemLog[]> {\n    return await db.select()\n      .from(systemLogs)\n      .orderBy(desc(systemLogs.timestamp))\n      .limit(limit);\n  }\n\n  async createSystemLog(log: InsertSystemLog): Promise<SystemLog> {\n    const [systemLog] = await db.insert(systemLogs).values(log).returning();\n    return systemLog;\n  }\n\n  async logUserAction(\n    action: string,\n    userId: string,\n    username: string,\n    details?: any,\n    ipAddress?: string,\n    userAgent?: string\n  ): Promise<void> {\n    await this.createSystemLog({\n      action,\n      userId,\n      username,\n      details: details ? JSON.stringify(details) : null,\n      ipAddress,\n      userAgent,\n    });\n  }\n\n  // Customer Ratings methods\n  async getCustomerRatings(): Promise<CustomerRating[]> {\n    return await db.select().from(customerRatings).orderBy(desc(customerRatings.createdAt));\n  }\n\n  async getCustomerRating(id: string): Promise<CustomerRating | undefined> {\n    const [rating] = await db.select().from(customerRatings).where(eq(customerRatings.id, id));\n    return rating;\n  }\n\n  async createCustomerRating(rating: InsertCustomerRating): Promise<CustomerRating> {\n    const [newRating] = await db\n      .insert(customerRatings)\n      .values(rating)\n      .returning();\n    return newRating;\n  }\n\n  async updateCustomerRating(id: string, updates: Partial<CustomerRating>): Promise<CustomerRating | undefined> {\n    const [updated] = await db\n      .update(customerRatings)\n      .set(updates)\n      .where(eq(customerRatings.id, id))\n      .returning();\n    return updated;\n  }\n\n  async getPendingCustomerRating(phoneNumber: string): Promise<CustomerRating | undefined> {\n    const [rating] = await db\n      .select()\n      .from(customerRatings)\n      .where(\n        and(\n          eq(customerRatings.customerPhone, phoneNumber),\n          eq(customerRatings.messageSent, \"true\"),\n          eq(customerRatings.responseReceived, \"false\")\n        )\n      )\n      .orderBy(desc(customerRatings.createdAt))\n      .limit(1);\n    return rating;\n  }\n\n  // WhatsApp Settings\n  async getWhatsAppSettings(): Promise<WhatsAppSettings> {\n    const [settings] = await db\n      .select()\n      .from(whatsappSettings)\n      .where(eq(whatsappSettings.id, \"default\"))\n      .limit(1);\n    \n    if (!settings) {\n      // Create default settings if they don't exist\n      const [newSettings] = await db\n        .insert(whatsappSettings)\n        .values({\n          id: \"default\",\n          defaultMessage: `مرحباً {customerName}\n\n✅ تم إتمام مهمة \"{taskTitle}\" بنجاح من قبل شركة اشراق الودق لتكنولوجيا المعلومات.\n\n🌟 نرجو تقييم مستوى رضاكم عن أدائنا:\n\nرد برقم واحد فقط:\n1️⃣ - غاضب 😠\n2️⃣ - راضي 😊  \n3️⃣ - راضي جدا 😍\n\nشكراً لثقتكم بنا 🙏`,\n          senderName: \"شركة اشراق الودق لتكنولوجيا المعلومات\",\n          autoSend: true\n        })\n        .returning();\n      return newSettings;\n    }\n    \n    return settings;\n  }\n\n  async updateWhatsAppSettings(updates: Partial<UpsertWhatsAppSettings>): Promise<WhatsAppSettings> {\n    const [updated] = await db\n      .update(whatsappSettings)\n      .set({\n        ...updates,\n        updatedAt: new Date()\n      })\n      .where(eq(whatsappSettings.id, \"default\"))\n      .returning();\n    \n    if (!updated) {\n      // If no record was updated, create a new one\n      const [newSettings] = await db\n        .insert(whatsappSettings)\n        .values({\n          id: \"default\",\n          ...updates\n        })\n        .returning();\n      return newSettings;\n    }\n    \n    return updated;\n  }\n\n  // Team Member Points\n  async getTeamMemberPoints(teamMemberId: string): Promise<TeamMemberPoints | undefined> {\n    const [points] = await db\n      .select()\n      .from(teamMemberPoints)\n      .where(eq(teamMemberPoints.teamMemberId, teamMemberId));\n    return points;\n  }\n\n  async getAllTeamMemberPoints(): Promise<(TeamMemberPoints & { teamMember: TeamMember })[]> {\n    const result = await db\n      .select()\n      .from(teamMemberPoints)\n      .innerJoin(teamMembers, eq(teamMemberPoints.teamMemberId, teamMembers.id))\n      .orderBy(desc(teamMemberPoints.points), teamMembers.name);\n    \n    return result.map(row => ({\n      ...row.team_member_points,\n      teamMember: row.team_members\n    }));\n  }\n\n  async initializeTeamMemberPoints(teamMemberId: string): Promise<TeamMemberPoints> {\n    const existing = await this.getTeamMemberPoints(teamMemberId);\n    if (existing) return existing;\n\n    const [newPoints] = await db\n      .insert(teamMemberPoints)\n      .values({\n        teamMemberId,\n        points: 0,\n        totalEarned: 0\n      })\n      .returning();\n    \n    return newPoints;\n  }\n\n  async addPointsToTeamMember(\n    teamMemberId: string, \n    points: number, \n    reason: string, \n    taskId?: string, \n    ratingId?: string, \n    performedBy?: string\n  ): Promise<void> {\n    // تأكد من وجود سجل النقاط\n    await this.initializeTeamMemberPoints(teamMemberId);\n\n    // تحديث النقاط\n    await db\n      .update(teamMemberPoints)\n      .set({\n        points: sql`${teamMemberPoints.points} + ${points}`,\n        totalEarned: sql`${teamMemberPoints.totalEarned} + ${points}`,\n        lastUpdated: new Date()\n      })\n      .where(eq(teamMemberPoints.teamMemberId, teamMemberId));\n\n    // إضافة سجل في التاريخ\n    await db\n      .insert(pointsHistory)\n      .values({\n        teamMemberId,\n        action: 'earned',\n        pointsChange: points,\n        reason,\n        taskId,\n        ratingId,\n        performedBy\n      });\n  }\n\n  async resetTeamMemberPoints(teamMemberId: string, performedBy: string): Promise<void> {\n    // الحصول على النقاط الحالية\n    const currentPoints = await this.getTeamMemberPoints(teamMemberId);\n    const pointsToReset = currentPoints?.points || 0;\n\n    // تصفير النقاط\n    await db\n      .update(teamMemberPoints)\n      .set({\n        points: 0,\n        lastUpdated: new Date(),\n        updatedBy: performedBy\n      })\n      .where(eq(teamMemberPoints.teamMemberId, teamMemberId));\n\n    // إضافة سجل في التاريخ\n    if (pointsToReset > 0) {\n      await db\n        .insert(pointsHistory)\n        .values({\n          teamMemberId,\n          action: 'reset',\n          pointsChange: -pointsToReset,\n          reason: 'admin_reset',\n          performedBy\n        });\n    }\n  }\n\n  async resetAllTeamMemberPoints(performedBy: string): Promise<void> {\n    // الحصول على جميع النقاط\n    const allPoints = await this.getAllTeamMemberPoints();\n\n    // تصفير جميع النقاط\n    await db\n      .update(teamMemberPoints)\n      .set({\n        points: 0,\n        lastUpdated: new Date(),\n        updatedBy: performedBy\n      });\n\n    // إضافة سجل لكل عضو\n    for (const point of allPoints) {\n      if ((point.points || 0) > 0) {\n        await db\n          .insert(pointsHistory)\n          .values({\n            teamMemberId: point.teamMemberId,\n            action: 'reset',\n            pointsChange: -(point.points || 0),\n            reason: 'admin_reset_all',\n            performedBy\n          });\n      }\n    }\n  }\n\n  // Points History\n  async getPointsHistory(teamMemberId?: string, limit: number = 50): Promise<(PointsHistory & { teamMember: TeamMember; performedByUser?: User })[]> {\n    let baseQuery = db\n      .select()\n      .from(pointsHistory)\n      .innerJoin(teamMembers, eq(pointsHistory.teamMemberId, teamMembers.id))\n      .leftJoin(users, eq(pointsHistory.performedBy, users.id))\n      .orderBy(desc(pointsHistory.createdAt));\n\n    let result;\n    if (teamMemberId) {\n      result = await baseQuery\n        .where(eq(pointsHistory.teamMemberId, teamMemberId))\n        .limit(limit);\n    } else {\n      result = await baseQuery.limit(limit);\n    }\n    \n    return result.map(row => ({\n      ...row.points_history,\n      teamMember: row.team_members,\n      performedByUser: row.users || undefined\n    }));\n  }\n  // Backup and Export implementations\n  async getAllCustomers(): Promise<Customer[]> {\n    return await db.select().from(customers);\n  }\n\n  async getAllMessages(): Promise<Message[]> {\n    return await db.select().from(messages).orderBy(desc(messages.createdAt));\n  }\n\n  async getAllNotifications(): Promise<Notification[]> {\n    return await db.select().from(notifications).orderBy(desc(notifications.createdAt));\n  }\n\n  async getAllSystemLogs(): Promise<SystemLog[]> {\n    return await db.select().from(systemLogs).orderBy(desc(systemLogs.timestamp));\n  }\n\n  async getAllCustomerRatings(): Promise<CustomerRating[]> {\n    return await db.select().from(customerRatings).orderBy(desc(customerRatings.createdAt));\n  }\n\n  // Delete user completely\n  async deleteUser(id: string): Promise<boolean> {\n    try {\n      // First get the user to check if they have a linked team member\n      const user = await this.getUser(id);\n      if (!user) {\n        return false;\n      }\n\n      // Find and delete associated team member if exists\n      const teamMember = await this.getTeamMemberByUserId(id);\n      if (teamMember) {\n        await this.deleteTeamMember(teamMember.id);\n      }\n\n      // Delete user from database\n      const result = await db.delete(users).where(eq(users.id, id));\n      return result.rowCount ? result.rowCount > 0 : false;\n    } catch (error) {\n      console.error(\"Error deleting user:\", error);\n      return false;\n    }\n  }\n\n  // Toggle user active status\n  async toggleUserStatus(id: string): Promise<User | undefined> {\n    try {\n      // First get current user status\n      const user = await this.getUser(id);\n      if (!user) {\n        return undefined;\n      }\n\n      // Toggle the status\n      const newStatus = user.isActive === \"true\" ? \"false\" : \"true\";\n      \n      const [updated] = await db\n        .update(users)\n        .set({ isActive: newStatus })\n        .where(eq(users.id, id))\n        .returning();\n      \n      return updated;\n    } catch (error) {\n      console.error(\"Error toggling user status:\", error);\n      return undefined;\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();","size_bytes":35308},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"server/whatsapp-service.ts":{"content":"import { storage } from './storage';\n\n// تعريف المتغيرات للمكتبات\nlet whatsappWebJs: any;\nlet qrcodeTerminal: any;\n\nexport class WhatsAppService {\n  private client: any;\n  private isReady = false;\n  private isInitialized = false;\n  private senderNumber: string | null = null;\n  private currentQRCode: string | null = null;\n  private isRealMode = false; // متغير للتحكم في وضع الواتساب\n\n  constructor() {\n    // Empty constructor - actual initialization happens in initialize()\n  }\n\n  private async loadDependencies() {\n    if (!whatsappWebJs) {\n      try {\n        console.log('📦 بدء تحميل مكتبات whatsapp-web.js...');\n        \n        // تحقق من البيئة أولاً\n        const isReplit = process.env.REPL_ID !== undefined;\n        const memoryUsage = process.memoryUsage();\n        console.log(`💾 استخدام الذاكرة: ${Math.round(memoryUsage.heapUsed / 1024 / 1024)}MB`);\n        console.log(`🌐 البيئة: ${isReplit ? 'Replit' : 'محلي'}`);\n        \n        if (isReplit) {\n          console.log('⚠️ تحذير: في بيئة Replit المجانية، قد يفشل تحميل مكتبات الواتساب بسبب قيود الذاكرة');\n        }\n        \n        whatsappWebJs = await import('whatsapp-web.js');\n        qrcodeTerminal = await import('qrcode-terminal');\n        \n        console.log('✅ تم تحميل مكتبات الواتساب بنجاح');\n        \n        if (isReplit && memoryUsage.heapUsed > 100 * 1024 * 1024) {\n          console.warn('⚠️ تحذير: استخدام ذاكرة عالي في بيئة Replit المجانية - قد تحتاج خطة مدفوعة');\n        }\n        \n      } catch (error) {\n        console.error('❌ خطأ في تحميل مكتبات الواتساب:', error);\n        console.error('💡 نصيحة: في بيئة Replit المجانية، قد تحتاج ترقية للخطة المدفوعة لتشغيل الواتساب الحقيقي');\n        throw error;\n      }\n    }\n  }\n\n  private initializeClient() {\n    try {\n      const { Client, LocalAuth } = whatsappWebJs;\n      \n      this.client = new Client({\n        authStrategy: new LocalAuth({\n          clientId: \"taskflow-whatsapp-client\"\n        }),\n        puppeteer: {\n          headless: true,\n          args: [\n            '--no-sandbox',\n            '--disable-setuid-sandbox',\n            '--disable-dev-shm-usage',\n            '--disable-accelerated-2d-canvas',\n            '--no-first-run',\n            '--no-zygote',\n            '--single-process',\n            '--disable-gpu',\n            '--disable-web-security',\n            '--disable-features=VizDisplayCompositor'\n          ]\n        }\n      });\n\n      this.setupEventHandlers();\n      console.log('✅ تم إنشاء عميل الواتساب بنجاح');\n    } catch (error) {\n      console.error('❌ خطأ في إنشاء عميل الواتساب:', error);\n      throw error;\n    }\n  }\n\n  private setupEventHandlers() {\n    this.client.on('qr', (qr: string) => {\n      console.log('\\n🔗 تم إنشاء رمز QR حقيقي للواتساب:');\n      const qrcodeGenerator = qrcodeTerminal.default || qrcodeTerminal;\n      qrcodeGenerator.generate(qr, { small: true });\n      console.log('\\n📱 امسح الرمز أعلاه بكاميرا واتساب على هاتفك');\n      console.log('💡 رمز QR الحقيقي متاح الآن في واجهة الويب أيضاً\\n');\n      \n      // حفظ رمز QR الحقيقي للعرض في واجهة الويب\n      this.currentQRCode = qr;\n      console.log('✅ تم حفظ رمز QR الحقيقي للعرض في الواجهة');\n    });\n\n    this.client.on('ready', () => {\n      console.log('✅ خدمة الواتساب جاهزة ومتصلة!');\n      this.isReady = true;\n      this.currentQRCode = null; // إزالة رمز QR بعد الاتصال الناجح\n      // الحصول على رقم الواتساب المتصل\n      this.getSenderNumber();\n    });\n\n    this.client.on('authenticated', () => {\n      console.log('🔐 تم التوثيق مع واتساب بنجاح');\n    });\n\n    this.client.on('disconnected', (reason: string) => {\n      console.log('❌ انقطع الاتصال مع واتساب:', reason);\n      this.isReady = false;\n    });\n\n    // استقبال الردود من العملاء\n    this.client.on('message', async (message: any) => {\n      await this.handleIncomingMessage(message);\n    });\n  }\n\n  private async getSenderNumber() {\n    try {\n      const info = await this.client.info;\n      this.senderNumber = info.wid.user;\n      console.log(`📱 رقم الواتساب المتصل: ${this.senderNumber}`);\n    } catch (error) {\n      console.error('❌ خطأ في الحصول على رقم المرسل:', error);\n    }\n  }\n\n  async initialize() {\n    try {\n      console.log('🚀 محاولة ربط الواتساب...');\n      \n      console.log(`🔧 وضع الواتساب: ${this.isRealMode ? 'حقيقي' : 'محاكاة'}`);\n      \n      if (this.isRealMode) {\n        console.log('🔄 تحميل مكتبات الواتساب الحقيقي...');\n        await this.loadDependencies();\n        this.initializeClient();\n        console.log('🚀 بدء تشغيل الواتساب الحقيقي...');\n        await this.client.initialize();\n        this.isInitialized = true;\n        console.log('✅ تم تشغيل الواتساب الحقيقي بنجاح!');\n      } else {\n        // محاكاة ربط الواتساب مع إظهار QR Code\n        this.showFakeQRCode();\n        \n        // تأخير قصير لمحاكاة عملية الاتصال\n        setTimeout(() => {\n          console.log('✅ تم ربط الواتساب بنجاح! (محاكاة)');\n          console.log('📱 رقم الواتساب المتصل: 966501234567 (محاكاة)');\n          this.isReady = true;\n          this.senderNumber = '966501234567';\n          this.currentQRCode = null; // إزالة رمز QR بعد الاتصال الناجح\n        }, 3000);\n      }\n      \n    } catch (error) {\n      console.error('❌ خطأ في تشغيل خدمة الواتساب:', error);\n      // في حالة الفشل، نجعل النظام جاهزاً كمحاكاة\n      this.isReady = true;\n      this.senderNumber = '966501234567';\n    }\n  }\n\n  // إعادة تشغيل الواتساب وتجديد QR Code\n  async restart() {\n    try {\n      console.log('🔄 إعادة تشغيل خدمة الواتساب...');\n      \n      if (this.client) {\n        console.log('🛑 إيقاف العميل الحالي...');\n        await this.client.destroy();\n      }\n      \n      this.isReady = false;\n      this.isInitialized = false;\n      this.currentQRCode = null;\n      this.senderNumber = null;\n      this.client = null;\n      \n      // انتظار قصير للتأكد من إنهاء العملية السابقة\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // إعادة التشغيل\n      console.log('🔄 بدء إعادة التشغيل...');\n      await this.initialize();\n      \n    } catch (error) {\n      console.error('❌ خطأ في إعادة تشغيل الواتساب:', error);\n    }\n  }\n\n  private showFakeQRCode() {\n    // إنشاء رمز QR تجريبي للاختبار مع timestamp جديد\n    const timestamp = Date.now();\n    this.currentQRCode = `https://wa.me/qr/DEMO${timestamp}TEST`;\n    \n    console.log('\\n🔗 امسح رمز QR للاتصال بواتساب:');\n    console.log('████████████████████████████████');\n    console.log('██ ▄▄▄▄▄ █▀█ █▄▀▄▀▄▄▄█ ▄▄▄▄▄ ██');\n    console.log('██ █   █ █▀▀▀█ ▄▄  ▄▄█ █   █ ██');\n    console.log('██ █▄▄▄█ █▀ █▀ ▀▀▀ ▄▀█ █▄▄▄█ ██');\n    console.log('██▄▄▄▄▄▄▄█▄▀ ▀▄█▄█ █▄█▄▄▄▄▄▄▄██');\n    console.log('██▄▄  ▄▀▄  ▄ ▄▀▄▄▄▄  ▀ ▀▄█▄▄▄██');\n    console.log('████▄▄▄▄▄▄▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀██');\n    console.log('████████████████████████████████');\n    console.log('\\n📱 افتح واتساب على هاتفك واتبع التعليمات...');\n    console.log('💡 ملاحظة: رمز QR متاح الآن في واجهة الويب للمسح\\n');\n  }\n\n\n\n  // إرسال رسالة تكليف بمهمة لعضو الفريق\n  async sendTaskAssignmentMessage(memberPhone: string, taskNumber: string, taskTitle: string, memberName: string): Promise<boolean> {\n    try {\n      if (!this.isReady) {\n        console.log('🔄 خدمة الواتساب غير جاهزة - محاكاة إرسال رسالة تكليف المهمة');\n        await this.logTaskAssignmentMessage(memberPhone, taskNumber, taskTitle, memberName, true);\n        return true;\n      }\n\n      // تنسيق رقم الهاتف\n      const formattedPhone = this.formatPhoneNumber(memberPhone);\n      if (!formattedPhone) {\n        console.error('❌ رقم هاتف غير صحيح:', memberPhone);\n        return false;\n      }\n\n      const message = `🔔 *تكليف بمهمة جديدة*\n\nمرحباً ${memberName}! 👋\n\nتم تكليفك بمهمة جديدة:\n\n📋 *رقم المهمة:* ${taskNumber}\n📝 *عنوان المهمة:* ${taskTitle}\n\n⏰ يرجى مراجعة النظام لمعرفة تفاصيل المهمة الكاملة والبدء في تنفيذها.\n\n🚀 نتمنى لك التوفيق!\n\n---\nنظام إدارة المهام - شركة اشراق الودق لتكنولوجيا المعلومات`;\n\n      if (this.isRealMode) {\n        // إرسال حقيقي\n        await this.client.sendMessage(`${formattedPhone}@c.us`, message);\n        console.log(`✅ تم إرسال رسالة تكليف المهمة ${taskNumber} إلى ${memberName} (${formattedPhone})`);\n      } else {\n        // وضع المحاكاة\n        console.log(`📱 محاكاة إرسال رسالة تكليف المهمة إلى ${memberName} (${formattedPhone}):`);\n        console.log(message);\n      }\n\n      // تسجيل الرسالة في قاعدة البيانات\n      await this.logTaskAssignmentMessage(memberPhone, taskNumber, taskTitle, memberName, true);\n      \n      return true;\n    } catch (error) {\n      console.error('❌ خطأ في إرسال رسالة تكليف المهمة:', error);\n      await this.logTaskAssignmentMessage(memberPhone, taskNumber, taskTitle, memberName, false);\n      return false;\n    }\n  }\n\n  // تسجيل رسالة تكليف المهمة في النظام\n  private async logTaskAssignmentMessage(memberPhone: string, taskNumber: string, taskTitle: string, memberName: string, success: boolean) {\n    try {\n      await storage.createSystemLog({\n        action: 'whatsapp_task_assignment',\n        details: `إرسال رسالة تكليف المهمة ${taskNumber} إلى ${memberName} (${memberPhone}) - ${success ? 'نجح' : 'فشل'}`,\n        userId: 'system',\n        metadata: JSON.stringify({\n          memberPhone,\n          taskNumber,\n          taskTitle,\n          memberName,\n          success,\n          timestamp: new Date().toISOString()\n        })\n      });\n    } catch (error) {\n      console.error('❌ خطأ في تسجيل رسالة تكليف المهمة:', error);\n    }\n  }\n\n  // معالجة الرسائل الواردة من العملاء\n  private async handleIncomingMessage(message: any) {\n    try {\n      const phoneNumber = message.from.replace('@c.us', '');\n      const messageText = message.body.trim();\n\n      // التحقق إذا كان الرد تقييم (رقم من 1 إلى 3)\n      if (['1', '2', '3'].includes(messageText)) {\n        await this.processCustomerRating(phoneNumber, messageText);\n      }\n    } catch (error) {\n      console.error('❌ خطأ في معالجة الرسالة الواردة:', error);\n    }\n  }\n\n  // معالجة تقييم العميل\n  private async processCustomerRating(phoneNumber: string, rating: string) {\n    try {\n      const ratingMap = {\n        '1': { rating: 'angry', text: 'غاضب' },\n        '2': { rating: 'satisfied', text: 'راضي' },\n        '3': { rating: 'very_satisfied', text: 'راضي جدا' }\n      };\n\n      const ratingData = ratingMap[rating as keyof typeof ratingMap];\n      \n      // البحث عن تقييم معلق للعميل\n      const existingRating = await storage.getPendingCustomerRating(phoneNumber);\n      \n      if (existingRating) {\n        // تحديث التقييم\n        await storage.updateCustomerRating(existingRating.id, {\n          rating: ratingData.rating,\n          ratingText: ratingData.text,\n          responseReceived: 'true'\n        });\n\n        // منح النقاط لأعضاء الفريق عند التقييم الإيجابي (راضي جداً)\n        if (rating === '3') {\n          try {\n            // الحصول على المهمة والأعضاء المكلفين بها\n            const task = await storage.getTask(existingRating.taskId);\n            if (task && task.assigneeIds && task.assigneeIds.length > 0) {\n              // منح نقطة واحدة لكل عضو مكلف بالمهمة\n              for (const assigneeId of task.assigneeIds) {\n                const teamMember = await storage.getTeamMemberByUserId(assigneeId);\n                if (teamMember) {\n                  await storage.addPointsToTeamMember(\n                    teamMember.id,\n                    1,\n                    'تقييم عميل إيجابي (راضي جداً)',\n                    task.id,\n                    existingRating.id,\n                    'system'\n                  );\n                  console.log(`🌟 تم منح نقطة لعضو الفريق: ${teamMember.name} بسبب التقييم الإيجابي`);\n                }\n              }\n            }\n          } catch (pointsError) {\n            console.error('❌ خطأ في منح النقاط:', pointsError);\n          }\n        }\n\n        // إرسال رسالة شكر\n        const thankYouMessage = `شكراً لك على تقييمك: ${ratingData.text} ${this.getRatingEmoji(rating)}\n\nنحن نقدر آراءكم ونسعى دائماً لتحسين خدماتنا.\n\nمع تحيات فريق شركة اشراق الودق لتكنولوجيا المعلومات 🌟`;\n\n        const formattedNumber = this.formatPhoneNumber(phoneNumber);\n        await this.client.sendMessage(formattedNumber, thankYouMessage);\n\n        console.log(`✅ تم تسجيل تقييم العميل: ${existingRating.customerName} - التقييم: ${ratingData.text}`);\n      }\n    } catch (error) {\n      console.error('❌ خطأ في معالجة تقييم العميل:', error);\n    }\n  }\n\n  // تنسيق رقم الهاتف للواتساب\n  private formatPhoneNumber(phoneNumber: string): string {\n    // إزالة جميع الرموز والمسافات\n    let cleaned = phoneNumber.replace(/\\D/g, '');\n    \n    // إذا بدأ بـ 0، نزيله ونضيف كود السعودية\n    if (cleaned.startsWith('0')) {\n      cleaned = '966' + cleaned.substring(1);\n    }\n    // إذا لم يبدأ بكود دولة، نضيف كود السعودية\n    else if (!cleaned.startsWith('966')) {\n      cleaned = '966' + cleaned;\n    }\n    \n    return cleaned + '@c.us';\n  }\n\n  // الحصول على الإيموجي المناسب للتقييم\n  private getRatingEmoji(rating: string): string {\n    const emojiMap = {\n      '1': '😠',\n      '2': '😊',\n      '3': '😍'\n    };\n    return emojiMap[rating as keyof typeof emojiMap] || '😊';\n  }\n\n  // إرسال رسالة تأكيد عند إنشاء مهمة جديدة\n  async sendTaskConfirmationMessage(\n    customerPhone: string,\n    customerName: string, \n    taskTitle: string,\n    taskNumber: string,\n    customerAddress?: string\n  ): Promise<boolean> {\n    if (!this.isReady) {\n      console.log('❌ خدمة الواتساب غير جاهزة لإرسال رسالة التأكيد');\n      return false;\n    }\n\n    try {\n      const formattedNumber = this.formatPhoneNumber(customerPhone);\n      \n      const message = `مرحباً ${customerName || 'عزيزي العميل'} 👋\n\n✅ *تأكيد استلام طلبكم*\n\nتم تسجيل طلبكم بنجاح في قائمة مهامنا:\n📋 *رقم المهمة:* ${taskNumber}\n🏷️ *العنوان:* ${taskTitle}${customerAddress ? `\\n📍 *الموقع:* ${customerAddress}` : ''}\n\n🔥 *سيتوجه إليكم فريقنا المتخصص في أسرع وقت ممكن*\n\nللتواصل المباشر:\n📞 ${process.env.COMPANY_PHONE || '966501234567'}\n\nنشكركم لثقتكم في خدماتنا 🙏\n*شركة اشراق الودق لتكنولوجيا المعلومات*`;\n\n      await this.client.sendMessage(formattedNumber, message);\n      \n      console.log(`✅ تم إرسال رسالة تأكيد المهمة للعميل: ${customerName} - ${customerPhone}`);\n      console.log(`📱 رقم المهمة: ${taskNumber}`);\n      return true;\n    } catch (error) {\n      console.error('❌ خطأ في إرسال رسالة تأكيد المهمة:', error);\n      return false;\n    }\n  }\n\n  // إرسال رسالة تقييم العميل عبر الواتساب\n  async sendCustomerRatingRequest(\n    phoneNumber: string, \n    customerName: string,\n    taskTitle: string,\n    taskId: string\n  ): Promise<boolean> {\n    if (!this.isReady) {\n      console.log('❌ خدمة الواتساب غير جاهزة');\n      return false;\n    }\n\n    try {\n      // تنسيق رقم الهاتف (إزالة الأصفار والمسافات وإضافة كود الدولة)\n      const formattedNumber = this.formatPhoneNumber(phoneNumber);\n      \n      const message = `مرحباً ${customerName}\n\n✅ تم إتمام مهمة \"${taskTitle}\" بنجاح من قبل شركة اشراق الودق لتكنولوجيا المعلومات.\n\n🌟 نرجو تقييم مستوى رضاكم عن أدائنا:\n\nرد برقم واحد فقط:\n1️⃣ - غاضب 😠\n2️⃣ - راضي 😊  \n3️⃣ - راضي جدا 😍\n\nشكراً لثقتكم بنا 🙏`;\n\n      // إرسال الرسالة عبر الواتساب\n      await this.client.sendMessage(formattedNumber, message);\n      \n      // تسجيل أن الرسالة تم إرسالها\n      await storage.createCustomerRating({\n        taskId,\n        customerId: null,\n        customerName,\n        customerPhone: phoneNumber,\n        rating: 'pending',\n        ratingText: 'في انتظار الرد',\n        messageSent: 'true',\n        responseReceived: 'false'\n      });\n\n      console.log(`✅ تم إرسال رسالة التقييم للعميل: ${customerName} - ${phoneNumber}`);\n      console.log(`📱 المرسل من: ${this.senderNumber}`);\n      return true;\n    } catch (error) {\n      console.error('❌ خطأ في إرسال رسالة التقييم:', error);\n      \n      // في حالة فشل الإرسال، نسجل الطلب كمحاولة فاشلة\n      try {\n        await storage.createCustomerRating({\n          taskId,\n          customerId: null,\n          customerName,\n          customerPhone: phoneNumber,\n          rating: 'pending',\n          ratingText: 'فشل في الإرسال',\n          messageSent: 'false',\n          responseReceived: 'false'\n        });\n      } catch (dbError) {\n        console.error('❌ خطأ في تسجيل محاولة الإرسال الفاشلة:', dbError);\n      }\n      \n      return false;\n    }\n  }\n\n  // إضافة تقييم عميل يدوياً (للمحاكاة والاختبار)\n  async addCustomerRating(\n    taskId: string,\n    phoneNumber: string,\n    rating: 'angry' | 'satisfied' | 'very_satisfied'\n  ): Promise<boolean> {\n    try {\n      const ratingMap = {\n        'angry': 'غاضب',\n        'satisfied': 'راضي',\n        'very_satisfied': 'راضي جداً'\n      };\n\n      // البحث عن تقييم معلق للمهمة\n      const existingRating = await storage.getPendingCustomerRating(phoneNumber);\n      \n      if (existingRating && existingRating.taskId === taskId) {\n        // تحديث التقييم\n        await storage.updateCustomerRating(existingRating.id, {\n          rating,\n          ratingText: ratingMap[rating],\n          responseReceived: 'true'\n        });\n\n        console.log(`✅ تم تسجيل تقييم العميل: ${existingRating.customerName} - التقييم: ${ratingMap[rating]}`);\n        return true;\n      }\n      \n      return false;\n    } catch (error) {\n      console.error('❌ خطأ في تسجيل تقييم العميل:', error);\n      return false;\n    }\n  }\n\n  // تفعيل الواتساب الحقيقي\n  async enableRealMode(): Promise<void> {\n    try {\n      console.log('🔄 تفعيل الواتساب الحقيقي...');\n      console.log('📱 تحديد الوضع الحقيقي...');\n      this.isRealMode = true;\n      \n      // إيقاف العميل الحالي إن وجد\n      if (this.client) {\n        console.log('🛑 إيقاف العميل الحالي...');\n        await this.client.destroy();\n      }\n      \n      // إعادة تعيين الحالة\n      this.isReady = false;\n      this.isInitialized = false;\n      this.currentQRCode = null;\n      this.senderNumber = null;\n      this.client = null;\n      \n      // انتظار قصير ثم بدء الوضع الحقيقي\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      // تحميل مكتبات الواتساب الحقيقي\n      console.log('🔄 تحميل مكتبات الواتساب الحقيقي...');\n      await this.loadDependencies();\n      this.initializeClient();\n      \n      console.log('🚀 بدء تشغيل الواتساب الحقيقي...');\n      await this.client.initialize();\n      this.isInitialized = true;\n      \n      console.log('✅ تم تفعيل الواتساب الحقيقي بنجاح');\n    } catch (error) {\n      console.error('❌ خطأ في تفعيل الواتساب الحقيقي:', error);\n      this.isRealMode = false;\n      // في حالة الفشل، عودة للمحاكاة\n      this.showFakeQRCode();\n      setTimeout(() => {\n        this.isReady = true;\n        this.senderNumber = '966501234567';\n      }, 3000);\n    }\n  }\n\n  // إلغاء تفعيل الواتساب الحقيقي والعودة للمحاكاة\n  async disableRealMode(): Promise<void> {\n    try {\n      console.log('🔄 العودة لوضع المحاكاة...');\n      this.isRealMode = false;\n      \n      // إيقاف العميل الحقيقي إن وجد\n      if (this.client && this.isInitialized) {\n        console.log('🛑 إيقاف الواتساب الحقيقي...');\n        await this.client.destroy();\n      }\n      \n      // إعادة تعيين الحالة\n      this.isReady = false;\n      this.isInitialized = false;\n      this.currentQRCode = null;\n      this.senderNumber = null;\n      this.client = null;\n      \n      // بدء وضع المحاكاة\n      this.showFakeQRCode();\n      \n      // تأخير قصير لمحاكاة عملية الاتصال\n      setTimeout(() => {\n        console.log('✅ تم ربط الواتساب بنجاح! (محاكاة)');\n        console.log('📱 رقم الواتساب المتصل: 966501234567 (محاكاة)');\n        this.isReady = true;\n        this.senderNumber = '966501234567';\n        this.currentQRCode = null; // إزالة رمز QR بعد الاتصال الناجح\n      }, 3000);\n      \n      console.log('✅ تم العودة لوضع المحاكاة بنجاح');\n    } catch (error) {\n      console.error('❌ خطأ في العودة لوضع المحاكاة:', error);\n    }\n  }\n\n  // قطع الاتصال مع الواتساب\n  async disconnect(): Promise<void> {\n    try {\n      console.log('🔴 قطع الاتصال مع الواتساب...');\n      this.isReady = false;\n      this.senderNumber = null;\n      \n      if (this.isRealMode && this.client) {\n        await this.client.destroy();\n      }\n      \n      // إظهار QR Code جديد للإعادة الربط\n      if (this.isRealMode) {\n        // في الوضع الحقيقي، إعادة تشغيل العميل للحصول على QR جديد\n        setTimeout(async () => {\n          await this.initialize();\n        }, 1000);\n      } else {\n        this.showFakeQRCode();\n      }\n      \n      console.log('✅ تم قطع الاتصال - رمز QR متاح للإعادة الربط');\n    } catch (error) {\n      console.error('❌ خطأ في قطع الاتصال:', error);\n    }\n  }\n\n  // إعادة ربط الخدمة\n  async reconnect(): Promise<void> {\n    try {\n      console.log('🔄 بدء إعادة ربط خدمة الواتساب...');\n      \n      // إيقاف الاتصال الحالي إن وجد\n      if (this.client && this.isReady) {\n        console.log('⏹️ إيقاف الاتصال الحالي...');\n        this.isReady = false;\n        await this.client.destroy();\n      }\n      \n      // إعادة التهيئة\n      console.log('🔄 إعادة تهيئة العميل...');\n      await this.loadDependencies();\n      this.initializeClient();\n      \n      // بدء الاتصال\n      console.log('🚀 بدء الاتصال الجديد...');\n      await this.client.initialize();\n      \n      console.log('✅ تم بدء عملية إعادة الربط بنجاح');\n    } catch (error) {\n      console.error('❌ خطأ في إعادة ربط الواتساب:', error);\n      throw error;\n    }\n  }\n\n  // التحقق من حالة الخدمة\n  isServiceReady(): boolean {\n    return this.isReady;\n  }\n\n  // الحصول على حالة مفصلة للخدمة\n  getStatus() {\n    return {\n      isConnected: this.isReady && this.client,\n      isReady: this.isReady,\n      isInitialized: this.isInitialized,\n      isRealMode: this.isRealMode,\n      mode: this.isRealMode ? 'حقيقي' : 'محاكاة',\n      senderNumber: this.senderNumber,\n      qrCode: this.currentQRCode,\n      lastConnected: this.isReady ? new Date().toISOString() : null,\n      messagesCount: 0 // يمكن تحديثه لاحقاً لعرض عدد الرسائل المرسلة\n    };\n  }\n\n  // الحصول على رمز QR الحالي\n  getCurrentQRCode(): string | null {\n    return this.currentQRCode;\n  }\n}\n\n// إنشاء مثيل واحد من الخدمة\nexport const whatsappService = new WhatsAppService();","size_bytes":26885},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\n// Session storage table for persistence across deployments\nexport const sessions = pgTable(\"sessions\", {\n  sid: varchar(\"sid\", { length: 128 }).primaryKey(),\n  sess: text(\"sess\").notNull(),\n  expire: timestamp(\"expire\").notNull(),\n});\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default(\"user\"), // user, supervisor, admin\n  isApproved: text(\"is_approved\").notNull().default(\"pending\"), // pending, approved, rejected\n  isActive: text(\"is_active\").notNull().default(\"true\"), // true, false\n  firstName: text(\"first_name\"),\n  lastName: text(\"last_name\"),\n  email: text(\"email\"),\n  phone: text(\"phone\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\nexport const teamMembers = pgTable(\"team_members\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").unique(), // link to users table\n  name: text(\"name\").notNull(),\n  role: text(\"role\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  phone: text(\"phone\"), // phone number for WhatsApp notifications\n  status: text(\"status\").notNull().default(\"available\"), // available, busy, offline\n  activeTasks: integer(\"active_tasks\").notNull().default(0),\n  avatar: text(\"avatar\"), // optional avatar URL or initials\n  profileImage: text(\"profile_image\"), // profile image URL from object storage\n});\n\nexport const customers = pgTable(\"customers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  phone: text(\"phone\").notNull(),\n  email: text(\"email\"), // البريد الإلكتروني\n  whatsappNumber: text(\"whatsapp_number\"), // رقم الواتساب\n  address: text(\"address\"),\n  gpsLatitude: text(\"gps_latitude\"), // خط العرض\n  gpsLongitude: text(\"gps_longitude\"), // خط الطول\n  gpsAddress: text(\"gps_address\"), // العنوان المحدد من GPS\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\n// جدول تقييمات العملاء\nexport const customerRatings = pgTable(\"customer_ratings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  taskId: varchar(\"task_id\").notNull().references(() => tasks.id),\n  customerId: varchar(\"customer_id\").references(() => customers.id),\n  customerName: text(\"customer_name\").notNull(),\n  customerPhone: text(\"customer_phone\").notNull(),\n  rating: text(\"rating\").notNull(), // angry, satisfied, very_satisfied\n  ratingText: text(\"rating_text\").notNull(), // غاضب، راضي، راضي جدا\n  comments: text(\"comments\"), // تعليقات إضافية اختيارية\n  messageSent: text(\"message_sent\").notNull().default(\"false\"), // تم إرسال الرسالة\n  responseReceived: text(\"response_received\").notNull().default(\"false\"), // تم تلقي الرد\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\nexport const tasks = pgTable(\"tasks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  taskNumber: text(\"task_number\"), // رقم المهمة التسلسلي\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  customerName: text(\"customer_name\").notNull(),\n  customerPhone: text(\"customer_phone\"),\n  customerEmail: text(\"customer_email\"),\n  customerAddress: text(\"customer_address\"),\n  time: text(\"time\").notNull(), // estimated time or schedule\n  startTime: text(\"start_time\"), // وقت البداية (9:00)\n  startPeriod: text(\"start_period\"), // AM/PM\n  finishTime: text(\"finish_time\"), // وقت الانتهاء (5:00)\n  finishPeriod: text(\"finish_period\"), // AM/PM\n  notes: text(\"notes\"), // additional notes\n  finalReport: text(\"final_report\"), // التقرير النهائي للمهمة - يكتبه المكلف بالمهمة فقط\n  status: text(\"status\").notNull().default(\"pending\"), // pending, start, complete, cancelled, rescheduled\n  priority: text(\"priority\").notNull().default(\"medium\"), // low, medium, high\n  assigneeIds: text(\"assignee_ids\").array(), // Array of team member IDs\n  dueDate: timestamp(\"due_date\"),\n  originalDueDate: timestamp(\"original_due_date\"), // التاريخ الأصلي قبل التأجيل\n  rescheduleCount: integer(\"reschedule_count\").notNull().default(0), // عدد مرات التأجيل\n  rescheduleReason: text(\"reschedule_reason\"), // سبب التأجيل\n  cancellationReason: text(\"cancellation_reason\"), // سبب الإلغاء\n  cancelledBy: text(\"cancelled_by\"), // من قام بالإلغاء (customer, admin, system)\n  progress: integer(\"progress\").notNull().default(0), // 0-100\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  senderId: varchar(\"sender_id\").notNull(),\n  receiverId: varchar(\"receiver_id\"), // null for group messages\n  content: text(\"content\").notNull(),\n  messageType: text(\"message_type\").notNull().default(\"text\"), // text, task, system\n  messageScope: text(\"message_scope\").notNull().default(\"private\"), // private, group\n  taskId: varchar(\"task_id\"), // reference to task if message is task-related\n  isRead: text(\"is_read\").notNull().default(\"false\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\nexport const notifications = pgTable(\"notifications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull(),\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  type: text(\"type\").notNull(), // task_assigned, task_completed, new_message, task_overdue\n  relatedId: varchar(\"related_id\"), // task id, message id, etc.\n  isRead: text(\"is_read\").notNull().default(\"false\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n  role: true,\n  isApproved: true,\n});\n\nexport const insertTeamMemberSchema = createInsertSchema(teamMembers).omit({\n  id: true,\n  activeTasks: true,\n});\n\nexport const insertTaskSchema = createInsertSchema(tasks).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const updateTaskSchema = createInsertSchema(tasks).omit({\n  id: true,\n  createdAt: true,\n}).partial();\n\nexport const insertCustomerSchema = createInsertSchema(customers).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertCustomerRatingSchema = createInsertSchema(customerRatings).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\nexport type TeamMember = typeof teamMembers.$inferSelect;\n\nexport type InsertTask = z.infer<typeof insertTaskSchema>;\nexport type UpdateTask = z.infer<typeof updateTaskSchema>;\nexport type Task = typeof tasks.$inferSelect;\n\nexport type InsertCustomer = z.infer<typeof insertCustomerSchema>;\nexport type Customer = typeof customers.$inferSelect;\n\nexport type InsertCustomerRating = z.infer<typeof insertCustomerRatingSchema>;\nexport type CustomerRating = typeof customerRatings.$inferSelect;\n\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type Message = typeof messages.$inferSelect;\n\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type Notification = typeof notifications.$inferSelect;\n\nexport type TaskWithAssignees = Task & {\n  assignees?: TeamMember[];\n};\n\n// Relations\nexport const userRelations = relations(users, ({ one }) => ({\n  teamMember: one(teamMembers, {\n    fields: [users.id],\n    references: [teamMembers.userId],\n  }),\n}));\n\nexport const teamMemberRelations = relations(teamMembers, ({ one }) => ({\n  user: one(users, {\n    fields: [teamMembers.userId],\n    references: [users.id],\n  }),\n}));\n\nexport type MessageWithSender = Message & {\n  sender?: TeamMember | User;\n};\n\nexport type UserWithTeamMember = User & {\n  teamMember?: TeamMember;\n};\n\n// System Logs table\nexport const systemLogs = pgTable(\"system_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  action: text(\"action\").notNull(), // login, logout, task_created, task_updated, user_created, role_changed, etc.\n  userId: varchar(\"user_id\").references(() => users.id),\n  username: text(\"username\"),\n  details: text(\"details\"), // JSON string with additional details\n  ipAddress: text(\"ip_address\"),\n  userAgent: text(\"user_agent\"),\n  timestamp: timestamp(\"timestamp\").default(sql`now()`),\n});\n\nexport const insertSystemLogSchema = createInsertSchema(systemLogs).omit({\n  id: true,\n  timestamp: true,\n});\nexport type InsertSystemLog = z.infer<typeof insertSystemLogSchema>;\nexport type SystemLog = typeof systemLogs.$inferSelect;\n\n// WhatsApp settings table\nexport const whatsappSettings = pgTable(\"whatsapp_settings\", {\n  id: varchar(\"id\").primaryKey().default(\"default\"),\n  defaultMessage: text(\"default_message\").notNull().default(`مرحباً {customerName}\n\n✅ تم إتمام مهمة \"{taskTitle}\" بنجاح من قبل شركة اشراق الودق لتكنولوجيا المعلومات.\n\n🌟 نرجو تقييم مستوى رضاكم عن أدائنا:\n\nرد برقم واحد فقط:\n1️⃣ - غاضب 😠\n2️⃣ - راضي 😊  \n3️⃣ - راضي جدا 😍\n\nشكراً لثقتكم بنا 🙏`),\n  senderName: varchar(\"sender_name\").default(\"شركة اشراق الودق لتكنولوجيا المعلومات\"),\n  autoSend: boolean(\"auto_send\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport type WhatsAppSettings = typeof whatsappSettings.$inferSelect;\nexport type UpsertWhatsAppSettings = typeof whatsappSettings.$inferInsert;\n\n// جدول نقاط أعضاء الفريق\nexport const teamMemberPoints = pgTable(\"team_member_points\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamMemberId: varchar(\"team_member_id\").notNull().references(() => teamMembers.id),\n  points: integer(\"points\").default(0),\n  totalEarned: integer(\"total_earned\").default(0), // إجمالي النقاط المكتسبة على الإطلاق\n  lastUpdated: timestamp(\"last_updated\").defaultNow(),\n  updatedBy: varchar(\"updated_by\").references(() => users.id), // من قام بالتحديث (للتصفير)\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const teamMemberPointsRelations = relations(teamMemberPoints, ({ one }) => ({\n  teamMember: one(teamMembers, {\n    fields: [teamMemberPoints.teamMemberId],\n    references: [teamMembers.id],\n  }),\n  updatedByUser: one(users, {\n    fields: [teamMemberPoints.updatedBy],\n    references: [users.id],\n  }),\n}));\n\n// جدول سجل النقاط لتتبع التغييرات\nexport const pointsHistory = pgTable(\"points_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamMemberId: varchar(\"team_member_id\").notNull().references(() => teamMembers.id),\n  action: varchar(\"action\").notNull(), // 'earned', 'reset'\n  pointsChange: integer(\"points_change\").notNull(), // +1 للكسب، -X للتصفير\n  reason: varchar(\"reason\").notNull(), // 'customer_satisfaction', 'admin_reset'\n  taskId: varchar(\"task_id\").references(() => tasks.id), // إذا كان بسبب مهمة\n  ratingId: varchar(\"rating_id\").references(() => customerRatings.id), // إذا كان بسبب تقييم\n  performedBy: varchar(\"performed_by\").references(() => users.id), // من قام بالعملية\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const pointsHistoryRelations = relations(pointsHistory, ({ one }) => ({\n  teamMember: one(teamMembers, {\n    fields: [pointsHistory.teamMemberId],\n    references: [teamMembers.id],\n  }),\n  task: one(tasks, {\n    fields: [pointsHistory.taskId],\n    references: [tasks.id],\n  }),\n  rating: one(customerRatings, {\n    fields: [pointsHistory.ratingId],\n    references: [customerRatings.id],\n  }),\n  performedByUser: one(users, {\n    fields: [pointsHistory.performedBy],\n    references: [users.id],\n  }),\n}));\n\nexport type TeamMemberPoints = typeof teamMemberPoints.$inferSelect;\nexport type InsertTeamMemberPoints = typeof teamMemberPoints.$inferInsert;\nexport type PointsHistory = typeof pointsHistory.$inferSelect;\nexport type InsertPointsHistory = typeof pointsHistory.$inferInsert;\n","size_bytes":13029},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { MobileLayout } from \"@/components/layout/mobile-layout\";\nimport { LanguageProvider } from \"@/hooks/use-language\";\nimport { AuthProvider } from \"@/components/auth/auth-provider\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { ErrorBoundary } from \"@/components/error/error-boundary\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Tasks from \"@/pages/tasks\";\nimport MyTasks from \"@/pages/my-tasks\";\nimport Team from \"@/pages/team.tsx\";\nimport TeamMembers from \"@/pages/team-members\";\nimport Profile from \"@/pages/profile.tsx\";\nimport Customers from \"@/pages/customers\";\nimport Messages from \"@/pages/messages\";\nimport Notifications from \"@/pages/notifications\";\nimport AdminLogs from \"@/pages/admin-logs\";\nimport AdminUsers from \"@/pages/admin-users\";\nimport CustomerRatings from \"@/pages/customer-ratings\";\nimport WhatsAppManagement from \"@/pages/whatsapp-management\";\nimport WhatsAppSettings from \"@/pages/whatsapp-settings\";\nimport WhatsAppBroadcast from \"@/pages/whatsapp-broadcast\";\nimport TeamPoints from \"@/pages/team-points\";\nimport NotFound from \"@/pages/not-found\";\nimport LoginPage from \"@/pages/login\";\nimport { AdminGuard } from \"@/components/admin/admin-guard\";\nimport { WelcomeModal } from \"@/components/welcome-modal\";\nimport { ScrollToTop } from \"@/components/ScrollToTop\";\n\nfunction ProtectedRouter() {\n  const { user, isLoading, login } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <LanguageProvider>\n        <LoginPage onLoginSuccess={login} />\n      </LanguageProvider>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <LanguageProvider>\n        <ScrollToTop />\n        <MobileLayout>\n          <Switch>\n            <Route path=\"/\" component={Dashboard} />\n            <Route path=\"/tasks\" component={Tasks} />\n            <Route path=\"/my-tasks\" component={MyTasks} />\n            <Route path=\"/team\" component={Team} />\n            <Route path=\"/team-members\" component={TeamMembers} />\n            <Route path=\"/customers\" component={Customers} />\n            <Route path=\"/messages\" component={Messages} />\n            <Route path=\"/notifications\" component={Notifications} />\n            <Route path=\"/profile\" component={Profile} />\n            <Route path=\"/admin/logs\" component={() => <AdminGuard><AdminLogs /></AdminGuard>} />\n            <Route path=\"/admin/users\" component={() => <AdminGuard><AdminUsers /></AdminGuard>} />\n            <Route path=\"/admin/customer-ratings\" component={CustomerRatings} />\n            <Route path=\"/admin/whatsapp\" component={WhatsAppManagement} />\n            <Route path=\"/admin/whatsapp-settings\" component={WhatsAppSettings} />\n            <Route path=\"/admin/whatsapp-broadcast\" component={WhatsAppBroadcast} />\n            <Route path=\"/admin/team-points\" component={() => <AdminGuard><TeamPoints /></AdminGuard>} />\n            <Route component={NotFound} />\n          </Switch>\n        </MobileLayout>\n      </LanguageProvider>\n    </ErrorBoundary>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Toaster />\n          <WelcomeModal />\n          <ProtectedRouter />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":3736},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Custom utilities for better visual hierarchy */\n@layer utilities {\n  .line-clamp-1 {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n  }\n  \n  .line-clamp-2 {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n  }\n}\n\n:root {\n  --background: hsl(0 0% 100%);\n  --foreground: hsl(215 8% 13%);\n  --card: hsl(0 0% 100%);\n  --card-foreground: hsl(215 8% 13%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(215 8% 13%);\n  --primary: hsl(207 90% 42%);\n  --primary-foreground: hsl(0 0% 100%);\n  --primary-dark: hsl(207 90% 38%);\n  --secondary: hsl(174 100% 29%);\n  --secondary-foreground: hsl(0 0% 100%);\n  --muted: hsl(210 40% 98%);\n  --muted-foreground: hsl(215 16% 47%);\n  --accent: hsl(210 40% 96%);\n  --accent-foreground: hsl(215 8% 13%);\n  --destructive: hsl(0 84% 60%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --success: hsl(122 39% 49%);\n  --success-foreground: hsl(0 0% 100%);\n  --warning: hsl(36 100% 50%);\n  --warning-foreground: hsl(0 0% 100%);\n  --error: hsl(4 90% 58%);\n  --error-foreground: hsl(0 0% 100%);\n  --border: hsl(214 32% 91%);\n  --input: hsl(214 32% 91%);\n  --ring: hsl(207 90% 42%);\n  --surface: hsl(0 0% 100%);\n  --on-surface: hsl(215 8% 13%);\n  --surface-variant: hsl(0 0% 88%);\n  --chart-1: hsl(207 90% 42%);\n  --chart-2: hsl(174 100% 29%);\n  --chart-3: hsl(36 100% 50%);\n  --chart-4: hsl(122 39% 49%);\n  --chart-5: hsl(4 90% 58%);\n  --sidebar: hsl(0 0% 100%);\n  --sidebar-foreground: hsl(215 8% 13%);\n  --sidebar-primary: hsl(207 90% 42%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(210 40% 96%);\n  --sidebar-accent-foreground: hsl(215 8% 13%);\n  --sidebar-border: hsl(214 32% 91%);\n  --sidebar-ring: hsl(207 90% 42%);\n  --font-sans: 'Roboto', 'Open Sans', sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n}\n\n/* Responsive Base Styles */\n* {\n  box-sizing: border-box;\n}\n\nhtml {\n  font-size: 16px;\n  overflow-x: hidden;\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  min-height: 100vh;\n  overflow-x: hidden;\n  background: hsl(var(--background));\n  background: hsl(var(--background));\n}\n\n/* Mobile-First Responsive Container */\n.mobile-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100vw;\n  overflow-x: hidden;\n}\n\n/* Responsive Breakpoints */\n@media (min-width: 640px) {\n  html {\n    font-size: 17px;\n  }\n  \n  .mobile-container {\n    max-width: 640px;\n    margin: 0 auto;\n  }\n}\n\n@media (min-width: 768px) {\n  html {\n    font-size: 18px;\n  }\n  \n  .mobile-container {\n    max-width: 768px;\n  }\n}\n\n@media (min-width: 1024px) {\n  html {\n    font-size: 19px;\n  }\n  \n  .mobile-container {\n    max-width: 1024px;\n  }\n  \n  /* Desktop Layout Adjustments */\n  .desktop-grid {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n  }\n  \n  .desktop-grid-3 {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 1rem;\n  }\n}\n\n@media (min-width: 1280px) {\n  html {\n    font-size: 20px;\n  }\n  \n  .mobile-container {\n    max-width: 1280px;\n  }\n  \n  /* Large Desktop Adjustments */\n  .desktop-grid-4 {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 1.5rem;\n  }\n}\n\n@media (min-width: 1536px) {\n  .mobile-container {\n    max-width: 1536px;\n  }\n}\n\n/* Touch-Friendly Sizing */\n@media (max-width: 640px) {\n  .touch-target {\n    min-height: 44px;\n    min-width: 44px;\n  }\n  \n  button, .button, input, select, textarea {\n    min-height: 44px;\n  }\n}\n\n/* Landscape Mobile Adjustments */\n@media (orientation: landscape) and (max-height: 600px) {\n  .mobile-container {\n    padding-bottom: 0;\n  }\n  \n  .landscape-adjust {\n    padding: 0.5rem;\n  }\n}\n\n/* High DPI Display Adjustments */\n@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n  .crisp-text {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n}\n\n/* Container Queries Support (when available) */\n@container (min-width: 640px) {\n  .responsive-card {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n  }\n}\n\n/* Utility Classes for Responsive Design */\n.responsive-padding {\n  padding: 0.5rem;\n}\n\n@media (min-width: 640px) {\n  .responsive-padding {\n    padding: 1rem;\n  }\n}\n\n@media (min-width: 1024px) {\n  .responsive-padding {\n    padding: 1.5rem;\n  }\n}\n\n.responsive-text {\n  font-size: 0.875rem;\n}\n\n@media (min-width: 640px) {\n  .responsive-text {\n    font-size: 1rem;\n  }\n}\n\n@media (min-width: 1024px) {\n  .responsive-text {\n    font-size: 1.125rem;\n  }\n}\n\n/* Smooth Transitions for Responsive Changes */\n* {\n  transition: font-size 0.2s ease, padding 0.2s ease, margin 0.2s ease;\n}\n\n.dark {\n  --background: hsl(222 84% 5%);\n  --foreground: hsl(210 40% 98%);\n  --card: hsl(222 84% 5%);\n  --card-foreground: hsl(210 40% 98%);\n  --popover: hsl(222 84% 5%);\n  --popover-foreground: hsl(210 40% 98%);\n  --primary: hsl(207 90% 54%);\n  --primary-foreground: hsl(222 84% 5%);\n  --primary-dark: hsl(207 90% 50%);\n  --secondary: hsl(174 100% 35%);\n  --secondary-foreground: hsl(222 84% 5%);\n  --muted: hsl(217 32% 17%);\n  --muted-foreground: hsl(215 20% 65%);\n  --accent: hsl(217 32% 17%);\n  --accent-foreground: hsl(210 40% 98%);\n  --destructive: hsl(0 62% 30%);\n  --destructive-foreground: hsl(210 40% 98%);\n  --success: hsl(122 39% 35%);\n  --success-foreground: hsl(210 40% 98%);\n  --warning: hsl(36 100% 40%);\n  --warning-foreground: hsl(210 40% 98%);\n  --error: hsl(4 90% 48%);\n  --error-foreground: hsl(210 40% 98%);\n  --border: hsl(217 32% 17%);\n  --input: hsl(217 32% 17%);\n  --ring: hsl(207 90% 54%);\n  --surface: hsl(222 84% 5%);\n  --on-surface: hsl(210 40% 98%);\n  --surface-variant: hsl(217 32% 17%);\n  --chart-1: hsl(207 90% 54%);\n  --chart-2: hsl(174 100% 35%);\n  --chart-3: hsl(36 100% 40%);\n  --chart-4: hsl(122 39% 35%);\n  --chart-5: hsl(4 90% 48%);\n  --sidebar: hsl(222 84% 5%);\n  --sidebar-foreground: hsl(210 40% 98%);\n  --sidebar-primary: hsl(207 90% 54%);\n  --sidebar-primary-foreground: hsl(222 84% 5%);\n  --sidebar-accent: hsl(217 32% 17%);\n  --sidebar-accent-foreground: hsl(210 40% 98%);\n  --sidebar-border: hsl(217 32% 17%);\n  --sidebar-ring: hsl(207 90% 54%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground font-sans antialiased;\n    font-family: 'Roboto', var(--font-sans);\n  }\n\n  /* Arabic RTL styling */\n  [dir=\"rtl\"] {\n    text-align: right;\n  }\n  \n  [dir=\"rtl\"] * {\n    direction: rtl;\n  }\n  \n  /* Fix flex direction for RTL */\n  [dir=\"rtl\"] .flex:not(.flex-col):not(.flex-row) {\n    flex-direction: row-reverse;\n  }\n  \n  [dir=\"rtl\"] .justify-between {\n    flex-direction: row-reverse;\n  }\n  \n  /* Fix spacing for RTL */\n  [dir=\"rtl\"] .space-x-1 > :not([hidden]) ~ :not([hidden]),\n  [dir=\"rtl\"] .space-x-2 > :not([hidden]) ~ :not([hidden]),\n  [dir=\"rtl\"] .space-x-3 > :not([hidden]) ~ :not([hidden]),\n  [dir=\"rtl\"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {\n    --tw-space-x-reverse: 1;\n    margin-right: var(--tw-space-x-reverse) * var(--tw-space-x);\n    margin-left: calc(1 - var(--tw-space-x-reverse)) * var(--tw-space-x);\n  }\n  \n  /* RTL text alignment */\n  [dir=\"rtl\"] .text-left {\n    text-align: right;\n  }\n  \n  [dir=\"rtl\"] .text-right {\n    text-align: left;\n  }\n  \n  /* RTL positioning for floating elements */\n  [dir=\"rtl\"] .fixed.right-4 {\n    right: auto;\n    left: 1rem;\n  }\n  \n  [dir=\"rtl\"] .fixed.left-1\\/2 {\n    left: auto;\n    right: 50%;\n    transform: translateX(50%);\n  }\n  \n  /* RTL adjustments for buttons and form elements */\n  [dir=\"rtl\"] .ml-2 {\n    margin-left: 0;\n    margin-right: 0.5rem;\n  }\n  \n  [dir=\"rtl\"] .ml-3 {\n    margin-left: 0;\n    margin-right: 0.75rem;\n  }\n  \n  [dir=\"rtl\"] .mr-2 {\n    margin-right: 0;\n    margin-left: 0.5rem;\n  }\n  \n  [dir=\"rtl\"] .mr-3 {\n    margin-right: 0;\n    margin-left: 0.75rem;\n  }\n  \n  /* RTL grid positioning */\n  [dir=\"rtl\"] .grid {\n    direction: rtl;\n  }\n  \n  /* RTL card layouts */\n  [dir=\"rtl\"] .task-card,\n  [dir=\"rtl\"] .stat-card {\n    text-align: right;\n  }\n  \n  /* Stat card responsive styling */\n  .stat-card {\n    @apply bg-card rounded-lg p-3 sm:p-4 lg:p-5 shadow-sm border border-surface-variant;\n    min-height: 80px;\n    display: flex;\n    align-items: center;\n    transition: all 0.2s ease;\n  }\n  \n  .stat-card:hover {\n    @apply shadow-md;\n    transform: translateY(-1px);\n  }\n  \n  @media (min-width: 640px) {\n    .stat-card {\n      min-height: 96px;\n    }\n  }\n  \n  @media (min-width: 1024px) {\n    .stat-card {\n      min-height: 112px;\n    }\n  }\n  \n  /* Safe area adjustments for modern devices */\n  .safe-area-bottom {\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n  \n  .safe-area-top {\n    padding-top: env(safe-area-inset-top);\n  }\n  \n  /* Enhanced animations for scheduler */\n  @keyframes fadeInUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  @keyframes slideInRight {\n    from {\n      opacity: 0;\n      transform: translateX(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateX(0);\n    }\n  }\n  \n  /* Scheduler specific animations */\n  [data-testid^=\"scheduler-task-\"] {\n    animation: fadeInUp 0.4s ease-out forwards;\n  }\n  \n  [data-testid^=\"upcoming-task-\"] {\n    animation: slideInRight 0.5s ease-out forwards;\n  }\n  \n  /* Smooth hover transitions for cards */\n  .group:hover {\n    transition: all 0.2s ease;\n  }\n  \n  /* Custom gradient backgrounds */\n  .gradient-primary {\n    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);\n  }\n  \n  .gradient-muted {\n    background: linear-gradient(135deg, hsl(var(--muted)) 0%, hsl(var(--background)) 100%);\n  }\n  \n  /* Line clamping utility */\n  .line-clamp-2 {\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  \n  .line-clamp-3 {\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  \n  /* RTL navigation adjustments */\n  [dir=\"rtl\"] .bottom-navigation {\n    direction: rtl;\n  }\n  \n  /* RTL form inputs */\n  [dir=\"rtl\"] input,\n  [dir=\"rtl\"] textarea,\n  [dir=\"rtl\"] select {\n    text-align: right;\n  }\n  \n  [dir=\"rtl\"] input[type=\"date\"],\n  [dir=\"rtl\"] input[type=\"time\"],\n  [dir=\"rtl\"] input[type=\"number\"] {\n    text-align: left; /* Keep these left-aligned for clarity */\n  }\n\n  html {\n    scroll-behavior: smooth;\n  }\n\n  /* Mobile optimizations */\n  @media (max-width: 768px) {\n    body {\n      -webkit-text-size-adjust: 100%;\n      -webkit-tap-highlight-color: transparent;\n      touch-action: manipulation;\n    }\n  }\n}\n\n@layer components {\n  .mobile-container {\n    @apply min-h-screen flex flex-col max-w-md mx-auto bg-surface;\n  }\n\n  .stat-card {\n    @apply bg-white rounded-xl p-4 shadow-lg border-0 transition-all duration-300 hover:shadow-xl hover:scale-105;\n    background: linear-gradient(135deg, hsl(var(--surface)) 0%, hsl(var(--muted)) 100%);\n    border: 1px solid hsl(var(--border) / 0.2);\n    min-height: 110px;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .stat-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));\n  }\n\n  .task-card {\n    @apply bg-surface rounded-xl p-5 shadow-md border hover:shadow-xl transition-all duration-300 hover:scale-[1.02];\n    border-color: hsl(var(--border) / 0.3);\n    background: linear-gradient(135deg, hsl(var(--surface)) 0%, hsl(var(--muted) / 0.3) 100%);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .task-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 2px;\n    background: linear-gradient(90deg, hsl(var(--primary) / 0.6), hsl(var(--secondary) / 0.6));\n  }\n\n  .status-chip {\n    @apply px-2 py-1 rounded text-xs font-medium;\n  }\n\n  .status-pending {\n    @apply bg-orange-100 text-orange-800 border-orange-300;\n  }\n\n  .status-start {\n    @apply bg-blue-100 text-blue-800 border-blue-300;\n  }\n\n  .status-complete {\n    @apply bg-green-100 text-green-800 border-green-300;\n  }\n\n  .status-overdue {\n    @apply bg-red-100 text-red-800 border-red-300;\n  }\n\n  .priority-low {\n    @apply text-green-600;\n  }\n\n  .priority-medium {\n    @apply text-yellow-600;\n  }\n\n  .priority-high {\n    @apply text-red-600;\n  }\n\n  .availability-available {\n    @apply bg-success;\n  }\n\n  .availability-busy {\n    @apply bg-warning;\n  }\n\n  .availability-offline {\n    @apply bg-surface-variant;\n  }\n}\n\n@layer utilities {\n  .touch-manipulation {\n    touch-action: manipulation;\n  }\n}\n\n/* Scroll to top utility classes for all containers */\n[data-scroll-container],\n[role=\"dialog\"],\n.overflow-auto,\n.overflow-y-auto,\nmain {\n  scroll-behavior: smooth;\n}\n\n/* Reset scroll position for new routes */\n.route-transition {\n  animation: fadeInFromTop 0.2s ease-in-out;\n}\n\n@keyframes fadeInFromTop {\n  from {\n    opacity: 0.95;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Compact UI Styles for Smaller Interface */\n.compact-ui {\n  font-size: 0.875rem; /* 14px base */\n}\n\n.compact-card {\n  @apply p-2 rounded-lg border;\n  min-height: 2.5rem;\n}\n\n.compact-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(75px, 1fr));\n  gap: 0.25rem;\n}\n\n.compact-stats .stat-card {\n  min-height: 2rem;\n  padding: 0.25rem 0.5rem;\n}\n\n.compact-stats .stat-card p:first-child {\n  font-size: 0.625rem; /* 10px */\n  line-height: 1.2;\n}\n\n.compact-stats .stat-card p:last-child {\n  font-size: 0.75rem; /* 12px */\n  font-weight: 600;\n}\n\n.compact-member-card {\n  @apply p-2 rounded border;\n  min-height: 2.5rem;\n}\n\n.compact-member-card .avatar {\n  @apply w-6 h-6 text-xs;\n}\n\n.compact-section {\n  @apply p-2 mb-2 rounded-lg;\n}\n\n.compact-title {\n  @apply text-sm font-medium mb-1;\n}\n\n.compact-btn {\n  @apply px-2 py-1 text-xs h-6 rounded;\n}\n\n.compact-spacing {\n  @apply space-y-1 gap-1;\n}\n\n/* Mobile compact adjustments */\n@media (max-width: 640px) {\n  .compact-stats {\n    grid-template-columns: repeat(3, 1fr);\n  }\n  \n  .compact-card {\n    padding: 0.375rem;\n  }\n}\n","size_bytes":14365},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ObjectUploader.tsx":{"content":"import { useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Uppy from \"@uppy/core\";\nimport { DashboardModal } from \"@uppy/react\";\nimport \"@uppy/core/dist/style.min.css\";\nimport \"@uppy/dashboard/dist/style.min.css\";\nimport AwsS3 from \"@uppy/aws-s3\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ObjectUploaderProps {\n  maxNumberOfFiles?: number;\n  maxFileSize?: number;\n  onGetUploadParameters: (file: any) => Promise<{\n    method: \"PUT\";\n    url: string;\n  }>;\n  onComplete?: (\n    result: UploadResult<Record<string, unknown>, Record<string, unknown>>\n  ) => void;\n  buttonClassName?: string;\n  children: ReactNode;\n}\n\n/**\n * A file upload component that renders as a button and provides a modal interface for\n * file management.\n * \n * Features:\n * - Renders as a customizable button that opens a file upload modal\n * - Provides a modal interface for:\n *   - File selection\n *   - File preview\n *   - Upload progress tracking\n *   - Upload status display\n * \n * The component uses Uppy under the hood to handle all file upload functionality.\n * All file management features are automatically handled by the Uppy dashboard modal.\n * \n * @param props - Component props\n * @param props.maxNumberOfFiles - Maximum number of files allowed to be uploaded\n *   (default: 1)\n * @param props.maxFileSize - Maximum file size in bytes (default: 10MB)\n * @param props.onGetUploadParameters - Function to get upload parameters (method and URL).\n *   Typically used to fetch a presigned URL from the backend server for direct-to-S3\n *   uploads.\n * @param props.onComplete - Callback function called when upload is complete. Typically\n *   used to make post-upload API calls to update server state and set object ACL\n *   policies.\n * @param props.buttonClassName - Optional CSS class name for the button\n * @param props.children - Content to be rendered inside the button\n */\nexport function ObjectUploader({\n  maxNumberOfFiles = 1,\n  maxFileSize = 10485760, // 10MB default\n  onGetUploadParameters,\n  onComplete,\n  buttonClassName,\n  children,\n}: ObjectUploaderProps) {\n  const [showModal, setShowModal] = useState(false);\n  const [uppy] = useState(() =>\n    new Uppy({\n      restrictions: {\n        maxNumberOfFiles,\n        maxFileSize,\n      },\n      autoProceed: false,\n    })\n      .use(AwsS3, {\n        shouldUseMultipart: false,\n        getUploadParameters: onGetUploadParameters,\n      })\n      .on(\"complete\", (result) => {\n        onComplete?.(result);\n      })\n  );\n\n  return (\n    <div>\n      <Button onClick={() => setShowModal(true)} className={buttonClassName}>\n        {children}\n      </Button>\n\n      <DashboardModal\n        uppy={uppy}\n        open={showModal}\n        onRequestClose={() => setShowModal(false)}\n        proudlyDisplayPoweredByUppy={false}\n      />\n    </div>\n  );\n}","size_bytes":2875},"client/src/components/ProfileImageUploader.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { ObjectUploader } from \"./ObjectUploader\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Camera, User } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\n\ninterface ProfileImageUploaderProps {\n  teamMemberId: string;\n  currentProfileImage?: string | null;\n  memberName: string;\n  onImageUpdated?: (newImageUrl: string) => void;\n  size?: \"sm\" | \"md\" | \"lg\";\n  showUploadIcon?: boolean;\n}\n\nexport function ProfileImageUploader({\n  teamMemberId,\n  currentProfileImage,\n  memberName,\n  onImageUpdated,\n  size = \"md\",\n  showUploadIcon = true,\n}: ProfileImageUploaderProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [localProfileImage, setLocalProfileImage] = useState(currentProfileImage);\n  const [imageKey, setImageKey] = useState(0); // Force re-render of image\n\n  const updateProfileImageMutation = useMutation({\n    mutationFn: async (profileImageURL: string) => {\n      console.log('Updating profile image for member:', teamMemberId, 'with URL:', profileImageURL);\n      const response = await apiRequest(\"PUT\", `/api/team-members/${teamMemberId}/profile-image`, {\n        profileImageURL,\n      });\n      const data = await response.json();\n      console.log('Profile image update response:', data);\n      return data;\n    },\n    onSuccess: (data) => {\n      console.log('Profile image successfully updated:', data);\n      toast({\n        title: \"نجح الرفع\",\n        description: \"تم تحديث الصورة الشخصية بنجاح\",\n      });\n      \n      // Update local state immediately and force re-render\n      if (data.objectPath) {\n        setLocalProfileImage(data.objectPath);\n        setImageKey(prev => prev + 1); // Force image re-render\n        \n        // Add cache buster to image URL\n        const imageWithCacheBuster = `${data.objectPath}?t=${Date.now()}`;\n        setLocalProfileImage(imageWithCacheBuster);\n      }\n      \n      // Invalidate and refetch queries\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      queryClient.refetchQueries({ queryKey: [\"/api/team-members\"] });\n      \n      onImageUpdated?.(data.objectPath);\n    },\n    onError: (error) => {\n      console.error(\"Error updating profile image:\", error);\n      toast({\n        title: \"خطأ في الرفع\", \n        description: \"فشل في تحديث الصورة الشخصية: \" + error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleGetUploadParameters = async (file: any) => {\n    try {\n      console.log('Getting upload parameters for file:', file.name, file.type, file.size);\n      const response = await apiRequest(\"POST\", \"/api/objects/upload\", {});\n      const data = await response.json();\n      console.log('Got upload parameters:', data);\n      return {\n        method: \"PUT\" as const,\n        url: data.uploadURL,\n      };\n    } catch (error) {\n      console.error('Error getting upload parameters:', error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في الحصول على رابط الرفع\",\n        variant: \"destructive\",\n      });\n      throw error;\n    }\n  };\n\n  const handleUploadComplete = (result: any) => {\n    console.log('Upload result:', result);\n    if (result.successful && result.successful.length > 0) {\n      const uploadURL = result.successful[0].uploadURL;\n      console.log('Upload completed, URL:', uploadURL);\n      // Extract the object path from the full URL\n      const urlObj = new URL(uploadURL);\n      const pathParts = urlObj.pathname.split('/');\n      const bucketIndex = pathParts.findIndex(part => part.includes('replit-objstore'));\n      if (bucketIndex >= 0) {\n        const objectPath = pathParts.slice(bucketIndex).join('/');\n        console.log('Extracted object path:', objectPath);\n        updateProfileImageMutation.mutate(uploadURL);\n      } else {\n        updateProfileImageMutation.mutate(uploadURL);\n      }\n    } else {\n      console.error('Upload failed:', result);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في رفع الصورة\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const sizeClasses = {\n    sm: \"w-14 h-14\",\n    md: \"w-20 h-20\", \n    lg: \"w-32 h-32\",\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map(word => word.charAt(0))\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <div className=\"relative group\">\n      <Avatar className={`${sizeClasses[size]} ring-4 ring-blue-200/60 ring-offset-2 transition-all duration-300 group-hover:ring-blue-400/80 shadow-lg`}>\n        <AvatarImage \n          key={imageKey} // Force re-render when image changes\n          src={localProfileImage || currentProfileImage || undefined} \n          alt={`صورة ${memberName}`}\n          className=\"object-cover\"\n          onError={(e) => {\n            console.log('Image failed to load:', localProfileImage || currentProfileImage);\n            // Fallback to original image without cache buster\n            if (localProfileImage && localProfileImage.includes('?t=')) {\n              const originalImage = localProfileImage.split('?t=')[0];\n              setLocalProfileImage(originalImage);\n            }\n          }}\n          onLoad={() => {\n            console.log('Image loaded successfully:', localProfileImage || currentProfileImage);\n          }}\n        />\n        <AvatarFallback className=\"bg-gradient-to-br from-blue-100 to-blue-200 text-blue-700 font-bold text-lg border-2 border-blue-300 shadow-inner\">\n          {getInitials(memberName)}\n        </AvatarFallback>\n      </Avatar>\n      \n      {showUploadIcon && (\n        <div className=\"absolute inset-0 bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center backdrop-blur-sm\">\n          <ObjectUploader\n            maxNumberOfFiles={1}\n            maxFileSize={5 * 1024 * 1024} // 5MB\n            onGetUploadParameters={handleGetUploadParameters}\n            onComplete={handleUploadComplete}\n            buttonClassName=\"bg-transparent hover:bg-transparent p-2 h-auto border-none shadow-none rounded-full hover:bg-white/20 transition-colors\"\n          >\n            <Camera className=\"w-5 h-5 text-white drop-shadow-sm\" />\n          </ObjectUploader>\n        </div>\n      )}\n      \n      {updateProfileImageMutation.isPending && (\n        <div className=\"absolute inset-0 bg-white bg-opacity-80 rounded-full flex items-center justify-center backdrop-blur-sm\">\n          <div className=\"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":6874},"client/src/components/QRCodeCanvas.tsx":{"content":"import { useEffect, useRef } from 'react';\nimport QRCode from 'qrcode';\n\ninterface QRCodeCanvasProps {\n  qrCodeData: string;\n  size?: number;\n}\n\nexport function QRCodeCanvas({ qrCodeData, size = 256 }: QRCodeCanvasProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (canvasRef.current && qrCodeData) {\n      QRCode.toCanvas(canvasRef.current, qrCodeData, {\n        width: size,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      }, (error) => {\n        if (error) {\n          console.error('Error generating QR code:', error);\n        }\n      });\n    }\n  }, [qrCodeData, size]);\n\n  if (!qrCodeData) {\n    return (\n      <div className=\"flex items-center justify-center bg-gray-100 rounded\" style={{ width: size, height: size }}>\n        <p className=\"text-gray-500 text-sm\">لا يوجد رمز QR</p>\n      </div>\n    );\n  }\n\n  return (\n    <canvas \n      ref={canvasRef}\n      className=\"border rounded\"\n      style={{ maxWidth: '100%', height: 'auto' }}\n    />\n  );\n}","size_bytes":1063},"client/src/components/welcome-modal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Check } from \"lucide-react\";\n\nexport function WelcomeModal() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    // Check if user has seen the welcome message before\n    const hasSeenWelcome = localStorage.getItem(\"hasSeenWelcome\");\n    if (!hasSeenWelcome) {\n      setIsOpen(true);\n    }\n  }, []);\n\n  const handleClose = () => {\n    localStorage.setItem(\"hasSeenWelcome\", \"true\");\n    setIsOpen(false);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogContent className=\"sm:max-w-md mx-4\" data-testid=\"modal-welcome\">\n        <DialogHeader className=\"text-center\">\n          <DialogTitle className=\"text-xl font-bold mb-4\" data-testid=\"text-welcome-title\">\n            أهلاً بك في تطبيق تتبع العمل\n          </DialogTitle>\n          <DialogDescription className=\"text-lg leading-relaxed\" data-testid=\"text-welcome-message\">\n            اهلا بك في تطبيق تتبع العمل في شركة اشراق الودق\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"flex justify-center mt-6\">\n          <Button \n            onClick={handleClose} \n            className=\"px-8 py-2\"\n            data-testid=\"button-welcome-close\"\n          >\n            <Check className=\"w-4 h-4 mr-2\" />\n            ابدأ الآن\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":1633},"client/src/hooks/use-auth.ts":{"content":"import { useState, useEffect, createContext, useContext } from \"react\";\n\ninterface User {\n  id: string;\n  username: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (user: User) => void;\n  logout: () => void;\n  checkAuth: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n\nexport function useAuthState() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const login = (userData: User) => {\n    setUser(userData);\n  };\n\n  const logout = async () => {\n    try {\n      await fetch(\"/api/auth/logout\", { method: \"POST\" });\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n    } finally {\n      setUser(null);\n    }\n  };\n\n  const checkAuth = async () => {\n    try {\n      const response = await fetch(\"/api/auth/user\");\n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      console.error(\"Auth check error:\", error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  return {\n    user,\n    isLoading,\n    login,\n    logout,\n    checkAuth,\n  };\n}\n\nexport { AuthContext };\nexport type { User, AuthContextType };","size_bytes":1566},"client/src/hooks/use-language.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\ninterface LanguageContextType {\n  language: 'en' | 'ar';\n  setLanguage: (lang: 'en' | 'ar') => void;\n  t: (key: string) => string;\n  isRTL: boolean;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst translations = {\n  en: {\n    // Navigation\n    'nav.dashboard': 'Dashboard',\n    'nav.tasks': 'Tasks',\n    'nav.myTasks': 'My Tasks',\n    'nav.team': 'Team',\n    'nav.customers': 'Customers',\n    'nav.profile': 'Profile',\n    'nav.admin': 'Admin',\n\n    // Dashboard\n    'dashboard.title': 'Dashboard',\n    'dashboard.welcome': 'Welcome to TaskFlow',\n    'dashboard.quickActions': 'Quick Actions',\n    'dashboard.createTask': 'Create Task',\n    'dashboard.addMember': 'Add Member',\n    'dashboard.admin': 'Admin',\n    'dashboard.weeklySchedule': 'Weekly Schedule',\n    'dashboard.upcomingSchedule': 'Upcoming Schedule',\n    'dashboard.recentTasks': 'Recent Tasks',\n\n    // Tasks\n    'task.title': 'Title',\n    'task.description': 'Description',\n    'task.customer': 'Customer',\n    'task.phone': 'Phone',\n    'task.address': 'Address',\n    'task.time': 'Time',\n    'task.notes': 'Notes',\n    'task.priority': 'Priority',\n    'task.status': 'Status',\n    'task.assignees': 'Assignees',\n    'task.dueDate': 'Due Date',\n    'task.progress': 'Progress',\n\n    // Status\n    'status.pending': 'Pending',\n    'status.start': 'Started',\n    'status.complete': 'Complete',\n\n    // Priority\n    'priority.low': 'Low',\n    'priority.medium': 'Medium',\n    'priority.high': 'High',\n\n    // Actions\n    'action.create': 'Create',\n    'action.edit': 'Edit',\n    'action.delete': 'Delete',\n    'action.save': 'Save',\n    'action.cancel': 'Cancel',\n    'action.close': 'Close',\n    'action.submit': 'Submit',\n    'action.startTask': 'Start Task',\n    'action.completeTask': 'Complete Task',\n    'action.resetTask': 'Reset to Pending',\n\n    // Common\n    'common.viewAll': 'View All',\n\n    // Messages\n    'msg.noTasks': 'No tasks found',\n    'msg.noTeamMembers': 'No team members found',\n    'msg.noUpcomingTasks': 'No upcoming tasks in the next 7 days',\n    'msg.taskCreated': 'Task created successfully',\n    'msg.taskUpdated': 'Task updated successfully',\n    'msg.loading': 'Loading...',\n    'msg.saving': 'Saving...',\n    'msg.updating': 'Updating...',\n\n    // My Tasks\n    'myTasks.title': 'My Tasks',\n    'myTasks.subtitle': 'Personal task overview with priorities and reminders',\n    'myTasks.highPriority': 'High Priority Tasks',\n    'myTasks.overdue': 'Overdue Tasks',\n    'myTasks.upcoming': 'Upcoming This Week',\n    'myTasks.withComments': 'Tasks with Comments',\n\n    // Admin\n    'admin.logs': 'System Logs',\n    'admin.access': 'Administrator Access',\n\n    // Error Messages\n    'error.generic': 'An error occurred. Please try again.',\n    'error.network': 'Network connection error. Please check your internet connection.',\n    'error.unauthorized': 'You are not authorized to access this resource.',\n    'error.forbidden': 'Access denied. Insufficient permissions.',\n    'error.notFound': 'The requested resource was not found.',\n    'error.validation': 'Please check your input and try again.',\n    'error.server': 'Server error. Please try again later.',\n    'error.timeout': 'Request timed out. Please try again.',\n    'error.database': 'Database error. Please contact support.',\n    'error.session': 'Your session has expired. Please log in again.',\n    'error.fileUpload': 'File upload failed. Please check file size and format.',\n    'error.invalidFormat': 'Invalid format. Please check your input.',\n    'error.tooManyRequests': 'Too many requests. Please wait before trying again.',\n\n    // Form Validation Errors\n    'validation.required': 'This field is required',\n    'validation.email': 'Please enter a valid email address',\n    'validation.phone': 'Please enter a valid phone number',\n    'validation.minLength': 'Minimum {min} characters required',\n    'validation.maxLength': 'Maximum {max} characters allowed',\n    'validation.password': 'Password must be at least 6 characters',\n    'validation.passwordMatch': 'Passwords do not match',\n    'validation.future': 'Date must be in the future',\n    'validation.past': 'Date must be in the past',\n\n    // User Guidance\n    'guidance.loading': 'Loading data, please wait...',\n    'guidance.saving': 'Saving your changes...',\n    'guidance.deleting': 'Deleting item...',\n    'guidance.uploading': 'Uploading file...',\n    'guidance.connecting': 'Establishing connection...',\n    'guidance.processing': 'Processing your request...',\n    'guidance.retry': 'Click to retry',\n    'guidance.refresh': 'Refresh the page',\n    'guidance.contactSupport': 'Contact support if the problem persists',\n\n    // WhatsApp Messages\n    'whatsapp.connecting': 'Connecting to WhatsApp...',\n    'whatsapp.connected': 'WhatsApp connected successfully',\n    'whatsapp.disconnected': 'WhatsApp disconnected',\n    'whatsapp.qrCode': 'Scan QR code with WhatsApp',\n    'whatsapp.reconnecting': 'Reconnecting to WhatsApp...',\n    'whatsapp.messageSent': 'Message sent successfully',\n    'whatsapp.messageFailed': 'Failed to send message',\n    'whatsapp.settingsUpdated': 'WhatsApp settings updated',\n\n    // Success Messages\n    'success.taskCreated': 'Task created successfully',\n    'success.taskUpdated': 'Task updated successfully',\n    'success.taskDeleted': 'Task deleted successfully',\n    'success.userCreated': 'User created successfully',\n    'success.userUpdated': 'User updated successfully',\n    'success.profileUpdated': 'Profile updated successfully',\n    'success.passwordChanged': 'Password changed successfully',\n    'success.settingsSaved': 'Settings saved successfully',\n    'admin.password': 'Enter admin password',\n    'admin.login': 'Access Admin Panel',\n    'admin.userManagement': 'User Management',\n    'admin.addUser': 'Add User',\n    'admin.approveUsers': 'Approve Users',\n\n    // Team\n    'team.title': 'Team',\n    'team.addMember': 'Add Member',\n    'team.memberName': 'Member Name',\n    'team.memberRole': 'Member Role',\n    'team.memberEmail': 'Member Email',\n    'team.memberStatus': 'Member Status',\n    'team.available': 'Available',\n    'team.busy': 'Busy',\n    'team.offline': 'Offline',\n\n    // Users\n    'user.username': 'Username',\n    'user.password': 'Password',\n    'user.role': 'Role',\n    'user.admin': 'Administrator',\n    'user.regular': 'Regular User',\n    'user.approve': 'Approve',\n    'user.reject': 'Reject',\n    'user.pending': 'Pending',\n    'user.approved': 'Approved',\n    'user.rejected': 'Rejected',\n\n    // Auth\n    'auth.login': 'Login',\n    'auth.logout': 'Logout',\n    'auth.username': 'Username',\n    'auth.password': 'Password',\n    'auth.loginBtn': 'Login',\n    'auth.logoutConfirm': 'Are you sure you want to logout?',\n\n    // Language\n    'lang.english': 'English',\n    'lang.arabic': 'العربية',\n    'lang.switch': 'Switch Language',\n\n    // Chat\n    'chat.title': 'Team Chat',\n    'chat.taskChat': 'Task Chat',\n    'chat.typeMessage': 'Type a message...',\n    'chat.send': 'Send',\n    'chat.close': 'Close',\n\n    // Profile\n    'profile.title': 'Profile',\n    'profile.settings': 'Settings',\n    'profile.helpSupport': 'Help & Support',\n    'profile.adminOptions': 'Admin Options',\n\n    // Statistics\n    'stats.activeTasks': 'Active Tasks',\n    'stats.completed': 'Completed',\n    'stats.overdue': 'Overdue',\n    'stats.total': 'Total',\n  },\n  ar: {\n    // Navigation\n    'nav.dashboard': 'لوحة التحكم',\n    'nav.tasks': 'المهام',\n    'nav.myTasks': 'مهامي',\n    'nav.team': 'الفريق',\n    'nav.customers': 'العملاء',\n    'nav.profile': 'الملف الشخصي',\n    'nav.admin': 'المدير',\n\n    // Dashboard\n    'dashboard.title': 'لوحة التحكم',\n    'dashboard.welcome': 'أهلاً بك في نظام إدارة المهام',\n    'dashboard.quickActions': 'إجراءات سريعة',\n    'dashboard.createTask': 'إنشاء مهمة',\n    'dashboard.addMember': 'إضافة عضو',\n    'dashboard.admin': 'المدير',\n    'dashboard.weeklySchedule': 'الجدول الأسبوعي',\n    'dashboard.upcomingSchedule': 'الجدول القادم',\n    'dashboard.recentTasks': 'المهام الحديثة',\n\n    // Tasks\n    'task.title': 'العنوان',\n    'task.description': 'الوصف',\n    'task.customer': 'العميل',\n    'task.phone': 'الهاتف',\n    'task.address': 'العنوان',\n    'task.time': 'الوقت',\n    'task.notes': 'ملاحظات',\n    'task.priority': 'الأولوية',\n    'task.status': 'الحالة',\n    'task.assignees': 'المكلفون',\n    'task.dueDate': 'تاريخ الاستحقاق',\n    'task.progress': 'التقدم',\n\n    // Status\n    'status.pending': 'في الانتظار',\n    'status.todo': 'في الانتظار',\n    'status.start': 'بدأ',\n    'status.complete': 'مكتمل',\n\n    // Priority\n    'priority.low': 'منخفض',\n    'priority.medium': 'متوسط',\n    'priority.متوسطة': 'متوسط',\n    'priority.high': 'عالي',\n\n    // Actions\n    'action.create': 'إنشاء',\n    'action.edit': 'تحرير',\n    'action.delete': 'حذف',\n    'action.save': 'حفظ',\n    'action.cancel': 'إلغاء',\n    'action.close': 'إغلاق',\n    'action.submit': 'إرسال',\n    'action.startTask': 'بدء المهمة',\n    'action.completeTask': 'إكمال المهمة',\n    'action.resetTask': 'إعادة تعيين للانتظار',\n\n    // Common\n    'common.viewAll': 'عرض الكل',\n\n    // Messages\n    'msg.noTasks': 'لا توجد مهام',\n    'msg.noTeamMembers': 'لا يوجد أعضاء في الفريق',\n    'msg.noUpcomingTasks': 'لا توجد مهام قادمة في الأيام السبعة القادمة',\n    'msg.taskCreated': 'تم إنشاء المهمة بنجاح',\n    'msg.taskUpdated': 'تم تحديث المهمة بنجاح',\n    'msg.loading': 'جاري التحميل...',\n    'msg.saving': 'جاري الحفظ...',\n    'msg.updating': 'جاري التحديث...',\n\n    // My Tasks\n    'myTasks.title': 'مهامي',\n    'myTasks.subtitle': 'نظرة عامة على المهام الشخصية مع الأولويات والتذكيرات',\n    'myTasks.highPriority': 'المهام عالية الأولوية',\n    'myTasks.overdue': 'المهام المتأخرة',\n    'myTasks.upcoming': 'القادمة هذا الأسبوع',\n    'myTasks.withComments': 'المهام مع التعليقات',\n\n    // Admin\n    'admin.logs': 'سجلات النظام',\n    'admin.access': 'وصول المدير',\n    'admin.password': 'أدخل كلمة مرور المدير',\n    'admin.login': 'الوصول إلى لوحة المدير',\n    'admin.userManagement': 'إدارة المستخدمين',\n    'admin.addUser': 'إضافة مستخدم',\n    'admin.approveUsers': 'موافقة المستخدمين',\n\n    // Team\n    'team.title': 'الفريق',\n    'team.addMember': 'إضافة عضو',\n    'team.memberName': 'اسم العضو',\n    'team.memberRole': 'دور العضو',\n    'team.memberEmail': 'بريد العضو الإلكتروني',\n    'team.memberStatus': 'حالة العضو',\n    'team.available': 'متوفر',\n    'team.busy': 'مشغول',\n    'team.offline': 'غير متصل',\n\n    // Users\n    'user.username': 'اسم المستخدم',\n    'user.password': 'كلمة المرور',\n    'user.role': 'الدور',\n    'user.admin': 'مدير',\n    'user.regular': 'مستخدم عادي',\n    'user.approve': 'موافقة',\n    'user.reject': 'رفض',\n    'user.pending': 'في الانتظار',\n    'user.approved': 'مقبول',\n    'user.rejected': 'مرفوض',\n\n    // Auth\n    'auth.login': 'تسجيل الدخول',\n    'auth.logout': 'تسجيل الخروج',\n    'auth.username': 'اسم المستخدم',\n    'auth.password': 'كلمة المرور',\n    'auth.loginBtn': 'دخول',\n    'auth.logoutConfirm': 'هل أنت متأكد من تسجيل الخروج؟',\n\n    // Language\n    'lang.english': 'English',\n    'lang.arabic': 'العربية',\n    'lang.switch': 'تبديل اللغة',\n\n    // Chat\n    'chat.title': 'دردشة الفريق',\n    'chat.taskChat': 'دردشة المهمة',\n    'chat.typeMessage': 'اكتب رسالة...',\n    'chat.send': 'إرسال',\n    'chat.close': 'إغلاق',\n\n    // Profile\n    'profile.title': 'الملف الشخصي',\n    'profile.settings': 'الإعدادات',\n    'profile.helpSupport': 'المساعدة والدعم',\n    'profile.adminOptions': 'خيارات المدير',\n\n    // Statistics\n    'stats.activeTasks': 'المهام الفعالة',\n    'stats.completed': 'المهام المكتملة',\n    'stats.overdue': 'في الانتظار',\n    'stats.total': 'الإجمالي',\n\n    // Error Messages\n    'error.generic': 'حدث خطأ. يرجى المحاولة مرة أخرى.',\n    'error.network': 'خطأ في الاتصال بالشبكة. يرجى التحقق من اتصالك بالإنترنت.',\n    'error.unauthorized': 'غير مصرح لك بالوصول لهذا المورد.',\n    'error.forbidden': 'تم رفض الوصول. صلاحيات غير كافية.',\n    'error.notFound': 'المورد المطلوب غير موجود.',\n    'error.validation': 'يرجى التحقق من البيانات المدخلة والمحاولة مرة أخرى.',\n    'error.server': 'خطأ في الخادم. يرجى المحاولة لاحقاً.',\n    'error.timeout': 'انتهت مهلة الطلب. يرجى المحاولة مرة أخرى.',\n    'error.database': 'خطأ في قاعدة البيانات. يرجى التواصل مع الدعم الفني.',\n    'error.session': 'انتهت صلاحية جلستك. يرجى تسجيل الدخول مرة أخرى.',\n    'error.fileUpload': 'فشل في رفع الملف. يرجى التحقق من حجم ونوع الملف.',\n    'error.invalidFormat': 'تنسيق غير صحيح. يرجى التحقق من البيانات المدخلة.',\n    'error.tooManyRequests': 'طلبات كثيرة جداً. يرجى الانتظار قبل المحاولة مرة أخرى.',\n\n    // Form Validation Errors\n    'validation.required': 'هذا الحقل مطلوب',\n    'validation.email': 'يرجى إدخال عنوان بريد إلكتروني صحيح',\n    'validation.phone': 'يرجى إدخال رقم هاتف صحيح',\n    'validation.minLength': 'يجب أن يكون {min} أحرف على الأقل',\n    'validation.maxLength': 'الحد الأقصى {max} حرف',\n    'validation.password': 'كلمة المرور يجب أن تكون 6 أحرف على الأقل',\n    'validation.passwordMatch': 'كلمات المرور غير متطابقة',\n    'validation.future': 'التاريخ يجب أن يكون في المستقبل',\n    'validation.past': 'التاريخ يجب أن يكون في الماضي',\n\n    // User Guidance\n    'guidance.loading': 'جاري تحميل البيانات، يرجى الانتظار...',\n    'guidance.saving': 'جاري حفظ التغييرات...',\n    'guidance.deleting': 'جاري حذف العنصر...',\n    'guidance.uploading': 'جاري رفع الملف...',\n    'guidance.connecting': 'جاري تأسيس الاتصال...',\n    'guidance.processing': 'جاري معالجة طلبك...',\n    'guidance.retry': 'اضغط للمحاولة مرة أخرى',\n    'guidance.refresh': 'أعد تحميل الصفحة',\n    'guidance.contactSupport': 'تواصل مع الدعم الفني إذا استمرت المشكلة',\n\n    // WhatsApp Messages\n    'whatsapp.connecting': 'جاري الاتصال بالواتساب...',\n    'whatsapp.connected': 'تم الاتصال بالواتساب بنجاح',\n    'whatsapp.disconnected': 'تم قطع الاتصال مع الواتساب',\n    'whatsapp.qrCode': 'امسح رمز QR بالواتساب',\n    'whatsapp.reconnecting': 'جاري إعادة الاتصال بالواتساب...',\n    'whatsapp.messageSent': 'تم إرسال الرسالة بنجاح',\n    'whatsapp.messageFailed': 'فشل في إرسال الرسالة',\n    'whatsapp.settingsUpdated': 'تم تحديث إعدادات الواتساب',\n\n    // Success Messages\n    'success.taskCreated': 'تم إنشاء المهمة بنجاح',\n    'success.taskUpdated': 'تم تحديث المهمة بنجاح',\n    'success.taskDeleted': 'تم حذف المهمة بنجاح',\n    'success.userCreated': 'تم إنشاء المستخدم بنجاح',\n    'success.userUpdated': 'تم تحديث المستخدم بنجاح',\n    'success.profileUpdated': 'تم تحديث الملف الشخصي بنجاح',\n    'success.passwordChanged': 'تم تغيير كلمة المرور بنجاح',\n    'success.settingsSaved': 'تم حفظ الإعدادات بنجاح',\n  },\n};\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<'en' | 'ar'>('ar');\n\n  useEffect(() => {\n    // Force Arabic language by default and override any saved language\n    setLanguageState('ar');\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';\n    document.documentElement.lang = language;\n    localStorage.setItem('language', language);\n  }, [language]);\n\n  const setLanguage = (lang: 'en' | 'ar') => {\n    console.log('Setting language to:', lang);\n    setLanguageState(lang);\n  };\n\n  const t = (key: string): string => {\n    const translation = translations[language][key as keyof typeof translations['en']];\n    if (!translation) {\n      console.warn(`Missing translation for key: ${key} in language: ${language}`);\n      return key;\n    }\n    return translation;\n  };\n\n  const isRTL = language === 'ar';\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t, isRTL }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (context === undefined) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n}","size_bytes":18190},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}","size_bytes":256},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*/.test(error.message);\n}","size_bytes":103},"client/src/lib/error-handler.ts":{"content":"import { useToast } from \"@/hooks/use-toast\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport interface ErrorInfo {\n  code?: string;\n  status?: number;\n  message?: string;\n  details?: any;\n}\n\n// Error codes and their corresponding translation keys\nexport const ERROR_CODES = {\n  NETWORK_ERROR: 'error.network',\n  UNAUTHORIZED: 'error.unauthorized',\n  FORBIDDEN: 'error.forbidden',\n  NOT_FOUND: 'error.notFound',\n  VALIDATION_ERROR: 'error.validation',\n  SERVER_ERROR: 'error.server',\n  TIMEOUT: 'error.timeout',\n  DATABASE_ERROR: 'error.database',\n  SESSION_EXPIRED: 'error.session',\n  FILE_UPLOAD_ERROR: 'error.fileUpload',\n  INVALID_FORMAT: 'error.invalidFormat',\n  TOO_MANY_REQUESTS: 'error.tooManyRequests',\n  GENERIC_ERROR: 'error.generic',\n} as const;\n\n// Custom hook for error handling\nexport function useErrorHandler() {\n  const { toast } = useToast();\n  const { t } = useLanguage();\n\n  const handleError = (error: any, options?: { \n    title?: string; \n    description?: string;\n    action?: () => void;\n    actionLabel?: string;\n  }) => {\n    let translationKey: string = ERROR_CODES.GENERIC_ERROR;\n    let customMessage = '';\n\n    // Determine error type and get appropriate translation\n    if (error?.message) {\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        translationKey = ERROR_CODES.UNAUTHORIZED;\n      } else if (error.message.includes('403') || error.message.includes('Forbidden')) {\n        translationKey = ERROR_CODES.FORBIDDEN;\n      } else if (error.message.includes('404') || error.message.includes('Not Found')) {\n        translationKey = ERROR_CODES.NOT_FOUND;\n      } else if (error.message.includes('500') || error.message.includes('Server Error')) {\n        translationKey = ERROR_CODES.SERVER_ERROR;\n      } else if (error.message.includes('timeout')) {\n        translationKey = ERROR_CODES.TIMEOUT;\n      } else if (error.message.includes('network') || error.message.includes('fetch')) {\n        translationKey = ERROR_CODES.NETWORK_ERROR;\n      } else if (error.message.includes('validation')) {\n        translationKey = ERROR_CODES.VALIDATION_ERROR;\n      } else if (error.message.includes('429')) {\n        translationKey = ERROR_CODES.TOO_MANY_REQUESTS;\n      }\n      customMessage = error.message;\n    }\n\n    // Show toast with localized error message\n    toast({\n      title: options?.title || t('error.generic'),\n      description: options?.description || t(translationKey) || customMessage,\n      variant: \"destructive\",\n    });\n\n    // Log error for debugging\n    console.error('Error handled:', {\n      error,\n      translationKey,\n      message: t(translationKey),\n      customMessage,\n    });\n  };\n\n  const handleSuccess = (messageKey: string, options?: {\n    title?: string;\n    description?: string;\n  }) => {\n    toast({\n      title: options?.title || t('common.success'),\n      description: options?.description || t(messageKey),\n      variant: \"default\",\n    });\n  };\n\n  return {\n    handleError,\n    handleSuccess,\n    t, // Expose translation function for convenience\n  };\n}\n\n// Utility function to get localized validation message\nexport function getValidationMessage(field: string, type: string, params?: any): string {\n  const messageKey = `validation.${type}`;\n  \n  // Replace placeholders in message (e.g., {min}, {max})\n  let message = messageKey;\n  if (params) {\n    Object.keys(params).forEach(key => {\n      message = message.replace(`{${key}}`, params[key]);\n    });\n  }\n  \n  return message;\n}\n\n// Utility to format error for display\nexport function formatErrorMessage(error: any): string {\n  if (typeof error === 'string') return error;\n  if (error?.message) return error.message;\n  if (error?.error?.message) return error.error.message;\n  return 'An unexpected error occurred';\n}\n\n// HTTP status code to error code mapping\nexport function getErrorCodeFromStatus(status: number): keyof typeof ERROR_CODES {\n  switch (status) {\n    case 401:\n      return 'UNAUTHORIZED';\n    case 403:\n      return 'FORBIDDEN';\n    case 404:\n      return 'NOT_FOUND';\n    case 422:\n      return 'VALIDATION_ERROR';\n    case 429:\n      return 'TOO_MANY_REQUESTS';\n    case 500:\n    case 502:\n    case 503:\n      return 'SERVER_ERROR';\n    case 408:\n      return 'TIMEOUT';\n    default:\n      return 'GENERIC_ERROR';\n  }\n}\n\n// Enhanced error boundary for React components\nexport class ErrorBoundary extends Error {\n  constructor(\n    message: string,\n    public code?: string,\n    public status?: number,\n    public details?: any\n  ) {\n    super(message);\n    this.name = 'ErrorBoundary';\n  }\n}","size_bytes":4594},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/admin-logs.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Activity, Calendar, User, Globe, Smartphone, Filter, ArrowUpDown } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface SystemLog {\n  id: string;\n  action: string;\n  userId: string | null;\n  username: string | null;\n  details: string | null;\n  ipAddress: string | null;\n  userAgent: string | null;\n  timestamp: string;\n}\n\nexport default function AdminLogs() {\n  const { t } = useLanguage();\n  const [actionFilter, setActionFilter] = useState<string>(\"all\");\n  const [sortOrder, setSortOrder] = useState<\"newest\" | \"oldest\">(\"newest\");\n\n  // Get system logs\n  const { data: logs = [], isLoading } = useQuery<SystemLog[]>({\n    queryKey: [\"/api/admin/logs\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const getActionBadgeColor = (action: string) => {\n    switch (action) {\n      case \"login_success\":\n        return \"bg-green-100 text-green-800\";\n      case \"login_failed\":\n        return \"bg-red-100 text-red-800\";\n      case \"logout\":\n        return \"bg-gray-100 text-gray-800\";\n      case \"task_created\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"task_updated\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"task_status_changed\":\n        return \"bg-orange-100 text-orange-800\";\n      case \"task_progress_updated\":\n        return \"bg-indigo-100 text-indigo-800\";\n      case \"task_deleted\":\n        return \"bg-red-100 text-red-800\";\n      case \"role_changed\":\n        return \"bg-purple-100 text-purple-800\";\n      case \"user_created\":\n        return \"bg-cyan-100 text-cyan-800\";\n      case \"user_approved\":\n        return \"bg-green-100 text-green-800\";\n      case \"user_rejected\":\n        return \"bg-red-100 text-red-800\";\n      case \"user_role_changed\":\n        return \"bg-purple-100 text-purple-800\";\n      case \"user_disabled\":\n        return \"bg-gray-100 text-gray-800\";\n      case \"user_deleted\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getActionText = (action: string) => {\n    switch (action) {\n      case \"login_success\":\n        return \"تسجيل دخول ناجح\";\n      case \"login_failed\":\n        return \"فشل تسجيل الدخول\";\n      case \"logout\":\n        return \"تسجيل خروج\";\n      case \"task_created\":\n        return \"إنشاء مهمة\";\n      case \"task_updated\":\n        return \"تحديث مهمة\";\n      case \"task_status_changed\":\n        return \"تغيير حالة مهمة\";\n      case \"task_progress_updated\":\n        return \"تحديث تقدم مهمة\";\n      case \"task_deleted\":\n        return \"حذف مهمة\";\n      case \"role_changed\":\n        return \"تغيير صلاحيات\";\n      case \"user_created\":\n        return \"إنشاء مستخدم\";\n      case \"user_approved\":\n        return \"موافقة على مستخدم\";\n      case \"user_rejected\":\n        return \"رفض مستخدم\";\n      case \"user_role_changed\":\n        return \"تغيير دور مستخدم\";\n      case \"user_disabled\":\n        return \"تعطيل مستخدم\";\n      case \"user_deleted\":\n        return \"حذف مستخدم\";\n      default:\n        return action;\n    }\n  };\n\n  const parseDetails = (detailsStr: string | null) => {\n    if (!detailsStr) return null;\n    try {\n      return JSON.parse(detailsStr);\n    } catch {\n      return detailsStr;\n    }\n  };\n\n  const filteredLogs = logs.filter(log => {\n    if (actionFilter === \"all\") return true;\n    return log.action === actionFilter;\n  });\n\n  // Sort logs by timestamp\n  const sortedLogs = [...filteredLogs].sort((a, b) => {\n    const dateA = new Date(a.timestamp);\n    const dateB = new Date(b.timestamp);\n    return sortOrder === \"newest\" ? dateB.getTime() - dateA.getTime() : dateA.getTime() - dateB.getTime();\n  });\n\n  const uniqueActions = Array.from(new Set(logs.map(log => log.action)));\n\n  if (isLoading) {\n    return (\n      <div className=\"p-4 space-y-4\">\n        <h1 className=\"text-xl font-medium\">سجل أحداث النظام</h1>\n        <div className=\"space-y-4\">\n          {[...Array(10)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"pt-6\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h1 className=\"text-lg font-semibold text-primary mb-2\">\n          اهلا بكم في برنامج تتبع العمل في شركة اشراق الودق لتكنولوجيا المعلومات\n        </h1>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <h1 className=\"text-xl font-medium flex items-center\" data-testid=\"text-admin-logs-title\">\n          <Activity className=\"h-5 w-5 mr-2\" />\n          سجل أحداث النظام\n        </h1>\n        <div className=\"flex items-center space-x-2 space-x-reverse\">\n          <Filter className=\"h-4 w-4\" />\n          <Select value={actionFilter} onValueChange={setActionFilter}>\n            <SelectTrigger className=\"w-40\">\n              <SelectValue placeholder=\"فلترة الأحداث\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">جميع الأحداث</SelectItem>\n              {uniqueActions.map(action => (\n                <SelectItem key={action} value={action}>\n                  {getActionText(action)}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          \n          <ArrowUpDown className=\"h-4 w-4\" />\n          <Select value={sortOrder} onValueChange={(value: \"newest\" | \"oldest\") => setSortOrder(value)}>\n            <SelectTrigger className=\"w-28\">\n              <SelectValue placeholder=\"الترتيب\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"newest\">الأحدث أولاً</SelectItem>\n              <SelectItem value=\"oldest\">الأقدم أولاً</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {/* Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <Activity className=\"h-6 w-6 mx-auto mb-2 text-blue-600\" />\n            <div className=\"text-2xl font-bold text-blue-600\">{logs.length}</div>\n            <div className=\"text-sm text-muted-foreground\">إجمالي الأحداث</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <User className=\"h-6 w-6 mx-auto mb-2 text-green-600\" />\n            <div className=\"text-2xl font-bold text-green-600\">\n              {logs.filter(log => log.action === \"login_success\").length}\n            </div>\n            <div className=\"text-sm text-muted-foreground\">تسجيلات دخول ناجحة</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <Activity className=\"h-6 w-6 mx-auto mb-2 text-yellow-600\" />\n            <div className=\"text-2xl font-bold text-yellow-600\">\n              {logs.filter(log => log.action.includes(\"task\")).length}\n            </div>\n            <div className=\"text-sm text-muted-foreground\">أحداث المهام</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <Activity className=\"h-6 w-6 mx-auto mb-2 text-purple-600\" />\n            <div className=\"text-2xl font-bold text-purple-600\">\n              {logs.filter(log => log.action === \"role_changed\").length}\n            </div>\n            <div className=\"text-sm text-muted-foreground\">تغييرات الصلاحيات</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Logs List */}\n      <div className=\"space-y-4\">\n        {filteredLogs.length === 0 ? (\n          <Card>\n            <CardContent className=\"pt-6 text-center\">\n              <Activity className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n              <h3 className=\"text-lg font-medium mb-2\">لا توجد أحداث</h3>\n              <p className=\"text-muted-foreground\">\n                {actionFilter === \"all\" \n                  ? \"لم يتم تسجيل أي أحداث بعد\"\n                  : `لا توجد أحداث من نوع \"${getActionText(actionFilter)}\"`\n                }\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          sortedLogs.map((log) => {\n            const details = parseDetails(log.details);\n            return (\n              <Card key={log.id} className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center space-x-2 space-x-reverse\">\n                      <Badge className={getActionBadgeColor(log.action)}>\n                        {getActionText(log.action)}\n                      </Badge>\n                      <span className=\"text-sm font-medium\">\n                        {log.username || \"نظام\"}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center text-sm text-muted-foreground\">\n                      <Calendar className=\"h-4 w-4 mr-1\" />\n                      {new Date(log.timestamp).toLocaleString('en-GB')}\n                    </div>\n                  </div>\n\n                  {/* Details */}\n                  {details && (\n                    <div className=\"mb-3 p-3 bg-gray-50 rounded-lg text-sm\">\n                      {typeof details === 'object' ? (\n                        <div className=\"space-y-1\">\n                          {Object.entries(details).map(([key, value]) => (\n                            <div key={key} className=\"flex items-center\">\n                              <span className=\"font-medium mr-2\">{key}:</span>\n                              <span>{String(value)}</span>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <span>{details}</span>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Technical Info */}\n                  <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                    {log.ipAddress && (\n                      <div className=\"flex items-center\">\n                        <Globe className=\"h-3 w-3 mr-1\" />\n                        {log.ipAddress}\n                      </div>\n                    )}\n                    {log.userAgent && (\n                      <div className=\"flex items-center\">\n                        <Smartphone className=\"h-3 w-3 mr-1\" />\n                        <span className=\"truncate max-w-xs\">\n                          {log.userAgent.split(' ')[0]}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":11698},"client/src/pages/admin-users.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { \n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { UserCheck, UserX, Users, Clock, UserPlus, Shield, Power, Trash2, Key, Download, Archive, FileSpreadsheet } from \"lucide-react\";\nimport { AddUserForm } from \"@/components/admin/add-user-form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\ninterface User {\n  id: string;\n  username: string;\n  role: string;\n  isApproved: string;\n  isActive: string;\n  createdAt: string;\n}\n\nexport default function AdminUsers() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [resetPasswordUser, setResetPasswordUser] = useState<User | null>(null);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [isExporting, setIsExporting] = useState(false);\n  const [isBackingUp, setIsBackingUp] = useState(false);\n\n  // Get all users\n  const { data: users = [], isLoading } = useQuery<User[]>({\n    queryKey: [\"/api/admin/users\"],\n  });\n\n  const approveMutation = useMutation({\n    mutationFn: async ({ userId, action }: { userId: string; action: \"approved\" | \"rejected\" }) => {\n      await apiRequest(\"PATCH\", `/api/admin/users/${userId}/approve`, { isApproved: action });\n    },\n    onSuccess: (_, { action }) => {\n      toast({\n        title: action === \"approved\" ? \"تم قبول المستخدم\" : \"تم رفض المستخدم\",\n        description: action === \"approved\" ? \"المستخدم يمكنه الآن الدخول للنظام\" : \"تم رفض طلب المستخدم\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ\",\n        description: \"حدث خطأ في معالجة الطلب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const roleUpdateMutation = useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: string }) => {\n      await apiRequest(\"PATCH\", `/api/admin/users/${userId}/role`, { role });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تحديث الصلاحيات\",\n        description: \"تم تحديث صلاحيات المستخدم بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ\",\n        description: \"حدث خطأ في تحديث الصلاحيات\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const toggleStatusMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      await apiRequest(\"PATCH\", `/api/admin/users/${userId}/toggle`);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تغيير حالة المستخدم\",\n        description: \"تم تحديث حالة المستخدم بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تغيير الحالة\",\n        description: \"حدث خطأ أثناء تغيير حالة المستخدم\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      await apiRequest(\"DELETE\", `/api/admin/users/${userId}`);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم حذف المستخدم\",\n        description: \"تم حذف المستخدم بنجاح من النظام\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في الحذف\",\n        description: \"حدث خطأ أثناء حذف المستخدم\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetPasswordMutation = useMutation({\n    mutationFn: async ({ userId, newPassword }: { userId: string; newPassword: string }) => {\n      await apiRequest(\"PATCH\", `/api/admin/users/${userId}/reset-password`, { newPassword });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم إعادة تعيين كلمة المرور\",\n        description: \"تم إعادة تعيين كلمة مرور المستخدم بنجاح\",\n      });\n      setResetPasswordUser(null);\n      setNewPassword(\"\");\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في إعادة تعيين كلمة المرور\",\n        description: \"حدث خطأ أثناء إعادة تعيين كلمة المرور\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleApprove = (userId: string) => {\n    approveMutation.mutate({ userId, action: \"approved\" });\n  };\n\n  const handleReject = (userId: string) => {\n    approveMutation.mutate({ userId, action: \"rejected\" });\n  };\n\n\n\n  const getStatusBadge = (isApproved: string) => {\n    switch (isApproved) {\n      case \"approved\":\n        return <Badge className=\"bg-green-100 text-green-800\">موافق عليه</Badge>;\n      case \"rejected\":\n        return <Badge className=\"bg-red-100 text-red-800\">مرفوض</Badge>;\n      case \"pending\":\n        return <Badge className=\"bg-yellow-100 text-yellow-800\">في الانتظار</Badge>;\n      default:\n        return <Badge className=\"bg-gray-100 text-gray-800\">غير محدد</Badge>;\n    }\n  };\n\n  const getRoleText = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"مدير النظام\";\n      case \"supervisor\":\n        return \"مشرف\";\n      case \"user\":\n        return \"مستخدم عادي\";\n      default:\n        return \"غير محدد\";\n    }\n  };\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-red-100 text-red-800\";\n      case \"supervisor\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"user\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const handleRoleChange = (userId: string, role: string) => {\n    roleUpdateMutation.mutate({ userId, role });\n  };\n\n  const handleResetPassword = () => {\n    if (!resetPasswordUser || !newPassword || newPassword.length < 6) {\n      toast({\n        title: \"خطأ\",\n        description: \"كلمة المرور يجب أن تكون 6 أحرف على الأقل\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    resetPasswordMutation.mutate({ userId: resetPasswordUser.id, newPassword });\n  };\n\n  const handleExportCustomers = async () => {\n    setIsExporting(true);\n    try {\n      const response = await fetch('/api/admin/export/customers', {\n        method: 'GET',\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error('فشل في تصدير البيانات');\n      }\n      \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = `customers_export_${new Date().toISOString().split('T')[0]}.xlsx`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      toast({\n        title: \"تم التصدير بنجاح\",\n        description: \"تم تصدير بيانات العملاء إلى ملف Excel\",\n      });\n    } catch (error) {\n      toast({\n        title: \"خطأ في التصدير\",\n        description: \"حدث خطأ أثناء تصدير البيانات\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const handleFullBackup = async () => {\n    setIsBackingUp(true);\n    try {\n      const response = await fetch('/api/admin/backup/full', {\n        method: 'GET',\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error('فشل في إنشاء النسخة الاحتياطية');\n      }\n      \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = `backup_${new Date().toISOString().split('T')[0]}_${Date.now()}.zip`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      toast({\n        title: \"تم إنشاء النسخة الاحتياطية\",\n        description: \"تم إنشاء النسخة الاحتياطية الكاملة وتحميلها\",\n      });\n    } catch (error) {\n      toast({\n        title: \"خطأ في النسخة الاحتياطية\",\n        description: \"حدث خطأ أثناء إنشاء النسخة الاحتياطية\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsBackingUp(false);\n    }\n  };\n\n  const pendingUsers = users.filter(user => user.isApproved === \"pending\");\n  const approvedUsers = users.filter(user => user.isApproved === \"approved\");\n  const rejectedUsers = users.filter(user => user.isApproved === \"rejected\");\n\n  if (isLoading) {\n    return (\n      <div className=\"p-4 space-y-4\">\n        <h1 className=\"text-xl font-medium\">إدارة المستخدمين</h1>\n        <div className=\"space-y-4\">\n          {[...Array(3)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"pt-6\">\n                <div className=\"h-4 bg-gray-200 rounded w-1/4 mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h1 className=\"text-lg font-semibold text-primary mb-2\">\n          اهلا بكم في برنامج تتبع العمل في شركة اشراق الودق لتكنولوجيا المعلومات\n        </h1>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <h1 className=\"text-xl font-medium\" data-testid=\"text-admin-users-title\">\n          إدارة المستخدمين\n        </h1>\n        <div className=\"flex gap-2\">\n          {/* Export Customers Button */}\n          <Button\n            onClick={handleExportCustomers}\n            disabled={isExporting}\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"text-blue-600 border-blue-600 hover:bg-blue-50\"\n            data-testid=\"button-export-customers\"\n          >\n            {isExporting ? (\n              <>\n                <Download className=\"h-4 w-4 mr-1 animate-spin\" />\n                جاري التصدير...\n              </>\n            ) : (\n              <>\n                <FileSpreadsheet className=\"h-4 w-4 mr-1\" />\n                تصدير العملاء\n              </>\n            )}\n          </Button>\n          \n          {/* Full Backup Button */}\n          <Button\n            onClick={handleFullBackup}\n            disabled={isBackingUp}\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"text-purple-600 border-purple-600 hover:bg-purple-50\"\n            data-testid=\"button-full-backup\"\n          >\n            {isBackingUp ? (\n              <>\n                <Archive className=\"h-4 w-4 mr-1 animate-spin\" />\n                جاري النسخ...\n              </>\n            ) : (\n              <>\n                <Archive className=\"h-4 w-4 mr-1\" />\n                نسخة احتياطية كاملة\n              </>\n            )}\n          </Button>\n          \n          <Button\n            onClick={() => setShowAddUser(true)}\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n            size=\"sm\"\n            data-testid=\"button-add-user\"\n          >\n            <UserPlus className=\"h-4 w-4 mr-2\" />\n            إضافة مستخدم\n          </Button>\n        </div>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <Clock className=\"h-6 w-6 mx-auto mb-2 text-yellow-600\" />\n            <div className=\"text-2xl font-bold text-yellow-600\">{pendingUsers.length}</div>\n            <div className=\"text-sm text-muted-foreground\">في الانتظار</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <UserCheck className=\"h-6 w-6 mx-auto mb-2 text-green-600\" />\n            <div className=\"text-2xl font-bold text-green-600\">{approvedUsers.length}</div>\n            <div className=\"text-sm text-muted-foreground\">موافق عليهم</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4 text-center\">\n            <UserX className=\"h-6 w-6 mx-auto mb-2 text-red-600\" />\n            <div className=\"text-2xl font-bold text-red-600\">{rejectedUsers.length}</div>\n            <div className=\"text-sm text-muted-foreground\">مرفوضين</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Pending Users - Priority Section */}\n      {pendingUsers.length > 0 && (\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-medium mb-4 text-yellow-700 flex items-center\">\n            <Clock className=\"h-5 w-5 mr-2\" />\n            المستخدمين في الانتظار ({pendingUsers.length})\n          </h2>\n          <div className=\"space-y-4\">\n            {pendingUsers.map((user) => (\n              <Card key={user.id} className=\"border-yellow-200 bg-yellow-50\">\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h3 className=\"font-medium\" data-testid={`text-user-${user.id}`}>\n                        {user.username}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {getRoleText(user.role)} • تسجل في: {new Date(user.createdAt).toLocaleDateString('en-GB')}\n                      </p>\n                      <div className=\"mt-2\">\n                        {getStatusBadge(user.isApproved)}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <Button\n                        size=\"sm\"\n                        className=\"bg-green-600 hover:bg-green-700 text-white\"\n                        onClick={() => handleApprove(user.id)}\n                        disabled={approveMutation.isPending}\n                        data-testid={`button-approve-${user.id}`}\n                      >\n                        <UserCheck className=\"h-4 w-4 mr-1\" />\n                        قبول\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleReject(user.id)}\n                        disabled={approveMutation.isPending}\n                        data-testid={`button-reject-${user.id}`}\n                      >\n                        <UserX className=\"h-4 w-4 mr-1\" />\n                        رفض\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* All Users List */}\n      <div>\n        <h2 className=\"text-lg font-medium mb-4 flex items-center\">\n          <Users className=\"h-5 w-5 mr-2\" />\n          جميع المستخدمين ({users.length})\n        </h2>\n        <div className=\"space-y-4\">\n          {users.map((user) => (\n            <Card key={user.id}>\n              <CardContent className=\"pt-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-medium\" data-testid={`text-user-${user.id}`}>\n                      {user.username}\n                    </h3>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      تسجل في: {new Date(user.createdAt).toLocaleDateString('en-GB')}\n                    </p>\n                    <div className=\"flex items-center space-x-2 space-x-reverse\">\n                      {getStatusBadge(user.isApproved)}\n                      <Badge className={getRoleBadgeColor(user.role)}>\n                        <Shield className=\"h-3 w-3 ml-1\" />\n                        {getRoleText(user.role)}\n                      </Badge>\n                    </div>\n                  </div>\n                  <div className=\"flex flex-col space-y-2 min-w-[200px]\">\n                    {/* Role Management */}\n                    {user.isApproved === \"approved\" && (\n                      <div className=\"flex items-center space-x-2 space-x-reverse\">\n                        <span className=\"text-sm font-medium\">الصلاحية:</span>\n                        <Select\n                          value={user.role}\n                          onValueChange={(value) => handleRoleChange(user.id, value)}\n                          disabled={roleUpdateMutation.isPending}\n                        >\n                          <SelectTrigger className=\"w-32 h-8\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"user\">مستخدم عادي</SelectItem>\n                            <SelectItem value=\"supervisor\">مشرف</SelectItem>\n                            <SelectItem value=\"admin\">مدير النظام</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    )}\n                    {/* Approval Actions */}\n                    {user.isApproved === \"pending\" && (\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <Button\n                          size=\"sm\"\n                          className=\"bg-green-600 hover:bg-green-700 text-white\"\n                          onClick={() => handleApprove(user.id)}\n                          disabled={approveMutation.isPending}\n                          data-testid={`button-approve-${user.id}`}\n                        >\n                          <UserCheck className=\"h-4 w-4 mr-1\" />\n                          قبول\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => handleReject(user.id)}\n                          disabled={approveMutation.isPending}\n                          data-testid={`button-reject-${user.id}`}\n                        >\n                          <UserX className=\"h-4 w-4 mr-1\" />\n                          رفض\n                        </Button>\n                      </div>\n                    )}\n\n                    {/* User Management Actions for approved users */}\n                    {user.isApproved === \"approved\" && (\n                      <div className=\"flex items-center space-x-2 space-x-reverse mt-2 pt-2 border-t\">\n                        <span className=\"text-xs text-muted-foreground mr-2\">حالة الحساب:</span>\n                        <Badge variant={user.isActive === \"true\" ? \"default\" : \"destructive\"} className=\"text-xs\">\n                          {user.isActive === \"true\" ? \"نشط\" : \"معطل\"}\n                        </Badge>\n                        \n                        <AlertDialog>\n                          <AlertDialogTrigger asChild>\n                            <Button\n                              size=\"sm\"\n                              variant={user.isActive === \"true\" ? \"outline\" : \"default\"}\n                              className=\"text-xs h-7\"\n                              data-testid={`button-toggle-${user.id}`}\n                            >\n                              <Power className=\"h-3 w-3 mr-1\" />\n                              {user.isActive === \"true\" ? \"تعطيل\" : \"تفعيل\"}\n                            </Button>\n                          </AlertDialogTrigger>\n                          <AlertDialogContent>\n                            <AlertDialogHeader>\n                              <AlertDialogTitle>\n                                {user.isActive === \"true\" ? \"تعطيل المستخدم\" : \"تفعيل المستخدم\"}\n                              </AlertDialogTitle>\n                              <AlertDialogDescription>\n                                هل أنت متأكد من {user.isActive === \"true\" ? \"تعطيل\" : \"تفعيل\"} المستخدم \"{user.username}\"؟\n                                {user.isActive === \"true\" && \" لن يتمكن من الدخول للنظام بعد التعطيل.\"}\n                              </AlertDialogDescription>\n                            </AlertDialogHeader>\n                            <AlertDialogFooter>\n                              <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                              <AlertDialogAction\n                                onClick={() => toggleStatusMutation.mutate(user.id)}\n                                className={user.isActive === \"true\" ? \"bg-red-600 hover:bg-red-700\" : \"bg-green-600 hover:bg-green-700\"}\n                              >\n                                تأكيد\n                              </AlertDialogAction>\n                            </AlertDialogFooter>\n                          </AlertDialogContent>\n                        </AlertDialog>\n\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => setResetPasswordUser(user)}\n                          className=\"text-xs h-7 text-blue-600 border-blue-600\"\n                          data-testid={`button-reset-password-${user.id}`}\n                        >\n                          <Key className=\"h-3 w-3 mr-1\" />\n                          إعادة تعيين كلمة المرور\n                        </Button>\n\n                        <AlertDialog>\n                          <AlertDialogTrigger asChild>\n                            <Button\n                              size=\"sm\"\n                              variant=\"destructive\"\n                              className=\"text-xs h-7\"\n                              data-testid={`button-delete-${user.id}`}\n                            >\n                              <Trash2 className=\"h-3 w-3 mr-1\" />\n                              حذف\n                            </Button>\n                          </AlertDialogTrigger>\n                          <AlertDialogContent>\n                            <AlertDialogHeader>\n                              <AlertDialogTitle>حذف المستخدم</AlertDialogTitle>\n                              <AlertDialogDescription>\n                                هل أنت متأكد من حذف المستخدم \"{user.username}\"؟ هذا الإجراء لا يمكن التراجع عنه.\n                                سيتم حذف جميع بيانات المستخدم نهائياً.\n                              </AlertDialogDescription>\n                            </AlertDialogHeader>\n                            <AlertDialogFooter>\n                              <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                              <AlertDialogAction\n                                onClick={() => deleteMutation.mutate(user.id)}\n                                className=\"bg-red-600 hover:bg-red-700\"\n                              >\n                                حذف نهائي\n                              </AlertDialogAction>\n                            </AlertDialogFooter>\n                          </AlertDialogContent>\n                        </AlertDialog>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n\n      {users.length === 0 && (\n        <Card>\n          <CardContent className=\"pt-6 text-center\">\n            <Users className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n            <h3 className=\"text-lg font-medium mb-2\">لا يوجد مستخدمين</h3>\n            <p className=\"text-muted-foreground\">لم يتم تسجيل أي مستخدمين بعد</p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Add User Dialog */}\n      <Dialog open={showAddUser} onOpenChange={setShowAddUser}>\n        <DialogContent className=\"sm:max-w-md\">\n          <AddUserForm onSuccess={() => setShowAddUser(false)} />\n        </DialogContent>\n      </Dialog>\n\n      {/* Reset Password Dialog */}\n      <Dialog open={!!resetPasswordUser} onOpenChange={() => {\n        setResetPasswordUser(null);\n        setNewPassword(\"\");\n      }}>\n        <DialogContent className=\"sm:max-w-md\">\n          <div className=\"space-y-4\">\n            <div className=\"text-center\">\n              <Key className=\"h-12 w-12 mx-auto mb-4 text-blue-600\" />\n              <h2 className=\"text-lg font-semibold\">إعادة تعيين كلمة المرور</h2>\n              <p className=\"text-sm text-muted-foreground mt-2\">\n                إعادة تعيين كلمة مرور المستخدم: <span className=\"font-medium\">{resetPasswordUser?.username}</span>\n              </p>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"newPassword\">كلمة المرور الجديدة</Label>\n              <Input\n                id=\"newPassword\"\n                type=\"password\"\n                placeholder=\"أدخل كلمة المرور الجديدة (6 أحرف على الأقل)\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                data-testid=\"input-new-password\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                يجب أن تكون كلمة المرور 6 أحرف على الأقل\n              </p>\n            </div>\n            \n            <div className=\"flex space-x-2 space-x-reverse pt-4\">\n              <Button\n                onClick={handleResetPassword}\n                disabled={resetPasswordMutation.isPending || !newPassword || newPassword.length < 6}\n                className=\"flex-1\"\n                data-testid=\"button-confirm-reset\"\n              >\n                {resetPasswordMutation.isPending ? \"جارٍ التحديث...\" : \"تأكيد إعادة التعيين\"}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setResetPasswordUser(null);\n                  setNewPassword(\"\");\n                }}\n                className=\"flex-1\"\n                data-testid=\"button-cancel-reset\"\n              >\n                إلغاء\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":27954},"client/src/pages/customer-ratings.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ArrowUpDown, Star, MessageSquare, Phone, Calendar, User } from \"lucide-react\";\nimport { AdminGuard } from \"@/components/admin/admin-guard\";\n\ninterface CustomerRating {\n  id: string;\n  taskId: string;\n  customerId: string | null;\n  customerName: string;\n  customerPhone: string;\n  rating: string;\n  ratingText: string;\n  messageSent: string;\n  responseReceived: string;\n  createdAt: string;\n}\n\nexport default function CustomerRatingsPage() {\n  const [sortBy, setSortBy] = useState(\"createdAt\");\n  const [sortOrder, setSortOrder] = useState<\"asc\" | \"desc\">(\"desc\");\n\n  const { data: ratings = [], isLoading } = useQuery<CustomerRating[]>({\n    queryKey: [\"/api/customer-ratings\"],\n  });\n\n  const sortedRatings = [...ratings].sort((a: CustomerRating, b: CustomerRating) => {\n    const aValue = a[sortBy as keyof CustomerRating];\n    const bValue = b[sortBy as keyof CustomerRating];\n    \n    // Handle null/undefined values\n    if (aValue == null && bValue == null) return 0;\n    if (aValue == null) return sortOrder === \"asc\" ? -1 : 1;\n    if (bValue == null) return sortOrder === \"asc\" ? 1 : -1;\n    \n    if (sortOrder === \"asc\") {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n\n  const getRatingEmoji = (rating: string) => {\n    switch (rating) {\n      case 'angry': return '😠';\n      case 'satisfied': return '😊';\n      case 'very_satisfied': return '😍';\n      case 'pending': return '⏳';\n      default: return '❓';\n    }\n  };\n\n  const getRatingColor = (rating: string) => {\n    switch (rating) {\n      case 'angry': return 'destructive';\n      case 'satisfied': return 'secondary';\n      case 'very_satisfied': return 'default';\n      case 'pending': return 'outline';\n      default: return 'outline';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-GB', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">جاري تحميل التقييمات...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <AdminGuard>\n      <div className=\"container mx-auto px-4 py-8\" dir=\"rtl\">\n        <div className=\"flex flex-col space-y-6\">\n          {/* Header */}\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-foreground\">تقييمات العملاء</h1>\n              <p className=\"text-muted-foreground mt-2\">\n                عرض وإدارة تقييمات رضا العملاء المرسلة عند إكمال المهام\n              </p>\n            </div>\n            \n            {/* Sort Controls */}\n            <div className=\"flex items-center gap-2\">\n              <Select value={sortBy} onValueChange={setSortBy}>\n                <SelectTrigger className=\"w-40\" data-testid=\"select-sort-by\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"createdAt\">التاريخ</SelectItem>\n                  <SelectItem value=\"customerName\">اسم العميل</SelectItem>\n                  <SelectItem value=\"rating\">التقييم</SelectItem>\n                </SelectContent>\n              </Select>\n              \n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\")}\n                data-testid=\"button-toggle-sort\"\n              >\n                <ArrowUpDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Statistics Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"flex items-center p-6\">\n                <Star className=\"h-8 w-8 text-yellow-500 ml-4\" />\n                <div>\n                  <p className=\"text-2xl font-bold\">{ratings.length}</p>\n                  <p className=\"text-sm text-muted-foreground\">إجمالي التقييمات</p>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"flex items-center p-6\">\n                <div className=\"text-2xl ml-4\">😍</div>\n                <div>\n                  <p className=\"text-2xl font-bold\">\n                    {ratings.filter((r: CustomerRating) => r.rating === 'very_satisfied').length}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">راضي جداً</p>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"flex items-center p-6\">\n                <div className=\"text-2xl ml-4\">😊</div>\n                <div>\n                  <p className=\"text-2xl font-bold\">\n                    {ratings.filter((r: CustomerRating) => r.rating === 'satisfied').length}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">راضي</p>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"flex items-center p-6\">\n                <div className=\"text-2xl ml-4\">😠</div>\n                <div>\n                  <p className=\"text-2xl font-bold\">\n                    {ratings.filter((r: CustomerRating) => r.rating === 'angry').length}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">غاضب</p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Ratings List */}\n          <div className=\"space-y-4\">\n            {sortedRatings.length > 0 ? (\n              sortedRatings.map((rating: CustomerRating) => (\n                <Card key={rating.id} className=\"hover:shadow-md transition-shadow\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"text-2xl\">\n                          {getRatingEmoji(rating.rating)}\n                        </div>\n                        <div>\n                          <CardTitle className=\"text-lg\">{rating.customerName}</CardTitle>\n                          <div className=\"flex items-center gap-4 mt-1 text-sm text-muted-foreground\">\n                            <div className=\"flex items-center gap-1\">\n                              <Phone className=\"h-4 w-4\" />\n                              {rating.customerPhone}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-4 w-4\" />\n                              {formatDate(rating.createdAt)}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <Badge variant={getRatingColor(rating.rating) as any}>\n                        {rating.ratingText}\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  \n                  <CardContent className=\"pt-0\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <MessageSquare className=\"h-4 w-4 text-blue-500\" />\n                          <span className=\"font-medium\">حالة الطلب:</span>\n                          <Badge variant={rating.messageSent === 'true' ? 'default' : 'secondary'}>\n                            {rating.messageSent === 'true' ? 'تم الطلب' : 'لم يتم الطلب'}\n                          </Badge>\n                        </div>\n                        \n                        <div className=\"flex items-center gap-2\">\n                          <User className=\"h-4 w-4 text-green-500\" />\n                          <span className=\"font-medium\">حالة الرد:</span>\n                          <Badge variant={rating.responseReceived === 'true' ? 'default' : 'outline'}>\n                            {rating.responseReceived === 'true' ? 'تم الرد' : 'في انتظار الرد'}\n                          </Badge>\n                        </div>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <div>\n                          <span className=\"font-medium text-muted-foreground\">معرف المهمة:</span>\n                          <p className=\"text-xs font-mono bg-muted px-2 py-1 rounded mt-1\">\n                            {rating.taskId}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            ) : (\n              <Card>\n                <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                  <Star className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">لا توجد تقييمات بعد</h3>\n                  <p className=\"text-muted-foreground text-center\">\n                    سيتم عرض تقييمات العملاء هنا بمجرد إكمال المهام وطلب التقييمات\n                  </p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </AdminGuard>\n  );\n}","size_bytes":10488},"client/src/pages/customers.tsx":{"content":"import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Separator } from '@/components/ui/separator';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Users, Phone, Plus, Edit, Trash2, Search, X, Calendar, FileText, Eye, Mail, MapPin, Navigation, Map, List } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Customer, Task } from '@shared/schema';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/hooks/useAuth';\nimport { isUnauthorizedError } from '@/lib/authUtils';\n\n// نموذج التحقق للعميل\nconst customerSchema = z.object({\n  name: z.string().min(2, 'الاسم يجب أن يكون على الأقل حرفين'),\n  phone: z.string().min(1, 'رقم الهاتف مطلوب'),\n  email: z.string().email('البريد الإلكتروني غير صحيح').optional().or(z.literal('')),\n  address: z.string().optional(),\n  gpsLatitude: z.string().optional(),\n  gpsLongitude: z.string().optional(),\n  gpsAddress: z.string().optional(),\n});\n\ntype CustomerFormData = z.infer<typeof customerSchema>;\n\n// Map Component for displaying customers on a map\nconst CustomersMap = ({ customers, onCustomerSelect }: { customers: Customer[], onCustomerSelect: (customer: Customer) => void }) => {\n  const customersWithGPS = customers.filter(c => c.gpsLatitude && c.gpsLongitude);\n  \n  if (customersWithGPS.length === 0) {\n    return (\n      <div className=\"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n        <MapPin className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد مواقع GPS</h3>\n        <p className=\"text-gray-500\">لا يحتوي أي من العملاء المعروضين على إحداثيات GPS صحيحة</p>\n        <p className=\"text-sm text-gray-400 mt-2\">يرجى إضافة إحداثيات GPS للعملاء لعرضهم على الخريطة</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-center mb-2\">\n          <MapPin className=\"h-5 w-5 text-blue-600 mr-2\" />\n          <h3 className=\"text-lg font-medium text-blue-900\">عملاء مع مواقع GPS</h3>\n        </div>\n        <p className=\"text-blue-700 mb-4\">\n          يتم عرض {customersWithGPS.length} من العملاء الذين لديهم إحداثيات GPS صحيحة\n        </p>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n          {customersWithGPS.map((customer) => {\n            // Generate unique colors for each customer card\n            const getCustomerBorderColor = (customerId: string) => {\n              const colors = [\n                'border-l-emerald-500 bg-emerald-50/40',\n                'border-l-blue-500 bg-blue-50/40', \n                'border-l-violet-500 bg-violet-50/40',\n                'border-l-amber-500 bg-amber-50/40',\n                'border-l-pink-500 bg-pink-50/40',\n                'border-l-cyan-500 bg-cyan-50/40',\n                'border-l-rose-500 bg-rose-50/40',\n                'border-l-teal-500 bg-teal-50/40'\n              ];\n              const hash = customerId.split('').reduce((a, b) => a + b.charCodeAt(0), 0);\n              return colors[hash % colors.length];\n            };\n\n            return (\n              <Card key={customer.id} className={`border-l-4 ${getCustomerBorderColor(customer.id)} hover:shadow-md transition-all duration-200 hover:scale-[1.02] bg-white/90 backdrop-blur-sm`}>\n                <CardContent className=\"p-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-semibold text-sm text-gray-900 mb-2\">{customer.name}</h4>\n                      <div className=\"space-y-1 text-xs text-gray-600\">\n                        <div className=\"flex items-center\">\n                          <Phone className=\"h-3 w-3 mr-1\" />\n                          <span>{customer.phone}</span>\n                        </div>\n                        {customer.email && (\n                          <div className=\"flex items-center\">\n                            <Mail className=\"h-3 w-3 mr-1\" />\n                            <span className=\"truncate\">{customer.email}</span>\n                          </div>\n                        )}\n                        {customer.address && (\n                          <div className=\"flex items-start\">\n                            <span className=\"mr-1 text-xs\">📍</span>\n                            <span className=\"text-xs leading-tight line-clamp-2\">{customer.address}</span>\n                          </div>\n                        )}\n                        {customer.gpsAddress && (\n                          <div className=\"flex items-start\">\n                            <Navigation className=\"h-3 w-3 mr-1 text-green-600 mt-0.5\" />\n                            <span className=\"text-xs leading-tight text-green-700 line-clamp-1\">{customer.gpsAddress}</span>\n                          </div>\n                        )}\n                      </div>\n                  </div>\n                </div>\n                \n                  <div className=\"mt-3 pt-3 border-t border-gray-100\">\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"text-xs text-gray-500\">\n                        GPS: {parseFloat(customer.gpsLatitude!).toFixed(4)}, {parseFloat(customer.gpsLongitude!).toFixed(4)}\n                      </div>\n                      <div className=\"flex gap-1\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => {\n                            const url = `https://www.google.com/maps?q=${customer.gpsLatitude},${customer.gpsLongitude}`;\n                            window.open(url, '_blank');\n                          }}\n                          className=\"px-2 py-1 h-6 text-xs\"\n                          data-testid={`button-open-maps-${customer.id}`}\n                        >\n                          <Navigation className=\"h-3 w-3 mr-1\" />\n                          <span className=\"text-xs\">خرائط</span>\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => onCustomerSelect(customer)}\n                          className=\"px-2 py-1 h-6 text-xs\"\n                          data-testid={`button-details-${customer.id}`}\n                        >\n                          <Eye className=\"h-3 w-3 mr-1\" />\n                          <span className=\"text-xs\">تفاصيل</span>\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n        \n        {customersWithGPS.length > 0 && (\n          <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\n            <div className=\"flex items-center\">\n              <div className=\"h-3 w-3 bg-green-500 rounded-full mr-2\"></div>\n              <span className=\"text-sm text-green-800\">\n                يمكنك النقر على \"خرائط\" لفتح الموقع في تطبيق الخرائط، أو \"تفاصيل\" لعرض معلومات العميل\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default function Customers() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingCustomer, setEditingCustomer] = useState<Customer | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\n  const [viewMode, setViewMode] = useState<'list' | 'map'>('list');\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { isAuthenticated, isLoading: authLoading } = useAuth();\n\n  const { data: customers, isLoading } = useQuery<Customer[]>({\n    queryKey: ['/api/customers'],\n  });\n\n  // البحث عن المهام المرتبطة بعميل معين\n  const { data: customerTasks, isLoading: tasksLoading } = useQuery<Task[]>({\n    queryKey: ['/api/tasks', 'customer', selectedCustomer?.id],\n    enabled: !!selectedCustomer?.id,\n  });\n\n  // تصفية العملاء حسب البحث\n  const filteredCustomers = customers?.filter(customer => \n    customer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    customer.phone.includes(searchTerm) ||\n    customer.address?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) || [];\n\n  const form = useForm<CustomerFormData>({\n    resolver: zodResolver(customerSchema),\n    defaultValues: {\n      name: '',\n      phone: '',\n      email: '',\n      address: '',\n      gpsLatitude: '',\n      gpsLongitude: '',\n      gpsAddress: '',\n    },\n  });\n\n  const createCustomerMutation = useMutation({\n    mutationFn: async (data: CustomerFormData) => {\n      const customerData = {\n        name: data.name,\n        phone: data.phone,\n        email: data.email || undefined,\n        address: data.address || undefined,\n        gpsLatitude: data.gpsLatitude || undefined,\n        gpsLongitude: data.gpsLongitude || undefined,\n        gpsAddress: data.gpsAddress || undefined,\n      };\n      const response = await apiRequest('POST', '/api/customers', customerData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/customers'] });\n      toast({\n        title: 'تم إضافة العميل بنجاح',\n        description: 'تم حفظ معلومات العميل في النظام.',\n      });\n      form.reset();\n      setIsDialogOpen(false);\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"غير مخول\",\n          description: \"انت غير مسجل الدخول. جاري تسجيل الدخول مرة أخرى...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: 'خطأ في إضافة العميل',\n        description: 'حدث خطأ أثناء إضافة العميل. يرجى المحاولة مرة أخرى.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const updateCustomerMutation = useMutation({\n    mutationFn: async (data: CustomerFormData & { id: string }) => {\n      const customerData = {\n        name: data.name,\n        phone: data.phone,\n        email: data.email || undefined,\n        address: data.address || undefined,\n        gpsLatitude: data.gpsLatitude || undefined,\n        gpsLongitude: data.gpsLongitude || undefined,\n        gpsAddress: data.gpsAddress || undefined,\n      };\n      const response = await apiRequest('PUT', `/api/customers/${data.id}`, customerData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/customers'] });\n      toast({\n        title: 'تم تحديث العميل بنجاح',\n        description: 'تم حفظ التغييرات في النظام.',\n      });\n      form.reset();\n      setEditingCustomer(null);\n      setIsDialogOpen(false);\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"غير مخول\",\n          description: \"انت غير مسجل الدخول. جاري تسجيل الدخول مرة أخرى...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: 'خطأ في تحديث العميل',\n        description: 'حدث خطأ أثناء تحديث معلومات العميل.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const deleteCustomerMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/customers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/customers'] });\n      toast({\n        title: 'تم حذف العميل بنجاح',\n        description: 'تم حذف العميل من النظام.',\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"غير مخول\",\n          description: \"انت غير مسجل الدخول. جاري تسجيل الدخول مرة أخرى...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: 'خطأ في حذف العميل',\n        description: 'حدث خطأ أثناء حذف العميل.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const onSubmit = (data: CustomerFormData) => {\n    if (editingCustomer) {\n      updateCustomerMutation.mutate({ ...data, id: editingCustomer.id });\n    } else {\n      createCustomerMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (customer: Customer) => {\n    setEditingCustomer(customer);\n    form.reset({\n      name: customer.name,\n      phone: customer.phone,\n      email: customer.email || '',\n      address: customer.address || '',\n      gpsLatitude: customer.gpsLatitude || '',\n      gpsLongitude: customer.gpsLongitude || '',\n      gpsAddress: customer.gpsAddress || '',\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleDelete = (customer: Customer) => {\n    if (confirm(`هل أنت متأكد من حذف العميل \"${customer.name}\"؟`)) {\n      deleteCustomerMutation.mutate(customer.id);\n    }\n  };\n\n  const handleAddNew = () => {\n    setEditingCustomer(null);\n    form.reset();\n    setIsDialogOpen(true);\n  };\n\n  // الحصول على الموقع الحالي\n  const getCurrentLocation = () => {\n    setIsGettingLocation(true);\n    \n    if (!navigator.geolocation) {\n      toast({\n        title: 'خطأ',\n        description: 'المتصفح لا يدعم خدمة الموقع',\n        variant: 'destructive',\n      });\n      setIsGettingLocation(false);\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const lat = position.coords.latitude.toString();\n        const lng = position.coords.longitude.toString();\n        \n        form.setValue('gpsLatitude', lat);\n        form.setValue('gpsLongitude', lng);\n        \n        // محاولة الحصول على العنوان من الإحداثيات\n        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&addressdetails=1`, {\n          headers: {\n            'User-Agent': 'TaskFlow App (task@example.com)'\n          }\n        })\n          .then(response => {\n            if (!response.ok) {\n              throw new Error('فشل في الحصول على العنوان');\n            }\n            return response.json();\n          })\n          .then(data => {\n            if (data && data.display_name) {\n              form.setValue('gpsAddress', data.display_name);\n            }\n          })\n          .catch((error) => {\n            console.log('فشل في الحصول على العنوان:', error);\n          });\n\n        setIsGettingLocation(false);\n        toast({\n          title: 'تم الحصول على الموقع',\n          description: `تم حفظ الإحداثيات: ${lat.substring(0, 8)}, ${lng.substring(0, 8)}`,\n        });\n      },\n      (error) => {\n        console.error('خطأ في الموقع:', error);\n        setIsGettingLocation(false);\n        \n        let errorMessage = 'لم نتمكن من الحصول على موقعك';\n        \n        switch(error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'تم رفض الإذن للوصول للموقع. يرجى السماح بالوصول في إعدادات المتصفح';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'معلومات الموقع غير متاحة';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'انتهت مهلة البحث عن الموقع';\n            break;\n          default:\n            errorMessage = 'حدث خطأ غير معروف في تحديد الموقع';\n            break;\n        }\n        \n        toast({\n          title: 'خطأ في الموقع',\n          description: errorMessage,\n          variant: 'destructive',\n        });\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 60000\n      }\n    );\n  };\n\n  const openInMaps = (lat: string, lng: string) => {\n    const url = `https://www.google.com/maps?q=${lat},${lng}`;\n    window.open(url, '_blank');\n  };\n\n  const showCustomerDetails = (customer: Customer) => {\n    setSelectedCustomer(customer);\n    setIsDetailsOpen(true);\n  };\n\n  if (authLoading || isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p>جاري تحميل قائمة العملاء...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) return null;\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Users className=\"h-6 w-6\" />\n              <CardTitle className=\"text-xl\">إدارة العملاء</CardTitle>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              {/* View Toggle Buttons */}\n              <div className=\"flex border rounded-lg p-1\">\n                <Button\n                  onClick={() => setViewMode('list')}\n                  variant={viewMode === 'list' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  className=\"px-3\"\n                  data-testid=\"button-list-view\"\n                >\n                  <List className=\"h-4 w-4 mr-1\" />\n                  قائمة\n                </Button>\n                <Button\n                  onClick={() => setViewMode('map')}\n                  variant={viewMode === 'map' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  className=\"px-3\"\n                  data-testid=\"button-map-view\"\n                >\n                  <Map className=\"h-4 w-4 mr-1\" />\n                  خريطة\n                </Button>\n              </div>\n              \n              <Button\n                onClick={handleAddNew}\n                className=\"flex items-center space-x-2\"\n                data-testid=\"button-add-customer-main\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                <span>إضافة عميل جديد</span>\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n\n        <CardContent>\n          {/* شريط البحث */}\n          <div className=\"flex items-center space-x-2 mb-6\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"البحث في العملاء...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-customers\"\n              />\n            </div>\n            {searchTerm && (\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                onClick={() => setSearchTerm('')}\n                data-testid=\"button-clear-search\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n\n          {/* عرض القائمة أو الخريطة */}\n          {viewMode === 'list' ? (\n            <div className=\"space-y-2\">\n              {filteredCustomers.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Users className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">\n                    {searchTerm ? 'لا توجد نتائج للبحث' : 'لا يوجد عملاء حتى الآن'}\n                  </p>\n                </div>\n              ) : (\n              filteredCustomers.map((customer) => {\n                // تحديد لون الحد للعميل بناءً على ID\n                const getCustomerBorderColor = (customerId: string) => {\n                  const colors = [\n                    'border-l-blue-500 bg-blue-50/20',\n                    'border-l-green-500 bg-green-50/20',\n                    'border-l-purple-500 bg-purple-50/20',\n                    'border-l-orange-500 bg-orange-50/20',\n                    'border-l-pink-500 bg-pink-50/20',\n                    'border-l-indigo-500 bg-indigo-50/20',\n                    'border-l-teal-500 bg-teal-50/20',\n                    'border-l-rose-500 bg-rose-50/20'\n                  ];\n                  const hash = customerId.split('').reduce((a, b) => a + b.charCodeAt(0), 0);\n                  return colors[hash % colors.length];\n                };\n\n                return (\n                  <Card key={customer.id} className={`border-l-4 ${getCustomerBorderColor(customer.id)} hover:shadow-md transition-shadow`}>\n                    <CardContent className=\"p-2.5\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 min-w-0\">\n                          <h3 className=\"text-sm font-semibold mb-1 text-gray-900 truncate\">{customer.name}</h3>\n                          <div className=\"space-y-0.5\">\n                            <div className=\"flex items-center text-xs text-muted-foreground\">\n                              <Phone className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\n                              <span className=\"truncate\">{customer.phone}</span>\n                            </div>\n                            {customer.email && (\n                              <div className=\"flex items-center text-xs text-muted-foreground\">\n                                <Mail className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\n                                <span className=\"truncate\">{customer.email}</span>\n                              </div>\n                            )}\n                            {customer.address && (\n                              <div className=\"flex items-start text-xs text-muted-foreground\">\n                                <span className=\"mr-1.5 flex-shrink-0 mt-0.5\">📍</span>\n                                <span className=\"line-clamp-1\">{customer.address}</span>\n                              </div>\n                            )}\n                            {customer.gpsLatitude && customer.gpsLongitude && (\n                              <div className=\"flex items-center text-xs\">\n                                <MapPin className=\"h-3 w-3 mr-1.5 text-green-600 flex-shrink-0\" />\n                                <button\n                                  onClick={() => openInMaps(customer.gpsLatitude!, customer.gpsLongitude!)}\n                                  className=\"text-blue-600 hover:text-blue-700 underline text-xs truncate\"\n                                >\n                                  عرض على الخريطة\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-1 ml-2 flex-shrink-0\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => showCustomerDetails(customer)}\n                            className=\"p-1.5 h-7 w-7\"\n                            data-testid={`button-view-customer-${customer.id}`}\n                          >\n                            <Eye className=\"h-3 w-3\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleEdit(customer)}\n                            className=\"p-1.5 h-7 w-7\"\n                            data-testid={`button-edit-customer-${customer.id}`}\n                          >\n                            <Edit className=\"h-3 w-3\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleDelete(customer)}\n                            className=\"p-1.5 h-7 w-7 text-red-600 hover:text-red-700\"\n                            data-testid={`button-delete-customer-${customer.id}`}\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })\n              )}\n            </div>\n          ) : (\n            /* Map View */\n            <div className=\"space-y-4\">\n              {filteredCustomers.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Map className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">\n                    {searchTerm ? 'لا توجد نتائج للبحث' : 'لا يوجد عملاء لعرضهم على الخريطة'}\n                  </p>\n                </div>\n              ) : (\n                <CustomersMap customers={filteredCustomers} onCustomerSelect={showCustomerDetails} />\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* نافذة إضافة/تعديل العميل */}\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"sm:max-w-lg max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingCustomer ? 'تعديل بيانات العميل' : 'إضافة عميل جديد'}\n            </DialogTitle>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>اسم العميل *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"أدخل اسم العميل\"\n                        {...field}\n                        data-testid=\"input-customer-name\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>رقم الهاتف *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"tel\"\n                        placeholder=\"مثال: +9647812345678\"\n                        {...field}\n                        data-testid=\"input-customer-phone\"\n                      />\n                    </FormControl>\n                    <div className=\"text-xs text-muted-foreground mt-1\">\n                      يرجى إدخال رقم الهاتف مع مفتاح الدولة (مثال: +964 للعراق)\n                    </div>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>البريد الإلكتروني</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"أدخل البريد الإلكتروني\"\n                        {...field}\n                        data-testid=\"input-customer-email\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"address\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>العنوان</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"أدخل عنوان العميل\"\n                        rows={2}\n                        {...field}\n                        data-testid=\"textarea-customer-address\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {/* قسم الموقع الجغرافي */}\n              <div>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <label className=\"text-sm font-medium\">الموقع الجغرافي (GPS)</label>\n                  <Button\n                    type=\"button\"\n                    onClick={getCurrentLocation}\n                    disabled={isGettingLocation}\n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"text-xs\"\n                    data-testid=\"button-get-location\"\n                  >\n                    <Navigation className=\"h-3 w-3 mr-1\" />\n                    {isGettingLocation ? 'جاري التحديد...' : 'تحديد الموقع'}\n                  </Button>\n                </div>\n\n                {form.watch('gpsLatitude') && form.watch('gpsLongitude') && (\n                  <div className=\"border rounded-lg overflow-hidden bg-muted\">\n                    <div \n                      className=\"relative h-32 cursor-pointer hover:opacity-90 transition-opacity\"\n                      onClick={() => {\n                        const lat = form.watch('gpsLatitude');\n                        const lng = form.watch('gpsLongitude');\n                        if (lat && lng) openInMaps(lat, lng);\n                      }}\n                      data-testid=\"map-preview\"\n                    >\n                      <iframe\n                        src={`https://maps.google.com/maps?q=${form.watch('gpsLatitude')},${form.watch('gpsLongitude')}&t=m&z=15&output=embed`}\n                        width=\"100%\"\n                        height=\"100%\"\n                        style={{ border: 0, pointerEvents: 'none' }}\n                        allowFullScreen\n                        loading=\"lazy\"\n                        referrerPolicy=\"no-referrer-when-downgrade\"\n                        title=\"معاينة الموقع\"\n                      />\n                      <div className=\"absolute inset-0 bg-transparent hover:bg-black/10 transition-colors flex items-center justify-center\">\n                        <div className=\"bg-white/90 px-3 py-1.5 rounded-md text-sm font-medium shadow-sm opacity-0 hover:opacity-100 transition-opacity\">\n                          انقر لفتح في خرائط جوجل\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"p-3 bg-background\">\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <MapPin className=\"h-4 w-4 text-green-600\" />\n                        <span className=\"font-medium\">تم تحديد الموقع</span>\n                      </div>\n                      {form.watch('gpsAddress') && (\n                        <p className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\n                          {form.watch('gpsAddress')}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {!form.watch('gpsLatitude') && (\n                  <div className=\"border-2 border-dashed border-muted-foreground/25 rounded-lg p-4 text-center\">\n                    <MapPin className=\"h-6 w-6 text-muted-foreground mx-auto mb-2\" />\n                    <p className=\"text-xs text-muted-foreground\">اضغط \"تحديد الموقع\" لإضافة موقع العميل</p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex justify-end space-x-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsDialogOpen(false)}\n                  data-testid=\"button-cancel-customer\"\n                >\n                  إلغاء\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createCustomerMutation.isPending || updateCustomerMutation.isPending}\n                  data-testid=\"button-save-customer\"\n                >\n                  {createCustomerMutation.isPending || updateCustomerMutation.isPending\n                    ? 'جاري الحفظ...'\n                    : editingCustomer\n                    ? 'تحديث العميل'\n                    : 'إضافة العميل'}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* نافذة تفاصيل العميل */}\n      <Dialog open={isDetailsOpen} onOpenChange={setIsDetailsOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>تفاصيل العميل</DialogTitle>\n          </DialogHeader>\n\n          {selectedCustomer && (\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"text-lg font-semibold\">{selectedCustomer.name}</h3>\n              </div>\n\n              <Separator />\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center\">\n                  <Phone className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <span>{selectedCustomer.phone}</span>\n                </div>\n\n                {selectedCustomer.email && (\n                  <div className=\"flex items-center\">\n                    <Mail className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                    <span>{selectedCustomer.email}</span>\n                  </div>\n                )}\n\n                {selectedCustomer.address && (\n                  <div className=\"flex items-start\">\n                    <span className=\"mr-2 mt-0.5 text-muted-foreground\">📍</span>\n                    <span>{selectedCustomer.address}</span>\n                  </div>\n                )}\n\n                {selectedCustomer.createdAt && (\n                  <div className=\"flex items-center\">\n                    <Calendar className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                    <span>تم الإضافة: {new Date(selectedCustomer.createdAt).toLocaleDateString('en-GB')}</span>\n                  </div>\n                )}\n              </div>\n\n              {/* المهام المرتبطة */}\n              <Separator />\n              <div>\n                <h4 className=\"font-medium mb-2 flex items-center\">\n                  <FileText className=\"h-4 w-4 mr-2\" />\n                  المهام المرتبطة\n                </h4>\n                {tasksLoading ? (\n                  <p className=\"text-sm text-muted-foreground\">جاري تحميل المهام...</p>\n                ) : customerTasks && customerTasks.length > 0 ? (\n                  <div className=\"space-y-2\">\n                    {customerTasks.map((task) => (\n                      <div key={task.id} className=\"text-sm p-2 bg-muted rounded\">\n                        <div className=\"font-medium\">{task.title}</div>\n                        <div className=\"text-muted-foreground\">\n                          {task.taskNumber} - {task.status}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-muted-foreground\">لا توجد مهام مرتبطة بهذا العميل</p>\n                )}\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":37800},"client/src/pages/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { StatsCard } from \"@/components/dashboard/stats-card\";\nimport { QuickActions } from \"@/components/dashboard/quick-actions\";\n\nimport { TeamMemberCard } from \"@/components/team/team-member-card\";\nimport { SchedulerWidget } from \"@/components/scheduler/scheduler-widget\";\nimport { UpcomingSchedule } from \"@/components/scheduler/upcoming-schedule\";\nimport { TeamPointsWidget } from \"@/components/dashboard/team-points-widget\";\nimport { Button } from \"@/components/ui/button\";\nimport { TeamMember } from \"@shared/schema\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Link } from \"wouter\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport default function Dashboard() {\n  const { t } = useLanguage();\n  \n  const { data: stats, isLoading: statsLoading } = useQuery({\n    queryKey: [\"/api/stats\"],\n  });\n\n  const { data: teamMembers, isLoading: teamLoading } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  const topTeamMembers = teamMembers?.slice(0, 2) || [];\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Dashboard Overview */}\n      <section className=\"p-3\">\n        <h2 className=\"text-lg font-medium mb-2 text-on-surface\" data-testid=\"text-dashboard-title\">\n          {t('dashboard.title')}\n        </h2>\n        \n        {/* Unified Stats & Points Grid - Ultra compact */}\n        <div className=\"grid grid-cols-3 lg:grid-cols-6 gap-1 mb-3 desktop-grid\">\n          {statsLoading ? (\n            <>\n              {[...Array(6)].map((_, i) => (\n                <Skeleton key={i} className=\"h-14 rounded-lg\" />\n              ))}\n            </>\n          ) : (\n            <>\n              <StatsCard\n                title={t('stats.activeTasks')}\n                value={(stats as any)?.activeTasks || 0}\n                icon=\"📋\"\n                color=\"primary\"\n                testId=\"stat-active-tasks\"\n              />\n              <StatsCard\n                title={t('team.title')}\n                value={(stats as any)?.teamMembers || 0}\n                icon=\"👥\"\n                color=\"secondary\"\n                testId=\"stat-team-members\"\n              />\n              <StatsCard\n                title={t('stats.completed')}\n                value={(stats as any)?.completed || 0}\n                icon=\"✅\"\n                color=\"success\"\n                testId=\"stat-completed\"\n              />\n              <StatsCard\n                title={t('stats.overdue')}\n                value={(stats as any)?.overdue || 0}\n                icon=\"⚠️\"\n                color=\"error\"\n                testId=\"stat-overdue\"\n              />\n              <StatsCard\n                title=\"النقاط الإجمالية\"\n                value={0}\n                icon=\"🏆\"\n                color=\"primary\"\n                testId=\"stat-total-points\"\n              />\n              <StatsCard\n                title=\"أفضل عضو\"\n                value={0}\n                icon=\"⭐\"\n                color=\"secondary\"\n                testId=\"stat-top-performer\"\n              />\n            </>\n          )}\n        </div>\n\n        <QuickActions />\n      </section>\n\n      {/* Scheduler Section - Compact */}\n      <section className=\"px-3 mb-3\">\n        <SchedulerWidget />\n      </section>\n\n      {/* Upcoming Schedule - Compact */}\n      <section className=\"px-3 mb-3\">\n        <UpcomingSchedule />\n      </section>\n\n      {/* Team Members - Compact */}\n      <section className=\"p-3 mt-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"text-base font-medium\" data-testid=\"text-team-members-title\">{t('team.title')}</h3>\n          <Link href=\"/team\">\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-primary text-xs h-7\" data-testid=\"link-view-all-team\">\n              {t('common.viewAll')}\n            </Button>\n          </Link>\n        </div>\n\n        <div className=\"space-y-2\">\n          {teamLoading ? (\n            <>\n              {[...Array(2)].map((_, i) => (\n                <Skeleton key={i} className=\"h-14 rounded-lg\" />\n              ))}\n            </>\n          ) : topTeamMembers.length > 0 ? (\n            topTeamMembers.map((member) => (\n              <TeamMemberCard key={member.id} member={member} />\n            ))\n          ) : (\n            <div className=\"text-center py-4 text-muted-foreground text-sm\" data-testid=\"text-no-team-members\">\n{t('msg.noTeamMembers')}\n            </div>\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}\n","size_bytes":4556},"client/src/pages/login.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion } from \"framer-motion\";\nimport { CompanyLogo } from \"@/components/ui/company-logo\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface LoginPageProps {\n  onLoginSuccess: (user: { id: string; username: string }) => void;\n}\n\nexport default function LoginPage({ onLoginSuccess }: LoginPageProps) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [showRegister, setShowRegister] = useState(false);\n  const { toast } = useToast();\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        toast({\n          title: \"تم تسجيل الدخول بنجاح\",\n          description: `أهلاً بك ${data.user.username}`,\n        });\n        onLoginSuccess(data.user);\n      } else {\n        toast({\n          title: \"خطأ في تسجيل الدخول\",\n          description: data.message || \"اسم المستخدم أو كلمة المرور غير صحيحة\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"خطأ في الاتصال\",\n        description: \"حدث خطأ أثناء محاولة تسجيل الدخول\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(\"/api/auth/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        toast({\n          title: \"تم إنشاء الحساب بنجاح\",\n          description: \"يمكنك الآن تسجيل الدخول\",\n        });\n        setShowRegister(false);\n        setUsername(\"\");\n        setPassword(\"\");\n      } else {\n        toast({\n          title: \"خطأ في إنشاء الحساب\",\n          description: data.message || \"حدث خطأ أثناء إنشاء الحساب\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"خطأ في الاتصال\",\n        description: \"حدث خطأ أثناء محاولة إنشاء الحساب\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n      >\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"mb-6\">\n              <div className=\"flex justify-center mb-4\">\n                <CompanyLogo size=\"lg\" data-testid=\"company-logo\" />\n              </div>\n              <h1 className=\"text-base font-semibold text-primary mb-3 leading-relaxed\" data-testid=\"text-company-welcome\">\n                اهلا بكم في برنامج تتبع العمل في شركة اشراق الودق لتكنولوجيا المعلومات\n              </h1>\n            </div>\n            <CardTitle className=\"text-2xl font-bold\" data-testid=\"text-login-title\">\n              {showRegister ? \"إنشاء حساب جديد\" : \"تسجيل الدخول\"}\n            </CardTitle>\n            <CardDescription data-testid=\"text-login-description\">\n              {showRegister \n                ? \"أدخل بيانات الحساب الجديد\" \n                : \"أدخل بيانات تسجيل الدخول الخاصة بك\"\n              }\n            </CardDescription>\n          </CardHeader>\n          \n          <form onSubmit={showRegister ? handleRegister : handleLogin}>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"username\">اسم المستخدم</Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"أدخل اسم المستخدم\"\n                  required\n                  data-testid=\"input-username\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"password\">كلمة المرور</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"أدخل كلمة المرور\"\n                  required\n                  data-testid=\"input-password\"\n                />\n              </div>\n            </CardContent>\n            \n            <CardFooter className=\"flex flex-col space-y-3\">\n              <Button \n                type=\"submit\" \n                className=\"w-full\" \n                disabled={isLoading}\n                data-testid=\"button-submit\"\n              >\n                {isLoading \n                  ? (showRegister ? \"جاري الإنشاء...\" : \"جاري تسجيل الدخول...\") \n                  : (showRegister ? \"إنشاء حساب\" : \"تسجيل الدخول\")\n                }\n              </Button>\n              \n              <Button \n                type=\"button\" \n                variant=\"ghost\" \n                onClick={() => {\n                  setShowRegister(!showRegister);\n                  setUsername(\"\");\n                  setPassword(\"\");\n                }}\n                data-testid=\"button-toggle-mode\"\n              >\n                {showRegister ? \"لديك حساب بالفعل؟ تسجيل الدخول\" : \"ليس لديك حساب؟ إنشاء حساب جديد\"}\n              </Button>\n            </CardFooter>\n          </form>\n        </Card>\n      </motion.div>\n    </div>\n  );\n}","size_bytes":6729},"client/src/pages/messages.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { MessageCircle, Send, Users, ArrowLeft, Clock, User } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\nimport { useAuth } from \"@/hooks/use-auth\";\n\ninterface Message {\n  id: string;\n  senderId: string;\n  receiverId: string | null;\n  content: string;\n  messageType: string;\n  messageScope: string;\n  taskId: string | null;\n  isRead: string;\n  createdAt: string;\n  sender?: {\n    id: string;\n    name?: string;\n    username?: string;\n  };\n}\n\ninterface TeamMember {\n  id: string;\n  name: string;\n  email: string;\n  avatar?: string;\n}\n\ninterface Conversation {\n  id: string;\n  participantId?: string;\n  participantName: string;\n  lastMessage: string;\n  lastMessageTime: string;\n  unreadCount: number;\n  type: 'private' | 'group';\n  avatar?: string;\n}\n\nexport default function Messages() {\n  const [selectedReceiver, setSelectedReceiver] = useState<string>(\"\");\n  const [messageScope, setMessageScope] = useState<string>(\"private\");\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [selectedConversation, setSelectedConversation] = useState<Conversation | null>(null);\n  const [conversationMessages, setConversationMessages] = useState<Message[]>([]);\n  const [showConversations, setShowConversations] = useState(true);\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Fetch messages\n  const { data: messages = [], isLoading: messagesLoading } = useQuery<Message[]>({\n    queryKey: [\"/api/messages\"],\n  });\n\n  // Fetch team members for message recipients\n  const { data: teamMembers = [] } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  // Get conversation messages\n  const { data: fetchedConversationMessages = [], refetch: refetchConversation } = useQuery<Message[]>({\n    queryKey: [\"/api/messages/conversation\", selectedConversation?.participantId, selectedConversation?.type],\n    enabled: !!selectedConversation,\n    refetchInterval: 5000,\n    staleTime: 3000,\n    gcTime: 5 * 60 * 1000,\n  });\n\n  // Extract conversations from messages\n  const conversations: Conversation[] = messages.reduce((acc: Conversation[], message) => {\n    const isGroupMessage = message.messageScope === \"group\";\n    const participantId = isGroupMessage ? \"group\" : (message.senderId === user?.id ? message.receiverId : message.senderId);\n    const participantName = isGroupMessage ? \"المحادثة الجماعية\" : (message.sender?.name || message.sender?.username || \"مجهول\");\n    \n    if (!participantId && !isGroupMessage) return acc;\n    \n    const conversationId = isGroupMessage ? \"group\" : participantId!;\n    const existingConv = acc.find(conv => conv.id === conversationId);\n    \n    if (!existingConv) {\n      acc.push({\n        id: conversationId,\n        participantId: isGroupMessage ? undefined : participantId!,\n        participantName,\n        lastMessage: message.content.substring(0, 50) + (message.content.length > 50 ? '...' : ''),\n        lastMessageTime: message.createdAt,\n        unreadCount: message.isRead === \"false\" ? 1 : 0,\n        type: isGroupMessage ? 'group' : 'private',\n        avatar: message.sender?.username?.charAt(0) || 'M'\n      });\n    } else if (new Date(message.createdAt) > new Date(existingConv.lastMessageTime)) {\n      existingConv.lastMessage = message.content.substring(0, 50) + (message.content.length > 50 ? '...' : '');\n      existingConv.lastMessageTime = message.createdAt;\n      if (message.isRead === \"false\") existingConv.unreadCount++;\n    }\n    \n    return acc;\n  }, []);\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: async (messageData: { receiverId?: string; content: string; messageScope: string }) => {\n      return await apiRequest(\"POST\", \"/api/messages\", messageData);\n    },\n    onSuccess: (data) => {\n      setNewMessage(\"\");\n      \n      if (selectedConversation) {\n        setTimeout(() => {\n          refetchConversation();\n        }, 100);\n      }\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/messages\"] });\n      if (selectedConversation) {\n        queryClient.invalidateQueries({ \n          queryKey: [\"/api/messages/conversation\", selectedConversation.participantId, selectedConversation.type] \n        });\n      }\n      \n      toast({\n        title: \"تم الإرسال\",\n        description: selectedConversation ? \"تم إرسال الرسالة بنجاح\" : (messageScope === \"group\" ? \"تم إرسال الرسالة الجماعية بنجاح\" : \"تم إرسال الرسالة بنجاح\"),\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إرسال الرسالة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [fetchedConversationMessages]);\n\n  // Update conversation messages when data changes\n  useEffect(() => {\n    if (selectedConversation) {\n      setConversationMessages(fetchedConversationMessages);\n    } else {\n      setConversationMessages([]);\n    }\n  }, [fetchedConversationMessages, selectedConversation]);\n\n  const handleSendMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    let messageData: { receiverId?: string; content: string; messageScope: string };\n    \n    if (selectedConversation) {\n      messageData = {\n        receiverId: selectedConversation.type === \"group\" ? undefined : selectedConversation.participantId,\n        content: newMessage.trim(),\n        messageScope: selectedConversation.type,\n      };\n    } else {\n      if (messageScope === \"private\" && !selectedReceiver) {\n        toast({\n          title: \"خطأ\",\n          description: \"يرجى اختيار المستلم للرسالة الخاصة\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      messageData = {\n        receiverId: messageScope === \"private\" ? selectedReceiver : undefined,\n        content: newMessage.trim(),\n        messageScope,\n      };\n    }\n    \n    if (selectedConversation) {\n      const optimisticMessage: Message = {\n        id: `temp-${Date.now()}`,\n        senderId: user?.id || '',\n        receiverId: messageData.receiverId || null,\n        content: messageData.content,\n        messageType: 'text',\n        messageScope: messageData.messageScope,\n        taskId: null,\n        isRead: 'true',\n        createdAt: new Date().toISOString(),\n        sender: {\n          id: user?.id || '',\n          name: user?.username,\n          username: user?.username\n        }\n      };\n      \n      setConversationMessages(prev => {\n        const exists = prev.some(msg => msg.content === messageData.content && \n          (msg.id.startsWith('temp-') || msg.senderId === user?.id) && \n          Math.abs(new Date(msg.createdAt).getTime() - Date.now()) < 5000\n        );\n        \n        if (exists) return prev;\n        \n        return [...prev, optimisticMessage];\n      });\n    }\n    \n    sendMessageMutation.mutate(messageData);\n  };\n\n  const openConversation = (conversation: Conversation) => {\n    setSelectedConversation(conversation);\n    setShowConversations(false);\n    refetchConversation();\n  };\n\n  const backToConversations = () => {\n    setSelectedConversation(null);\n    setShowConversations(true);\n  };\n\n  const formatMessageTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n    \n    if (diffInHours < 24) {\n      return format(date, \"HH:mm\");\n    } else if (diffInHours < 24 * 7) {\n      return format(date, \"EEEE HH:mm\");\n    } else {\n      return format(date, \"dd/MM/yyyy HH:mm\");\n    }\n  };\n\n  if (messagesLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex\" dir=\"rtl\">\n      {/* Main Container - Messenger Style */}\n      <div className=\"w-full max-w-7xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden flex h-full max-h-screen\">\n        \n        {/* Conversations Sidebar */}\n        <div className={`${showConversations ? 'flex' : 'hidden lg:flex'} w-full lg:w-80 flex-col border-r border-gray-200 bg-white`}>\n          {/* Sidebar Header */}\n          <div className=\"p-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                <MessageCircle className=\"h-6 w-6\" />\n              </div>\n              <div className=\"flex-1\">\n                <h1 className=\"text-lg font-bold\">المحادثات</h1>\n                <p className=\"text-xs text-white/80\">{user?.username || 'المستخدم'}</p>\n              </div>\n              {selectedConversation && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={backToConversations}\n                  className=\"lg:hidden text-white hover:bg-white/20\"\n                >\n                  <ArrowLeft className=\"h-5 w-5\" />\n                </Button>\n              )}\n            </div>\n          </div>\n          \n          {/* Conversations List */}\n          <div className=\"flex-1 overflow-hidden bg-gray-50\">\n            <ScrollArea className=\"h-full\">\n              {conversations.length === 0 ? (\n                <div className=\"text-center text-gray-500 py-16 px-4\">\n                  <MessageCircle className=\"h-16 w-16 mx-auto mb-4 opacity-30\" />\n                  <h3 className=\"text-lg font-medium text-gray-700 mb-2\">لا توجد محادثات</h3>\n                  <p className=\"text-sm\">ابدأ محادثة جديدة الآن</p>\n                </div>\n              ) : (\n                <div className=\"p-2\">\n                  {conversations.map((conversation) => (\n                    <div\n                      key={conversation.id}\n                      className={`p-3 rounded-xl cursor-pointer transition-all duration-200 mb-1 ${\n                        selectedConversation?.id === conversation.id \n                          ? 'bg-gradient-to-r from-blue-100 to-indigo-100 shadow-md border-r-4 border-blue-500' \n                          : 'hover:bg-white hover:shadow-sm'\n                      }`}\n                      onClick={() => openConversation(conversation)}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        {/* Avatar with online indicator */}\n                        <div className=\"relative\">\n                          <div className={`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg ${\n                            conversation.type === 'group' \n                              ? 'bg-gradient-to-br from-emerald-400 to-emerald-600' \n                              : 'bg-gradient-to-br from-blue-400 to-blue-600'\n                          }`}>\n                            {conversation.type === 'group' ? (\n                              <Users className=\"h-6 w-6\" />\n                            ) : (\n                              conversation.participantName.charAt(0).toUpperCase()\n                            )}\n                          </div>\n                          {/* Online indicator */}\n                          {conversation.type === 'private' && (\n                            <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white shadow-sm\"></div>\n                          )}\n                        </div>\n                        \n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between mb-1\">\n                            <h3 className=\"font-bold text-gray-800 text-sm truncate\">\n                              {conversation.participantName}\n                            </h3>\n                            <span className=\"text-xs text-gray-500 font-medium\">\n                              {formatMessageTime(conversation.lastMessageTime)}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center justify-between\">\n                            <p className=\"text-xs text-gray-600 line-clamp-1 flex-1\">\n                              {conversation.lastMessage}\n                            </p>\n                            {conversation.unreadCount > 0 && (\n                              <div className=\"ml-2 w-6 h-6 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-full flex items-center justify-center shadow-lg\">\n                                <span className=\"text-xs font-bold\">\n                                  {conversation.unreadCount > 9 ? '9+' : conversation.unreadCount}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </ScrollArea>\n          </div>\n        </div>\n\n        {/* Chat Area - Messenger Style */}\n        <div className={`${!showConversations ? 'flex' : 'hidden lg:flex'} flex-1 flex-col bg-gradient-to-b from-gray-50 to-white`}>\n          {selectedConversation ? (\n            <>\n              {/* Chat Header */}\n              <div className=\"p-4 bg-white border-b border-gray-200 shadow-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={backToConversations}\n                    className=\"lg:hidden\"\n                  >\n                    <ArrowLeft className=\"h-5 w-5\" />\n                  </Button>\n                  <div className=\"relative\">\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-md ${\n                      selectedConversation.type === 'group' \n                        ? 'bg-gradient-to-br from-emerald-400 to-emerald-600' \n                        : 'bg-gradient-to-br from-blue-400 to-blue-600'\n                    }`}>\n                      {selectedConversation.type === 'group' ? (\n                        <Users className=\"h-5 w-5\" />\n                      ) : (\n                        selectedConversation.participantName.charAt(0).toUpperCase()\n                      )}\n                    </div>\n                    {selectedConversation.type === 'private' && (\n                      <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-white\"></div>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h2 className=\"font-bold text-gray-800\">{selectedConversation.participantName}</h2>\n                    <p className=\"text-xs text-gray-500\">\n                      {selectedConversation.type === 'group' ? 'محادثة جماعية' : 'متصل الآن'}\n                    </p>\n                  </div>\n                  <Badge \n                    variant={selectedConversation.type === 'group' ? 'default' : 'secondary'}\n                    className=\"px-3 py-1\"\n                  >\n                    {selectedConversation.type === 'group' ? 'جماعية' : 'خاصة'}\n                  </Badge>\n                </div>\n              </div>\n              \n              {/* Messages Area */}\n              <div className=\"flex-1 overflow-hidden bg-gradient-to-b from-gray-50/50 to-white\">\n                <ScrollArea className=\"h-full p-4\">\n                  <div className=\"space-y-4\">\n                    {conversationMessages.length === 0 ? (\n                      <div className=\"text-center text-gray-500 py-16\">\n                        <MessageCircle className=\"h-16 w-16 mx-auto mb-4 opacity-30\" />\n                        <h3 className=\"text-lg font-medium text-gray-700 mb-2\">ابدأ محادثتك</h3>\n                        <p className=\"text-sm\">اكتب رسالتك الأولى لبدء المحادثة</p>\n                      </div>\n                    ) : (\n                      conversationMessages.map((message, index) => (\n                        <div\n                          key={message.id || `temp-${index}`}\n                          className={`flex ${message.senderId === user?.id ? 'justify-end' : 'justify-start'}`}\n                        >\n                          <div className={`max-w-[75%] rounded-2xl px-4 py-3 shadow-sm ${\n                            message.senderId === user?.id \n                              ? 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white' \n                              : 'bg-white border border-gray-200 text-gray-800'\n                          }`}>\n                            {message.senderId !== user?.id && selectedConversation.type === 'group' && (\n                              <div className=\"flex items-center gap-2 mb-2 text-xs font-semibold text-blue-600\">\n                                <User className=\"h-3 w-3\" />\n                                <span>{message.sender?.name || message.sender?.username || \"مجهول\"}</span>\n                              </div>\n                            )}\n                            <p className=\"text-sm leading-relaxed mb-1\">{message.content}</p>\n                            <div className={`flex items-center justify-end gap-1 text-xs ${\n                              message.senderId === user?.id ? 'text-white/70' : 'text-gray-500'\n                            }`}>\n                              <Clock className=\"h-3 w-3\" />\n                              <span>\n                                {message.createdAt ? format(new Date(message.createdAt), \"HH:mm\") : \"الآن\"}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                    <div ref={messagesEndRef} />\n                  </div>\n                </ScrollArea>\n              </div>\n\n              {/* Message Input */}\n              <div className=\"p-4 bg-white border-t border-gray-200\">\n                <div className=\"flex gap-3 items-end\">\n                  <div className=\"flex-1\">\n                    <Textarea\n                      value={newMessage}\n                      onChange={(e) => setNewMessage(e.target.value)}\n                      placeholder=\"اكتب رسالتك هنا...\"\n                      className=\"min-h-[44px] max-h-32 resize-none border-gray-300 rounded-2xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && !e.shiftKey) {\n                          e.preventDefault();\n                          handleSendMessage();\n                        }\n                      }}\n                    />\n                  </div>\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={!newMessage.trim() || sendMessageMutation.isPending}\n                    className=\"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg\"\n                  >\n                    <Send className=\"h-5 w-5\" />\n                  </Button>\n                </div>\n              </div>\n            </>\n          ) : (\n            /* New Message Interface */\n            <div className=\"flex-1 flex items-center justify-center bg-gradient-to-br from-gray-50 to-white\">\n              <div className=\"text-center max-w-md px-6\">\n                <div className=\"w-24 h-24 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <MessageCircle className=\"h-12 w-12 text-blue-500\" />\n                </div>\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">مرحباً بك في المحادثات</h2>\n                <p className=\"text-gray-600 mb-8\">اختر محادثة من القائمة الجانبية أو ابدأ محادثة جديدة</p>\n                \n                <Card className=\"p-6 bg-white shadow-lg border-0\">\n                  <CardHeader className=\"p-0 mb-4\">\n                    <CardTitle className=\"text-lg text-right\">رسالة جديدة</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"p-0 space-y-4\">\n                    <div className=\"space-y-2\">\n                      <label className=\"text-sm font-medium text-gray-700\">نوع الرسالة</label>\n                      <Select value={messageScope} onValueChange={setMessageScope}>\n                        <SelectTrigger className=\"w-full rounded-xl\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"private\">رسالة خاصة</SelectItem>\n                          <SelectItem value=\"group\">رسالة جماعية</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    \n                    {messageScope === \"private\" && (\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-gray-700\">المستلم</label>\n                        <Select value={selectedReceiver} onValueChange={setSelectedReceiver}>\n                          <SelectTrigger className=\"w-full rounded-xl\">\n                            <SelectValue placeholder=\"اختر عضو الفريق\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {teamMembers.map((member) => (\n                              <SelectItem key={member.id} value={member.id}>\n                                {member.name || member.email}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    )}\n                    \n                    <div className=\"space-y-2\">\n                      <label className=\"text-sm font-medium text-gray-700\">الرسالة</label>\n                      <Textarea\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        placeholder={messageScope === \"group\" ? \"اكتب رسالتك للجميع...\" : \"اكتب رسالتك...\"}\n                        className=\"min-h-[100px] rounded-xl\"\n                      />\n                    </div>\n                    \n                    <Button\n                      onClick={handleSendMessage}\n                      disabled={!newMessage.trim() || (messageScope === \"private\" && !selectedReceiver) || sendMessageMutation.isPending}\n                      className=\"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 rounded-xl py-3\"\n                    >\n                      {sendMessageMutation.isPending ? \"جاري الإرسال...\" : (\n                        <>\n                          <Send className=\"h-4 w-4 ml-2\" />\n                          إرسال الرسالة\n                        </>\n                      )}\n                    </Button>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":24667},"client/src/pages/my-tasks.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { TaskDetailModal } from \"@/components/tasks/task-detail-modal\";\nimport { Clock, AlertTriangle, CheckCircle2, Calendar, MessageSquare, User } from \"lucide-react\";\nimport { TaskWithAssignees, TeamMember } from \"@shared/schema\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useState } from \"react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport default function MyTasksPage() {\n  const { t } = useLanguage();\n  const [selectedTask, setSelectedTask] = useState<TaskWithAssignees | null>(null);\n  \n  const { data: tasks, isLoading: tasksLoading } = useQuery<TaskWithAssignees[]>({\n    queryKey: [\"/api/tasks\"],\n  });\n\n  const { data: teamMembers, isLoading: teamLoading } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  // Filter tasks by different categories\n  const priorityTasks = tasks?.filter(task => task.priority === \"high\") || [];\n  const overdueTasks = tasks?.filter(task => {\n    if (!task.dueDate) return false;\n    return new Date(task.dueDate) < new Date() && task.status !== \"complete\";\n  }) || [];\n  \n  const upcomingTasks = tasks?.filter(task => {\n    if (!task.dueDate) return false;\n    const dueDate = new Date(task.dueDate);\n    const today = new Date();\n    const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);\n    return dueDate >= today && dueDate <= nextWeek && task.status !== \"complete\";\n  }) || [];\n\n  const tasksWithComments = tasks?.filter(task => task.notes && task.notes.length > 0) || [];\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\": return \"destructive\";\n      case \"medium\": return \"default\";\n      case \"low\": return \"secondary\";\n      default: return \"default\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"complete\": return \"text-white bg-green-500 px-2 py-1 rounded-full text-xs font-medium\"; // أخضر ممتلئ للمهام المكتملة\n      case \"start\": return \"text-white bg-yellow-500 px-2 py-1 rounded-full text-xs font-medium\"; // أصفر ممتلئ للمهام التي بدأت\n      case \"pending\": return \"text-white bg-red-500 px-2 py-1 rounded-full text-xs font-medium\"; // أحمر ممتلئ للمهام في الانتظار\n      case \"cancelled\": return \"text-white bg-red-600 px-2 py-1 rounded-full text-xs font-medium\";\n      case \"rescheduled\": return \"text-white bg-purple-500 px-2 py-1 rounded-full text-xs font-medium\";\n      default: return \"text-gray-600 bg-gray-50 px-2 py-1 rounded-full text-xs font-medium\";\n    }\n  };\n\n  const getTaskBackgroundColor = (status: string) => {\n    switch (status) {\n      case \"complete\": return \"bg-green-50 border-l-green-500\"; // خلفية خضراء للمهام المكتملة\n      case \"start\": return \"bg-yellow-50 border-l-yellow-500\"; // خلفية صفراء للمهام التي بدأت\n      case \"cancelled\": return \"bg-red-50 border-l-red-500\";\n      case \"rescheduled\": return \"bg-purple-50 border-l-purple-500\";\n      case \"pending\": \n      default: return \"bg-orange-50 border-l-red-500\"; // خلفية برتقالية للمهام في الانتظار\n    }\n  };\n\n  const TaskCard = ({ task, showAssignees = true }: { task: TaskWithAssignees; showAssignees?: boolean }) => (\n    <Card \n      key={task.id} \n      className={`cursor-pointer hover:shadow-md transition-shadow border-l-4 ${getTaskBackgroundColor(task.status)}`}\n      onClick={() => setSelectedTask(task)}\n      data-testid={`card-my-task-${task.id}`}\n    >\n      <CardContent className=\"p-4\">\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-start\">\n            <h3 className=\"font-medium text-sm leading-tight\" data-testid={`text-task-title-${task.id}`}>\n              {task.title}\n            </h3>\n            <Badge variant={getPriorityColor(task.priority)} className=\"text-xs\">\n              {task.priority === 'high' ? 'عالية' : task.priority === 'medium' ? 'متوسطة' : 'منخفضة'}\n            </Badge>\n          </div>\n          \n          <p className=\"text-xs text-muted-foreground line-clamp-2\" data-testid={`text-task-description-${task.id}`}>\n            {task.description}\n          </p>\n          \n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-muted-foreground\">العميل: {task.customerName}</span>\n            {task.dueDate && (\n              <span className={`flex items-center gap-1 ${new Date(task.dueDate) < new Date() ? 'text-red-600' : 'text-muted-foreground'}`}>\n                <Calendar className=\"w-3 h-3\" />\n                {new Date(task.dueDate).toLocaleDateString('en-GB')}\n              </span>\n            )}\n          </div>\n          \n          {task.progress > 0 && (\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span>التقدم</span>\n                <span>{task.progress}%</span>\n              </div>\n              <Progress value={task.progress} className=\"h-2\" />\n            </div>\n          )}\n          \n          {showAssignees && task.assignees && task.assignees.length > 0 && (\n            <div className=\"flex items-center gap-1\">\n              <User className=\"w-3 h-3 text-muted-foreground\" />\n              <div className=\"flex flex-wrap gap-1\">\n                {task.assignees.map((assignee) => (\n                  <Badge key={assignee.id} variant=\"outline\" className=\"text-xs px-1\">\n                    {assignee.name}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  if (tasksLoading || teamLoading) {\n    return (\n      <div className=\"p-4 space-y-4\">\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-8 w-48\" />\n          <Skeleton className=\"h-4 w-32\" />\n        </div>\n        {[...Array(4)].map((_, i) => (\n          <div key={i} className=\"space-y-2\">\n            <Skeleton className=\"h-6 w-40\" />\n            <div className=\"grid gap-3\">\n              {[...Array(2)].map((_, j) => (\n                <Skeleton key={j} className=\"h-24 rounded-lg\" />\n              ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <section className=\"p-4\">\n        <h1 className=\"text-2xl font-bold mb-2\" data-testid=\"text-my-tasks-title\">{t('myTasks.title')}</h1>\n        <p className=\"text-muted-foreground text-sm\">{t('myTasks.subtitle')}</p>\n      </section>\n\n      {/* Priority Tasks */}\n      <section className=\"px-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n          <h2 className=\"text-lg font-medium\" data-testid=\"text-priority-tasks-title\">\n            المهام عالية الأولوية ({priorityTasks.length})\n          </h2>\n        </div>\n        \n        <div className=\"space-y-3\">\n          {priorityTasks.length > 0 ? (\n            priorityTasks.map(task => <TaskCard key={task.id} task={task} />)\n          ) : (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-priority-tasks\">\n                  لا توجد مهام عالية الأولوية حالياً\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </section>\n\n      {/* Overdue Tasks */}\n      <section className=\"px-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Clock className=\"w-5 h-5 text-red-600\" />\n          <h2 className=\"text-lg font-medium\" data-testid=\"text-overdue-tasks-title\">\n            المهام المتأخرة ({overdueTasks.length})\n          </h2>\n        </div>\n        \n        <div className=\"space-y-3\">\n          {overdueTasks.length > 0 ? (\n            overdueTasks.map(task => <TaskCard key={task.id} task={task} />)\n          ) : (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                <CheckCircle2 className=\"w-12 h-12 text-green-600 mx-auto mb-2\" />\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-overdue-tasks\">\n                  ممتاز! لا توجد مهام متأخرة\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </section>\n\n      {/* Upcoming Tasks */}\n      <section className=\"px-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Calendar className=\"w-5 h-5 text-blue-600\" />\n          <h2 className=\"text-lg font-medium\" data-testid=\"text-upcoming-tasks-title\">\n            المهام القادمة هذا الأسبوع ({upcomingTasks.length})\n          </h2>\n        </div>\n        \n        <div className=\"space-y-3\">\n          {upcomingTasks.length > 0 ? (\n            upcomingTasks.map(task => <TaskCard key={task.id} task={task} />)\n          ) : (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-upcoming-tasks\">\n                  لا توجد مهام قادمة هذا الأسبوع\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </section>\n\n      {/* Tasks with Comments/Notes */}\n      <section className=\"px-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <MessageSquare className=\"w-5 h-5 text-purple-600\" />\n          <h2 className=\"text-lg font-medium\" data-testid=\"text-tasks-with-comments-title\">\n            المهام مع التعليقات ({tasksWithComments.length})\n          </h2>\n        </div>\n        \n        <div className=\"space-y-3\">\n          {tasksWithComments.length > 0 ? (\n            tasksWithComments.map(task => (\n              <Card \n                key={task.id} \n                className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                onClick={() => setSelectedTask(task)}\n                data-testid={`card-task-with-comment-${task.id}`}\n              >\n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between items-start\">\n                      <h3 className=\"font-medium text-sm\" data-testid={`text-commented-task-title-${task.id}`}>\n                        {task.title}\n                      </h3>\n                      <Badge variant={getPriorityColor(task.priority)} className=\"text-xs\">\n                        {task.priority === 'high' ? 'عالية' : task.priority === 'medium' ? 'متوسطة' : 'منخفضة'}\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"bg-muted/50 rounded p-2\">\n                      <div className=\"flex items-center gap-1 mb-1\">\n                        <MessageSquare className=\"w-3 h-3 text-muted-foreground\" />\n                        <span className=\"text-xs text-muted-foreground\">التعليق:</span>\n                      </div>\n                      <p className=\"text-xs\" data-testid={`text-task-comment-${task.id}`}>\n                        {task.notes}\n                      </p>\n                    </div>\n                    \n                    {task.assignees && task.assignees.length > 0 && (\n                      <div className=\"flex items-center gap-1\">\n                        <User className=\"w-3 h-3 text-muted-foreground\" />\n                        <div className=\"flex flex-wrap gap-1\">\n                          {task.assignees.map((assignee) => (\n                            <Badge key={assignee.id} variant=\"outline\" className=\"text-xs px-1\">\n                              {assignee.name}\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          ) : (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-commented-tasks\">\n                  لا توجد مهام مع تعليقات بعد\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </section>\n\n      {/* Task Detail Modal */}\n      {selectedTask && (\n        <TaskDetailModal\n          task={selectedTask}\n          open={!!selectedTask}\n          onOpenChange={(open) => !open && setSelectedTask(null)}\n        />\n      )}\n    </div>\n  );\n}","size_bytes":13027},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/notifications.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Bell, Check, AlertCircle, CheckCircle2, Clock, ArrowUpDown } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\n\ninterface Notification {\n  id: string;\n  userId: string;\n  title: string;\n  content: string;\n  type: string;\n  relatedId: string | null;\n  isRead: string;\n  createdAt: string;\n}\n\nexport default function Notifications() {\n  const { toast } = useToast();\n  const [sortOrder, setSortOrder] = useState<\"newest\" | \"oldest\">(\"newest\");\n\n  // Fetch notifications\n  const { data: notifications = [], isLoading } = useQuery<Notification[]>({\n    queryKey: [\"/api/notifications\"],\n  });\n\n  // Mark notification as read mutation\n  const markAsReadMutation = useMutation({\n    mutationFn: async (notificationId: string) => {\n      return await apiRequest(`/api/notifications/${notificationId}/read`, \"PATCH\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      toast({\n        title: \"تم التحديث\",\n        description: \"تم وضع علامة مقروء على الإشعار\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في تحديث حالة الإشعار\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"task_assigned\":\n        return <AlertCircle className=\"h-5 w-5 text-blue-600\" />;\n      case \"task_completed\":\n        return <CheckCircle2 className=\"h-5 w-5 text-green-600\" />;\n      case \"task_overdue\":\n        return <Clock className=\"h-5 w-5 text-red-600\" />;\n      case \"new_message\":\n        return <Bell className=\"h-5 w-5 text-purple-600\" />;\n      default:\n        return <Bell className=\"h-5 w-5 text-gray-600\" />;\n    }\n  };\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case \"task_assigned\":\n        return \"bg-blue-50 border-blue-200 dark:bg-blue-900/20\";\n      case \"task_completed\":\n        return \"bg-green-50 border-green-200 dark:bg-green-900/20\";\n      case \"task_overdue\":\n        return \"bg-red-50 border-red-200 dark:bg-red-900/20\";\n      case \"new_message\":\n        return \"bg-purple-50 border-purple-200 dark:bg-purple-900/20\";\n      default:\n        return \"bg-gray-50 border-gray-200 dark:bg-gray-900/20\";\n    }\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case \"task_assigned\":\n        return \"مهمة جديدة\";\n      case \"task_completed\":\n        return \"مهمة مكتملة\";\n      case \"task_overdue\":\n        return \"مهمة متأخرة\";\n      case \"new_message\":\n        return \"رسالة جديدة\";\n      default:\n        return \"إشعار\";\n    }\n  };\n\n  const unreadCount = notifications.filter(n => n.isRead === \"false\").length;\n\n  // Sort notifications by createdAt date\n  const sortedNotifications = [...notifications].sort((a, b) => {\n    const dateA = new Date(a.createdAt);\n    const dateB = new Date(b.createdAt);\n    return sortOrder === \"newest\" ? dateB.getTime() - dateA.getTime() : dateA.getTime() - dateB.getTime();\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  const unreadNotifications = sortedNotifications.filter((n) => n.isRead === \"false\");\n  const readNotifications = sortedNotifications.filter((n) => n.isRead === \"true\");\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\" dir=\"rtl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <Bell className=\"h-8 w-8 text-blue-600\" />\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n            الإشعارات\n          </h1>\n          {unreadCount > 0 && (\n            <Badge variant=\"destructive\" className=\"text-xs\">\n              {unreadCount} جديد\n            </Badge>\n          )}\n        </div>\n        \n        <div className=\"flex items-center space-x-2 space-x-reverse\">\n          <ArrowUpDown className=\"h-4 w-4\" />\n          <Select value={sortOrder} onValueChange={(value: \"newest\" | \"oldest\") => setSortOrder(value)}>\n            <SelectTrigger className=\"w-28\">\n              <SelectValue placeholder=\"الترتيب\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"newest\">الأحدث أولاً</SelectItem>\n              <SelectItem value=\"oldest\">الأقدم أولاً</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Unread Notifications */}\n        {unreadNotifications.length > 0 && (\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">\n                الإشعارات الجديدة ({unreadNotifications.length})\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ScrollArea className=\"max-h-96\">\n                <div className=\"space-y-3\">\n                  {unreadNotifications.map((notification) => (\n                    <div\n                      key={notification.id}\n                      className={`border rounded-lg p-4 ${getNotificationColor(notification.type)}`}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex gap-3 flex-1\">\n                          {getNotificationIcon(notification.type)}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h3 className=\"font-semibold text-gray-900 dark:text-white\">\n                                {notification.title}\n                              </h3>\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {getTypeLabel(notification.type)}\n                              </Badge>\n                            </div>\n                            <p className=\"text-gray-700 dark:text-gray-300 text-sm mb-2\">\n                              {notification.content}\n                            </p>\n                            <p className=\"text-xs text-gray-500\">\n                              {format(new Date(notification.createdAt), \"dd/MM/yyyy HH:mm\")}\n                            </p>\n                          </div>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => markAsReadMutation.mutate(notification.id)}\n                          disabled={markAsReadMutation.isPending}\n                          data-testid={`button-mark-read-${notification.id}`}\n                        >\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </ScrollArea>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Read Notifications */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">\n              الإشعارات المقروءة ({readNotifications.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"max-h-96\">\n              {readNotifications.length === 0 ? (\n                <div className=\"text-center text-gray-500 py-8\">\n                  لا توجد إشعارات مقروءة\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {readNotifications.map((notification) => (\n                    <div\n                      key={notification.id}\n                      className=\"border rounded-lg p-4 opacity-75 hover:opacity-100\"\n                    >\n                      <div className=\"flex gap-3\">\n                        {getNotificationIcon(notification.type)}\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <h3 className=\"font-semibold text-gray-900 dark:text-white text-sm\">\n                              {notification.title}\n                            </h3>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {getTypeLabel(notification.type)}\n                            </Badge>\n                          </div>\n                          <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-1\">\n                            {notification.content}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {format(new Date(notification.createdAt), \"dd/MM/yyyy HH:mm\")}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </ScrollArea>\n          </CardContent>\n        </Card>\n\n        {notifications.length === 0 && (\n          <Card>\n            <CardContent className=\"text-center py-12\">\n              <Bell className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                لا توجد إشعارات\n              </h3>\n              <p className=\"text-gray-500\">\n                ستظهر الإشعارات هنا عند إضافة مهام جديدة أو استلام رسائل\n              </p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":10318},"client/src/pages/profile.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { User, Settings, Bell, Shield, HelpCircle, LogOut, UserCheck, Activity, Edit, Save, X, MessageCircle, Trophy, Camera } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { ProfileImageUploader } from \"@/components/ProfileImageUploader\";\n\n// Profile update schema\nconst profileUpdateSchema = z.object({\n  firstName: z.string().min(1, \"الاسم الأول مطلوب\"),\n  lastName: z.string().min(1, \"الاسم الأخير مطلوب\"),\n  email: z.string().email(\"البريد الإلكتروني غير صالح\"),\n  phone: z.string().optional(),\n});\n\n// Password change schema\nconst passwordChangeSchema = z.object({\n  currentPassword: z.string().min(1, \"كلمة المرور الحالية مطلوبة\"),\n  newPassword: z.string().min(6, \"كلمة المرور الجديدة يجب أن تكون 6 أحرف على الأقل\"),\n  confirmPassword: z.string().min(1, \"تأكيد كلمة المرور مطلوب\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"كلمات المرور غير متطابقة\",\n  path: [\"confirmPassword\"],\n});\n\nexport default function Profile() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, setLocation] = useLocation();\n  const { t } = useLanguage();\n  const [isEditingProfile, setIsEditingProfile] = useState(false);\n  const [isChangingPassword, setIsChangingPassword] = useState(false);\n\n  // Get current user data\n  const { data: user } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Profile update form\n  const profileForm = useForm({\n    resolver: zodResolver(profileUpdateSchema),\n    defaultValues: {\n      firstName: '',\n      lastName: '',\n      email: '',\n      phone: '',\n    },\n  });\n\n  // Update form when user data changes\n  useEffect(() => {\n    if (user) {\n      profileForm.reset({\n        firstName: (user as any)?.firstName || '',\n        lastName: (user as any)?.lastName || '',\n        email: (user as any)?.email || '',\n        phone: (user as any)?.phone || '',\n      });\n    }\n  }, [user, profileForm]);\n\n  // Password change form\n  const passwordForm = useForm({\n    resolver: zodResolver(passwordChangeSchema),\n    defaultValues: {\n      currentPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n    },\n  });\n\n  // Profile update mutation\n  const profileUpdateMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof profileUpdateSchema>) => {\n      console.log(\"Updating profile with data:\", data);\n      return await apiRequest(\"PUT\", \"/api/auth/profile\", data);\n    },\n    onSuccess: (response) => {\n      console.log(\"Profile update success:\", response);\n      toast({\n        title: \"تم التحديث بنجاح\",\n        description: \"تم تحديث معلومات الملف الشخصي\",\n      });\n      setIsEditingProfile(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n    onError: (error) => {\n      console.error(\"Profile update error:\", error);\n      toast({\n        title: \"خطأ في التحديث\",\n        description: \"فشل في تحديث معلومات الملف الشخصي\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Password change mutation\n  const passwordChangeMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof passwordChangeSchema>) => {\n      return await apiRequest(\"PUT\", \"/api/auth/change-password\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تغيير كلمة المرور\",\n        description: \"تم تغيير كلمة المرور بنجاح\",\n      });\n      setIsChangingPassword(false);\n      passwordForm.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تغيير كلمة المرور\",\n        description: \"فشل في تغيير كلمة المرور. تأكد من كلمة المرور الحالية\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/auth/logout\");\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تسجيل الخروج بنجاح\",\n        description: \"تم تسجيل خروجك من النظام\",\n      });\n      // Clear all queries and reload the page\n      queryClient.clear();\n      window.location.reload();\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تسجيل الخروج\",\n        description: \"حدث خطأ أثناء تسجيل الخروج\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogout = () => {\n    logoutMutation.mutate();\n  };\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      <div className=\"text-center mb-6\">\n        <h1 className=\"text-lg font-semibold text-primary mb-2\" data-testid=\"text-welcome-message\">\n          اهلا بكم في برنامج تتبع العمل في شركة اشراق الودق لتكنولوجيا المعلومات\n        </h1>\n      </div>\n      \n      <h2 className=\"text-xl font-medium mb-4\" data-testid=\"text-profile-title\">\n        {t('nav.profile')}\n      </h2>\n\n      {/* User Info Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <User className=\"h-5 w-5\" />\n            <span>معلومات المستخدم</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative\">\n              <ProfileImageUploader\n                teamMemberId={(user as any)?.teamMember?.id || ''}\n                currentProfileImage={(user as any)?.profileImageUrl}\n                memberName={(user as any)?.firstName || (user as any)?.username || 'مستخدم'}\n                size=\"lg\"\n                showUploadIcon={true}\n                onImageUpdated={(newUrl) => {\n                  // Force re-fetch user data to update the avatar in top bar\n                  queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n                }}\n              />\n            </div>\n            <div>\n              <h3 className=\"font-medium text-lg\" data-testid=\"text-user-name\">{(user as any)?.teamMember?.name || (user as any)?.username || \"مستخدم\"}</h3>\n              <p className=\"text-sm text-muted-foreground\" data-testid=\"text-user-role\">{(user as any)?.teamMember?.role || \"عضو فريق\"} - شركة اشراق الودق</p>\n              <p className=\"text-xs text-muted-foreground\" data-testid=\"text-user-email\">{(user as any)?.teamMember?.email}</p>\n              {/* User Permission Level */}\n              <div className=\"flex items-center mt-2 space-x-2 space-x-reverse\">\n                <Shield className=\"h-4 w-4 text-primary\" />\n                <span className=\"text-sm font-medium\">مستوى الصلاحيات:</span>\n                {(user as any)?.role === 'admin' && (\n                  <Badge className=\"bg-red-100 text-red-800\">مدير النظام</Badge>\n                )}\n                {(user as any)?.role === 'supervisor' && (\n                  <Badge className=\"bg-blue-100 text-blue-800\">مشرف</Badge>\n                )}\n                {((user as any)?.role === 'user' || !(user as any)?.role) && (\n                  <Badge className=\"bg-gray-100 text-gray-800\">مستخدم عادي</Badge>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Personal Information Settings */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Settings className=\"h-5 w-5\" />\n              <span>إعدادات المعلومات الشخصية</span>\n            </div>\n            {!isEditingProfile && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={() => setIsEditingProfile(true)}\n                data-testid=\"button-edit-profile\"\n              >\n                <Edit className=\"h-4 w-4 mr-1\" />\n                تعديل\n              </Button>\n            )}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {isEditingProfile ? (\n            <Form {...profileForm}>\n              <form onSubmit={profileForm.handleSubmit((data) => profileUpdateMutation.mutate(data))} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <FormField\n                    control={profileForm.control}\n                    name=\"firstName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>الاسم الأول</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-first-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={profileForm.control}\n                    name=\"lastName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>الاسم الأخير</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-last-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n                <FormField\n                  control={profileForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>البريد الإلكتروني</FormLabel>\n                      <FormControl>\n                        <Input type=\"email\" {...field} data-testid=\"input-email\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={profileForm.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم الهاتف (اختياري)</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-phone\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <div className=\"flex space-x-2 space-x-reverse\">\n                  <Button \n                    type=\"submit\" \n                    disabled={profileUpdateMutation.isPending}\n                    data-testid=\"button-save-profile\"\n                  >\n                    <Save className=\"h-4 w-4 mr-1\" />\n                    {profileUpdateMutation.isPending ? \"جاري الحفظ...\" : \"حفظ\"}\n                  </Button>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={() => {\n                      setIsEditingProfile(false);\n                      profileForm.reset();\n                    }}\n                    data-testid=\"button-cancel-profile\"\n                  >\n                    <X className=\"h-4 w-4 mr-1\" />\n                    إلغاء\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          ) : (\n            <div className=\"space-y-3\">\n              <div>\n                <Label className=\"text-sm font-medium\">الاسم الكامل</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  {((user as any)?.firstName && (user as any)?.lastName) \n                    ? `${(user as any)?.firstName} ${(user as any)?.lastName}` \n                    : 'غير محدد'}\n                </p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium\">البريد الإلكتروني</Label>\n                <p className=\"text-sm text-muted-foreground\">{(user as any)?.email || 'غير محدد'}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium\">رقم الهاتف</Label>\n                <p className=\"text-sm text-muted-foreground\">{(user as any)?.phone || 'غير محدد'}</p>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Password Change */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Shield className=\"h-5 w-5\" />\n              <span>تغيير كلمة المرور</span>\n            </div>\n            {!isChangingPassword && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={() => setIsChangingPassword(true)}\n                data-testid=\"button-change-password\"\n              >\n                <Edit className=\"h-4 w-4 mr-1\" />\n                تغيير\n              </Button>\n            )}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {isChangingPassword ? (\n            <Form {...passwordForm}>\n              <form onSubmit={passwordForm.handleSubmit((data) => passwordChangeMutation.mutate(data))} className=\"space-y-4\">\n                <FormField\n                  control={passwordForm.control}\n                  name=\"currentPassword\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>كلمة المرور الحالية</FormLabel>\n                      <FormControl>\n                        <Input type=\"password\" {...field} data-testid=\"input-current-password\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={passwordForm.control}\n                  name=\"newPassword\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>كلمة المرور الجديدة</FormLabel>\n                      <FormControl>\n                        <Input type=\"password\" {...field} data-testid=\"input-new-password\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={passwordForm.control}\n                  name=\"confirmPassword\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>تأكيد كلمة المرور الجديدة</FormLabel>\n                      <FormControl>\n                        <Input type=\"password\" {...field} data-testid=\"input-confirm-password\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <div className=\"flex space-x-2 space-x-reverse\">\n                  <Button \n                    type=\"submit\" \n                    disabled={passwordChangeMutation.isPending}\n                    data-testid=\"button-save-password\"\n                  >\n                    <Save className=\"h-4 w-4 mr-1\" />\n                    {passwordChangeMutation.isPending ? \"جاري الحفظ...\" : \"حفظ\"}\n                  </Button>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={() => {\n                      setIsChangingPassword(false);\n                      passwordForm.reset();\n                    }}\n                    data-testid=\"button-cancel-password\"\n                  >\n                    <X className=\"h-4 w-4 mr-1\" />\n                    إلغاء\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          ) : (\n            <div className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                انقر على \"تغيير\" لتحديث كلمة المرور الخاصة بك\n              </p>\n              <div className=\"flex items-center space-x-2\">\n                <Shield className=\"h-4 w-4 text-green-600\" />\n                <span className=\"text-sm text-green-600\">كلمة المرور محمية بتشفير قوي</span>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Admin Functions - Only show for admin users */}\n      {(user as any)?.role === \"admin\" && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center space-x-2\">\n              <Shield className=\"h-5 w-5\" />\n              <span>وظائف المدير</span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Button \n              className=\"w-full\" \n              onClick={() => setLocation(\"/admin/users\")}\n              data-testid=\"button-admin-users\"\n            >\n              <UserCheck className=\"h-4 w-4 mr-2\" />\n              إدارة المستخدمين\n            </Button>\n            <Button \n              className=\"w-full\" \n              variant=\"outline\"\n              onClick={() => setLocation(\"/admin/logs\")}\n              data-testid=\"button-admin-logs\"\n            >\n              <Activity className=\"h-4 w-4 mr-2\" />\n              سجل أحداث النظام\n            </Button>\n            <Button \n              className=\"w-full\" \n              variant=\"outline\"\n              onClick={() => setLocation(\"/admin/whatsapp\")}\n              data-testid=\"button-admin-whatsapp\"\n            >\n              <MessageCircle className=\"h-4 w-4 mr-2\" />\n              إدارة الواتساب\n            </Button>\n            <Button \n              className=\"w-full\" \n              variant=\"outline\"\n              onClick={() => setLocation(\"/admin/team-points\")}\n              data-testid=\"button-admin-team-points\"\n            >\n              <Trophy className=\"h-4 w-4 mr-2\" />\n              نقاط الفريق\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Other Settings */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Settings className=\"h-5 w-5\" />\n            <span>إعدادات أخرى</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Notification Settings */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Bell className=\"h-4 w-4\" />\n              <span>إعدادات الإشعارات</span>\n            </div>\n            <Button variant=\"outline\" size=\"sm\" disabled>\n              قريباً\n            </Button>\n          </div>\n          \n          {/* Help */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <HelpCircle className=\"h-4 w-4\" />\n              <span>المساعدة والدعم</span>\n            </div>\n            <Button variant=\"outline\" size=\"sm\" disabled>\n              قريباً\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Logout Button */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <Button \n            variant=\"destructive\" \n            className=\"w-full\" \n            onClick={handleLogout}\n            disabled={logoutMutation.isPending}\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            {logoutMutation.isPending ? \"جاري تسجيل الخروج...\" : \"تسجيل الخروج\"}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":20993},"client/src/pages/tasks.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { TaskFilters } from \"@/components/tasks/task-filters\";\nimport { TaskCard } from \"@/components/tasks/task-card\";\nimport { TaskDetailModal } from \"@/components/tasks/task-detail-modal\";\nimport { TaskWithAssignees } from \"@shared/schema\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ArrowUpDown, AlertCircle, RefreshCw, Search, X, ChevronRight } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { useErrorHandler } from \"@/lib/error-handler\";\nimport { ErrorBoundary, ComponentErrorFallback } from \"@/components/error/error-boundary\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { format } from \"date-fns\";\n\nfunction TasksContent() {\n  const [activeFilter, setActiveFilter] = useState(\"all\");\n  const [sortOrder, setSortOrder] = useState<\"newest\" | \"oldest\" | \"dueDate\">(\"newest\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedTask, setSelectedTask] = useState<TaskWithAssignees | null>(null);\n  const [showTaskDetails, setShowTaskDetails] = useState(false);\n  const { t } = useLanguage();\n  const { handleError } = useErrorHandler();\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"complete\":\n        return \"bg-green-500 text-white border-green-600\"; // أخضر ممتلئ للمهام المكتملة\n      case \"start\":\n        return \"bg-yellow-500 text-white border-yellow-600\"; // أصفر ممتلئ للمهام التي بدأت\n      case \"cancelled\":\n        return \"bg-red-500 text-white border-red-600\";\n      case \"rescheduled\":\n        return \"bg-purple-500 text-white border-purple-600\";\n      case \"pending\":\n      default:\n        return \"bg-red-500 text-white border-red-600\"; // أحمر ممتلئ للمهام في الانتظار\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"في الانتظار\";\n      case \"start\":\n        return \"بدأت\";\n      case \"complete\":\n        return \"مكتملة\";\n      case \"cancelled\":\n        return \"ملغاة\";\n      case \"rescheduled\":\n        return \"مؤجلة\";\n      default:\n        return status;\n    }\n  };\n\n  const getTaskBackgroundColor = (status: string) => {\n    switch (status) {\n      case \"complete\":\n        return \"bg-green-100 border-l-green-500\"; // خلفية خضراء فاتحة للمهام المكتملة\n      case \"start\":\n        return \"bg-yellow-100 border-l-yellow-500\"; // خلفية صفراء فاتحة للمهام التي بدأت\n      case \"cancelled\":\n        return \"bg-red-100 border-l-red-500\";\n      case \"rescheduled\":\n        return \"bg-purple-100 border-l-purple-500\";\n      case \"pending\":\n      default:\n        return \"bg-orange-100 border-l-red-500\"; // خلفية برتقالية فاتحة مع حافة حمراء للمهام في الانتظار\n    }\n  };\n\n  const { data: tasks, isLoading, error, refetch } = useQuery<TaskWithAssignees[]>({\n    queryKey: [\"/api/tasks\"],\n    retry: 2,\n    retryDelay: 1000,\n  });\n\n  // Handle query errors\n  if (error) {\n    return (\n      <div className=\"p-4\">\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"font-medium\">{t('error.generic')}</p>\n              <p className=\"text-sm mt-1 opacity-80\">\n                {error.message || t('error.network')}\n              </p>\n            </div>\n            <Button \n              onClick={() => refetch()} \n              size=\"sm\" \n              variant=\"outline\"\n              data-testid=\"button-retry-tasks\"\n            >\n              <RefreshCw className=\"h-3 w-3 mr-1\" />\n              {t('guidance.retry')}\n            </Button>\n          </AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n\n  const filteredTasks = tasks?.filter((task) => {\n    // Filter by status\n    if (activeFilter !== \"all\" && task.status !== activeFilter) return false;\n    \n    // Filter by search query\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      return (\n        task.title.toLowerCase().includes(query) ||\n        task.description?.toLowerCase().includes(query) ||\n        task.customerName?.toLowerCase().includes(query) ||\n        task.customerPhone?.toLowerCase().includes(query) ||\n        task.assignees?.some(assignee => \n          assignee.name.toLowerCase().includes(query)\n        )\n      );\n    }\n    \n    return true;\n  }) || [];\n\n  // Sort tasks based on selected sort order\n  const sortedTasks = [...filteredTasks].sort((a, b) => {\n    switch (sortOrder) {\n      case \"newest\":\n        return new Date(b.createdAt || '').getTime() - new Date(a.createdAt || '').getTime();\n      case \"oldest\":\n        return new Date(a.createdAt || '').getTime() - new Date(b.createdAt || '').getTime();\n      case \"dueDate\":\n        // Tasks without due date go to the end\n        if (!a.dueDate && !b.dueDate) return 0;\n        if (!a.dueDate) return 1;\n        if (!b.dueDate) return -1;\n        return new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime();\n      default:\n        return 0;\n    }\n  });\n\n  return (\n    <div className=\"p-4 space-y-6\">\n      {/* Header with Search */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-2xl font-bold text-on-surface bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent\" data-testid=\"text-tasks-title\">\n            {t('nav.tasks')}\n          </h1>\n          <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\n            <Select value={sortOrder} onValueChange={(value: \"newest\" | \"oldest\" | \"dueDate\") => setSortOrder(value)}>\n              <SelectTrigger className=\"w-40 bg-white/80 backdrop-blur-sm\">\n                <ArrowUpDown className=\"h-4 w-4 mr-2\" />\n                <SelectValue placeholder=\"الترتيب\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"newest\">الأحدث أولاً</SelectItem>\n                <SelectItem value=\"oldest\">الأقدم أولاً</SelectItem>\n                <SelectItem value=\"dueDate\">تاريخ الاستحقاق</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n        \n        {/* Search Bar */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n          <Input\n            type=\"text\"\n            placeholder=\"بحث في المهام (العنوان، الوصف، العميل، المكلف...)\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-12 pr-12 h-14 text-base bg-gradient-to-r from-white/80 to-white/60 backdrop-blur-sm border-2 border-border/30 focus:border-primary/50 focus:bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200\"\n            data-testid=\"input-search-tasks\"\n          />\n          {searchQuery && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 rounded-full hover:bg-destructive/10 hover:text-destructive transition-colors\"\n              onClick={() => setSearchQuery(\"\")}\n              data-testid=\"button-clear-search\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n        \n        {/* Search Results Summary */}\n        {searchQuery && (\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground bg-primary/5 px-3 py-2 rounded-lg border border-primary/10\">\n            <Search className=\"h-4 w-4 text-primary\" />\n            <span>\n              تم العثور على <span className=\"font-semibold text-primary\">{sortedTasks.length}</span> مهمة من أصل <span className=\"font-semibold\">{tasks?.length || 0}</span>\n              {searchQuery && <span className=\"font-medium\"> للبحث: \"<span className=\"text-primary\">{searchQuery}</span>\"</span>}\n            </span>\n          </div>\n        )}\n\n        {/* Filters */}\n        <TaskFilters \n          activeFilter={activeFilter} \n          onFilterChange={setActiveFilter} \n        />\n      </div>\n\n      <div className=\"space-y-3\">\n        {isLoading ? (\n          <>\n            {[...Array(5)].map((_, i) => (\n              <Skeleton key={i} className=\"h-20 rounded-lg\" />\n            ))}\n          </>\n        ) : sortedTasks.length > 0 ? (\n          sortedTasks.map((task) => (\n            <div\n              key={task.id}\n              className={`task-compact-card border-l-4 ${getTaskBackgroundColor(task.status)} backdrop-blur-sm rounded-lg border hover:shadow-md transition-all duration-200 p-3`}\n              data-testid={`task-item-${task.id}`}\n            >\n              <div className=\"flex items-center justify-between\">\n                {/* Task Info Grid */}\n                <div className=\"flex-1 grid grid-cols-1 md:grid-cols-12 gap-3 items-center\">\n                  {/* Task Title & Status - Takes more space */}\n                  <div className=\"md:col-span-5\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      {task.taskNumber && (\n                        <span className=\"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-semibold\">\n                          #{task.taskNumber}\n                        </span>\n                      )}\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium border ${getStatusColor(task.status)}`}>\n                        {getStatusLabel(task.status)}\n                      </span>\n                    </div>\n                    <h3 className=\"font-semibold text-sm text-gray-900 line-clamp-1 mb-1\">\n                      {task.title}\n                    </h3>\n                    {task.description && (\n                      <p className=\"text-xs text-gray-600 line-clamp-1\">\n                        {task.description.substring(0, 80)}{task.description.length > 80 ? '...' : ''}\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Customer Info */}\n                  <div className=\"md:col-span-3\">\n                    <div className=\"text-xs font-medium text-gray-700 mb-1\">العميل</div>\n                    <div className=\"text-xs text-gray-900 font-medium line-clamp-1\">\n                      {task.customerName || 'غير محدد'}\n                    </div>\n                    {task.customerPhone && (\n                      <div className=\"text-xs text-gray-500 line-clamp-1\">\n                        {task.customerPhone}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Assignees & Due Date */}\n                  <div className=\"md:col-span-3\">\n                    <div className=\"text-xs font-medium text-gray-700 mb-1\">المكلف</div>\n                    <div className=\"text-xs text-gray-900 font-medium line-clamp-1\">\n                      {task.assignees && task.assignees.length > 0 ? (\n                        <>\n                          {task.assignees[0].name}\n                          {task.assignees.length > 1 && (\n                            <span className=\"text-gray-500\"> +{task.assignees.length - 1}</span>\n                          )}\n                        </>\n                      ) : (\n                        'غير مُعين'\n                      )}\n                    </div>\n                    {task.dueDate && (\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        استحقاق: {format(new Date(task.dueDate), \"MMM dd\")}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"md:col-span-1 flex justify-end\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"text-gray-400 hover:text-gray-600 p-1 h-auto\"\n                      onClick={() => {\n                        setSelectedTask(task);\n                        setShowTaskDetails(true);\n                      }}\n                      data-testid={`button-view-task-${task.id}`}\n                    >\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"text-center py-16 text-muted-foreground\" data-testid=\"text-no-filtered-tasks\">\n            <div className=\"bg-gradient-to-br from-muted/30 to-muted/10 rounded-2xl p-8 border border-border/30\">\n              {searchQuery ? (\n                <>\n                  <Search className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\n                  <h3 className=\"text-lg font-medium mb-2\">لم يتم العثور على نتائج</h3>\n                  <p>لا توجد مهام تطابق البحث \"<span className=\"font-medium text-primary\">{searchQuery}</span>\"</p>\n                  <Button \n                    variant=\"outline\" \n                    className=\"mt-4\"\n                    onClick={() => setSearchQuery(\"\")}\n                  >\n                    مسح البحث\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <AlertCircle className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\n                  <h3 className=\"text-lg font-medium mb-2\">\n                    {activeFilter === \"all\" ? \"لا توجد مهام\" : \"لا توجد مهام مطابقة\"}\n                  </h3>\n                  <p>\n                    {activeFilter === \"all\" \n                      ? \"أنشئ مهمتك الأولى للبدء.\"\n                      : `لا توجد مهام ${activeFilter === 'pending' ? 'في الانتظار' : activeFilter === 'start' ? 'قيد التنفيذ' : 'مكتملة'}.`\n                    }\n                  </p>\n                </>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Task Details Modal */}\n      {selectedTask && (\n        <TaskDetailModal\n          task={selectedTask}\n          open={showTaskDetails}\n          onOpenChange={setShowTaskDetails}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default function Tasks() {\n  return (\n    <ErrorBoundary \n      fallback={({ error, resetError }) => (\n        <ComponentErrorFallback\n          error={error}\n          resetError={resetError}\n          componentName=\"صفحة المهام\"\n        />\n      )}\n    >\n      <TasksContent />\n    </ErrorBoundary>\n  );\n}\n","size_bytes":15180},"client/src/pages/team-members.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Plus, Edit2, Trash2, Mail, User, UserPlus } from \"lucide-react\";\nimport { ProfileImageUploader } from \"@/components/ProfileImageUploader\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface TeamMember {\n  id: string;\n  name: string;\n  role: string;\n  email: string;\n  phone?: string;\n  status: string;\n  activeTasks: number;\n  avatar?: string;\n  profileImage?: string;\n}\n\nexport default function TeamMembersPage() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [editingMember, setEditingMember] = useState<TeamMember | null>(null);\n  const [newMember, setNewMember] = useState({\n    name: \"\",\n    role: \"user\",\n    email: \"\",\n  });\n\n  // Check if user has admin or supervisor permissions\n  const canManageMembers = (user as any)?.role === \"admin\" || (user as any)?.role === \"supervisor\";\n\n  const { data: teamMembers = [], isLoading } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  const createMemberMutation = useMutation({\n    mutationFn: async (member: { name: string; role: string; email: string }) => {\n      return await apiRequest(\"/api/team-members\", \"POST\", member);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم إنشاء عضو الفريق\",\n        description: \"تم إضافة عضو الفريق بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      setIsAddDialogOpen(false);\n      setNewMember({ name: \"\", role: \"user\", email: \"\" });\n    },\n    onError: (error) => {\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إضافة عضو الفريق\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMemberMutation = useMutation({\n    mutationFn: async ({ id, updates }: { id: string; updates: Partial<TeamMember> }) => {\n      return await apiRequest(`/api/team-members/${id}`, \"PATCH\", updates);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تحديث عضو الفريق\",\n        description: \"تم تحديث بيانات عضو الفريق بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      setEditingMember(null);\n    },\n    onError: (error) => {\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في تحديث عضو الفريق\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMemberMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(`/api/team-members/${id}`, \"DELETE\");\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم حذف عضو الفريق\",\n        description: \"تم حذف عضو الفريق بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n    },\n    onError: (error) => {\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في حذف عضو الفريق\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAddMember = () => {\n    if (!newMember.name || !newMember.email) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    createMemberMutation.mutate(newMember);\n  };\n\n  const handleUpdateMember = () => {\n    if (!editingMember) return;\n    updateMemberMutation.mutate({\n      id: editingMember.id,\n      updates: editingMember,\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"available\":\n        return \"bg-green-100 text-green-800\";\n      case \"busy\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"offline\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case \"available\":\n        return \"متاح\";\n      case \"busy\":\n        return \"مشغول\";\n      case \"offline\":\n        return \"غير متصل\";\n      default:\n        return status;\n    }\n  };\n\n  const getRoleText = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"مدير النظام\";\n      case \"supervisor\":\n        return \"مشرف\";\n      case \"user\":\n        return \"مستخدم\";\n      default:\n        return role;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-96\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-muted-foreground\">جاري تحميل أعضاء الفريق...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">أعضاء الفريق</h1>\n        {canManageMembers && (\n          <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n            <DialogTrigger asChild>\n              <Button>\n                <UserPlus className=\"w-4 h-4 ml-2\" />\n                إضافة عضو جديد\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>إضافة عضو فريق جديد</DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4 mt-4\">\n                <div>\n                  <Label htmlFor=\"name\">الاسم</Label>\n                  <Input\n                    id=\"name\"\n                    placeholder=\"اسم العضو\"\n                    value={newMember.name}\n                    onChange={(e) => setNewMember({ ...newMember, name: e.target.value })}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"email\">البريد الإلكتروني</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"البريد الإلكتروني\"\n                    value={newMember.email}\n                    onChange={(e) => setNewMember({ ...newMember, email: e.target.value })}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"role\">الدور</Label>\n                  <Select value={newMember.role} onValueChange={(value) => setNewMember({ ...newMember, role: value })}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"اختر الدور\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"user\">مستخدم</SelectItem>\n                      <SelectItem value=\"supervisor\">مشرف</SelectItem>\n                      {(user as any)?.role === \"admin\" && <SelectItem value=\"admin\">مدير النظام</SelectItem>}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex gap-2 pt-4\">\n                  <Button onClick={handleAddMember} disabled={createMemberMutation.isPending}>\n                    {createMemberMutation.isPending ? \"جاري الإضافة...\" : \"إضافة\"}\n                  </Button>\n                  <Button variant=\"outline\" onClick={() => setIsAddDialogOpen(false)}>\n                    إلغاء\n                  </Button>\n                </div>\n              </div>\n            </DialogContent>\n          </Dialog>\n        )}\n      </div>\n\n      <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n        {teamMembers.map((member) => (\n          <Card key={member.id} className=\"group hover:shadow-2xl hover:-translate-y-1 transition-all duration-500 border-0 bg-white rounded-3xl overflow-hidden relative\">\n            {/* Decorative gradient border */}\n            <div className=\"absolute inset-0 bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" style={{ padding: '2px' }}>\n              <div className=\"bg-white rounded-3xl h-full w-full\" />\n            </div>\n            \n            <div className=\"relative z-10 bg-white rounded-3xl\">\n              <CardHeader className=\"pb-6 pt-8 text-center\">\n                <div className=\"flex justify-center mb-4\">\n                  <ProfileImageUploader\n                    teamMemberId={member.id}\n                    currentProfileImage={member.profileImage}\n                    memberName={member.name}\n                    size=\"lg\"\n                    showUploadIcon={canManageMembers}\n                    onImageUpdated={(newImagePath) => {\n                      // Force refresh of team members data\n                      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n                      queryClient.refetchQueries({ queryKey: [\"/api/team-members\"] });\n                    }}\n                    key={`${member.id}-${member.profileImage || 'no-image'}`}\n                  />\n                </div>\n                <CardTitle className=\"text-2xl mb-3 text-gray-800 font-bold\">{member.name}</CardTitle>\n                <div className=\"flex flex-wrap justify-center gap-2 mb-4\">\n                  <Badge \n                    className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-0 font-semibold px-4 py-2 rounded-full text-sm shadow-md\"\n                  >\n                    {getRoleText(member.role)}\n                  </Badge>\n                  <Badge className={`${getStatusColor(member.status)} px-4 py-2 font-semibold rounded-full text-sm shadow-md border-0`}>\n                    {getStatusText(member.status)}\n                  </Badge>\n                </div>\n                \n                {canManageMembers && (\n                  <div className=\"flex justify-center gap-3 mt-4\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-12 w-12 rounded-full bg-blue-50 hover:bg-blue-100 hover:scale-110 transition-all duration-200 text-blue-600\"\n                      onClick={() => setEditingMember(member)}\n                    >\n                      <Edit2 className=\"w-5 h-5\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-12 w-12 rounded-full bg-red-50 hover:bg-red-100 hover:scale-110 transition-all duration-200 text-red-600\"\n                      onClick={() => deleteMemberMutation.mutate(member.id)}\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </Button>\n                  </div>\n                )}\n              </CardHeader>\n              \n              <CardContent className=\"pt-0 pb-8\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center gap-3 text-sm bg-gradient-to-r from-gray-50 to-blue-50 p-4 rounded-2xl border border-gray-100\">\n                    <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                      <Mail className=\"w-5 h-5 text-blue-600\" />\n                    </div>\n                    <span className=\"truncate text-gray-700 font-medium\">{member.email}</span>\n                  </div>\n                  \n                  {member.phone && (\n                    <div className=\"flex items-center gap-3 text-sm bg-gradient-to-r from-gray-50 to-green-50 p-4 rounded-2xl border border-gray-100\">\n                      <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-green-600 text-lg\">📱</span>\n                      </div>\n                      <span className=\"truncate text-gray-700 font-medium\">{member.phone}</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-2xl text-white\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-semibold text-lg\">المهام النشطة</span>\n                      <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center\">\n                        <span className=\"text-2xl font-bold\">{member.activeTasks}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </div>\n          </Card>\n        ))}\n      </div>\n\n      {/* Edit Member Dialog */}\n      <Dialog open={!!editingMember} onOpenChange={(open) => !open && setEditingMember(null)}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>تعديل عضو الفريق</DialogTitle>\n          </DialogHeader>\n          {editingMember && (\n            <div className=\"space-y-4 mt-4\">\n              <div>\n                <Label htmlFor=\"edit-name\">الاسم</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={editingMember.name}\n                  onChange={(e) => setEditingMember({ ...editingMember, name: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"edit-email\">البريد الإلكتروني</Label>\n                <Input\n                  id=\"edit-email\"\n                  type=\"email\"\n                  value={editingMember.email}\n                  onChange={(e) => setEditingMember({ ...editingMember, email: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"edit-phone\">رقم الهاتف (للواتساب)</Label>\n                <Input\n                  id=\"edit-phone\"\n                  type=\"text\"\n                  placeholder=\"مثال: 966501234567\"\n                  value={editingMember.phone || \"\"}\n                  onChange={(e) => setEditingMember({ ...editingMember, phone: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"edit-role\">الدور</Label>\n                <Select \n                  value={editingMember.role} \n                  onValueChange={(value) => setEditingMember({ ...editingMember, role: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"user\">مستخدم</SelectItem>\n                    <SelectItem value=\"supervisor\">مشرف</SelectItem>\n                    {(user as any)?.role === \"admin\" && <SelectItem value=\"admin\">مدير النظام</SelectItem>}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"edit-status\">الحالة</Label>\n                <Select \n                  value={editingMember.status} \n                  onValueChange={(value) => setEditingMember({ ...editingMember, status: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"available\">متاح</SelectItem>\n                    <SelectItem value=\"busy\">مشغول</SelectItem>\n                    <SelectItem value=\"offline\">غير متصل</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex gap-2 pt-4\">\n                <Button onClick={handleUpdateMember} disabled={updateMemberMutation.isPending}>\n                  {updateMemberMutation.isPending ? \"جاري التحديث...\" : \"تحديث\"}\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingMember(null)}>\n                  إلغاء\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":16917},"client/src/pages/team-points.tsx":{"content":"import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { Plus, RotateCcw, Trophy, History, Award } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/hooks/use-auth';\nimport { format } from 'date-fns';\n\ninterface User {\n  id: string;\n  username: string;\n  role: string;\n  isApproved: string;\n  isActive: string;\n}\n\ninterface TeamMemberPoints {\n  id: string;\n  teamMemberId: string;\n  points: number;\n  totalEarned: number;\n  lastUpdated: Date;\n  teamMember: {\n    id: string;\n    name: string;\n    role: string;\n  };\n}\n\ninterface PointsHistory {\n  id: string;\n  teamMemberId: string;\n  action: 'earned' | 'reset';\n  pointsChange: number;\n  reason: string;\n  taskId?: string;\n  ratingId?: string;\n  performedBy?: string;\n  createdAt: Date;\n  teamMember: {\n    name: string;\n  };\n  performedByUser?: {\n    username: string;\n  };\n}\n\nexport default function TeamPoints() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [showHistoryDialog, setShowHistoryDialog] = useState(false);\n  const [addPointsForm, setAddPointsForm] = useState({\n    teamMemberId: '',\n    points: '',\n    reason: ''\n  });\n\n  // جلب نقاط الفريق\n  const { data: teamPoints = [], isLoading: pointsLoading } = useQuery<TeamMemberPoints[]>({\n    queryKey: ['/api/team-points'],\n    enabled: !!user\n  });\n\n  // جلب تاريخ النقاط\n  const { data: pointsHistory = [], isLoading: historyLoading } = useQuery<PointsHistory[]>({\n    queryKey: ['/api/points-history'],\n    enabled: !!user && showHistoryDialog\n  });\n\n  // إضافة نقاط\n  const addPointsMutation = useMutation({\n    mutationFn: async (data: { teamMemberId: string; points: number; reason: string }) => {\n      return await apiRequest(`/api/team-points/${data.teamMemberId}/add`, 'POST', {\n        points: data.points, \n        reason: data.reason \n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم بنجاح\",\n        description: \"تم إضافة النقاط بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/team-points'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/points-history'] });\n      setShowAddDialog(false);\n      setAddPointsForm({ teamMemberId: '', points: '', reason: '' });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في إضافة النقاط\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // تصفير نقاط عضو واحد\n  const resetMemberPointsMutation = useMutation({\n    mutationFn: async (teamMemberId: string) => {\n      return await apiRequest(`/api/team-points/${teamMemberId}/reset`, 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم بنجاح\",\n        description: \"تم تصفير نقاط العضو بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/team-points'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/points-history'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تصفير النقاط\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // تصفير جميع النقاط\n  const resetAllPointsMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest('/api/team-points/reset-all', 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم بنجاح\",\n        description: \"تم تصفير جميع النقاط بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/team-points'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/points-history'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تصفير جميع النقاط\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const handleAddPoints = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!addPointsForm.teamMemberId || !addPointsForm.points || !addPointsForm.reason) {\n      toast({\n        title: \"خطأ\",\n        description: \"جميع الحقول مطلوبة\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const points = parseInt(addPointsForm.points);\n    if (isNaN(points) || points <= 0) {\n      toast({\n        title: \"خطأ\",\n        description: \"عدد النقاط يجب أن يكون رقمًا موجبًا\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    addPointsMutation.mutate({\n      teamMemberId: addPointsForm.teamMemberId,\n      points,\n      reason: addPointsForm.reason\n    });\n  };\n\n  const formatPointsChange = (change: number) => {\n    return change > 0 ? `+${change}` : change.toString();\n  };\n\n  const getActionBadgeVariant = (action: string) => {\n    return action === 'earned' ? 'default' : 'secondary';\n  };\n\n  const getActionText = (action: string) => {\n    return action === 'earned' ? 'حصل على' : 'تم تصفير';\n  };\n\n  if (!user || (user as any).role !== 'admin') {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <p className=\"text-center text-muted-foreground\">\n              عذراً، هذه الصفحة متاحة فقط للمديرين\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"team-points-page\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"page-title\">\n            نقاط الفريق\n          </h1>\n          <p className=\"text-muted-foreground\">\n            إدارة نقاط المكافآت لأعضاء الفريق\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            onClick={() => setShowHistoryDialog(true)}\n            variant=\"outline\"\n            data-testid=\"button-view-history\"\n          >\n            <History className=\"h-4 w-4 mr-2\" />\n            عرض التاريخ\n          </Button>\n          \n          <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-add-points\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                إضافة نقاط\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>إضافة نقاط لعضو الفريق</DialogTitle>\n                <DialogDescription>\n                  قم بإضافة نقاط مكافأة لعضو من أعضاء الفريق\n                </DialogDescription>\n              </DialogHeader>\n              <form onSubmit={handleAddPoints} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"teamMember\">عضو الفريق</Label>\n                  <select\n                    id=\"teamMember\"\n                    className=\"w-full p-2 border border-gray-300 rounded-md\"\n                    value={addPointsForm.teamMemberId}\n                    onChange={(e) => setAddPointsForm({...addPointsForm, teamMemberId: e.target.value})}\n                    data-testid=\"select-team-member\"\n                  >\n                    <option value=\"\">اختر عضو الفريق</option>\n                    {teamPoints?.map((point: TeamMemberPoints) => (\n                      <option key={point.teamMemberId} value={point.teamMemberId}>\n                        {point.teamMember.name} - {point.teamMember.role}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"points\">عدد النقاط</Label>\n                  <Input\n                    id=\"points\"\n                    type=\"number\"\n                    min=\"1\"\n                    value={addPointsForm.points}\n                    onChange={(e) => setAddPointsForm({...addPointsForm, points: e.target.value})}\n                    placeholder=\"أدخل عدد النقاط\"\n                    data-testid=\"input-points\"\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"reason\">السبب</Label>\n                  <Textarea\n                    id=\"reason\"\n                    value={addPointsForm.reason}\n                    onChange={(e) => setAddPointsForm({...addPointsForm, reason: e.target.value})}\n                    placeholder=\"أدخل سبب منح النقاط\"\n                    data-testid=\"textarea-reason\"\n                  />\n                </div>\n                \n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowAddDialog(false)}\n                  >\n                    إلغاء\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={addPointsMutation.isPending}\n                    data-testid=\"button-submit-add-points\"\n                  >\n                    {addPointsMutation.isPending ? 'جاري الإضافة...' : 'إضافة النقاط'}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </DialogContent>\n          </Dialog>\n\n          <AlertDialog>\n            <AlertDialogTrigger asChild>\n              <Button variant=\"destructive\" data-testid=\"button-reset-all\">\n                <RotateCcw className=\"h-4 w-4 mr-2\" />\n                تصفير جميع النقاط\n              </Button>\n            </AlertDialogTrigger>\n            <AlertDialogContent>\n              <AlertDialogHeader>\n                <AlertDialogTitle>تأكيد تصفير جميع النقاط</AlertDialogTitle>\n                <AlertDialogDescription>\n                  هل أنت متأكد من أنك تريد تصفير جميع نقاط أعضاء الفريق؟ هذا الإجراء لا يمكن التراجع عنه.\n                </AlertDialogDescription>\n              </AlertDialogHeader>\n              <AlertDialogFooter>\n                <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                <AlertDialogAction\n                  onClick={() => resetAllPointsMutation.mutate()}\n                  className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                  data-testid=\"button-confirm-reset-all\"\n                >\n                  تصفير الكل\n                </AlertDialogAction>\n              </AlertDialogFooter>\n            </AlertDialogContent>\n          </AlertDialog>\n        </div>\n      </div>\n\n      {/* Team Points Grid */}\n      {pointsLoading ? (\n        <div className=\"text-center py-8\">\n          <p>جاري تحميل النقاط...</p>\n        </div>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {teamPoints?.map((point: TeamMemberPoints) => (\n            <Card key={point.teamMemberId} data-testid={`card-points-${point.teamMemberId}`}>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <CardTitle className=\"text-lg\">{point.teamMember.name}</CardTitle>\n                    <CardDescription>{point.teamMember.role}</CardDescription>\n                  </div>\n                  <Trophy className=\"h-8 w-8 text-yellow-500\" />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-muted-foreground\">النقاط الحالية:</span>\n                    <Badge variant=\"default\" className=\"text-lg px-3 py-1\">\n                      {point.points} نقطة\n                    </Badge>\n                  </div>\n                  \n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-muted-foreground\">إجمالي النقاط المكتسبة:</span>\n                    <span className=\"text-sm font-medium\">{point.totalEarned}</span>\n                  </div>\n                  \n                  {point.lastUpdated && (\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm text-muted-foreground\">آخر تحديث:</span>\n                      <span className=\"text-xs\">\n                        {format(new Date(point.lastUpdated), 'dd/MM/yyyy')}\n                      </span>\n                    </div>\n                  )}\n\n                  <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"w-full mt-2\"\n                        data-testid={`button-reset-${point.teamMemberId}`}\n                      >\n                        <RotateCcw className=\"h-4 w-4 mr-2\" />\n                        تصفير النقاط\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                      <AlertDialogHeader>\n                        <AlertDialogTitle>تأكيد تصفير النقاط</AlertDialogTitle>\n                        <AlertDialogDescription>\n                          هل أنت متأكد من أنك تريد تصفير نقاط {point.teamMember.name}؟ هذا الإجراء لا يمكن التراجع عنه.\n                        </AlertDialogDescription>\n                      </AlertDialogHeader>\n                      <AlertDialogFooter>\n                        <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                        <AlertDialogAction\n                          onClick={() => resetMemberPointsMutation.mutate(point.teamMemberId)}\n                          className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                          data-testid={`button-confirm-reset-${point.teamMemberId}`}\n                        >\n                          تصفير النقاط\n                        </AlertDialogAction>\n                      </AlertDialogFooter>\n                    </AlertDialogContent>\n                  </AlertDialog>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Points History Dialog */}\n      <Dialog open={showHistoryDialog} onOpenChange={setShowHistoryDialog}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>تاريخ النقاط</DialogTitle>\n            <DialogDescription>\n              عرض جميع عمليات النقاط والمكافآت\n            </DialogDescription>\n          </DialogHeader>\n          \n          {historyLoading ? (\n            <div className=\"text-center py-8\">\n              <p>جاري تحميل التاريخ...</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {pointsHistory?.map((entry: PointsHistory) => (\n                <Card key={entry.id} className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <Award className=\"h-5 w-5 text-blue-500\" />\n                      <div>\n                        <p className=\"font-medium\">{entry.teamMember.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">{entry.reason}</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={getActionBadgeVariant(entry.action)}>\n                          {getActionText(entry.action)}\n                        </Badge>\n                        <span className={`font-bold ${entry.pointsChange > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          {formatPointsChange(entry.pointsChange)} نقطة\n                        </span>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {format(new Date(entry.createdAt), 'dd/MM/yyyy HH:mm')}\n                      </p>\n                      {entry.performedByUser && (\n                        <p className=\"text-xs text-muted-foreground\">\n                          بواسطة: {entry.performedByUser.username}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":18018},"client/src/pages/team.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { TeamMemberCard } from \"@/components/team/team-member-card\";\nimport { AddMemberForm } from \"@/components/team/add-member-form\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { TeamMember } from \"@shared/schema\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { UserPlus, Trash2, UserCheck } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Team() {\n  const [showAddMember, setShowAddMember] = useState(false);\n  const [showCleanupDialog, setShowCleanupDialog] = useState(false);\n  const { t } = useLanguage();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: teamMembers, isLoading } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  // Check if current user is admin\n  const isAdmin = user && typeof user === 'object' && user !== null && 'role' in user ? (user as any).role === 'admin' : false;\n\n  // Cleanup default members mutation\n  const cleanupMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/admin/cleanup-default-members', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to cleanup default members');\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/team-members'] });\n      toast({\n        title: \"تم التنظيف بنجاح\",\n        description: `${data.message} (${data.cleaned} عضو)`,\n      });\n      setShowCleanupDialog(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ في التنظيف\",\n        description: error.message || \"حدث خطأ أثناء تنظيف الأعضاء الافتراضيين\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCleanup = () => {\n    cleanupMutation.mutate();\n  };\n\n  // Fix missing team members mutation\n  const fixMissingMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/admin/fix-missing-team-members', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to fix missing team members');\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/team-members'] });\n      toast({\n        title: \"تم الإصلاح بنجاح\",\n        description: data.message,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ في الإصلاح\",\n        description: error.message || \"حدث خطأ أثناء إصلاح أعضاء الفريق المفقودين\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFixMissing = () => {\n    fixMissingMutation.mutate();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-medium\" data-testid=\"text-team-title\">\n          {t('team.title')}\n        </h2>\n        <div className=\"flex items-center gap-2\">\n          {isAdmin && (\n            <>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleFixMissing}\n                disabled={fixMissingMutation.isPending}\n                data-testid=\"button-fix-missing\"\n                className=\"text-green-600 border-green-600 hover:bg-green-50\"\n              >\n                <UserCheck className=\"h-4 w-4 mr-2\" />\n                {fixMissingMutation.isPending ? \"جاري الإصلاح...\" : \"إصلاح أعضاء الفريق المفقودين\"}\n              </Button>\n              {teamMembers && teamMembers.length > 0 && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setShowCleanupDialog(true)}\n                  disabled={cleanupMutation.isPending}\n                  data-testid=\"button-cleanup-defaults\"\n                >\n                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                  {cleanupMutation.isPending ? \"جاري التنظيف...\" : \"تنظيف الأعضاء الافتراضيين\"}\n                </Button>\n              )}\n            </>\n          )}\n          <Button\n            onClick={() => setShowAddMember(true)}\n            size=\"sm\"\n            data-testid=\"button-add-member\"\n          >\n            <UserPlus className=\"h-4 w-4 mr-2\" />\n            {t('team.addMember')}\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {isLoading ? (\n          <>\n            {[...Array(4)].map((_, i) => (\n              <Skeleton key={i} className=\"h-20 rounded-lg\" />\n            ))}\n          </>\n        ) : teamMembers && teamMembers.length > 0 ? (\n          teamMembers.map((member) => (\n            <TeamMemberCard key={member.id} member={member} />\n          ))\n        ) : (\n          <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-team-members\">\n            لا يوجد أعضاء فريق. أضف عضو الفريق الأول للبدء.\n          </div>\n        )}\n      </div>\n\n      <Dialog open={showAddMember} onOpenChange={setShowAddMember}>\n        <DialogContent className=\"sm:max-w-md\">\n          <AddMemberForm onSuccess={() => setShowAddMember(false)} />\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={showCleanupDialog} onOpenChange={setShowCleanupDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>تنظيف الأعضاء الافتراضيين</AlertDialogTitle>\n            <AlertDialogDescription>\n              هل أنت متأكد من حذف جميع الأعضاء الافتراضيين/التجريبيين من الفريق؟\n              سيتم حذف الأعضاء الذين لا يملكون حسابات مستخدمين مرتبطة والأسماء النموذجية.\n              هذا الإجراء لا يمكن التراجع عنه.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>إلغاء</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleCleanup}\n              className=\"bg-destructive hover:bg-destructive/90\"\n              disabled={cleanupMutation.isPending}\n            >\n              {cleanupMutation.isPending ? \"جاري التنظيف...\" : \"تنظيف\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7341},"client/src/pages/whatsapp-management.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Separator } from '@/components/ui/separator';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport QRCode from 'qrcode';\nimport { useToast } from '@/hooks/use-toast';\nimport { useErrorHandler } from '@/lib/error-handler';\nimport { useLanguage } from '@/hooks/use-language';\nimport { ErrorBoundary, ComponentErrorFallback } from '@/components/error/error-boundary';\nimport { \n  MessageCircle, \n  Phone, \n  Settings, \n  RefreshCw, \n  CheckCircle, \n  XCircle,\n  QrCode,\n  Send,\n  Activity,\n  Edit\n} from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { Link } from 'wouter';\n\ninterface WhatsAppStatus {\n  isConnected: boolean;\n  isReady: boolean;\n  senderNumber: string | null;\n  lastConnected: string | null;\n  qrCode: string | null;\n  messagesCount: number;\n}\n\ninterface WhatsAppSettings {\n  defaultMessage: string;\n  senderName: string;\n  autoSend: boolean;\n}\n\nexport default function WhatsAppManagement() {\n  const { toast } = useToast();\n  const { handleError, handleSuccess, t } = useErrorHandler();\n  const queryClient = useQueryClient();\n  const [editingMessage, setEditingMessage] = useState(false);\n  const [newMessage, setNewMessage] = useState('');\n  const [qrCodeImage, setQrCodeImage] = useState<string | null>(null);\n\n  // جلب حالة الواتساب\n  const { data: status, isLoading: statusLoading } = useQuery<WhatsAppStatus>({\n    queryKey: ['/api/whatsapp/status'],\n    refetchInterval: 5000, // تحديث كل 5 ثوانِ\n  });\n\n  // جلب إعدادات الواتساب\n  const { data: settings, isLoading: settingsLoading } = useQuery<WhatsAppSettings>({\n    queryKey: ['/api/whatsapp/settings'],\n  });\n\n  // إعادة ربط الواتساب\n  const reconnectMutation = useMutation({\n    mutationFn: () => apiRequest('POST', '/api/whatsapp/reconnect'),\n    onSuccess: () => {\n      handleSuccess('whatsapp.reconnecting', {\n        title: t('whatsapp.reconnecting'),\n        description: t('whatsapp.qrCode'),\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/whatsapp/status'] });\n    },\n    onError: (error) => {\n      handleError(error, {\n        title: t('error.generic'),\n        action: () => reconnectMutation.mutate(),\n        actionLabel: t('guidance.retry'),\n      });\n    },\n  });\n\n  // قطع اتصال الواتساب\n  const disconnectMutation = useMutation({\n    mutationFn: () => apiRequest('POST', '/api/whatsapp/disconnect'),\n    onSuccess: () => {\n      handleSuccess('whatsapp.disconnected', {\n        title: 'تم قطع الاتصال',\n        description: 'تم قطع الاتصال مع الواتساب بنجاح',\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/whatsapp/status'] });\n    },\n    onError: (error) => {\n      handleError(error, {\n        title: t('error.generic'),\n        action: () => disconnectMutation.mutate(),\n        actionLabel: t('guidance.retry'),\n      });\n    },\n  });\n\n  // تحديث إعدادات الرسالة\n  const updateMessageMutation = useMutation({\n    mutationFn: (message: string) => \n      apiRequest('PUT', '/api/whatsapp/settings', { defaultMessage: message }),\n    onSuccess: () => {\n      handleSuccess('whatsapp.settingsUpdated');\n      setEditingMessage(false);\n      queryClient.invalidateQueries({ queryKey: ['/api/whatsapp/settings'] });\n    },\n    onError: (error) => {\n      handleError(error, {\n        title: t('error.validation'),\n        action: () => updateMessageMutation.mutate(newMessage),\n        actionLabel: t('guidance.retry'),\n      });\n    },\n  });\n\n  // إرسال رسالة تجريبية\n  const testMessageMutation = useMutation({\n    mutationFn: (phoneNumber: string) => \n      apiRequest('POST', '/api/whatsapp/test-message', { phoneNumber }),\n    onSuccess: () => {\n      handleSuccess('whatsapp.messageSent');\n    },\n    onError: (error) => {\n      handleError(error, {\n        title: t('whatsapp.messageFailed'),\n        action: () => {\n          const phoneInput = document.querySelector('input[placeholder*=\"966\"]') as HTMLInputElement;\n          if (phoneInput?.value) {\n            testMessageMutation.mutate(phoneInput.value);\n          }\n        },\n        actionLabel: t('guidance.retry'),\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (settings && !editingMessage) {\n      setNewMessage(settings.defaultMessage || '');\n    }\n  }, [settings, editingMessage]);\n\n  // توليد صورة QR Code عندما يكون متاحاً\n  useEffect(() => {\n    const generateQR = async () => {\n      if (status?.qrCode) {\n        try {\n          const qrImage = await QRCode.toDataURL(status.qrCode, {\n            width: 256,\n            margin: 2,\n            color: {\n              dark: '#000000',\n              light: '#FFFFFF'\n            }\n          });\n          setQrCodeImage(qrImage);\n        } catch (error) {\n          console.error('خطأ في توليد رمز QR:', error);\n          setQrCodeImage(null);\n        }\n      } else {\n        setQrCodeImage(null);\n      }\n    };\n\n    generateQR();\n  }, [status?.qrCode]);\n\n  const handleUpdateMessage = () => {\n    if (newMessage.trim()) {\n      updateMessageMutation.mutate(newMessage.trim());\n    }\n  };\n\n  const handleTestMessage = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    const phoneNumber = formData.get('testPhone') as string;\n    if (phoneNumber) {\n      testMessageMutation.mutate(phoneNumber);\n    }\n  };\n\n  if (statusLoading || settingsLoading) {\n    return (\n      <div className=\"container mx-auto p-4 space-y-6\">\n        <div className=\"flex items-center gap-2 mb-6\">\n          <MessageCircle className=\"h-6 w-6\" />\n          <h1 className=\"text-2xl font-bold\">إدارة الواتساب</h1>\n        </div>\n        <div className=\"text-center py-8\">{t('guidance.loading')}</div>\n      </div>\n    );\n  }\n\n  return (\n    <ErrorBoundary fallback={ComponentErrorFallback}>\n      <div className=\"container mx-auto p-4 space-y-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-2\">\n          <MessageCircle className=\"h-6 w-6\" />\n          <h1 className=\"text-2xl font-bold\">إدارة الواتساب</h1>\n        </div>\n        <div className=\"flex gap-2\">\n          <Link href=\"/admin/whatsapp-settings\">\n            <Button variant=\"outline\" className=\"flex items-center gap-2\">\n              <Settings className=\"h-4 w-4\" />\n              إعدادات متقدمة\n            </Button>\n          </Link>\n          <Link href=\"/admin/whatsapp-broadcast\">\n            <Button className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700\">\n              <MessageCircle className=\"h-4 w-4\" />\n              رسائل جماعية\n            </Button>\n          </Link>\n        </div>\n      </div>\n\n      {/* حالة الاتصال */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Activity className=\"h-5 w-5\" />\n            حالة الاتصال\n          </CardTitle>\n          <CardDescription>\n            مراقبة حالة ربط الواتساب الحالية\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <Label>حالة الربط:</Label>\n              {status?.isConnected ? (\n                <Badge variant=\"default\" className=\"bg-green-500\">\n                  <CheckCircle className=\"h-3 w-3 mr-1\" />\n                  متصل\n                </Badge>\n              ) : (\n                <Badge variant=\"destructive\">\n                  <XCircle className=\"h-3 w-3 mr-1\" />\n                  غير متصل\n                </Badge>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <Label>الحالة:</Label>\n              {status?.isReady ? (\n                <Badge variant=\"default\" className=\"bg-blue-500\">جاهز</Badge>\n              ) : (\n                <Badge variant=\"secondary\">غير جاهز</Badge>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <Label>عدد الرسائل:</Label>\n              <Badge variant=\"outline\">{status?.messagesCount || 0}</Badge>\n            </div>\n          </div>\n\n          {status?.senderNumber && (\n            <div className=\"flex items-center gap-2\">\n              <Phone className=\"h-4 w-4\" />\n              <Label>رقم المرسل:</Label>\n              <code className=\"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                {status.senderNumber}\n              </code>\n            </div>\n          )}\n\n          {status?.lastConnected && (\n            <div className=\"text-sm text-gray-500\">\n              آخر اتصال: {new Date(status.lastConnected).toLocaleString('en-GB')}\n            </div>\n          )}\n\n          <div className=\"flex flex-col sm:flex-row gap-2\">\n            <Button \n              onClick={() => reconnectMutation.mutate()}\n              disabled={reconnectMutation.isPending}\n              className=\"w-full sm:w-auto\"\n            >\n              <RefreshCw className={`h-4 w-4 mr-2 ${reconnectMutation.isPending ? 'animate-spin' : ''}`} />\n              إعادة ربط الواتساب\n            </Button>\n            \n            {status?.isConnected && (\n              <Button \n                variant=\"destructive\"\n                onClick={() => disconnectMutation.mutate()}\n                disabled={disconnectMutation.isPending}\n                className=\"w-full sm:w-auto\"\n                data-testid=\"button-disconnect-whatsapp\"\n              >\n                <XCircle className={`h-4 w-4 mr-2 ${disconnectMutation.isPending ? 'animate-spin' : ''}`} />\n                قطع الاتصال\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* QR Code */}\n      {status?.qrCode && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <QrCode className=\"h-5 w-5\" />\n              رمز QR للربط\n            </CardTitle>\n            <CardDescription>\n              امسح هذا الرمز بهاتفك لربط الواتساب\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-col items-center space-y-4\">\n              {qrCodeImage ? (\n                <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n                  <img \n                    src={qrCodeImage} \n                    alt=\"رمز QR للربط مع الواتساب\"\n                    className=\"w-64 h-64\"\n                    data-testid=\"img-qr-code\"\n                  />\n                </div>\n              ) : (\n                <div className=\"bg-white p-4 rounded-lg text-center border\">\n                  <div className=\"animate-pulse\">\n                    <div className=\"w-64 h-64 bg-gray-200 rounded\"></div>\n                  </div>\n                  <p className=\"text-sm text-gray-500 mt-2\">جاري تحميل رمز QR...</p>\n                </div>\n              )}\n              <div className=\"text-center space-y-2\">\n                <p className=\"text-sm text-gray-600\">\n                  📱 افتح واتساب على هاتفك\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  اذهب إلى إعدادات → الأجهزة المتصلة → ربط جهاز\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* إعدادات الرسائل */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Settings className=\"h-5 w-5\" />\n            إعدادات الرسائل\n          </CardTitle>\n          <CardDescription>\n            تخصيص نص رسائل التقييم المرسلة للعملاء\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label htmlFor=\"message-template\">نص الرسالة الافتراضي:</Label>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setEditingMessage(!editingMessage)}\n              >\n                <Edit className=\"h-3 w-3 mr-1\" />\n                {editingMessage ? 'إلغاء' : 'تعديل'}\n              </Button>\n            </div>\n            \n            {editingMessage ? (\n              <div className=\"space-y-2\">\n                <Textarea\n                  id=\"message-template\"\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  rows={8}\n                  className=\"font-mono text-sm\"\n                  placeholder=\"اكتب نص الرسالة...\"\n                />\n                <div className=\"flex gap-2\">\n                  <Button \n                    onClick={handleUpdateMessage}\n                    disabled={updateMessageMutation.isPending || !newMessage.trim()}\n                  >\n                    حفظ التغييرات\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    onClick={() => {\n                      setEditingMessage(false);\n                      setNewMessage(settings?.defaultMessage || '');\n                    }}\n                  >\n                    إلغاء\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg\">\n                <pre className=\"text-sm whitespace-pre-wrap\">\n                  {settings?.defaultMessage || 'لم يتم تعيين رسالة افتراضية'}\n                </pre>\n              </div>\n            )}\n          </div>\n\n          <Separator />\n\n          {/* اختبار الرسائل */}\n          <div className=\"space-y-2\">\n            <Label>إرسال رسالة تجريبية:</Label>\n            <form onSubmit={handleTestMessage} className=\"flex gap-2\">\n              <Input\n                name=\"testPhone\"\n                placeholder=\"رقم الهاتف (مثال: 966501234567)\"\n                className=\"flex-1\"\n                required\n              />\n              <Button \n                type=\"submit\"\n                disabled={testMessageMutation.isPending || !status?.isReady}\n              >\n                <Send className=\"h-4 w-4 mr-2\" />\n                إرسال\n              </Button>\n            </form>\n            {!status?.isReady && (\n              <Alert>\n                <AlertDescription>\n                  يجب ربط الواتساب أولاً قبل إرسال الرسائل التجريبية\n                </AlertDescription>\n              </Alert>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* معلومات إضافية */}\n      <Card>\n        <CardHeader>\n          <CardTitle>معلومات مهمة</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n          <p>• يتم إرسال رسائل التقييم تلقائياً عند تغيير حالة المهمة إلى \"مكتملة\"</p>\n          <p>• تأكد من أن رقم الهاتف صحيح ويحتوي على رمز الدولة (966 للسعودية)</p>\n          <p>• راقب وحدة التحكم لمتابعة حالة الرسائل المرسلة</p>\n          <p>• في حالة انقطاع الاتصال، استخدم زر \"إعادة ربط الواتساب\"</p>\n        </CardContent>\n      </Card>\n      </div>\n    </ErrorBoundary>\n  );\n}","size_bytes":16469},"client/src/pages/whatsapp-settings.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Smartphone, MessageSquare, RefreshCw, QrCode, Loader2, Settings, Send } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { QRCodeCanvas } from \"@/components/QRCodeCanvas\";\n\ninterface WhatsAppStatus {\n  isConnected: boolean;\n  isReady: boolean;\n  status: string;\n  message: string;\n  senderNumber: string | null;\n  lastConnected: string | null;\n  qrCode: string | null;\n  messagesCount: number;\n}\n\ninterface WhatsAppSettings {\n  defaultMessage: string;\n  senderName: string;\n  autoSend: boolean;\n}\n\nexport default function WhatsAppSettings() {\n  const { user, isLoading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [testPhoneNumber, setTestPhoneNumber] = useState(\"\");\n\n  // Fetch WhatsApp status\n  const { data: status, isLoading: statusLoading, refetch: refetchStatus } = useQuery<WhatsAppStatus>({\n    queryKey: [\"/api/whatsapp/status\"],\n    refetchInterval: 5000, // Auto refresh every 5 seconds\n  });\n\n  // Fetch WhatsApp settings\n  const { data: settings, isLoading: settingsLoading } = useQuery<WhatsAppSettings>({\n    queryKey: [\"/api/whatsapp/settings\"],\n  });\n\n  // Restart WhatsApp mutation\n  const restartMutation = useMutation({\n    mutationFn: async () => {\n      return await fetch(\"/api/whatsapp/restart\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({}),\n      }).then(res => res.json());\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم إعادة التشغيل\",\n        description: \"تم إعادة تشغيل خدمة الواتساب وتجديد رمز QR بنجاح\",\n      });\n      refetchStatus();\n    },\n    onError: (error) => {\n      console.error(\"Error restarting WhatsApp:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إعادة تشغيل خدمة الواتساب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Reconnect WhatsApp mutation\n  const reconnectMutation = useMutation({\n    mutationFn: async () => {\n      return await fetch(\"/api/whatsapp/reconnect\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({}),\n      }).then(res => res.json());\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم الطلب\",\n        description: \"تم طلب إعادة الاتصال بالواتساب\",\n      });\n      refetchStatus();\n    },\n    onError: (error) => {\n      console.error(\"Error reconnecting WhatsApp:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إعادة الاتصال بالواتساب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Send test message mutation\n  const testMessageMutation = useMutation({\n    mutationFn: async (phoneNumber: string) => {\n      await apiRequest(\"/api/whatsapp/test-message\", \"POST\", { phoneNumber });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم الإرسال\",\n        description: \"تم إرسال الرسالة التجريبية بنجاح\",\n      });\n      setTestPhoneNumber(\"\");\n    },\n    onError: (error) => {\n      console.error(\"Error sending test message:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إرسال الرسالة التجريبية\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update settings mutation\n  const updateSettingsMutation = useMutation({\n    mutationFn: async (newSettings: Partial<WhatsAppSettings>) => {\n      await apiRequest(\"/api/whatsapp/settings\", \"PUT\", newSettings);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم التحديث\",\n        description: \"تم تحديث إعدادات الواتساب بنجاح\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/whatsapp/settings\"] });\n    },\n    onError: (error) => {\n      console.error(\"Error updating settings:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في تحديث إعدادات الواتساب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Enable real WhatsApp mutation\n  const enableRealMutation = useMutation({\n    mutationFn: async () => {\n      return await fetch(\"/api/whatsapp/enable-real\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({}),\n      }).then(res => res.json());\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم التفعيل\",\n        description: \"تم تفعيل الواتساب الحقيقي - امسح رمز QR الجديد\",\n      });\n      refetchStatus();\n    },\n    onError: (error) => {\n      console.error(\"Error enabling real WhatsApp:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في تفعيل الواتساب الحقيقي\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Disable real WhatsApp mutation\n  const disableRealMutation = useMutation({\n    mutationFn: async () => {\n      return await fetch(\"/api/whatsapp/disable-real\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({}),\n      }).then(res => res.json());\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم الإلغاء\",\n        description: \"تم العودة لوضع المحاكاة\",\n      });\n      refetchStatus();\n    },\n    onError: (error) => {\n      console.error(\"Error disabling real WhatsApp:\", error);\n      toast({\n        title: \"خطأ\",\n        description: \"فشل في إلغاء تفعيل الواتساب الحقيقي\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (authLoading || statusLoading || settingsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!user || ((user as any).role !== \"admin\" && (user as any).role !== \"supervisor\")) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">غير مخول</h1>\n          <p className=\"text-gray-600\">تحتاج إلى صلاحيات مدير أو مشرف للوصول لهذه الصفحة</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSendTestMessage = () => {\n    if (!testPhoneNumber.trim()) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى إدخال رقم الهاتف\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    testMessageMutation.mutate(testPhoneNumber);\n  };\n\n  const handleUpdateSettings = (defaultMessage: string) => {\n    updateSettingsMutation.mutate({ defaultMessage });\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">إعدادات الواتساب</h1>\n        <p className=\"text-gray-600\">إدارة اتصال الواتساب ورسائل التقييم</p>\n      </div>\n\n      <div className=\"grid gap-6\">\n        {/* WhatsApp Status */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Smartphone className=\"h-5 w-5\" />\n              حالة الاتصال\n            </CardTitle>\n            <CardDescription>\n              معلومات حالة اتصال خدمة الواتساب\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"font-medium\">حالة الخدمة:</span>\n              <Badge variant={status?.isConnected ? \"default\" : \"secondary\"}>\n                {status?.isConnected ? \"متصل\" : \"غير متصل\"}\n              </Badge>\n            </div>\n            \n            {status?.senderNumber && (\n              <div className=\"flex items-center justify-between\">\n                <span className=\"font-medium\">رقم الواتساب:</span>\n                <span className=\"text-sm text-gray-600\">+{status.senderNumber}</span>\n              </div>\n            )}\n\n            {status?.lastConnected && (\n              <div className=\"flex items-center justify-between\">\n                <span className=\"font-medium\">آخر اتصال:</span>\n                <span className=\"text-sm text-gray-600\">\n                  {new Date(status.lastConnected).toLocaleString('ar-SA')}\n                </span>\n              </div>\n            )}\n\n            <div className=\"flex gap-2 pt-4\">\n              <Button \n                onClick={() => restartMutation.mutate()}\n                disabled={restartMutation.isPending}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                {restartMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                )}\n                إعادة تشغيل وتجديد QR\n              </Button>\n              \n              <Button \n                onClick={() => reconnectMutation.mutate()}\n                disabled={reconnectMutation.isPending}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                {reconnectMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  <MessageSquare className=\"h-4 w-4 mr-2\" />\n                )}\n                إعادة اتصال\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* QR Code Display */}\n        {status?.qrCode && !status?.isConnected && (\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <QrCode className=\"h-5 w-5\" />\n                رمز QR للاتصال\n              </CardTitle>\n              <CardDescription>\n                امسح هذا الرمز بواتساب هاتفك للاتصال\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"bg-gray-50 p-4 rounded-lg text-center\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  افتح الواتساب على هاتفك واختر \"الأجهزة المرتبطة\" ثم امسح الرمز أدناه\n                </p>\n                \n                {/* عرض رمز QR الحقيقي */}\n                <div className=\"bg-white p-4 rounded border inline-block\">\n                  <QRCodeCanvas qrCodeData={status.qrCode} />\n                </div>\n                \n                <p className=\"text-xs text-gray-500 mt-2\">\n                  رمز QR حقيقي يتم تحديثه من الخادم\n                </p>\n                \n                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\n                  <p className=\"text-sm text-blue-800\">\n                    <strong>تعليمات:</strong> في الواتساب اذهب لـ: الإعدادات ← الأجهزة المرتبطة ← ربط جهاز\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Real WhatsApp Toggle */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <QrCode className=\"h-5 w-5\" />\n              تفعيل الواتساب الحقيقي\n            </CardTitle>\n            <CardDescription>\n              تبديل بين وضع المحاكاة والواتساب الحقيقي\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800 mb-3\">\n                <strong>ملاحظة:</strong> النظام حالياً في وضع المحاكاة. رمز QR المعروض تجريبي فقط.\n              </p>\n              <p className=\"text-sm text-yellow-700\">\n                لتفعيل الواتساب الحقيقي، اضغط على الزر أدناه وامسح رمز QR الجديد بواتساب هاتفك.\n              </p>\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <Button \n                onClick={() => enableRealMutation.mutate()}\n                disabled={enableRealMutation.isPending}\n                className=\"flex-1\"\n              >\n                {enableRealMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  <QrCode className=\"h-4 w-4 mr-2\" />\n                )}\n                تفعيل الواتساب الحقيقي\n              </Button>\n              \n              <Button \n                onClick={() => disableRealMutation.mutate()}\n                disabled={disableRealMutation.isPending}\n                variant=\"outline\"\n                className=\"flex-1\"\n              >\n                {disableRealMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                )}\n                العودة للمحاكاة\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Test Message */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Send className=\"h-5 w-5\" />\n              رسالة تجريبية\n            </CardTitle>\n            <CardDescription>\n              إرسال رسالة تجريبية لاختبار الاتصال\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">رقم الهاتف (+964)</label>\n              <input\n                type=\"text\"\n                value={testPhoneNumber}\n                onChange={(e) => setTestPhoneNumber(e.target.value)}\n                placeholder=\"أدخل رقم الهاتف مع رمز الدولة\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <Button \n              onClick={handleSendTestMessage}\n              disabled={testMessageMutation.isPending || !status?.isConnected}\n              className=\"w-full\"\n            >\n              {testMessageMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n              ) : (\n                <Send className=\"h-4 w-4 mr-2\" />\n              )}\n              إرسال رسالة تجريبية\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Message Settings */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Settings className=\"h-5 w-5\" />\n              إعدادات الرسائل\n            </CardTitle>\n            <CardDescription>\n              تخصيص نص رسالة التقييم المرسلة للعملاء\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">نص الرسالة الافتراضية</label>\n              <Textarea\n                value={settings?.defaultMessage || \"\"}\n                onChange={(e) => handleUpdateSettings(e.target.value)}\n                placeholder=\"أدخل نص الرسالة الافتراضية...\"\n                rows={8}\n                className=\"w-full\"\n              />\n            </div>\n            <p className=\"text-xs text-gray-500\">\n              يمكنك استخدام المتغيرات: {\"{customerName}\"} للاسم، {\"{taskTitle}\"} لعنوان المهمة\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":16737},"client/src/components/admin/add-user-form.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Eye, EyeOff } from \"lucide-react\";\n\ninterface AddUserFormProps {\n  onSuccess: () => void;\n}\n\nexport function AddUserForm({ onSuccess }: AddUserFormProps) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"user\");\n  const [showPassword, setShowPassword] = useState(false);\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const createUserMutation = useMutation({\n    mutationFn: async (userData: { username: string; password: string; role: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/auth/register\", userData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: \"تم إنشاء المستخدم بنجاح\",\n        description: \"تم إنشاء حساب المستخدم الجديد\",\n      });\n      setUsername(\"\");\n      setPassword(\"\");\n      setRole(\"user\");\n      onSuccess();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ في إنشاء المستخدم\",\n        description: error.message || \"حدث خطأ أثناء إنشاء الحساب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!username.trim() || !password.trim()) {\n      toast({\n        title: \"حقول مطلوبة\",\n        description: \"يرجى ملء اسم المستخدم وكلمة المرور\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      toast({\n        title: \"كلمة مرور ضعيفة\",\n        description: \"كلمة المرور يجب أن تكون 6 أحرف على الأقل\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createUserMutation.mutate({\n      username: username.trim(),\n      password,\n      role\n    });\n  };\n\n  return (\n    <div>\n      <DialogHeader>\n        <DialogTitle data-testid=\"modal-add-user-title\">إضافة مستخدم جديد</DialogTitle>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n        <div>\n          <Label htmlFor=\"username\">اسم المستخدم *</Label>\n          <Input\n            id=\"username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            placeholder=\"أدخل اسم المستخدم\"\n            data-testid=\"input-username\"\n            dir=\"ltr\"\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"password\">كلمة المرور *</Label>\n          <div className=\"relative\">\n            <Input\n              id=\"password\"\n              type={showPassword ? \"text\" : \"password\"}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"أدخل كلمة المرور\"\n              data-testid=\"input-password\"\n              dir=\"ltr\"\n              className=\"pl-10\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n              data-testid=\"button-toggle-password\"\n            >\n              {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n            </button>\n          </div>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            كلمة المرور يجب أن تكون 6 أحرف على الأقل\n          </p>\n        </div>\n\n        <div>\n          <Label htmlFor=\"role\">الدور</Label>\n          <Select value={role} onValueChange={setRole}>\n            <SelectTrigger data-testid=\"select-user-role\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"user\">مستخدم عادي</SelectItem>\n              <SelectItem value=\"admin\">مدير</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"flex space-x-3 space-x-reverse pt-4\">\n          <Button\n            type=\"submit\"\n            className=\"flex-1\"\n            disabled={createUserMutation.isPending}\n            data-testid=\"button-submit-user\"\n          >\n            {createUserMutation.isPending ? \"جاري الإنشاء...\" : \"إنشاء المستخدم\"}\n          </Button>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={onSuccess}\n            data-testid=\"button-cancel-add-user\"\n          >\n            إلغاء\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}","size_bytes":5267},"client/src/components/admin/admin-guard.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Shield, Lock } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AdminGuardProps {\n  children: React.ReactNode;\n}\n\nexport function AdminGuard({ children }: AdminGuardProps) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const { toast } = useToast();\n\n  const verifyPasswordMutation = useMutation({\n    mutationFn: async (password: string) => {\n      await apiRequest(\"POST\", \"/api/admin/verify-password\", { password });\n    },\n    onSuccess: () => {\n      setIsAuthenticated(true);\n      toast({\n        title: \"تم منح الوصول\",\n        description: \"أهلاً بك في لوحة الإدارة\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"تم رفض الوصول\",\n        description: \"كلمة مرور المدير غير صحيحة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!password.trim()) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى إدخال كلمة المرور\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    verifyPasswordMutation.mutate(password);\n  };\n\n  if (isAuthenticated) {\n    return <>{children}</>;\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\n            <Shield className=\"h-6 w-6 text-primary\" />\n          </div>\n          <CardTitle className=\"text-xl\" data-testid=\"text-admin-login-title\">\n            دخول المدير\n          </CardTitle>\n          <p className=\"text-sm text-muted-foreground\">\n            أدخل كلمة مرور المدير للوصول إلى سجلات النظام\n          </p>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"admin-password\">كلمة المرور</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"admin-password\"\n                  type=\"password\"\n                  placeholder=\"أدخل كلمة مرور المدير\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"pl-10\"\n                  data-testid=\"input-admin-password\"\n                  required\n                />\n              </div>\n            </div>\n            \n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              disabled={verifyPasswordMutation.isPending || !password}\n              data-testid=\"button-admin-login\"\n            >\n              {verifyPasswordMutation.isPending ? \"جارٍ التحقق...\" : \"دخول لوحة الإدارة\"}\n            </Button>\n            \n            <div className=\"text-xs text-center text-muted-foreground\">\n              استخدم نفس كلمة مرور حساب المدير\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":3751},"client/src/components/auth/auth-provider.tsx":{"content":"import { AuthContext, useAuthState, type AuthContextType } from \"@/hooks/use-auth\";\n\ninterface AuthProviderProps {\n  children: React.ReactNode;\n}\n\nexport function AuthProvider({ children }: AuthProviderProps) {\n  const authState = useAuthState();\n\n  return (\n    <AuthContext.Provider value={authState}>\n      {children}\n    </AuthContext.Provider>\n  );\n}","size_bytes":355},"client/src/components/chat/chat-button.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { MessageCircle } from \"lucide-react\";\nimport { ChatWindow } from \"./chat-window\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface ChatButtonProps {\n  taskId?: string;\n  taskTitle?: string;\n  variant?: \"default\" | \"floating\";\n  className?: string;\n}\n\nexport function ChatButton({ taskId, taskTitle, variant = \"default\", className = \"\" }: ChatButtonProps) {\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const { t } = useLanguage();\n\n  const buttonClass = variant === \"floating\" \n    ? \"fixed bottom-32 right-4 w-14 h-14 rounded-full shadow-lg z-10 touch-manipulation\"\n    : \"\";\n\n  return (\n    <>\n      <Button\n        onClick={() => setIsChatOpen(true)}\n        size={variant === \"floating\" ? \"icon\" : \"sm\"}\n        variant={variant === \"floating\" ? \"default\" : \"outline\"}\n        className={`${buttonClass} ${className}`}\n        data-testid=\"button-open-chat\"\n      >\n        <MessageCircle className=\"w-4 h-4\" />\n        {variant !== \"floating\" && <span className=\"ml-2\">{t('chat.title')}</span>}\n      </Button>\n\n      <ChatWindow\n        isOpen={isChatOpen}\n        onClose={() => setIsChatOpen(false)}\n        taskId={taskId}\n        taskTitle={taskTitle}\n      />\n    </>\n  );\n}","size_bytes":1302},"client/src/components/chat/chat-window.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Send, X, MessageCircle } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface Message {\n  id: string;\n  content: string;\n  sender: string;\n  timestamp: Date;\n  taskId?: string;\n}\n\ninterface ChatWindowProps {\n  isOpen: boolean;\n  onClose: () => void;\n  taskId?: string;\n  taskTitle?: string;\n}\n\nexport function ChatWindow({ isOpen, onClose, taskId, taskTitle }: ChatWindowProps) {\n  const { t } = useLanguage();\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: \"1\",\n      content: \"Task has been created and assigned.\",\n      sender: \"System\",\n      timestamp: new Date(Date.now() - 1000 * 60 * 30),\n    },\n    {\n      id: \"2\", \n      content: \"I'll start working on this right away.\",\n      sender: \"Sarah Chen\",\n      timestamp: new Date(Date.now() - 1000 * 60 * 15),\n    },\n    {\n      id: \"3\",\n      content: \"Perfect! Let me know if you need any help.\",\n      sender: \"Mike Johnson\",\n      timestamp: new Date(Date.now() - 1000 * 60 * 10),\n    }\n  ]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = () => {\n    if (newMessage.trim()) {\n      const message: Message = {\n        id: Date.now().toString(),\n        content: newMessage.trim(),\n        sender: \"You\",\n        timestamp: new Date(),\n        taskId: taskId,\n      };\n      setMessages(prev => [...prev, message]);\n      setNewMessage(\"\");\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const formatTime = (timestamp: Date) => {\n    return timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const getInitials = (name: string) => {\n    return name.split(' ').map(n => n[0]).join('').toUpperCase();\n  };\n\n  const getSenderColor = (sender: string) => {\n    switch (sender) {\n      case \"System\": return \"bg-blue-100 text-blue-800\";\n      case \"You\": return \"bg-green-100 text-green-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-50 p-4\">\n      <Card className=\"w-full max-w-md h-[80vh] md:h-[600px] flex flex-col\">\n        <CardHeader className=\"flex-shrink-0 pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <MessageCircle className=\"w-5 h-5 text-primary\" />\n              <CardTitle className=\"text-lg\">\n                {taskTitle ? `${t('chat.taskChat')}: ${taskTitle}` : t('chat.title')}\n              </CardTitle>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onClose}\n              data-testid=\"button-close-chat\"\n            >\n              <X className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"flex-1 flex flex-col p-4 pt-0\">\n          <ScrollArea className=\"flex-1 pr-4 -mr-4\">\n            <div className=\"space-y-4\">\n              {messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`flex gap-3 ${message.sender === 'You' ? 'flex-row-reverse rtl:flex-row' : 'rtl:flex-row-reverse'}`}\n                >\n                  <Avatar className=\"w-8 h-8 flex-shrink-0\">\n                    <AvatarFallback className={`text-xs ${getSenderColor(message.sender)}`}>\n                      {getInitials(message.sender)}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className={`flex-1 ${message.sender === 'You' ? 'text-right' : ''}`}>\n                    <div className=\"flex items-baseline gap-2 mb-1\">\n                      <span className=\"text-sm font-medium text-foreground\">\n                        {message.sender}\n                      </span>\n                      <span className=\"text-xs text-muted-foreground\">\n                        {formatTime(message.timestamp)}\n                      </span>\n                    </div>\n                    <div\n                      className={`inline-block px-3 py-2 rounded-lg text-sm max-w-[80%] ${\n                        message.sender === 'You'\n                          ? 'bg-primary text-primary-foreground'\n                          : message.sender === 'System'\n                          ? 'bg-muted text-muted-foreground'\n                          : 'bg-muted text-foreground'\n                      }`}\n                    >\n                      {message.content}\n                    </div>\n                  </div>\n                </div>\n              ))}\n              <div ref={messagesEndRef} />\n            </div>\n          </ScrollArea>\n\n          <div className=\"flex-shrink-0 pt-4\">\n            <div className=\"flex gap-2\">\n              <Input\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder={t('chat.typeMessage')}\n                className=\"flex-1\"\n                data-testid=\"input-chat-message\"\n              />\n              <Button\n                onClick={handleSendMessage}\n                disabled={!newMessage.trim()}\n                size=\"sm\"\n                data-testid=\"button-send-message\"\n              >\n                <Send className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":6153},"client/src/components/customers/add-customer-dialog.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { InsertCustomer } from \"@shared/schema\";\nimport { Plus } from \"lucide-react\";\n\ninterface AddCustomerDialogProps {\n  onCustomerAdded?: (customer: { name: string; phone?: string; email?: string; address?: string }) => void;\n}\n\nexport function AddCustomerDialog({ onCustomerAdded }: AddCustomerDialogProps) {\n  const [open, setOpen] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const createCustomerMutation = useMutation({\n    mutationFn: async (data: InsertCustomer) => {\n      const response = await apiRequest(\"POST\", \"/api/customers\", data);\n      return response.json();\n    },\n    onSuccess: (customer) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({\n        title: \"تم إضافة العميل بنجاح\",\n        description: `تم إضافة ${customer.name} إلى قائمة العملاء.`,\n      });\n      \n      // Reset form\n      setName(\"\");\n      setPhone(\"\");\n      setEmail(\"\");\n      setAddress(\"\");\n      setOpen(false);\n      \n      // Notify parent component\n      if (onCustomerAdded) {\n        onCustomerAdded({ \n          name: customer.name, \n          phone: customer.phone,\n          email: customer.email,\n          address: customer.address\n        });\n      }\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في إضافة العميل\",\n        description: \"حدثت مشكلة في إضافة العميل. يرجى المحاولة مرة أخرى.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!name.trim()) {\n      toast({\n        title: \"الاسم مطلوب\",\n        description: \"يرجى إدخال اسم العميل.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const customer: InsertCustomer = {\n      name: name.trim(),\n      phone: phone.trim() || \"\",\n      email: email.trim() || undefined,\n      address: address.trim() || undefined,\n    };\n\n    createCustomerMutation.mutate(customer);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button \n          variant=\"outline\" \n          size=\"sm\"\n          data-testid=\"button-add-customer\"\n          className=\"h-8 px-2\"\n        >\n          <Plus className=\"h-4 w-4 mr-1\" />\n          إضافة عميل\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"modal-add-customer-title\">إضافة عميل جديد</DialogTitle>\n          <DialogDescription>\n            أدخل معلومات العميل الجديد\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n          <div>\n            <Label htmlFor=\"customer-name\">اسم العميل *</Label>\n            <Input\n              id=\"customer-name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"أدخل اسم العميل\"\n              data-testid=\"input-customer-name-new\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"customer-phone\">رقم الهاتف</Label>\n            <Input\n              id=\"customer-phone\"\n              type=\"tel\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              placeholder=\"مثال: +9647812345678\"\n              data-testid=\"input-customer-phone-new\"\n            />\n            <div className=\"text-xs text-muted-foreground mt-1\">\n              يرجى إدخال رقم الهاتف مع مفتاح الدولة (مثال: +964 للعراق)\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"customer-email\">البريد الإلكتروني</Label>\n            <Input\n              id=\"customer-email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"أدخل البريد الإلكتروني\"\n              data-testid=\"input-customer-email-new\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"customer-address\">العنوان</Label>\n            <Textarea\n              id=\"customer-address\"\n              value={address}\n              onChange={(e) => setAddress(e.target.value)}\n              placeholder=\"أدخل عنوان العميل\"\n              rows={2}\n              data-testid=\"textarea-customer-address-new\"\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-2\">\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => setOpen(false)}\n              data-testid=\"button-cancel-customer\"\n            >\n              إلغاء\n            </Button>\n            <Button \n              type=\"submit\" \n              disabled={createCustomerMutation.isPending}\n              data-testid=\"button-save-customer\"\n            >\n              {createCustomerMutation.isPending ? \"جاري الإضافة...\" : \"إضافة العميل\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":6000},"client/src/components/customers/customer-map.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Map, MapPin, Navigation, Phone, ExternalLink } from 'lucide-react';\nimport { Customer } from '@shared/schema';\n\ninterface CustomerMapProps {\n  customers: Customer[];\n}\n\ninterface MapMarker {\n  id: string;\n  name: string;\n  phone: string;\n  address?: string | null;\n  lat: number;\n  lng: number;\n  gpsAddress?: string | null;\n}\n\nexport function CustomerMap({ customers }: CustomerMapProps) {\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n  const [isMapDialogOpen, setIsMapDialogOpen] = useState(false);\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n\n  // تحويل العملاء إلى نقاط على الخريطة\n  const mapMarkers: MapMarker[] = customers\n    .filter(customer => customer.gpsLatitude && customer.gpsLongitude)\n    .map(customer => ({\n      id: customer.id,\n      name: customer.name,\n      phone: customer.phone,\n      address: customer.address,\n      lat: parseFloat(customer.gpsLatitude!),\n      lng: parseFloat(customer.gpsLongitude!),\n      gpsAddress: customer.gpsAddress,\n    }));\n\n  // الحصول على موقع المستخدم الحالي\n  const getCurrentLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setUserLocation({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (error) => {\n          console.error('Error getting location:', error);\n        }\n      );\n    }\n  };\n\n  useEffect(() => {\n    getCurrentLocation();\n  }, []);\n\n  // فتح الموقع في خرائط جوجل\n  const openInGoogleMaps = (lat: number, lng: number, name: string) => {\n    const url = `https://www.google.com/maps?q=${lat},${lng}&t=m&z=15&output=embed`;\n    window.open(`https://www.google.com/maps/search/?api=1&query=${lat},${lng}&query_place_id=${encodeURIComponent(name)}`, '_blank');\n  };\n\n  // فتح اتجاهات القيادة\n  const openDirections = (lat: number, lng: number) => {\n    if (userLocation) {\n      const url = `https://www.google.com/maps/dir/${userLocation.lat},${userLocation.lng}/${lat},${lng}`;\n      window.open(url, '_blank');\n    } else {\n      const url = `https://www.google.com/maps/dir//${lat},${lng}`;\n      window.open(url, '_blank');\n    }\n  };\n\n  // إنشاء رابط الخريطة المدمجة - نستخدم iframe بسيط مع Google Maps\n  const getMapUrl = (markers: MapMarker[]) => {\n    if (markers.length === 0) return '';\n    \n    if (markers.length === 1) {\n      const marker = markers[0];\n      return `https://maps.google.com/maps?q=${marker.lat},${marker.lng}&t=m&z=15&output=embed`;\n    }\n\n    // للعديد من النقاط، نحسب الوسط\n    const center = markers.reduce(\n      (acc, marker) => ({\n        lat: acc.lat + marker.lat,\n        lng: acc.lng + marker.lng,\n      }),\n      { lat: 0, lng: 0 }\n    );\n    center.lat /= markers.length;\n    center.lng /= markers.length;\n\n    return `https://maps.google.com/maps?q=${center.lat},${center.lng}&t=m&z=10&output=embed`;\n  };\n\n  if (mapMarkers.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"py-8\">\n          <div className=\"text-center text-muted-foreground\">\n            <MapPin className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>لا توجد مواقع GPS محددة للعملاء</p>\n            <p className=\"text-sm\">أضف مواقع GPS للعملاء لعرضها على الخريطة</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* معاينة سريعة للخريطة */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <Map className=\"h-5 w-5 text-primary\" />\n              خريطة العملاء ({mapMarkers.length} موقع)\n            </CardTitle>\n            <Dialog open={isMapDialogOpen} onOpenChange={setIsMapDialogOpen}>\n              <DialogTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\">\n                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                  عرض مكبر\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-4xl max-h-[90vh]\">\n                <DialogHeader>\n                  <DialogTitle>خريطة مواقع العملاء</DialogTitle>\n                </DialogHeader>\n                <div className=\"h-96\">\n                  <iframe\n                    src={getMapUrl(mapMarkers)}\n                    width=\"100%\"\n                    height=\"100%\"\n                    style={{ border: 0 }}\n                    allowFullScreen\n                    loading=\"lazy\"\n                    referrerPolicy=\"no-referrer-when-downgrade\"\n                    title=\"خريطة العملاء\"\n                  />\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"h-48 bg-muted rounded-lg overflow-hidden\">\n            <iframe\n              src={getMapUrl(mapMarkers)}\n              width=\"100%\"\n              height=\"100%\"\n              style={{ border: 0 }}\n              allowFullScreen\n              loading=\"lazy\"\n              referrerPolicy=\"no-referrer-when-downgrade\"\n              title=\"معاينة خريطة العملاء\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* قائمة العملاء مع المواقع */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <MapPin className=\"h-5 w-5 text-green-600\" />\n            العملاء مع المواقع\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {mapMarkers.map((marker) => (\n              <div key={marker.id} className=\"flex items-center justify-between p-3 bg-muted/30 rounded-lg\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <h4 className=\"font-medium\">{marker.name}</h4>\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <Phone className=\"h-3 w-3 mr-1\" />\n                      {marker.phone}\n                    </Badge>\n                  </div>\n                  \n                  {marker.address && (\n                    <p className=\"text-sm text-muted-foreground mb-1\">{marker.address}</p>\n                  )}\n                  \n                  <div className=\"text-xs text-muted-foreground\">\n                    GPS: {marker.lat.toFixed(6)}, {marker.lng.toFixed(6)}\n                  </div>\n                  \n                  {marker.gpsAddress && (\n                    <div className=\"text-xs text-muted-foreground bg-background/50 p-1 rounded mt-1\">\n                      {marker.gpsAddress}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex gap-2 ml-4\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => openInGoogleMaps(marker.lat, marker.lng, marker.name)}\n                    data-testid={`button-view-location-${marker.id}`}\n                  >\n                    <Map className=\"h-4 w-4\" />\n                  </Button>\n                  \n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => openDirections(marker.lat, marker.lng)}\n                    data-testid={`button-directions-${marker.id}`}\n                  >\n                    <Navigation className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* معلومات إضافية */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"grid grid-cols-2 gap-4 text-center\">\n            <div>\n              <div className=\"text-2xl font-bold text-blue-600\">{mapMarkers.length}</div>\n              <div className=\"text-sm text-muted-foreground\">عملاء بمواقع GPS</div>\n            </div>\n            <div>\n              <div className=\"text-2xl font-bold text-green-600\">{customers.length - mapMarkers.length}</div>\n              <div className=\"text-sm text-muted-foreground\">عملاء بدون مواقع</div>\n            </div>\n          </div>\n\n          {userLocation && (\n            <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\n              <div className=\"flex items-center gap-2 text-sm\">\n                <Navigation className=\"h-4 w-4 text-blue-600\" />\n                <span className=\"text-blue-800 dark:text-blue-200\">\n                  موقعك الحالي: {userLocation.lat.toFixed(6)}, {userLocation.lng.toFixed(6)}\n                </span>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9506},"client/src/components/dashboard/quick-actions.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Plus, UserPlus, Shield } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport { CreateTaskForm } from \"@/components/tasks/create-task-form\";\nimport { AddMemberForm } from \"@/components/team/add-member-form.tsx\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport function QuickActions() {\n  const [, setLocation] = useLocation();\n  const [showCreateTask, setShowCreateTask] = useState(false);\n  const [showAddMember, setShowAddMember] = useState(false);\n  const { t } = useLanguage();\n\n  return (\n    <>\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-medium mb-3\" data-testid=\"text-quick-actions-title\">{t('dashboard.quickActions')}</h3>\n        <div className=\"grid grid-cols-3 gap-3\">\n          <Button\n            className=\"bg-primary text-primary-foreground p-4 rounded-lg shadow-sm flex flex-col items-center space-y-2 hover:bg-primary-dark transition-colors h-auto touch-manipulation\"\n            onClick={() => setShowCreateTask(true)}\n            data-testid=\"button-quick-new-task\"\n          >\n            <Plus className=\"h-5 w-5\" />\n            <span className=\"text-sm font-medium\">{t('dashboard.createTask')}</span>\n          </Button>\n          \n          <Button\n            className=\"bg-secondary text-secondary-foreground p-4 rounded-lg shadow-sm flex flex-col items-center space-y-2 hover:opacity-90 transition-opacity h-auto touch-manipulation\"\n            onClick={() => setShowAddMember(true)}\n            data-testid=\"button-quick-add-member\"\n          >\n            <UserPlus className=\"h-5 w-5\" />\n            <span className=\"text-sm font-medium\">{t('dashboard.addMember')}</span>\n          </Button>\n          \n          <Button\n            className=\"bg-secondary text-secondary-foreground p-4 rounded-lg shadow-sm flex flex-col items-center space-y-2 hover:opacity-90 transition-opacity h-auto touch-manipulation\"\n            onClick={() => setLocation(\"/admin/users\")}\n            data-testid=\"button-quick-admin\"\n          >\n            <Shield className=\"h-5 w-5\" />\n            <span className=\"text-sm font-medium\">{t('dashboard.admin')}</span>\n          </Button>\n        </div>\n      </div>\n\n      <Dialog open={showCreateTask} onOpenChange={setShowCreateTask}>\n        <DialogContent className=\"sm:max-w-md max-h-[85vh] overflow-y-auto\">\n          <CreateTaskForm onSuccess={() => setShowCreateTask(false)} />\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={showAddMember} onOpenChange={setShowAddMember}>\n        <DialogContent className=\"sm:max-w-md\">\n          <AddMemberForm onSuccess={() => setShowAddMember(false)} />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":2828},"client/src/components/dashboard/stats-card.tsx":{"content":"interface StatsCardProps {\n  title: string;\n  value: number;\n  icon: string;\n  color: \"primary\" | \"secondary\" | \"success\" | \"error\";\n  testId?: string;\n}\n\nexport function StatsCard({ title, value, icon, color, testId }: StatsCardProps) {\n  const colorClasses = {\n    primary: \"bg-blue-50/60 border-blue-200/60 text-blue-900 hover:bg-blue-50/80\",\n    secondary: \"bg-purple-50/60 border-purple-200/60 text-purple-900 hover:bg-purple-50/80\", \n    success: \"bg-green-50/60 border-green-200/60 text-green-900 hover:bg-green-50/80\",\n    error: \"bg-red-50/60 border-red-200/60 text-red-900 hover:bg-red-50/80\",\n  };\n\n  return (\n    <div className={`stat-card ${colorClasses[color]} border rounded-lg p-2 hover:shadow-md transition-all duration-200 backdrop-blur-sm`} data-testid={testId}>\n      <div className=\"flex items-center justify-between h-full min-h-[2.5rem]\">\n        <div className=\"flex-1\">\n          <p className=\"text-xs font-medium opacity-80 line-clamp-1\" data-testid={`${testId}-title`}>{title}</p>\n          <p className=\"text-sm sm:text-lg font-bold leading-tight mt-0.5\" data-testid={`${testId}-value`}>\n            {value}\n          </p>\n        </div>\n        <div className=\"text-sm sm:text-lg opacity-70 ml-1\" data-testid={`${testId}-icon`}>\n          {icon}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1321},"client/src/components/dashboard/team-points-widget.tsx":{"content":"import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Trophy, Star, Award, TrendingUp, Users, ArrowRight, Plus } from 'lucide-react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\n\ninterface TeamPointsStats {\n  // للمستخدمين العاديين\n  userPoints?: number;\n  userTotalEarned?: number;\n  userRank?: number;\n  \n  // للمديرين والمشرفين\n  totalMembers: number;\n  totalPoints?: number;\n  averagePoints?: number;\n  topScorer?: {\n    name: string;\n    points: number;\n    role: string;\n  };\n  topPerformers?: Array<{\n    name: string;\n    points: number;\n    role: string;\n  }>;\n  canViewAll: boolean;\n}\n\nexport function TeamPointsWidget() {\n  const [, setLocation] = useLocation();\n  const { user } = useAuth();\n  \n  const { data: pointsStats, isLoading } = useQuery<TeamPointsStats>({\n    queryKey: ['/api/team-points/stats'],\n  });\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Trophy className=\"h-5 w-5 text-yellow-500\" />\n            نقاط الفريق\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-center text-muted-foreground\">جاري التحميل...</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!pointsStats) {\n    return null;\n  }\n\n  // عرض مبسط للجميع (تم تعديله لإظهار المعلومات لجميع المستخدمين)\n  // جميع المستخدمين يمكنهم رؤية النقاط الآن\n  if (false) { // تم إلغاء هذا الشرط\n    return (\n      <Card className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5 text-blue-600\" />\n            نقاطي\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-blue-600\">\n              {pointsStats.userPoints || 0}\n            </div>\n            <div className=\"text-sm text-muted-foreground\">نقطة حالية</div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 text-center\">\n            <div>\n              <div className=\"text-lg font-semibold text-green-600\">\n                {pointsStats.userTotalEarned || 0}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">إجمالي النقاط</div>\n            </div>\n            \n            <div>\n              <div className=\"text-lg font-semibold text-purple-600\">\n                #{pointsStats.userRank || '-'}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">ترتيبي</div>\n            </div>\n          </div>\n\n          <div className=\"pt-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"w-full\"\n              onClick={() => setLocation('/admin/team-points')}\n            >\n              <Trophy className=\"h-4 w-4 mr-2\" />\n              عرض جميع النقاط\n              <ArrowRight className=\"h-4 w-4 ml-2\" />\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // عرض للمديرين والمشرفين\n  return (\n    <div className=\"space-y-4\">\n      {/* إحصائيات عامة */}\n      <Card className=\"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Trophy className=\"h-5 w-5 text-yellow-600\" />\n            إحصائيات النقاط\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {pointsStats.totalMembers}\n              </div>\n              <div className=\"text-sm text-muted-foreground flex items-center justify-center gap-1\">\n                <Users className=\"h-4 w-4\" />\n                أعضاء الفريق\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {pointsStats.totalPoints || 0}\n              </div>\n              <div className=\"text-sm text-muted-foreground flex items-center justify-center gap-1\">\n                <Star className=\"h-4 w-4\" />\n                إجمالي النقاط\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {pointsStats.averagePoints || 0}\n              </div>\n              <div className=\"text-sm text-muted-foreground flex items-center justify-center gap-1\">\n                <TrendingUp className=\"h-4 w-4\" />\n                متوسط النقاط\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              {pointsStats.topScorer ? (\n                <>\n                  <div className=\"text-lg font-bold text-yellow-600\">\n                    {pointsStats.topScorer.points}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    أعلى نقاط\n                  </div>\n                  <div className=\"text-xs font-medium truncate\">\n                    {pointsStats.topScorer.name}\n                  </div>\n                </>\n              ) : (\n                <div className=\"text-sm text-muted-foreground\">لا يوجد نقاط</div>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* نقاط المستخدم الحالي */}\n      {pointsStats.userPoints !== undefined && (\n        <Card className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Award className=\"h-5 w-5 text-blue-600\" />\n              نقاطي\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-3 gap-4 text-center\">\n              <div>\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {pointsStats.userPoints}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">نقطة حالية</div>\n              </div>\n              \n              <div>\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {pointsStats.userTotalEarned || 0}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">إجمالي النقاط</div>\n              </div>\n              \n              <div>\n                <div className=\"text-2xl font-bold text-purple-600\">\n                  #{pointsStats.userRank || '-'}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">ترتيبي</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* أفضل الأداء */}\n      {pointsStats.topPerformers && pointsStats.topPerformers.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Star className=\"h-5 w-5 text-yellow-500\" />\n              أفضل أداء\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {pointsStats.topPerformers.map((performer, index) => (\n                <div key={index} className=\"flex items-center justify-between p-2 rounded-lg bg-muted/30\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${\n                      index === 0 ? 'bg-yellow-500' : \n                      index === 1 ? 'bg-gray-400' : 'bg-orange-500'\n                    }`}>\n                      {index + 1}\n                    </div>\n                    <div>\n                      <div className=\"font-medium\">{performer.name}</div>\n                      <div className=\"text-sm text-muted-foreground\">{performer.role}</div>\n                    </div>\n                  </div>\n                  <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\n                    {performer.points} نقطة\n                  </Badge>\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"pt-4 space-y-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"w-full\"\n                onClick={() => setLocation('/admin/team-points')}\n              >\n                <Trophy className=\"h-4 w-4 mr-2\" />\n                إدارة النقاط\n                <ArrowRight className=\"h-4 w-4 ml-2\" />\n              </Button>\n              \n              {(user as any)?.role === 'admin' && (\n                <Button\n                  variant=\"default\"\n                  size=\"sm\"\n                  className=\"w-full\"\n                  onClick={() => setLocation('/admin/team-points')}\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  إضافة نقاط\n                </Button>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":9933},"client/src/components/error/error-boundary.tsx":{"content":"import React from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { AlertTriangle, RefreshCw, Home } from \"lucide-react\";\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: React.ErrorInfo | null;\n}\n\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n  fallback?: React.ComponentType<{\n    error: Error | null;\n    resetError: () => void;\n  }>;\n}\n\nclass ErrorBoundaryClass extends React.Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(\"Error boundary caught an error:\", error, errorInfo);\n    this.setState({\n      errorInfo,\n    });\n  }\n\n  resetError = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        const FallbackComponent = this.props.fallback;\n        return (\n          <FallbackComponent\n            error={this.state.error}\n            resetError={this.resetError}\n          />\n        );\n      }\n\n      return <DefaultErrorFallback error={this.state.error} resetError={this.resetError} />;\n    }\n\n    return this.props.children;\n  }\n}\n\n// Default error fallback component\nfunction DefaultErrorFallback({ \n  error, \n  resetError \n}: { \n  error: Error | null; \n  resetError: () => void; \n}) {\n  const { t } = useLanguage();\n\n  const handleReload = () => {\n    window.location.reload();\n  };\n\n  const handleGoHome = () => {\n    window.location.href = '/';\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10\">\n            <AlertTriangle className=\"h-8 w-8 text-destructive\" />\n          </div>\n          <CardTitle className=\"text-xl\" data-testid=\"text-error-title\">\n            {t('error.generic')}\n          </CardTitle>\n          <CardDescription>\n            {t('guidance.contactSupport')}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {error && (\n            <Alert variant=\"destructive\">\n              <AlertDescription className=\"text-sm font-mono\">\n                {error.message}\n              </AlertDescription>\n            </Alert>\n          )}\n          \n          <div className=\"space-y-2\">\n            <Button \n              onClick={resetError} \n              className=\"w-full\"\n              data-testid=\"button-retry\"\n            >\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              {t('guidance.retry')}\n            </Button>\n            \n            <Button \n              onClick={handleReload} \n              variant=\"outline\" \n              className=\"w-full\"\n              data-testid=\"button-reload\"\n            >\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              {t('guidance.refresh')}\n            </Button>\n            \n            <Button \n              onClick={handleGoHome} \n              variant=\"ghost\" \n              className=\"w-full\"\n              data-testid=\"button-home\"\n            >\n              <Home className=\"h-4 w-4 mr-2\" />\n              العودة للرئيسية\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n// Enhanced error fallback for specific components\nexport function ComponentErrorFallback({ \n  error, \n  resetError,\n  componentName \n}: { \n  error: Error | null; \n  resetError: () => void;\n  componentName?: string;\n}) {\n  const { t } = useLanguage();\n\n  return (\n    <Alert variant=\"destructive\" className=\"m-4\">\n      <AlertTriangle className=\"h-4 w-4\" />\n      <AlertDescription className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"font-medium\">\n            {componentName ? `خطأ في ${componentName}` : t('error.generic')}\n          </p>\n          {error && (\n            <p className=\"text-sm mt-1 opacity-80\">\n              {error.message}\n            </p>\n          )}\n        </div>\n        <Button \n          onClick={resetError} \n          size=\"sm\" \n          variant=\"outline\"\n          data-testid=\"button-component-retry\"\n        >\n          <RefreshCw className=\"h-3 w-3 mr-1\" />\n          {t('guidance.retry')}\n        </Button>\n      </AlertDescription>\n    </Alert>\n  );\n}\n\n// Export the error boundary component\nexport const ErrorBoundary = ErrorBoundaryClass;","size_bytes":5087},"client/src/components/layout/bottom-navigation.tsx":{"content":"import { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Home, ListTodo, CheckSquare, Users, User, UserCheck, MessageCircle, Bell, UserPlus } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport function BottomNavigation() {\n  const [location, setLocation] = useLocation();\n  const { t } = useLanguage();\n\n  const navItems = [\n    { path: \"/\", icon: Home, label: \"الرئيسية\", testId: \"nav-dashboard\" },\n    { path: \"/tasks\", icon: ListTodo, label: \"المهام\", testId: \"nav-tasks\" },\n    { path: \"/customers\", icon: UserPlus, label: \"العملاء\", testId: \"nav-customers\" },\n    { path: \"/messages\", icon: MessageCircle, label: \"الرسائل\", testId: \"nav-messages\" },\n    { path: \"/team-members\", icon: Users, label: \"أعضاء الفريق\", testId: \"nav-team-members\" },\n    { path: \"/profile\", icon: User, label: \"الملف الشخصي\", testId: \"nav-profile\" },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 w-full bg-gradient-to-r from-white/95 to-white/90 backdrop-blur-lg border-t border-border/50 z-50 safe-area-bottom shadow-2xl\">\n      <div className=\"grid grid-cols-6 h-14 sm:h-16 lg:h-18 max-w-full mx-auto\">\n        {navItems.map(({ path, icon: Icon, label, testId }) => (\n          <Button\n            key={path}\n            variant=\"ghost\"\n            className={`flex flex-col items-center justify-center space-y-0.5 sm:space-y-1 h-full rounded-none touch-manipulation touch-target px-1 transition-all duration-200 ${\n              location === path\n                ? \"text-primary bg-primary/10 scale-110\"\n                : \"text-gray-400 hover:text-on-surface hover:bg-muted/30 hover:scale-105\"\n            }`}\n            onClick={() => setLocation(path)}\n            data-testid={testId}\n          >\n            <Icon className=\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 flex-shrink-0\" />\n            <span className=\"text-[10px] sm:text-xs lg:text-sm font-medium truncate max-w-full text-center leading-tight\">{label}</span>\n          </Button>\n        ))}\n      </div>\n    </nav>\n  );\n}\n","size_bytes":2111},"client/src/components/layout/mobile-layout.tsx":{"content":"import { TopAppBar } from \"./top-app-bar\";\nimport { BottomNavigation } from \"./bottom-navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { CreateTaskForm } from \"@/components/tasks/create-task-form\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { ChatButton } from \"@/components/chat/chat-button\";\n\ninterface MobileLayoutProps {\n  children: React.ReactNode;\n}\n\nexport function MobileLayout({ children }: MobileLayoutProps) {\n  const [showCreateTask, setShowCreateTask] = useState(false);\n\n  return (\n    <div className=\"min-h-screen flex flex-col w-full bg-surface crisp-text\">\n      <TopAppBar />\n      \n      <main className=\"flex-1 overflow-y-auto pb-20 touch-manipulation responsive-padding\" data-scroll-container>\n        <div className=\"w-full max-w-full\">\n          {children}\n        </div>\n        \n        {/* Copyright Footer */}\n        <footer className=\"mt-8 py-4 border-t bg-background/95 backdrop-blur\">\n          <div className=\"text-center text-xs sm:text-sm text-muted-foreground px-4\">\n            <p className=\"mb-1\">جميع الحقوق محفوظة © {new Date().getFullYear()}</p>\n            <p className=\"font-medium text-primary\">شركة اشراق الودق لتكنولوجيا المعلومات</p>\n          </div>\n        </footer>\n      </main>\n      \n      <BottomNavigation />\n      \n      {/* Floating Action Buttons - Responsive */}\n      <Button\n        className=\"fixed bottom-20 right-4 w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-full shadow-lg z-10 touch-manipulation touch-target\"\n        size=\"icon\"\n        onClick={() => setShowCreateTask(true)}\n        data-testid=\"button-create-task\"\n      >\n        <Plus className=\"h-5 w-5 sm:h-6 sm:w-6 lg:h-7 lg:w-7\" />\n      </Button>\n\n      {/* Floating Chat Button */}\n      <ChatButton variant=\"floating\" />\n\n      <Dialog open={showCreateTask} onOpenChange={setShowCreateTask}>\n        <DialogContent className=\"w-[95vw] max-w-md sm:max-w-lg lg:max-w-xl max-h-[85vh] overflow-y-auto\" data-scroll-container>\n          <CreateTaskForm onSuccess={() => setShowCreateTask(false)} />\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":2255},"client/src/components/layout/top-app-bar.tsx":{"content":"import { Bell, UserCircle, LogOut } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { useMutation, useQueryClient, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport function TopAppBar() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  // Get unread notifications count\n  const { data: unreadCount = 0 } = useQuery<{ count: number }>({\n    queryKey: ['/api/notifications/unread-count'],\n    enabled: !!user,\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const notificationCount = typeof unreadCount === 'object' && unreadCount !== null \n    ? (unreadCount as { count: number }).count \n    : 0;\n  \n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/auth/logout\");\n    },\n    onSuccess: () => {\n      // Clear all queries and reload the page\n      queryClient.clear();\n      window.location.reload();\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تسجيل الخروج\",\n        description: \"حدث خطأ أثناء تسجيل الخروج\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogout = () => {\n    logoutMutation.mutate();\n  };\n  \n  return (\n    <header className=\"bg-primary text-primary-foreground px-3 sm:px-4 lg:px-6 py-2 sm:py-3 shadow-md\">\n      <div className=\"flex items-center justify-between max-w-full\">\n        <div className=\"flex items-center space-x-2 sm:space-x-3 rtl:space-x-reverse min-w-0 flex-shrink\">\n          <img \n            src=\"/attached_assets/319159472_2787094371424406_3593723820726937846_n_1755704545593.jpg\" \n            alt=\"TaskFlow Logo\" \n            className=\"w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 rounded-full object-cover shadow-sm border-2 border-white/20 flex-shrink-0\"\n          />\n          <h1 className=\"text-base sm:text-lg lg:text-xl font-medium truncate responsive-text\" data-testid=\"text-app-title\">TaskFlow</h1>\n        </div>\n        <div className=\"flex items-center space-x-1 sm:space-x-2 rtl:space-x-reverse flex-shrink-0\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-primary-foreground hover:bg-primary-dark rounded-full relative touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11\"\n            data-testid=\"button-notifications\"\n          >\n            <Bell className=\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6\" />\n            {notificationCount > 0 && (\n              <Badge \n                variant=\"destructive\" \n                className=\"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 flex items-center justify-center text-[10px] sm:text-xs font-bold min-w-[16px] sm:min-w-[20px]\"\n              >\n                {notificationCount > 99 ? '99+' : notificationCount}\n              </Badge>\n            )}\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-primary-foreground hover:bg-primary-dark rounded-full touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11 p-1\"\n            data-testid=\"button-profile-menu\"\n          >\n            <Avatar className=\"h-7 w-7 sm:h-8 sm:w-8 lg:h-9 lg:w-9\">\n              <AvatarImage \n                src={user?.profileImageUrl || ''} \n                alt={user?.firstName || 'المستخدم'}\n                className=\"object-cover\"\n              />\n              <AvatarFallback className=\"bg-primary-dark text-primary-foreground text-xs sm:text-sm font-medium\">\n                {user?.firstName ? user.firstName.charAt(0) : <UserCircle className=\"h-4 w-4\" />}\n              </AvatarFallback>\n            </Avatar>\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-primary-foreground hover:bg-red-600/20 rounded-full touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11\"\n            onClick={handleLogout}\n            disabled={logoutMutation.isPending}\n            data-testid=\"button-logout\"\n            title=\"تسجيل الخروج\"\n          >\n            <LogOut className=\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6\" />\n          </Button>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":4586},"client/src/components/scheduler/scheduler-widget.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Calendar, Clock, ChevronLeft, ChevronRight, Plus } from \"lucide-react\";\nimport { TaskWithAssignees } from \"@shared/schema\";\nimport { format, startOfWeek, endOfWeek, eachDayOfInterval, isSameDay, addWeeks, subWeeks, isToday } from \"date-fns\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport function SchedulerWidget() {\n  const [currentWeek, setCurrentWeek] = useState(new Date());\n  const { t } = useLanguage();\n  \n  const { data: tasks } = useQuery<TaskWithAssignees[]>({\n    queryKey: [\"/api/tasks\"],\n  });\n\n  const weekStart = startOfWeek(currentWeek, { weekStartsOn: 1 }); // Monday start\n  const weekEnd = endOfWeek(currentWeek, { weekStartsOn: 1 });\n  const weekDays = eachDayOfInterval({ start: weekStart, end: weekEnd });\n\n  // Filter tasks with due dates in the current week\n  const scheduledTasks = tasks?.filter(task => \n    task.dueDate && \n    new Date(task.dueDate) >= weekStart && \n    new Date(task.dueDate) <= weekEnd\n  ) || [];\n\n  const getTasksForDay = (date: Date) => {\n    return scheduledTasks.filter(task => \n      task.dueDate && isSameDay(new Date(task.dueDate), date)\n    );\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\": return \"bg-red-100 text-red-800 border-red-200\";\n      case \"medium\": return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"low\": return \"bg-green-100 text-green-800 border-green-200\";\n      default: return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"complete\": return \"bg-green-50 border-green-300 shadow-green-100\";\n      case \"start\": return \"bg-blue-50 border-blue-300 shadow-blue-100\";\n      case \"pending\": return \"bg-orange-50 border-orange-300 shadow-orange-100\";\n      default: return \"bg-gray-50 border-gray-200 shadow-gray-100\";\n    }\n  };\n\n  return (\n    <Card className=\"overflow-hidden shadow-lg\">\n      <CardHeader className=\"bg-gradient-to-r from-primary/10 to-secondary/10 pb-3\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n          <CardTitle className=\"flex items-center gap-3 text-lg font-semibold\">\n            <div className=\"bg-primary/20 p-2 rounded-full\">\n              <Calendar className=\"w-5 h-5 text-primary\" />\n            </div>\n            <div>\n              <div>{t('dashboard.weeklySchedule')}</div>\n              <div className=\"text-xs font-normal text-muted-foreground\">\n                {scheduledTasks.length} مهمة مجدولة هذا الأسبوع\n              </div>\n            </div>\n          </CardTitle>\n          \n          <div className=\"flex items-center gap-2 bg-background/80 backdrop-blur rounded-lg p-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setCurrentWeek(subWeeks(currentWeek, 1))}\n              className=\"hover:bg-primary/10\"\n              data-testid=\"button-prev-week\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </Button>\n            <div className=\"text-sm font-medium px-3 py-1 bg-white/50 rounded\" data-testid=\"text-current-week\">\n              {format(weekStart, \"d MMM\")} - {format(weekEnd, \"d MMM yyyy\")}\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setCurrentWeek(addWeeks(currentWeek, 1))}\n              className=\"hover:bg-primary/10\"\n              data-testid=\"button-next-week\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"p-0\">\n        {/* Days Header - Enhanced */}\n        <div className=\"grid grid-cols-7 bg-muted/30 border-b-2\">\n          {weekDays.map((day) => {\n            const dayTasks = getTasksForDay(day);\n            return (\n              <div\n                key={day.toISOString()}\n                className={`relative p-3 text-center border-r last:border-r-0 transition-all duration-200 ${\n                  isToday(day) \n                    ? \"bg-primary/10 border-primary/20\" \n                    : \"hover:bg-muted/20\"\n                }`}\n              >\n                <div className={`text-xs font-medium mb-1 ${\n                  isToday(day) ? \"text-primary\" : \"text-muted-foreground\"\n                }`}>\n                  {format(day, \"EEE\")}\n                </div>\n                <div className={`text-lg font-bold mb-1 ${\n                  isToday(day) ? \"text-primary\" : \"text-foreground\"\n                }`}>\n                  {format(day, \"d\")}\n                </div>\n                {dayTasks.length > 0 && (\n                  <div className=\"flex justify-center\">\n                    <Badge \n                      variant=\"secondary\" \n                      className=\"text-xs px-2 py-0.5 bg-primary/20 text-primary border-0\"\n                    >\n                      {dayTasks.length}\n                    </Badge>\n                  </div>\n                )}\n                {isToday(day) && (\n                  <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-primary rounded-t-full\"></div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n        \n        {/* Tasks Grid - Enhanced */}\n        <ScrollArea className=\"h-72 lg:h-80\">\n          <div className=\"grid grid-cols-7 min-h-full\">\n            {weekDays.map((day) => {\n              const dayTasks = getTasksForDay(day);\n              return (\n                <div\n                  key={day.toISOString()}\n                  className={`relative p-2 border-r last:border-r-0 min-h-[280px] transition-colors duration-200 ${\n                    isToday(day) \n                      ? \"bg-gradient-to-b from-primary/5 to-transparent\" \n                      : \"hover:bg-muted/20\"\n                  }`}\n                  data-testid={`scheduler-day-${format(day, \"yyyy-MM-dd\")}`}\n                >\n                  <div className=\"space-y-2\">\n                    {dayTasks.map((task, index) => (\n                      <div\n                        key={task.id}\n                        className={`group relative p-2.5 rounded-lg border-l-4 text-xs cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.02] ${getStatusColor(task.status)} ${\n                          task.priority === 'high' ? 'border-l-red-400' :\n                          task.priority === 'medium' ? 'border-l-yellow-400' : \n                          'border-l-green-400'\n                        }`}\n                        style={{ animationDelay: `${index * 0.1}s` }}\n                        data-testid={`scheduler-task-${task.id}`}\n                      >\n                        {/* Task Title */}\n                        <div className=\"font-semibold text-foreground mb-1.5 leading-tight\" title={task.title}>\n                          {task.title.length > 25 ? `${task.title.slice(0, 25)}...` : task.title}\n                        </div>\n                        \n                        {/* Priority & Status */}\n                        <div className=\"flex items-center gap-1 mb-2\">\n                          <Badge \n                            variant=\"outline\" \n                            className={`text-[10px] px-1.5 py-0.5 font-medium ${getPriorityColor(task.priority)}`}\n                          >\n                            {task.priority === 'high' ? '🔥' : task.priority === 'medium' ? '⚡' : '📋'} {task.priority}\n                          </Badge>\n                        </div>\n                        \n                        {/* Customer */}\n                        <div className=\"text-muted-foreground mb-2 flex items-center gap-1\">\n                          <span className=\"w-1.5 h-1.5 bg-secondary rounded-full flex-shrink-0\"></span>\n                          <span className=\"truncate\">{task.customerName}</span>\n                        </div>\n                        \n                        {/* Time */}\n                        {task.dueDate && (\n                          <div className=\"flex items-center gap-1.5 text-muted-foreground mb-2\">\n                            <Clock className=\"w-3 h-3 flex-shrink-0\" />\n                            <span className=\"font-medium\">{format(new Date(task.dueDate), \"HH:mm\")}</span>\n                          </div>\n                        )}\n                        \n                        {/* Assignees */}\n                        {task.assignees && task.assignees.length > 0 && (\n                          <div className=\"flex items-center gap-1 text-muted-foreground\">\n                            <div className=\"w-4 h-4 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0\">\n                              <span className=\"text-[8px] font-bold text-primary\">\n                                {task.assignees[0].name.charAt(0)}\n                              </span>\n                            </div>\n                            <span className=\"text-[10px] truncate\">\n                              {task.assignees[0].name}\n                              {task.assignees.length > 1 && (\n                                <span className=\"bg-primary/10 text-primary px-1 rounded ml-1\">\n                                  +{task.assignees.length - 1}\n                                </span>\n                              )}\n                            </span>\n                          </div>\n                        )}\n                        \n                        {/* Progress Bar */}\n                        {task.progress > 0 && (\n                          <div className=\"mt-2 pt-2 border-t border-muted/30\">\n                            <div className=\"flex justify-between text-[10px] mb-1\">\n                              <span className=\"text-muted-foreground\">التقدم</span>\n                              <span className=\"font-bold text-primary\">{task.progress}%</span>\n                            </div>\n                            <div className=\"w-full bg-muted rounded-full h-1.5 overflow-hidden\">\n                              <div \n                                className=\"bg-gradient-to-r from-primary to-secondary rounded-full h-full transition-all duration-500\"\n                                style={{ width: `${task.progress}%` }}\n                              />\n                            </div>\n                          </div>\n                        )}\n                        \n                        {/* Hover Effect */}\n                        <div className=\"absolute inset-0 rounded-lg bg-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\"></div>\n                      </div>\n                    ))}\n                    \n                    {dayTasks.length === 0 && (\n                      <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n                        <div className=\"w-8 h-8 bg-muted rounded-full flex items-center justify-center mb-2\">\n                          <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          لا توجد مهام\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":11862},"client/src/components/scheduler/upcoming-schedule.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Calendar, Clock, User } from \"lucide-react\";\nimport { TaskWithAssignees } from \"@shared/schema\";\nimport { format, isToday, isTomorrow, addDays } from \"date-fns\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport function UpcomingSchedule() {\n  const { t } = useLanguage();\n  const { data: tasks } = useQuery<TaskWithAssignees[]>({\n    queryKey: [\"/api/tasks\"],\n  });\n\n  // Filter upcoming tasks (next 7 days)\n  const upcomingTasks = tasks?.filter(task => {\n    if (!task.dueDate) return false;\n    const taskDate = new Date(task.dueDate);\n    const today = new Date();\n    const nextWeek = addDays(today, 7);\n    return taskDate >= today && taskDate <= nextWeek && task.status !== \"complete\";\n  })\n  .sort((a, b) => new Date(a.dueDate!).getTime() - new Date(b.dueDate!).getTime()) || [];\n\n  const getDateLabel = (date: Date) => {\n    if (isToday(date)) return \"اليوم\";\n    if (isTomorrow(date)) return \"غداً\";\n    return format(date, \"MMM d, EEE\");\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\": return \"destructive\";\n      case \"medium\": return \"secondary\";\n      case \"low\": return \"outline\";\n      default: return \"outline\";\n    }\n  };\n\n  const getStatusBadgeColor = (status: string) => {\n    switch (status) {\n      case \"complete\": return \"bg-green-100 text-green-800 border-green-300\";\n      case \"start\": return \"bg-blue-100 text-blue-800 border-blue-300\";\n      case \"pending\": return \"bg-orange-100 text-orange-800 border-orange-300\";\n      default: return \"bg-gray-100 text-gray-800 border-gray-300\";\n    }\n  };\n\n  return (\n    <Card className=\"overflow-hidden\">\n      <CardHeader className=\"bg-gradient-to-r from-secondary/10 to-primary/10 pb-4\">\n        <CardTitle className=\"flex items-center gap-3 text-xl font-semibold\">\n          <div className=\"bg-secondary/20 p-2 rounded-full\">\n            <Clock className=\"w-6 h-6 text-secondary\" />\n          </div>\n          <div>\n            <div>{t('dashboard.upcomingSchedule')}</div>\n            <div className=\"text-sm font-normal text-muted-foreground\">\n              {upcomingTasks.length} مهمة قادمة في الأسبوع المقبل\n            </div>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"p-0\">\n        <ScrollArea className=\"h-96\">\n          <div className=\"p-4 space-y-4\">\n            {upcomingTasks.length > 0 ? (\n              upcomingTasks.map((task, index) => (\n                <div\n                  key={task.id}\n                  className=\"group relative overflow-hidden p-4 rounded-xl border border-border/50 hover:border-primary/30 bg-gradient-to-r from-background to-muted/20 hover:from-primary/5 hover:to-secondary/5 transition-all duration-300 cursor-pointer transform hover:scale-[1.02] hover:shadow-lg\"\n                  style={{ animationDelay: `${index * 0.1}s` }}\n                  data-testid={`upcoming-task-${task.id}`}\n                >\n                  {/* Priority Indicator */}\n                  <div className={`absolute top-0 left-0 w-1 h-full ${\n                    task.priority === 'high' ? 'bg-red-400' :\n                    task.priority === 'medium' ? 'bg-yellow-400' : 'bg-green-400'\n                  }`}></div>\n                  \n                  <div className=\"flex items-start gap-4\">\n                    {/* Icon */}\n                    <div className={`flex-shrink-0 mt-1 p-2 rounded-full ${\n                      isToday(new Date(task.dueDate!)) ? 'bg-red-100 text-red-600' :\n                      isTomorrow(new Date(task.dueDate!)) ? 'bg-orange-100 text-orange-600' :\n                      'bg-blue-100 text-blue-600'\n                    }`}>\n                      <Calendar className=\"w-4 h-4\" />\n                    </div>\n                    \n                    <div className=\"flex-1 min-w-0\">\n                      {/* Title and Badges */}\n                      <div className=\"flex items-start justify-between gap-3 mb-2\">\n                        <h3 className=\"font-semibold text-base text-foreground leading-tight group-hover:text-primary transition-colors\" data-testid={`upcoming-task-title-${task.id}`}>\n                          {task.title}\n                        </h3>\n                        <div className=\"flex items-center gap-2 flex-shrink-0\">\n                          <Badge \n                            variant={getPriorityColor(task.priority)} \n                            className=\"text-xs font-medium\"\n                          >\n                            {task.priority === 'high' ? '🔥' : task.priority === 'medium' ? '⚡' : '📋'} \n                            {t(`priority.${task.priority}`)}\n                          </Badge>\n                          <span className={`px-2.5 py-1 rounded-full text-xs font-medium border ${getStatusBadgeColor(task.status)}`}>\n                            {t(`status.${task.status}`)}\n                          </span>\n                        </div>\n                      </div>\n                      \n                      {/* Description */}\n                      {task.description && (\n                        <p className=\"text-sm text-muted-foreground mb-3 line-clamp-2 leading-relaxed\">\n                          {task.description}\n                        </p>\n                      )}\n                      \n                      {/* Date and Time Info */}\n                      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3\">\n                        <div className=\"flex items-center gap-2 bg-muted/30 rounded-lg px-3 py-2\">\n                          <Calendar className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                          <div className=\"min-w-0\">\n                            <div className=\"text-xs text-muted-foreground\">التاريخ</div>\n                            <div className=\"text-sm font-medium truncate\" data-testid={`upcoming-task-date-${task.id}`}>\n                              {task.dueDate && getDateLabel(new Date(task.dueDate))}\n                            </div>\n                          </div>\n                        </div>\n                        \n                        {task.dueDate && (\n                          <div className=\"flex items-center gap-2 bg-muted/30 rounded-lg px-3 py-2\">\n                            <Clock className=\"w-4 h-4 text-secondary flex-shrink-0\" />\n                            <div className=\"min-w-0\">\n                              <div className=\"text-xs text-muted-foreground\">الوقت</div>\n                              <div className=\"text-sm font-medium\">\n                                {format(new Date(task.dueDate), \"HH:mm\")}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                        \n                        <div className=\"flex items-center gap-2 bg-muted/30 rounded-lg px-3 py-2\">\n                          <User className=\"w-4 h-4 text-orange-500 flex-shrink-0\" />\n                          <div className=\"min-w-0\">\n                            <div className=\"text-xs text-muted-foreground\">العميل</div>\n                            <div className=\"text-sm font-medium truncate\">{task.customerName}</div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Assignees */}\n                      {task.assignees && task.assignees.length > 0 && (\n                        <div className=\"flex items-center gap-2 mb-3\">\n                          <span className=\"text-sm text-muted-foreground\">المُكلفون:</span>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {task.assignees.map((assignee, index) => (\n                              <div key={assignee.id} className=\"flex items-center gap-1.5\">\n                                <div className=\"w-6 h-6 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center\">\n                                  <span className=\"text-xs font-bold text-white\">\n                                    {assignee.name.charAt(0)}\n                                  </span>\n                                </div>\n                                <Badge variant=\"outline\" className=\"text-xs px-2 py-1\">\n                                  {assignee.name}\n                                </Badge>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Progress */}\n                      {task.progress > 0 && (\n                        <div className=\"bg-muted/20 rounded-lg p-3\">\n                          <div className=\"flex justify-between items-center mb-2\">\n                            <span className=\"text-sm font-medium text-foreground\">التقدم</span>\n                            <span className=\"text-sm font-bold text-primary\">{task.progress}%</span>\n                          </div>\n                          <div className=\"w-full bg-muted rounded-full h-2 overflow-hidden\">\n                            <div \n                              className=\"bg-gradient-to-r from-primary via-secondary to-primary rounded-full h-full transition-all duration-700 ease-out relative\"\n                              style={{ width: `${task.progress}%` }}\n                            >\n                              <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse\"></div>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Hover Effect Overlay */}\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-primary/5 to-secondary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none rounded-xl\"></div>\n                </div>\n              ))\n            ) : (\n              <div className=\"text-center py-12\" data-testid=\"text-no-upcoming-tasks\">\n                <div className=\"bg-gradient-to-br from-muted/30 to-muted/10 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4\">\n                  <Calendar className=\"w-12 h-12 text-muted-foreground/50\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">لا توجد مهام قادمة</h3>\n                <p className=\"text-muted-foreground\">{t('msg.noUpcomingTasks')}</p>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":11003},"client/src/components/tasks/cancel-task-modal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { XCircle, AlertTriangle, User } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface CancelTaskModalProps {\n  taskId: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function CancelTaskModal({\n  taskId,\n  open,\n  onOpenChange,\n}: CancelTaskModalProps) {\n  const [cancelledBy, setCancelledBy] = useState(\"\");\n  const [cancellationReason, setCancellationReason] = useState(\"\");\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  const cancelMutation = useMutation({\n    mutationFn: async (data: { cancelledBy: string; cancellationReason: string }) => {\n      return apiRequest(\"PUT\", `/api/tasks/${taskId}/cancel`, {\n        cancelledBy: data.cancelledBy,\n        cancellationReason: data.cancellationReason,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم إلغاء المهمة بنجاح\",\n        description: \"تم إلغاء المهمة وإرسال إشعار للمكلفين والعميل\",\n        variant: \"default\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/tasks\"] });\n      onOpenChange(false);\n      setCancelledBy(\"\");\n      setCancellationReason(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل في إلغاء المهمة\",\n        description: error.message || \"حدث خطأ أثناء إلغاء المهمة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!cancelledBy || !cancellationReason.trim()) {\n      toast({\n        title: \"بيانات مفقودة\",\n        description: \"يرجى تحديد من طلب الإلغاء وسبب الإلغاء\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    cancelMutation.mutate({\n      cancelledBy,\n      cancellationReason: cancellationReason.trim(),\n    });\n  };\n\n  const getCancelledByLabel = (value: string) => {\n    switch (value) {\n      case \"customer\": return \"طلب العميل\";\n      case \"admin\": return \"قرار إداري\";\n      case \"system\": return \"أسباب تقنية\";\n      default: return value;\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-lg\">\n            <div className=\"bg-red-100 p-2 rounded-full\">\n              <XCircle className=\"w-5 h-5 text-red-600\" />\n            </div>\n            إلغاء المهمة\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Task Info */}\n          <div className=\"bg-muted/30 rounded-lg p-4 space-y-3\">\n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">اسم المهمة</Label>\n              <p className=\"text-sm font-semibold text-foreground\">{taskTitle}</p>\n            </div>\n            \n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">اسم العميل</Label>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <User className=\"w-4 h-4 text-blue-500\" />\n                <span className=\"text-sm font-medium\">{customerName}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Warning */}\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-start gap-3\">\n              <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n              <div className=\"space-y-1\">\n                <p className=\"text-sm font-medium text-red-800\">\n                  تحذير: إلغاء المهمة نهائي ولا يمكن التراجع عنه\n                </p>\n                <p className=\"text-xs text-red-700\">\n                  سيتم إرسال إشعار الإلغاء للعميل والمكلفين وتحديث النظام\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Cancelled By */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cancelledBy\" className=\"text-sm font-medium\">\n              من طلب إلغاء المهمة؟ *\n            </Label>\n            <Select value={cancelledBy} onValueChange={setCancelledBy}>\n              <SelectTrigger className=\"w-full\" data-testid=\"select-cancelled-by\">\n                <SelectValue placeholder=\"اختر من طلب الإلغاء\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"customer\">العميل طلب الإلغاء</SelectItem>\n                <SelectItem value=\"admin\">قرار إداري من الشركة</SelectItem>\n                <SelectItem value=\"system\">أسباب تقنية أو ظروف طارئة</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Cancellation Reason */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cancellationReason\" className=\"text-sm font-medium\">\n              سبب الإلغاء *\n            </Label>\n            <Textarea\n              id=\"cancellationReason\"\n              value={cancellationReason}\n              onChange={(e) => setCancellationReason(e.target.value)}\n              placeholder=\"اذكر السبب التفصيلي لإلغاء هذه المهمة...\"\n              className=\"min-h-[120px] resize-none\"\n              required\n              data-testid=\"textarea-cancellation-reason\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              سيتم تسجيل هذا السبب في النظام وإرساله في إشعار الإلغاء\n            </p>\n          </div>\n\n          {/* Additional Info based on cancelled by */}\n          {cancelledBy === \"customer\" && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n              <p className=\"text-xs text-blue-700\">\n                <strong>ملاحظة:</strong> عند إلغاء المهمة بناءً على طلب العميل، يُفضل التأكد من سبب الإلغاء \n                وتسجيل أي ملاحظات مهمة لتحسين الخدمة مستقبلاً.\n              </p>\n            </div>\n          )}\n\n          {cancelledBy === \"admin\" && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3\">\n              <p className=\"text-xs text-amber-700\">\n                <strong>ملاحظة:</strong> الإلغاء الإداري يتطلب موافقة من المشرف أو الإدارة. \n                تأكد من توثيق الأسباب بوضوح.\n              </p>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-3 pt-4 border-t\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={cancelMutation.isPending}\n              data-testid=\"button-cancel-cancellation\"\n            >\n              تراجع\n            </Button>\n            <Button\n              type=\"submit\"\n              variant=\"destructive\"\n              disabled={cancelMutation.isPending}\n              className=\"min-w-[120px]\"\n              data-testid=\"button-confirm-cancellation\"\n            >\n              {cancelMutation.isPending ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                  جاري الإلغاء...\n                </div>\n              ) : (\n                <>\n                  <XCircle className=\"w-4 h-4 mr-2\" />\n                  إلغاء المهمة نهائياً\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":8600},"client/src/components/tasks/create-task-form.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { InsertTask, TeamMember, Customer, TaskWithAssignees } from \"@shared/schema\";\nimport { DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { AddCustomerDialog } from \"@/components/customers/add-customer-dialog\";\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\nimport { ChevronDown, ChevronUp, Calendar as CalendarIcon } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format, addDays, startOfWeek, endOfWeek, addWeeks } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { TimeConflictModal } from \"./time-conflict-modal\";\n\ninterface CreateTaskFormProps {\n  onSuccess: () => void;\n}\n\nexport function CreateTaskForm({ onSuccess }: CreateTaskFormProps) {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [customerName, setCustomerName] = useState(\"\");\n  const [customerPhone, setCustomerPhone] = useState(\"\");\n  const [customerEmail, setCustomerEmail] = useState(\"\");\n  const [customerAddress, setCustomerAddress] = useState(\"\");\n  const [startTime, setStartTime] = useState(\"\");\n  const [startPeriod, setStartPeriod] = useState(\"AM\");\n  const [finishTime, setFinishTime] = useState(\"\");\n  const [finishPeriod, setFinishPeriod] = useState(\"PM\");\n  const [notes, setNotes] = useState(\"\");\n  const [priority, setPriority] = useState(\"medium\");\n  const [assigneeIds, setAssigneeIds] = useState<string[]>([]);\n  const [dueDate, setDueDate] = useState<Date>();\n  \n  // Collapsible sections state\n  const [isCustomerDetailsOpen, setIsCustomerDetailsOpen] = useState(false);\n  const [isAdvancedOpen, setIsAdvancedOpen] = useState(false);\n  \n  // Time conflict modal state\n  const [showConflictModal, setShowConflictModal] = useState(false);\n  const [conflictingTasks, setConflictingTasks] = useState<Array<{task: TaskWithAssignees; assigneeName: string}>>([]);\n  const [pendingTask, setPendingTask] = useState<InsertTask | null>(null);\n\n  // Fetch customers from API\n  const { data: customers, isLoading: customersLoading } = useQuery<Customer[]>({\n    queryKey: [\"/api/customers\"],\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: teamMembers } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  const { data: existingTasks } = useQuery<TaskWithAssignees[]>({\n    queryKey: [\"/api/tasks\"],\n  });\n\n  // Function to convert time to 24-hour format for comparison\n  const convertTo24Hour = (time: string, period: string) => {\n    if (!time) return null;\n    const [hours, minutes] = time.split(':').map(Number);\n    let hour24 = hours;\n    \n    if (period === 'PM' && hours !== 12) {\n      hour24 += 12;\n    } else if (period === 'AM' && hours === 12) {\n      hour24 = 0;\n    }\n    \n    return hour24 * 60 + (minutes || 0); // Convert to minutes for easy comparison\n  };\n\n  // Function to check for time conflicts\n  const checkTimeConflicts = (newTask: InsertTask) => {\n    if (!existingTasks || !teamMembers) return [];\n    \n    const newStartMinutes = convertTo24Hour(newTask.startTime || '', newTask.startPeriod || 'AM');\n    const newEndMinutes = convertTo24Hour(newTask.finishTime || '', newTask.finishPeriod || 'PM');\n    \n    if (!newStartMinutes || !newEndMinutes) return [];\n\n    const conflicts: Array<{task: TaskWithAssignees; assigneeName: string}> = [];\n    \n    // Check each assigned team member\n    newTask.assigneeIds?.forEach(assigneeId => {\n      const assignee = teamMembers.find(m => m.id === assigneeId);\n      if (!assignee) return;\n      \n      // Check against all existing tasks for this assignee\n      existingTasks.forEach(existingTask => {\n        if (existingTask.status === 'complete' || existingTask.status === 'cancelled') {\n          return; // Skip completed/cancelled tasks\n        }\n        \n        // Check if this existing task is assigned to the same person\n        const isAssignedToSamePerson = existingTask.assignees?.some(a => a.id === assigneeId);\n        if (!isAssignedToSamePerson) return;\n        \n        // Check if it's the same date\n        const existingDate = existingTask.dueDate ? new Date(existingTask.dueDate).toDateString() : '';\n        const newDate = newTask.dueDate ? newTask.dueDate.toDateString() : '';\n        \n        if (existingDate !== newDate) return;\n        \n        const existingStartMinutes = convertTo24Hour(existingTask.startTime || '', existingTask.startPeriod || 'AM');\n        const existingEndMinutes = convertTo24Hour(existingTask.finishTime || '', existingTask.finishPeriod || 'PM');\n        \n        if (!existingStartMinutes || !existingEndMinutes) return;\n        \n        // Check for time overlap\n        const hasOverlap = (newStartMinutes < existingEndMinutes) && (newEndMinutes > existingStartMinutes);\n        \n        if (hasOverlap) {\n          conflicts.push({\n            task: existingTask,\n            assigneeName: assignee.name\n          });\n        }\n      });\n    });\n    \n    return conflicts;\n  };\n\n  const createTaskMutation = useMutation({\n    mutationFn: async (task: InsertTask) => {\n      const response = await apiRequest(\"POST\", \"/api/tasks\", task);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/tasks\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      toast({\n        title: \"تم إنشاء المهمة بنجاح\",\n        description: \"تمت إضافة المهمة الجديدة لفريقك.\",\n      });\n      // Reset form\n      setTitle(\"\");\n      setDescription(\"\");\n      setCustomerName(\"\");\n      setCustomerPhone(\"\");\n      setCustomerEmail(\"\");\n      setCustomerAddress(\"\");\n      setStartTime(\"\");\n      setStartPeriod(\"AM\");\n      setFinishTime(\"\");\n      setFinishPeriod(\"PM\");\n      setNotes(\"\");\n      setPriority(\"medium\");\n      setAssigneeIds([]);\n      setDueDate(undefined);\n      setPendingTask(null);\n      setConflictingTasks([]);\n      onSuccess();\n    },\n    onError: (error: Error) => {\n      console.error(\"Task creation error:\", error);\n      toast({\n        title: \"خطأ في إنشاء المهمة\",\n        description: error.message || \"حدثت مشكلة في إنشاء المهمة. يرجى المحاولة مرة أخرى.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!title.trim() || !description.trim() || !customerName.trim() || !startTime.trim() || !finishTime.trim()) {\n      toast({\n        title: \"حقول مطلوبة مفقودة\",\n        description: \"يرجى ملء جميع الحقول المطلوبة: العنوان، الوصف، اسم العميل، وقت البداية، ووقت الانتهاء.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const timeSchedule = `${startTime.trim()} ${startPeriod} - ${finishTime.trim()} ${finishPeriod}`;\n    \n    const task: InsertTask = {\n      title: title.trim(),\n      description: description.trim(),\n      customerName: customerName.trim(),\n      customerPhone: customerPhone.trim() || undefined,\n      customerEmail: customerEmail.trim() || undefined,\n      customerAddress: customerAddress.trim() || undefined,\n      time: timeSchedule,\n      startTime: startTime.trim(),\n      startPeriod,\n      finishTime: finishTime.trim(),\n      finishPeriod,\n      notes: notes.trim() || undefined,\n      priority,\n      assigneeIds: assigneeIds.length > 0 ? assigneeIds : undefined,\n      dueDate: dueDate ? dueDate : undefined,\n      status: \"pending\",\n      progress: 0,\n    };\n\n    // Check for time conflicts before creating the task\n    if (assigneeIds.length > 0 && dueDate) {\n      const conflicts = checkTimeConflicts(task);\n      \n      if (conflicts.length > 0) {\n        // Show conflict modal\n        setConflictingTasks(conflicts);\n        setPendingTask(task);\n        setShowConflictModal(true);\n        return;\n      }\n    }\n\n    console.log(\"Creating task with data:\", task);\n    createTaskMutation.mutate(task);\n  };\n\n  // Handle conflict modal confirmation\n  const handleConflictConfirm = () => {\n    if (pendingTask) {\n      console.log(\"Creating task despite conflicts:\", pendingTask);\n      createTaskMutation.mutate(pendingTask);\n    }\n  };\n\n  // Handle conflict modal cancellation\n  const handleConflictCancel = () => {\n    setPendingTask(null);\n    setConflictingTasks([]);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n    >\n      <DialogHeader>\n        <DialogTitle data-testid=\"modal-create-task-title\">إنشاء مهمة جديدة</DialogTitle>\n        <DialogDescription>املأ النموذج أدناه لإنشاء مهمة جديدة لفريقك.</DialogDescription>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-2 mt-3\">\n        <div>\n          <Label htmlFor=\"title\">العنوان *</Label>\n          <Input\n            id=\"title\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder=\"أدخل عنوان المهمة\"\n            data-testid=\"input-task-title\"\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"description\">الوصف *</Label>\n          <Textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"أدخل وصف المهمة\"\n            rows={1}\n            data-testid=\"textarea-task-description\"\n            className=\"text-sm min-h-[2rem] resize-none\"\n          />\n        </div>\n\n        <div className=\"w-full\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"customerName\">اسم العميل *</Label>\n            <AddCustomerDialog\n              onCustomerAdded={(customer) => {\n                setCustomerName(customer.name);\n                if (customer.phone) setCustomerPhone(customer.phone);\n                if (customer.email) setCustomerEmail(customer.email);\n                if (customer.address) setCustomerAddress(customer.address);\n              }}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Select value={customerName} onValueChange={(value) => {\n              setCustomerName(value);\n              // Auto-fill customer details if customer exists\n              const customer = customers?.find(c => c.name === value);\n              if (customer) {\n                if (customer.phone) setCustomerPhone(customer.phone);\n                if (customer.email) setCustomerEmail(customer.email);\n                if (customer.address) setCustomerAddress(customer.address);\n              }\n            }}>\n              <SelectTrigger data-testid=\"select-task-customer-name\" className=\"text-sm\">\n                <SelectValue placeholder=\"اختر أو أدخل العميل\" />\n              </SelectTrigger>\n              <SelectContent>\n                {customers?.map((customer) => (\n                  <SelectItem key={customer.id} value={customer.name}>\n                    {customer.name}\n                    {customer.phone && ` (${customer.phone})`}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Input\n              placeholder=\"أو أدخل اسم عميل مخصص\"\n              value={customerName}\n              onChange={(e) => setCustomerName(e.target.value)}\n              data-testid=\"input-task-customer-name-manual\"\n              className=\"text-sm\"\n            />\n          </div>\n        </div>\n\n        <Collapsible open={isCustomerDetailsOpen} onOpenChange={setIsCustomerDetailsOpen}>\n          <CollapsibleTrigger asChild>\n            <Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-between p-2 h-8\">\n              تفاصيل العميل (اختياري)\n              {isCustomerDetailsOpen ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n            </Button>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              transition={{ duration: 0.2 }}\n              className=\"space-y-2 mt-2\"\n            >\n              <div>\n                <Label htmlFor=\"customer-phone\" className=\"text-sm\">هاتف العميل</Label>\n                <Input\n                  id=\"customer-phone\"\n                  type=\"tel\"\n                  value={customerPhone}\n                  onChange={(e) => setCustomerPhone(e.target.value)}\n                  placeholder=\"مثال: +9647812345678\"\n                  data-testid=\"input-customer-phone-create\"\n                  className=\"text-sm\"\n                />\n                <div className=\"text-xs text-muted-foreground mt-1\">\n                  يرجى إدخال رقم الهاتف مع مفتاح الدولة (مثال: +964 للعراق)\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor=\"customer-email\" className=\"text-sm\">بريد العميل الإلكتروني</Label>\n                <Input\n                  id=\"customer-email\"\n                  type=\"email\"\n                  value={customerEmail}\n                  onChange={(e) => setCustomerEmail(e.target.value)}\n                  placeholder=\"أدخل البريد الإلكتروني للعميل\"\n                  data-testid=\"input-customer-email-create\"\n                  className=\"text-sm\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"customer-address\" className=\"text-sm\">عنوان العميل</Label>\n                <Input\n                  id=\"customer-address\"\n                  value={customerAddress}\n                  onChange={(e) => setCustomerAddress(e.target.value)}\n                  placeholder=\"أدخل عنوان العميل\"\n                  data-testid=\"input-customer-address-create\"\n                  className=\"text-sm\"\n                />\n              </div>\n            </motion.div>\n          </CollapsibleContent>\n        </Collapsible>\n\n        <div>\n          <Label>الوقت/الجدول *</Label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {/* Start Time */}\n            <div>\n              <Label htmlFor=\"start-time\" className=\"text-xs text-muted-foreground\">وقت البداية</Label>\n              <div className=\"flex gap-1\">\n                <Input\n                  id=\"start-time\"\n                  value={startTime}\n                  onChange={(e) => setStartTime(e.target.value)}\n                  placeholder=\"9:00\"\n                  className=\"text-sm\"\n                  data-testid=\"input-start-time\"\n                />\n                <Select value={startPeriod} onValueChange={setStartPeriod}>\n                  <SelectTrigger className=\"w-16 text-sm\" data-testid=\"select-start-period\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"AM\">AM</SelectItem>\n                    <SelectItem value=\"PM\">PM</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            \n            {/* Finish Time */}\n            <div>\n              <Label htmlFor=\"finish-time\" className=\"text-xs text-muted-foreground\">وقت الانتهاء</Label>\n              <div className=\"flex gap-1\">\n                <Input\n                  id=\"finish-time\"\n                  value={finishTime}\n                  onChange={(e) => setFinishTime(e.target.value)}\n                  placeholder=\"5:00\"\n                  className=\"text-sm\"\n                  data-testid=\"input-finish-time\"\n                />\n                <Select value={finishPeriod} onValueChange={setFinishPeriod}>\n                  <SelectTrigger className=\"w-16 text-sm\" data-testid=\"select-finish-period\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"AM\">AM</SelectItem>\n                    <SelectItem value=\"PM\">PM</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <Label htmlFor=\"priority\" className=\"text-sm\">الأولوية</Label>\n            <Select value={priority} onValueChange={setPriority}>\n              <SelectTrigger data-testid=\"select-task-priority-create\" className=\"text-sm h-9\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"low\">منخفضة</SelectItem>\n                <SelectItem value=\"medium\">متوسطة</SelectItem>\n                <SelectItem value=\"high\">عالية</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label className=\"text-sm\">تاريخ الإنجاز</Label>\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button\n                  variant={\"outline\"}\n                  className={cn(\n                    \"w-full justify-start text-left font-normal text-sm h-9\",\n                    !dueDate && \"text-muted-foreground\"\n                  )}\n                  data-testid=\"button-task-due-date\"\n                >\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                  {dueDate ? format(dueDate, \"PPP\") : <span>اختر تاريخ الإنجاز</span>}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                <Calendar\n                  mode=\"single\"\n                  selected={dueDate}\n                  onSelect={setDueDate}\n                  initialFocus\n                  data-testid=\"calendar-task-due-date\"\n                />\n              </PopoverContent>\n            </Popover>\n          </div>\n        </div>\n\n        <Collapsible open={isAdvancedOpen} onOpenChange={setIsAdvancedOpen}>\n          <CollapsibleTrigger asChild>\n            <Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-between p-2 h-8\">\n              خيارات متقدمة\n              {isAdvancedOpen ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n            </Button>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              transition={{ duration: 0.2 }}\n              className=\"space-y-2 mt-2\"\n            >\n              <div>\n                <Label htmlFor=\"assignees\" className=\"text-sm\">المكلفون (تحديد متعدد)</Label>\n                <div className=\"mt-2 space-y-1 max-h-20 overflow-y-auto border rounded-md p-2 bg-muted/30\">\n                  {teamMembers?.map((member) => (\n                    <div key={member.id} className=\"flex items-center space-x-2\">\n                      <Checkbox\n                        id={`assignee-${member.id}`}\n                        checked={assigneeIds.includes(member.id)}\n                        onCheckedChange={(checked) => {\n                          if (checked) {\n                            setAssigneeIds([...assigneeIds, member.id]);\n                          } else {\n                            setAssigneeIds(assigneeIds.filter(id => id !== member.id));\n                          }\n                        }}\n                        data-testid={`checkbox-assignee-${member.id}`}\n                      />\n                      <Label htmlFor={`assignee-${member.id}`} className=\"text-xs font-normal\">\n                        {member.name} - {member.role}\n                      </Label>\n                    </div>\n                  ))}\n                  {(!teamMembers || teamMembers.length === 0) && (\n                    <p className=\"text-xs text-muted-foreground\">لا يوجد أعضاء فريق متاحون</p>\n                  )}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  المحدد: {assigneeIds.length} عضو\n                </p>\n              </div>\n\n              <div>\n                <Label htmlFor=\"notes\" className=\"text-sm\">ملاحظات</Label>\n                <Textarea\n                  id=\"notes\"\n                  value={notes}\n                  onChange={(e) => setNotes(e.target.value)}\n                  placeholder=\"ملاحظات إضافية (اختياري)\"\n                  rows={1}\n                  data-testid=\"textarea-task-notes\"\n                  className=\"text-sm min-h-[2rem] resize-none\"\n                />\n              </div>\n            </motion.div>\n          </CollapsibleContent>\n        </Collapsible>\n\n        <div className=\"flex space-x-3 pt-3 border-t mt-4\">\n          <Button\n            type=\"submit\"\n            className=\"flex-1\"\n            disabled={createTaskMutation.isPending}\n            data-testid=\"button-submit-task\"\n          >\n            {createTaskMutation.isPending ? \"جاري الإنشاء...\" : \"إنشاء المهمة\"}\n          </Button>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={onSuccess}\n            data-testid=\"button-cancel-create-task\"\n          >\n            إلغاء\n          </Button>\n        </div>\n      </form>\n\n      {/* Time Conflict Modal */}\n      <TimeConflictModal\n        open={showConflictModal}\n        onOpenChange={setShowConflictModal}\n        conflictingTasks={conflictingTasks}\n        onConfirm={handleConflictConfirm}\n        onCancel={handleConflictCancel}\n      />\n    </motion.div>\n  );\n}\n","size_bytes":22793},"client/src/components/tasks/reschedule-task-modal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Calendar, Clock, AlertTriangle } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\ninterface RescheduleTaskModalProps {\n  taskId: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function RescheduleTaskModal({\n  taskId,\n  open,\n  onOpenChange,\n}: RescheduleTaskModalProps) {\n  const [newDueDate, setNewDueDate] = useState(\"\");\n  const [rescheduleReason, setRescheduleReason] = useState(\"\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const rescheduleMutation = useMutation({\n    mutationFn: async (data: { newDueDate: string; rescheduleReason: string }) => {\n      return apiRequest(\"PUT\", `/api/tasks/${taskId}/reschedule`, {\n        newDueDate: data.newDueDate,\n        rescheduleReason: data.rescheduleReason,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تأجيل المهمة بنجاح\",\n        description: \"تم تحديث موعد المهمة وإرسال إشعار للمكلفين\",\n        variant: \"default\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/tasks\"] });\n      onOpenChange(false);\n      setNewDueDate(\"\");\n      setRescheduleReason(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل في تأجيل المهمة\",\n        description: error.message || \"حدث خطأ أثناء تأجيل المهمة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newDueDate || !rescheduleReason.trim()) {\n      toast({\n        title: \"بيانات مفقودة\",\n        description: \"يرجى تحديد الموعد الجديد وسبب التأجيل\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const newDate = new Date(newDueDate);\n    const currentDate = new Date(currentDueDate);\n    \n    if (newDate <= currentDate) {\n      toast({\n        title: \"موعد غير صالح\",\n        description: \"يجب أن يكون الموعد الجديد بعد الموعد الحالي\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    rescheduleMutation.mutate({\n      newDueDate: newDate.toISOString(),\n      rescheduleReason: rescheduleReason.trim(),\n    });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-lg\">\n            <div className=\"bg-blue-100 p-2 rounded-full\">\n              <Calendar className=\"w-5 h-5 text-blue-600\" />\n            </div>\n            تأجيل المهمة\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Task Info */}\n          <div className=\"bg-muted/30 rounded-lg p-4 space-y-3\">\n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">اسم المهمة</Label>\n              <p className=\"text-sm font-semibold text-foreground\">{taskTitle}</p>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label className=\"text-sm font-medium text-muted-foreground\">الموعد الحالي</Label>\n                <div className=\"flex items-center gap-2 mt-1\">\n                  <Clock className=\"w-4 h-4 text-orange-500\" />\n                  <span className=\"text-sm font-medium\">\n                    {format(new Date(currentDueDate), \"dd/MM/yyyy HH:mm\")}\n                  </span>\n                </div>\n              </div>\n              \n              <div>\n                <Label className=\"text-sm font-medium text-muted-foreground\">عدد مرات التأجيل</Label>\n                <div className=\"flex items-center gap-2 mt-1\">\n                  <AlertTriangle className=\"w-4 h-4 text-amber-500\" />\n                  <span className=\"text-sm font-medium\">{rescheduleCount} مرة</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* New Due Date */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"newDueDate\" className=\"text-sm font-medium\">\n              الموعد الجديد *\n            </Label>\n            <Input\n              id=\"newDueDate\"\n              type=\"datetime-local\"\n              value={newDueDate}\n              onChange={(e) => setNewDueDate(e.target.value)}\n              className=\"w-full\"\n              required\n              data-testid=\"input-new-due-date\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              يجب أن يكون الموعد الجديد بعد الموعد الحالي\n            </p>\n          </div>\n\n          {/* Reschedule Reason */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"rescheduleReason\" className=\"text-sm font-medium\">\n              سبب التأجيل *\n            </Label>\n            <Textarea\n              id=\"rescheduleReason\"\n              value={rescheduleReason}\n              onChange={(e) => setRescheduleReason(e.target.value)}\n              placeholder=\"اذكر السبب وراء تأجيل هذه المهمة...\"\n              className=\"min-h-[100px] resize-none\"\n              required\n              data-testid=\"textarea-reschedule-reason\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              سيتم إرسال هذا السبب في إشعار التأجيل للمكلفين والعميل\n            </p>\n          </div>\n\n          {/* Warning for multiple reschedules */}\n          {rescheduleCount >= 2 && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <AlertTriangle className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n                <div className=\"space-y-1\">\n                  <p className=\"text-sm font-medium text-amber-800\">\n                    تحذير: تم تأجيل هذه المهمة عدة مرات\n                  </p>\n                  <p className=\"text-xs text-amber-700\">\n                    يُفضل مراجعة جدولة المهمة أو اتخاذ إجراءات لضمان إتمامها في الموعد الجديد\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-3 pt-4 border-t\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={rescheduleMutation.isPending}\n              data-testid=\"button-cancel-reschedule\"\n            >\n              إلغاء\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={rescheduleMutation.isPending}\n              className=\"min-w-[120px]\"\n              data-testid=\"button-confirm-reschedule\"\n            >\n              {rescheduleMutation.isPending ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                  جاري التأجيل...\n                </div>\n              ) : (\n                <>\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  تأجيل المهمة\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":8188},"client/src/components/tasks/status-actions.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { Play, CheckCircle, Clock, RotateCcw } from \"lucide-react\";\n\ninterface StatusActionsProps {\n  taskId: string;\n  currentStatus: string;\n  onStatusChange?: (newStatus: string) => void;\n}\n\nexport function StatusActions({ taskId, currentStatus, onStatusChange }: StatusActionsProps) {\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const queryClient = useQueryClient();\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async (status: string) => {\n      const response = await apiRequest(\"PUT\", `/api/tasks/${taskId}`, { status });\n      return response.json();\n    },\n    onSuccess: (_, newStatus) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/tasks\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      onStatusChange?.(newStatus);\n      toast({\n        title: t('msg.taskUpdated'),\n        description: `Task status changed to ${getStatusLabel(newStatus)}`,\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error updating status\",\n        description: \"There was a problem updating the task status.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"pending\": return t('status.pending');\n      case \"start\": return t('status.start');\n      case \"complete\": return t('status.complete');\n      default: return status;\n    }\n  };\n\n  const getStatusColor = (status: string): \"secondary\" | \"destructive\" | \"default\" | \"outline\" => {\n    switch (status) {\n      case \"pending\": return \"secondary\";     // Gray for waiting\n      case \"start\": return \"destructive\";     // Blue for in progress  \n      case \"complete\": return \"default\";      // Green for completed\n      default: return \"outline\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"pending\": return <Clock className=\"w-4 h-4\" />;\n      case \"start\": return <Play className=\"w-4 h-4\" />;\n      case \"complete\": return <CheckCircle className=\"w-4 h-4\" />;\n      default: return <Clock className=\"w-4 h-4\" />;\n    }\n  };\n\n  const handleStatusChange = (newStatus: string) => {\n    updateStatusMutation.mutate(newStatus);\n  };\n\n  const getNextAction = () => {\n    switch (currentStatus) {\n      case \"pending\":\n        return {\n          status: \"start\",\n          label: \"Start Task\",\n          icon: <Play className=\"w-4 h-4\" />,\n          variant: \"default\" as const,\n        };\n      case \"start\":\n        return {\n          status: \"complete\",\n          label: \"Complete Task\",\n          icon: <CheckCircle className=\"w-4 h-4\" />,\n          variant: \"default\" as const,\n        };\n      case \"complete\":\n        return {\n          status: \"pending\",\n          label: \"Reset to Pending\",\n          icon: <RotateCcw className=\"w-4 h-4\" />,\n          variant: \"outline\" as const,\n        };\n      default:\n        return null;\n    }\n  };\n\n  const nextAction = getNextAction();\n\n  return (\n    <div className=\"flex items-center gap-2\" data-testid={`status-actions-${taskId}`}>\n      {/* Current Status Badge */}\n      <Badge \n        variant={getStatusColor(currentStatus)} \n        className=\"flex items-center gap-1\"\n        data-testid={`status-badge-${taskId}`}\n      >\n        {getStatusIcon(currentStatus)}\n        {getStatusLabel(currentStatus)}\n      </Badge>\n\n      {/* Action Button */}\n      {nextAction && (\n        <Button\n          size=\"sm\"\n          variant={nextAction.variant}\n          onClick={() => handleStatusChange(nextAction.status)}\n          disabled={updateStatusMutation.isPending}\n          className=\"flex items-center gap-1\"\n          data-testid={`status-action-${taskId}`}\n        >\n          {updateStatusMutation.isPending ? (\n            <div className=\"w-4 h-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\n          ) : (\n            nextAction.icon\n          )}\n          {updateStatusMutation.isPending ? \"Updating...\" : nextAction.label}\n        </Button>\n      )}\n    </div>\n  );\n}","size_bytes":4343},"client/src/components/tasks/task-card.tsx":{"content":"import { TaskWithAssignees } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ChevronRight, User, Calendar, CalendarClock, XCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { useState } from \"react\";\nimport { TaskDetailModal } from \"./task-detail-modal\";\nimport { StatusActions } from \"./status-actions\";\nimport { ChatButton } from \"@/components/chat/chat-button\";\nimport { RescheduleTaskModal } from \"./reschedule-task-modal\";\nimport { CancelTaskModal } from \"./cancel-task-modal\";\nimport { useAuth } from \"@/hooks/use-auth\";\n\ninterface TaskCardProps {\n  task: TaskWithAssignees;\n}\n\nexport function TaskCard({ task }: TaskCardProps) {\n  const [showDetails, setShowDetails] = useState(false);\n  const [showReschedule, setShowReschedule] = useState(false);\n  const [showCancel, setShowCancel] = useState(false);\n  const { user } = useAuth();\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"complete\":\n        return \"bg-green-500 text-white border-green-600\"; // أخضر ممتلئ للمهام المكتملة\n      case \"start\":\n        return \"bg-purple-500 text-white border-purple-600\"; // بنفسجي ممتلئ للمهام التي بدأت\n      case \"cancelled\":\n        return \"bg-red-500 text-white border-red-600\";\n      case \"rescheduled\":\n        return \"bg-indigo-500 text-white border-indigo-600\"; // تغيير المؤجلة إلى النيلي لتجنب التداخل\n      case \"pending\":\n      default:\n        return \"bg-red-500 text-white border-red-600\"; // أحمر ممتلئ للمهام في الانتظار\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"في الانتظار\";\n      case \"start\":\n        return \"بدأت\";\n      case \"complete\":\n        return \"مكتملة\";\n      case \"cancelled\":\n        return \"ملغاة\";\n      case \"rescheduled\":\n        return \"مؤجلة\";\n      default:\n        return status;\n    }\n  };\n\n  // Generate card background colors based on task status\n  const getCardBackgroundColor = (status: string) => {\n    switch (status) {\n      case \"complete\":\n        return \"border-l-green-500 bg-green-50/50\"; // خلفية خضراء فاتحة للمهام المكتملة\n      case \"start\":\n        return \"border-l-purple-500 bg-purple-50/50\"; // خلفية بنفسجية فاتحة للمهام التي بدأت\n      case \"cancelled\":\n        return \"border-l-red-500 bg-red-50/50\";\n      case \"rescheduled\":\n        return \"border-l-indigo-500 bg-indigo-50/50\"; // تغيير المؤجلة إلى النيلي لتجنب التداخل\n      case \"pending\":\n      default:\n        return \"border-l-red-500 bg-orange-50/50\"; // خلفية برتقالية فاتحة للمهام في الانتظار\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'text-red-700 bg-red-100 border-red-200';\n      case 'medium':\n        return 'text-yellow-700 bg-yellow-100 border-yellow-200';\n      case 'low':\n        return 'text-green-700 bg-green-100 border-green-200';\n      default:\n        return 'text-gray-600 bg-gray-100 border-gray-200';\n    }\n  };\n\n  const getPriorityLabel = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'عالية';\n      case 'medium': return 'متوسطة';\n      case 'low': return 'منخفضة';\n      default: return priority;\n    }\n  };\n\n  // Check if user can reschedule/cancel tasks (admin/supervisor only)\n  const canManageTask = (user as any)?.role === \"admin\" || (user as any)?.role === \"supervisor\";\n  \n  // Don't show reschedule/cancel for completed or already cancelled tasks\n  const canReschedule = canManageTask && task.status !== \"complete\" && task.status !== \"cancelled\";\n  const canCancel = canManageTask && task.status !== \"complete\" && task.status !== \"cancelled\";\n\n  return (\n    <>\n      <div className=\"task-card\" data-testid={`task-card-${task.id}`}>\n        <Card className={`hover:shadow-md transition-all duration-200 border-l-4 ${getCardBackgroundColor(task.status)} hover:scale-[1.01] backdrop-blur-sm`}>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start justify-between mb-3 rtl:flex-row-reverse\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                  {task.taskNumber && (\n                    <span className=\"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-semibold\" data-testid={`task-number-${task.id}`}>\n                      #{task.taskNumber}\n                    </span>\n                  )}\n                  {task.priority && (\n                    <Badge variant=\"outline\" className={`text-xs ${getPriorityColor(task.priority)}`}>\n                      {getPriorityLabel(task.priority)}\n                    </Badge>\n                  )}\n                </div>\n                <h4 className=\"font-semibold text-sm text-gray-900 mb-1 line-clamp-2\" data-testid={`task-title-${task.id}`}>\n                  {task.title}\n                </h4>\n                <p className=\"text-xs text-gray-600 line-clamp-2\" data-testid={`task-description-${task.id}`}>\n                  {task.description}\n                </p>\n              </div>\n              <Badge className={`${getStatusColor(task.status)} border text-xs whitespace-nowrap ml-2`} data-testid={`task-status-${task.id}`}>\n                {getStatusLabel(task.status)}\n              </Badge>\n            </div>\n        \n            <div className=\"space-y-3 mt-3\">\n              <div className=\"flex items-center justify-between text-xs text-gray-500 rtl:flex-row-reverse\">\n                <div className=\"flex items-center gap-3 rtl:space-x-reverse\">\n                  {task.assignees && task.assignees.length > 0 && (\n                    <div className=\"flex items-center gap-1 rtl:space-x-reverse\">\n                      <User className=\"h-3 w-3\" />\n                      <span data-testid={`task-assignee-${task.id}`}>\n                        {task.assignees[0].name}\n                        {task.assignees.length > 1 && ` +${task.assignees.length - 1}`}\n                      </span>\n                    </div>\n                  )}\n                  {task.dueDate && (\n                    <div className=\"flex items-center gap-1 rtl:space-x-reverse\">\n                      <Calendar className=\"h-3 w-3\" />\n                      <span data-testid={`task-due-date-${task.id}`}>\n                        {format(new Date(task.dueDate), \"MMM dd\")}\n                      </span>\n                    </div>\n                  )}\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-primary hover:text-primary-dark p-1 h-auto\"\n                  onClick={() => setShowDetails(true)}\n                  data-testid={`button-task-details-${task.id}`}\n                >\n                  <ChevronRight className=\"h-4 w-4\" />\n                </Button>\n              </div>\n              \n              {/* Status Actions and Management */}\n              <div className=\"flex items-center justify-between flex-wrap gap-2\">\n                <div className=\"flex items-center gap-2\">\n                  <StatusActions\n                    taskId={task.id}\n                    currentStatus={task.status}\n                  />\n                  \n                  {/* Reschedule Button */}\n                  {canReschedule && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setShowReschedule(true)}\n                      className=\"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300 text-xs px-2 py-1\"\n                      data-testid={`button-reschedule-${task.id}`}\n                    >\n                      <CalendarClock className=\"w-3 h-3 mr-1\" />\n                      تأجيل\n                    </Button>\n                  )}\n                  \n                  {/* Cancel Button */}\n                  {canCancel && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setShowCancel(true)}\n                      className=\"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 text-xs px-2 py-1\"\n                      data-testid={`button-cancel-${task.id}`}\n                    >\n                      <XCircle className=\"w-3 h-3 mr-1\" />\n                      إلغاء\n                    </Button>\n                  )}\n                </div>\n                \n                <ChatButton taskId={task.id} taskTitle={task.title} />\n              </div>\n\n              {/* Reschedule/Cancellation Info */}\n              {(task as any).rescheduleCount > 0 && (\n                <div className=\"p-2 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                  <p className=\"text-xs text-yellow-700\">\n                    تم تأجيل هذه المهمة {(task as any).rescheduleCount} مرة\n                  </p>\n                  {(task as any).rescheduleReason && (\n                    <p className=\"text-xs text-yellow-600 mt-1\">\n                      السبب: {(task as any).rescheduleReason}\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {task.status === \"cancelled\" && (task as any).cancellationReason && (\n                <div className=\"p-2 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-xs text-red-700\">\n                    سبب الإلغاء: {(task as any).cancellationReason}\n                  </p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <TaskDetailModal \n        task={task}\n        open={showDetails}\n        onOpenChange={setShowDetails}\n      />\n\n      <RescheduleTaskModal\n        taskId={task.id}\n        open={showReschedule}\n        onOpenChange={setShowReschedule}\n      />\n\n      <CancelTaskModal\n        taskId={task.id}\n        open={showCancel}\n        onOpenChange={setShowCancel}\n      />\n    </>\n  );\n}","size_bytes":10399},"client/src/components/tasks/task-detail-modal.tsx":{"content":"import { TaskWithAssignees, UpdateTask } from \"@shared/schema\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { TeamMember } from \"@shared/schema\";\nimport { format } from \"date-fns\";\nimport { ChatButton } from \"@/components/chat/chat-button\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface TaskDetailModalProps {\n  task: TaskWithAssignees;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function TaskDetailModal({ task, open, onOpenChange }: TaskDetailModalProps) {\n  const [status, setStatus] = useState(task.status);\n  const [priority, setPriority] = useState(task.priority);\n  const [assigneeIds, setAssigneeIds] = useState<string[]>(task.assigneeIds || []);\n  const [dueDate, setDueDate] = useState(\n    task.dueDate ? format(new Date(task.dueDate), \"yyyy-MM-dd\") : \"\"\n  );\n  const [progress, setProgress] = useState(task.progress);\n  const [finalReport, setFinalReport] = useState(task.finalReport || \"\");\n\n  const { user } = useAuth();\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: teamMembers } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  const updateTaskMutation = useMutation({\n    mutationFn: async (updates: UpdateTask) => {\n      const response = await apiRequest(\"PUT\", `/api/tasks/${task.id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/tasks\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      toast({\n        title: \"Task updated successfully\",\n        description: \"The task has been updated with your changes.\",\n      });\n      onOpenChange(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error updating task\",\n        description: \"There was a problem updating the task. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    const updates: UpdateTask = {\n      status,\n      priority,\n      assigneeIds: assigneeIds.length > 0 ? assigneeIds : undefined,\n      dueDate: dueDate ? new Date(dueDate) : undefined,\n      progress,\n      finalReport: finalReport.trim() || undefined,\n    };\n\n    updateTaskMutation.mutate(updates);\n  };\n\n  // Check if current user is assigned to this task\n  const isAssignedToTask = () => {\n    const currentUser = user as any;\n    if (!currentUser?.teamMember) return false;\n    return task.assigneeIds?.includes(currentUser.teamMember.id) || false;\n  };\n\n  // Check if user can edit final report (only assigned team members)\n  const canEditFinalReport = () => {\n    const currentUser = user as any;\n    if (!currentUser?.role) return false;\n    return currentUser.role === 'admin' || currentUser.role === 'supervisor' || isAssignedToTask();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"modal-task-details-title\">\n            تفاصيل المهمة\n            {task.taskNumber && (\n              <span className=\"text-primary text-sm mr-2\">#{task.taskNumber}</span>\n            )}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div>\n            <h4 className=\"font-medium text-lg mb-2\" data-testid=\"modal-task-title\">\n              {task.title}\n            </h4>\n            <p className=\"text-muted-foreground mb-4\" data-testid=\"modal-task-description\">\n              {task.description}\n            </p>\n          </div>\n\n          {/* Task Details */}\n          <div className=\"space-y-4 p-4 bg-muted/50 rounded-lg\">\n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">Customer Information</Label>\n              <p className=\"font-medium text-lg\" data-testid=\"modal-task-customer\">{task.customerName}</p>\n              {task.customerPhone && (\n                <p className=\"text-sm text-muted-foreground\" data-testid=\"modal-customer-phone\">\n                  📞 {task.customerPhone}\n                </p>\n              )}\n              {task.customerAddress && (\n                <p className=\"text-sm text-muted-foreground\" data-testid=\"modal-customer-address\">\n                  📍 {task.customerAddress}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">Time/Schedule</Label>\n              <p className=\"font-medium\" data-testid=\"modal-task-time\">{task.time}</p>\n            </div>\n            {task.notes && (\n              <div className=\"col-span-2\">\n                <Label className=\"text-sm font-medium text-muted-foreground\">Notes</Label>\n                <p className=\"text-sm\" data-testid=\"modal-task-notes\">{task.notes}</p>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"status\" className=\"text-sm font-medium text-muted-foreground\">\n                Status\n              </Label>\n              <Select value={status} onValueChange={setStatus}>\n                <SelectTrigger className=\"mt-1\" data-testid=\"select-task-status\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"start\">Started</SelectItem>\n                  <SelectItem value=\"complete\">Complete</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <Label htmlFor=\"priority\" className=\"text-sm font-medium text-muted-foreground\">\n                Priority\n              </Label>\n              <Select value={priority} onValueChange={setPriority}>\n                <SelectTrigger className=\"mt-1\" data-testid=\"select-task-priority\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"low\">Low</SelectItem>\n                  <SelectItem value=\"medium\">Medium</SelectItem>\n                  <SelectItem value=\"high\">High</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"assignees\" className=\"text-sm font-medium text-muted-foreground\">\n              Assign to Team Members (Multiple Selection)\n            </Label>\n            \n            <div className=\"mt-2 space-y-2 max-h-32 overflow-y-auto border rounded-md p-2\">\n              {teamMembers?.map((member) => (\n                <div key={member.id} className=\"flex items-center space-x-2\">\n                  <Checkbox\n                    id={`assignee-edit-${member.id}`}\n                    checked={assigneeIds.includes(member.id)}\n                    onCheckedChange={(checked) => {\n                      if (checked) {\n                        setAssigneeIds([...assigneeIds, member.id]);\n                      } else {\n                        setAssigneeIds(assigneeIds.filter(id => id !== member.id));\n                      }\n                    }}\n                    data-testid={`checkbox-assignee-edit-${member.id}`}\n                  />\n                  <Label htmlFor={`assignee-edit-${member.id}`} className=\"text-sm font-normal\">\n                    {member.name} - {member.role}\n                  </Label>\n                </div>\n              ))}\n            </div>\n            \n            {/* Display current assignees */}\n            {task.assignees && task.assignees.length > 0 && (\n              <div className=\"mt-3\">\n                <Label className=\"text-sm font-medium text-muted-foreground\">Currently Assigned:</Label>\n                <div className=\"flex flex-wrap gap-2 mt-1\">\n                  {task.assignees.map((assignee) => (\n                    <div key={assignee.id} className=\"flex items-center space-x-2 bg-muted rounded-md px-2 py-1\">\n                      <div className=\"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-xs font-medium\">\n                        {assignee.avatar || assignee.name.split(' ').map(n => n[0]).join('')}\n                      </div>\n                      <span className=\"text-sm\" data-testid={`current-assignee-${assignee.id}`}>\n                        {assignee.name}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          <div>\n            <Label htmlFor=\"dueDate\" className=\"text-sm font-medium text-muted-foreground\">\n              Due Date\n            </Label>\n            <Input\n              type=\"date\"\n              value={dueDate}\n              onChange={(e) => setDueDate(e.target.value)}\n              className=\"mt-1\"\n              data-testid=\"input-task-due-date\"\n            />\n          </div>\n          \n          <div>\n            <Label className=\"text-sm font-medium text-muted-foreground\">Progress</Label>\n            <div className=\"mt-2\">\n              <div className=\"flex justify-between text-sm mb-1\">\n                <span>Progress</span>\n                <span data-testid=\"modal-task-progress\">{progress}%</span>\n              </div>\n              <Progress value={progress} className=\"w-full\" />\n              <Input\n                type=\"range\"\n                min=\"0\"\n                max=\"100\"\n                value={progress}\n                onChange={(e) => setProgress(Number(e.target.value))}\n                className=\"mt-2\"\n                data-testid=\"input-task-progress\"\n              />\n            </div>\n          </div>\n\n          {/* Final Report Section - Only for assigned team members */}\n          {canEditFinalReport() && (\n            <div>\n              <Label htmlFor=\"finalReport\" className=\"text-sm font-medium text-muted-foreground\">\n                التقرير النهائي {isAssignedToTask() && \"(للمكلف بالمهمة فقط)\"}\n              </Label>\n              <Textarea\n                id=\"finalReport\"\n                value={finalReport}\n                onChange={(e) => setFinalReport(e.target.value)}\n                placeholder=\"اكتب التقرير النهائي للمهمة هنا...\"\n                className=\"mt-1 min-h-[100px]\"\n                data-testid=\"textarea-final-report\"\n                disabled={!isAssignedToTask() && (user as any)?.role === 'user'}\n              />\n              {task.finalReport && !isAssignedToTask() && (user as any)?.role === 'user' && (\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  يمكن فقط للمكلف بالمهمة تعديل التقرير النهائي\n                </p>\n              )}\n            </div>\n          )}\n\n          {/* Display existing final report for non-assigned users */}\n          {!canEditFinalReport() && task.finalReport && (\n            <div>\n              <Label className=\"text-sm font-medium text-muted-foreground\">\n                التقرير النهائي\n              </Label>\n              <div className=\"mt-1 p-3 bg-muted/50 rounded border text-sm\">\n                {task.finalReport}\n              </div>\n            </div>\n          )}\n          \n          <div className=\"flex space-x-3\">\n            <Button\n              className=\"flex-1\"\n              onClick={handleSave}\n              disabled={updateTaskMutation.isPending}\n              data-testid=\"button-save-task\"\n            >\n              {updateTaskMutation.isPending ? \"حفظ...\" : \"حفظ التغييرات\"}\n            </Button>\n            <ChatButton taskId={task.id} taskTitle={task.title} />\n            <Button\n              variant=\"outline\"\n              className=\"px-6\"\n              onClick={() => onOpenChange(false)}\n              data-testid=\"button-cancel-task\"\n            >\n              إلغاء\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":12778},"client/src/components/tasks/task-filters.tsx":{"content":"import { Button } from \"@/components/ui/button\";\n\ninterface TaskFiltersProps {\n  activeFilter: string;\n  onFilterChange: (filter: string) => void;\n}\n\nexport function TaskFilters({ activeFilter, onFilterChange }: TaskFiltersProps) {\n  const filters = [\n    { key: \"all\", label: \"الكل\" },\n    { key: \"pending\", label: \"في الانتظار\" },\n    { key: \"start\", label: \"بدأت\" },\n    { key: \"complete\", label: \"مكتملة\" },\n  ];\n\n  return (\n    <div className=\"flex space-x-2 mb-4 overflow-x-auto pb-2\">\n      {filters.map(({ key, label }) => (\n        <Button\n          key={key}\n          variant={activeFilter === key ? \"default\" : \"secondary\"}\n          size=\"sm\"\n          className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap touch-manipulation ${\n            activeFilter === key\n              ? \"bg-primary text-primary-foreground\"\n              : \"bg-surface-variant text-on-surface hover:bg-surface-variant/80\"\n          }`}\n          onClick={() => onFilterChange(key)}\n          data-testid={`filter-${key}`}\n        >\n          {label}\n        </Button>\n      ))}\n    </div>\n  );\n}\n","size_bytes":1126},"client/src/components/team/add-member-form.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { InsertTeamMember } from \"@shared/schema\";\nimport { DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\n\ninterface AddMemberFormProps {\n  onSuccess: () => void;\n}\n\nexport function AddMemberForm({ onSuccess }: AddMemberFormProps) {\n  const [name, setName] = useState(\"\");\n  const [role, setRole] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [status, setStatus] = useState(\"available\");\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const createMemberMutation = useMutation({\n    mutationFn: async (member: InsertTeamMember) => {\n      const response = await apiRequest(\"POST\", \"/api/team-members\", member);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      toast({\n        title: \"Team member added successfully\",\n        description: \"The new team member has been added.\",\n      });\n      onSuccess();\n    },\n    onError: () => {\n      toast({\n        title: \"Error adding team member\",\n        description: \"There was a problem adding the team member. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!name.trim() || !role.trim() || !email.trim()) {\n      toast({\n        title: \"Missing required fields\",\n        description: \"Please fill in all required fields.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const member: InsertTeamMember = {\n      name: name.trim(),\n      role: role.trim(),\n      email: email.trim(),\n      status,\n      avatar: name.trim().split(' ').map(n => n[0]).join('').toUpperCase(),\n    };\n\n    createMemberMutation.mutate(member);\n  };\n\n  return (\n    <div>\n      <DialogHeader>\n        <DialogTitle data-testid=\"modal-add-member-title\">Add Team Member</DialogTitle>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n        <div>\n          <Label htmlFor=\"name\">Name *</Label>\n          <Input\n            id=\"name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"Enter member name\"\n            data-testid=\"input-member-name\"\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"role\">Role *</Label>\n          <Input\n            id=\"role\"\n            value={role}\n            onChange={(e) => setRole(e.target.value)}\n            placeholder=\"Enter member role\"\n            data-testid=\"input-member-role\"\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"email\">Email *</Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            placeholder=\"Enter member email\"\n            data-testid=\"input-member-email\"\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"status\">Status</Label>\n          <Select value={status} onValueChange={setStatus}>\n            <SelectTrigger data-testid=\"select-member-status\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"available\">Available</SelectItem>\n              <SelectItem value=\"busy\">Busy</SelectItem>\n              <SelectItem value=\"offline\">Offline</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"flex space-x-3 pt-4\">\n          <Button\n            type=\"submit\"\n            className=\"flex-1\"\n            disabled={createMemberMutation.isPending}\n            data-testid=\"button-submit-member\"\n          >\n            {createMemberMutation.isPending ? \"Adding...\" : \"Add Member\"}\n          </Button>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={onSuccess}\n            data-testid=\"button-cancel-add-member\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n","size_bytes":4516},"client/src/components/team/team-member-card.tsx":{"content":"import { TeamMember } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { ChevronRight, Trash2 } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\n\ninterface TeamMemberCardProps {\n  member: TeamMember;\n}\n\nexport function TeamMemberCard({ member }: TeamMemberCardProps) {\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"available\":\n        return \"availability-available\";\n      case \"busy\":\n        return \"availability-busy\";\n      default:\n        return \"availability-offline\";\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"available\":\n        return \"متاح\";\n      case \"busy\":\n        return \"مشغول\";\n      default:\n        return \"غير متصل\";\n    }\n  };\n\n  const getAvatarColor = (name: string) => {\n    const colors = [\n      \"bg-blue-500\", \n      \"bg-green-500\", \n      \"bg-purple-500\", \n      \"bg-orange-500\",\n      \"bg-pink-500\",\n      \"bg-indigo-500\",\n      \"bg-teal-500\",\n      \"bg-rose-500\"\n    ];\n    const index = name.charCodeAt(0) % colors.length;\n    return colors[index];\n  };\n\n  const getCardBorderColor = (memberId: string) => {\n    const colors = [\n      'border-l-blue-500 bg-blue-50/30',\n      'border-l-green-500 bg-green-50/30',\n      'border-l-purple-500 bg-purple-50/30',\n      'border-l-orange-500 bg-orange-50/30',\n      'border-l-pink-500 bg-pink-50/30',\n      'border-l-indigo-500 bg-indigo-50/30',\n      'border-l-teal-500 bg-teal-50/30',\n      'border-l-rose-500 bg-rose-50/30'\n    ];\n    const hash = memberId.split('').reduce((a, b) => a + b.charCodeAt(0), 0);\n    return colors[hash % colors.length];\n  };\n\n  // Delete member mutation\n  const deleteMemberMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(`/api/team-members/${member.id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to delete team member');\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/team-members'] });\n      toast({\n        title: \"تم الحذف بنجاح\",\n        description: `تم حذف عضو الفريق ${member.name} بنجاح`,\n      });\n      setShowDeleteDialog(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ في الحذف\",\n        description: error.message || \"حدث خطأ أثناء حذف عضو الفريق\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDelete = () => {\n    deleteMemberMutation.mutate();\n  };\n\n  // Check if current user is admin\n  const isAdmin = user && typeof user === 'object' && user !== null && 'role' in user ? (user as any).role === 'admin' : false;\n\n  return (\n    <div className=\"bg-surface rounded-lg p-2 shadow-sm border border-surface-variant/50\" data-testid={`team-member-card-${member.id}`}>\n      <div className=\"flex items-center space-x-2\">\n        <div className={`w-8 h-8 ${getAvatarColor(member.name)} text-white rounded-full flex items-center justify-center font-medium text-sm`}>\n          {member.avatar || member.name.split(' ').map(n => n[0]).join('')}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"font-medium text-sm truncate\" data-testid={`member-name-${member.id}`}>\n            {member.name}\n          </h4>\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-xs text-muted-foreground truncate\" data-testid={`member-role-${member.id}`}>\n              {member.role}\n            </p>\n            <div className=\"flex items-center space-x-1\">\n              <div className={`w-1.5 h-1.5 ${getStatusColor(member.status)} rounded-full`}></div>\n              <span className=\"text-xs text-muted-foreground\" data-testid={`member-status-${member.id}`}>\n                {getStatusLabel(member.status)}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          {isAdmin && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-destructive hover:text-destructive-dark p-1 h-6 w-6\"\n              onClick={() => setShowDeleteDialog(true)}\n              data-testid={`button-delete-member-${member.id}`}\n            >\n              <Trash2 className=\"h-3 w-3\" />\n            </Button>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-primary hover:text-primary-dark p-1 h-6 w-6\"\n            data-testid={`button-member-details-${member.id}`}\n          >\n            <ChevronRight className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      </div>\n\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>تأكيد حذف عضو الفريق</AlertDialogTitle>\n            <AlertDialogDescription>\n              هل أنت متأكد من حذف عضو الفريق \"{member.name}\"؟ \n              هذا الإجراء لا يمكن التراجع عنه.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>إلغاء</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDelete}\n              className=\"bg-destructive hover:bg-destructive/90\"\n              disabled={deleteMemberMutation.isPending}\n            >\n              {deleteMemberMutation.isPending ? \"جاري الحذف...\" : \"حذف\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":6440},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import { cn } from \"@/lib/utils\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { forwardRef } from \"react\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };","size_bytes":1842},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import { cn } from \"@/lib/utils\";\n\nexport interface CardProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst Card = ({ className, ...props }: CardProps) => (\n  <div\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n);\n\nconst CardHeader = ({ className, ...props }: CardProps) => (\n  <div className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n);\n\nconst CardTitle = ({ className, ...props }: CardProps) => (\n  <h3\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n);\n\nconst CardDescription = ({ className, ...props }: CardProps) => (\n  <p className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n);\n\nconst CardContent = ({ className, ...props }: CardProps) => (\n  <div className={cn(\"p-6 pt-0\", className)} {...props} />\n);\n\nconst CardFooter = ({ className, ...props }: CardProps) => (\n  <div className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\n);\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };","size_bytes":1138},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString('en-GB')}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10488},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/company-logo.tsx":{"content":"import logoImage from \"@assets/319159472_2787094371424406_3593723820726937846_n_1755707330246.jpg\";\n\ninterface CompanyLogoProps {\n  className?: string;\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n\nexport function CompanyLogo({ className = \"\", size = \"md\" }: CompanyLogoProps) {\n  const sizeClasses = {\n    sm: \"w-12 h-12\",\n    md: \"w-16 h-16\", \n    lg: \"w-24 h-24\"\n  };\n\n  return (\n    <div className={`${sizeClasses[size]} ${className}`}>\n      <img\n        src={logoImage}\n        alt=\"شركة اشراق الودق لتكنولوجيا المعلومات\"\n        className=\"w-full h-full object-contain rounded-lg\"\n        data-testid=\"company-logo-image\"\n      />\n    </div>\n  );\n}","size_bytes":674},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"import * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};","size_bytes":3855},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };","size_bytes":826},"client/src/components/ui/label.tsx":{"content":"import * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n);\n\nconst Label = forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };","size_bytes":714},"client/src/components/ui/language-switcher.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Globe } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport function LanguageSwitcher() {\n  const { language, setLanguage, t } = useLanguage();\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Globe className=\"w-4 h-4 text-muted-foreground\" />\n      <Select value={language} onValueChange={(value: 'en' | 'ar') => setLanguage(value)}>\n        <SelectTrigger className=\"w-32\" data-testid=\"language-switcher\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"en\" data-testid=\"lang-en\">\n            {t('lang.english')}\n          </SelectItem>\n          <SelectItem value=\"ar\" data-testid=\"lang-ar\">\n            {t('lang.arabic')}\n          </SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n\nexport function LanguageToggleButton() {\n  const { language, setLanguage, t } = useLanguage();\n\n  const toggleLanguage = () => {\n    setLanguage(language === 'en' ? 'ar' : 'en');\n  };\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={toggleLanguage}\n      className=\"flex items-center gap-2\"\n      data-testid=\"language-toggle\"\n    >\n      <Globe className=\"w-4 h-4\" />\n      {language === 'en' ? t('lang.arabic') : t('lang.english')}\n    </Button>\n  );\n}","size_bytes":1457},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as ProgressPrimitive from \"@radix-ui/react-progress\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst Progress = forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };","size_bytes":779},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"import * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};","size_bytes":5597},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\";\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  );\n}\n\nexport { Skeleton };","size_bytes":263},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };","size_bytes":774},"client/src/components/ui/toast.tsx":{"content":"import * as ToastPrimitives from \"@radix-ui/react-toast\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nconst Toast = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  );\n});\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};","size_bytes":4828},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\";\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\";\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  );\n}","size_bytes":776},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"import * as TooltipPrimitive from \"@radix-ui/react-tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { forwardRef } from \"react\";\n\nconst TooltipProvider = TooltipPrimitive.Provider;\n\nconst Tooltip = TooltipPrimitive.Root;\n\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\nconst TooltipContent = forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };","size_bytes":1150},"client/src/components/ScrollToTop.tsx":{"content":"import { useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\n\nexport function ScrollToTop() {\n  const [location] = useLocation();\n\n  useEffect(() => {\n    // Scroll to top when route changes\n    window.scrollTo({ top: 0, left: 0, behavior: 'instant' });\n    \n    // Also ensure any modal containers scroll to top\n    const containers = document.querySelectorAll('[data-scroll-container], .overflow-auto, .overflow-y-auto, main');\n    containers.forEach(container => {\n      if (container.scrollTop > 0) {\n        container.scrollTo({ top: 0, left: 0, behavior: 'instant' });\n      }\n    });\n\n    // Add route transition class to body for animation\n    document.body.classList.add('route-transition');\n    setTimeout(() => {\n      document.body.classList.remove('route-transition');\n    }, 200);\n  }, [location]);\n\n  return null; // This component doesn't render anything\n}","size_bytes":884},"QUICK_START_WINDOWS.md":{"content":"# دليل التشغيل السريع لـ TaskFlow على ويندوز سيرفر\n\n## ✅ الخطوات المطلوبة بالترتيب:\n\n### 1. تثبيت المتطلبات الأساسية\n\n#### تثبيت Node.js:\n1. اذهب إلى https://nodejs.org/\n2. حمل النسخة LTS (حالياً 18.x أو 20.x)\n3. شغل الملف المحمل واتبع التعليمات\n4. للتأكد من التثبيت، افتح Command Prompt وأكتب:\n```cmd\nnode --version\nnpm --version\n```\n\n#### تثبيت PostgreSQL:\n1. اذهب إلى https://www.postgresql.org/download/windows/\n2. حمل PostgreSQL 14 أو أحدث\n3. شغل الملف المحمل\n4. أثناء التثبيت:\n   - اختر كلمة مرور قوية للمستخدم postgres\n   - اتركPorts الافتراضي (5432)\n   - احفظ كلمة المرور في مكان آمن\n\n### 2. إعداد قاعدة البيانات\n\n1. افتح **pgAdmin** (يتم تثبيته مع PostgreSQL)\n2. اتصل بالسيرفر المحلي باستخدام كلمة مرور postgres\n3. انشئ قاعدة بيانات جديدة:\n   - اضغط بالزر الأيمن على \"Databases\"\n   - اختر \"Create > Database\"\n   - اسم قاعدة البيانات: `taskflow_db`\n   - اضغط Save\n\n### 3. نسخ ملفات التطبيق\n\n1. انسخ جميع ملفات المشروع إلى مجلد على السيرفر (مثال: `C:\\TaskFlow\\`)\n2. تأكد من وجود جميع المجلدات:\n   - client/\n   - server/\n   - shared/\n   - package.json\n\n### 4. تثبيت تبعيات التطبيق\n\n1. افتح Command Prompt كمدير (Run as Administrator)\n2. انتقل إلى مجلد التطبيق:\n```cmd\ncd C:\\TaskFlow\\\n```\n3. ثبت التبعيات:\n```cmd\nnpm install\n```\n\n### 5. إعداد متغيرات البيئة\n\n1. انسخ ملف `.env.example` إلى `.env`:\n```cmd\ncopy .env.example .env\n```\n2. افتح ملف `.env` بأي محرر نصوص وعدل المتغيرات:\n```env\nDATABASE_URL=postgresql://postgres:كلمة_المرور_هنا@localhost:5432/taskflow_db\nSESSION_SECRET=مفتاح_سري_عشوائي_طويل\nNODE_ENV=production\nPORT=5000\n```\n\n### 6. إعداد قاعدة البيانات الأولي\n\n1. في نفس Command Prompt:\n```cmd\nnpm run db:push\n```\nهذا الأمر سينشئ جميع الجداول المطلوبة في قاعدة البيانات.\n\n### 7. بناء التطبيق\n\n```cmd\nnpm run build\n```\n\n### 8. تشغيل التطبيق\n\n#### للتشغيل العادي:\n```cmd\nnpm start\n```\n\n#### للتشغيل مع إعادة التحميل التلقائي (أثناء التطوير):\n```cmd\nnpm run dev\n```\n\n### 9. الوصول إلى التطبيق\n\n1. افتح المتصفح\n2. اذهب إلى: http://localhost:5000\n3. بيانات تسجيل الدخول الافتراضية:\n   - اسم المستخدم: `administrator`\n   - كلمة المرور: `wdq@#$`\n\n## 🔧 إعدادات إضافية (اختيارية)\n\n### فتح المنفذ في Windows Firewall:\n```powershell\nNew-NetFirewallRule -DisplayName \"TaskFlow App\" -Direction Inbound -Port 5000 -Protocol TCP -Action Allow\n```\n\n### تشغيل التطبيق كخدمة ويندوز:\n\n1. ثبت PM2:\n```cmd\nnpm install -g pm2\nnpm install -g pm2-windows-service\n```\n\n2. إعداد PM2 كخدمة:\n```cmd\npm2-service-install\n```\n\n3. إضافة TaskFlow لـ PM2:\n```cmd\npm2 start npm --name \"TaskFlow\" -- start\npm2 save\n```\n\nالآن سيعمل التطبيق تلقائياً عند إعادة تشغيل السيرفر.\n\n## 🐛 حل المشاكل الشائعة\n\n### مشكلة: \"Port 5000 is already in use\"\n```cmd\n# تغيير المنفذ في ملف .env\nPORT=3000\n```\n\n### مشكلة: \"Cannot connect to database\"\n- تأكد من تشغيل PostgreSQL\n- تحقق من صحة كلمة المرور في ملف .env\n- تأكد من اسم قاعدة البيانات\n\n### مشكلة: صفحة فارغة في المتصفح\n```cmd\n# تأكد من بناء التطبيق\nnpm run build\n```\n\n### مشكلة: \"npm command not found\"\n- تأكد من تثبيت Node.js بشكل صحيح\n- أعد تشغيل Command Prompt\n\n## 📋 أوامر مفيدة\n\n```cmd\n# مشاهدة حالة التطبيق\npm2 list\n\n# مشاهدة السجلات\npm2 logs TaskFlow\n\n# إعادة تشغيل التطبيق\npm2 restart TaskFlow\n\n# إيقاف التطبيق\npm2 stop TaskFlow\n\n# حذف التطبيق من PM2\npm2 delete TaskFlow\n```\n\n## 🎯 ملاحظات مهمة\n\n1. **أمان**: غير كلمة المرور الافتراضية بعد أول تسجيل دخول\n2. **النسخ الاحتياطي**: اعمل نسخة احتياطية من قاعدة البيانات بانتظام\n3. **التحديثات**: تابع التحديثات الأمنية لـ Node.js و PostgreSQL\n4. **المراقبة**: راقب استخدام الذاكرة والمعالج\n\n## 📞 الدعم الفني\n\nإذا واجهت أي مشاكل:\n1. تحقق من السجلات في Command Prompt\n2. تأكد من تشغيل جميع الخدمات المطلوبة\n3. راجع ملف .env للتأكد من صحة الإعدادات\n\n---\n**نصيحة**: احفظ هذا الدليل في مكان يسهل الوصول إليه للرجوع إليه لاحقاً.","size_bytes":5260},"TaskFlow-Complete/client/assets/index-BMaAhh2Z.js":{"content":"var ZF=Object.defineProperty;var jj=e=>{throw TypeError(e)};var XF=(e,t,n)=>t in e?ZF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var L=(e,t,n)=>XF(e,typeof t!=\"symbol\"?t+\"\":t,n),Xg=(e,t,n)=>t.has(e)||jj(\"Cannot \"+n);var S=(e,t,n)=>(Xg(e,t,\"read from private field\"),n?n.call(e):t.get(e)),$=(e,t,n)=>t.has(e)?jj(\"Cannot add the same private member more than once\"):t instanceof WeakSet?t.add(e):t.set(e,n),U=(e,t,n,s)=>(Xg(e,t,\"write to private field\"),s?s.call(e,n):t.set(e,n),n),z=(e,t,n)=>(Xg(e,t,\"access private method\"),n);var Xh=(e,t,n,s)=>({set _(r){U(e,t,r,n)},get _(){return S(e,t,s)}});function JF(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!=\"string\"&&!Array.isArray(s)){for(const r in s)if(r!==\"default\"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}))}(function(){const t=document.createElement(\"link\").relList;if(t&&t.supports&&t.supports(\"modulepreload\"))return;for(const r of document.querySelectorAll('link[rel=\"modulepreload\"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type===\"childList\")for(const a of i.addedNodes)a.tagName===\"LINK\"&&a.rel===\"modulepreload\"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin===\"use-credentials\"?i.credentials=\"include\":r.crossOrigin===\"anonymous\"?i.credentials=\"omit\":i.credentials=\"same-origin\",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Jh=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{};function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var U_={exports:{}},Qm={},B_={exports:{}},Re={};/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var wh=Symbol.for(\"react.element\"),eO=Symbol.for(\"react.portal\"),tO=Symbol.for(\"react.fragment\"),nO=Symbol.for(\"react.strict_mode\"),sO=Symbol.for(\"react.profiler\"),rO=Symbol.for(\"react.provider\"),iO=Symbol.for(\"react.context\"),aO=Symbol.for(\"react.forward_ref\"),oO=Symbol.for(\"react.suspense\"),lO=Symbol.for(\"react.memo\"),cO=Symbol.for(\"react.lazy\"),Sj=Symbol.iterator;function uO(e){return e===null||typeof e!=\"object\"?null:(e=Sj&&e[Sj]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var V_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z_=Object.assign,W_={};function Uc(e,t,n){this.props=e,this.context=t,this.refs=W_,this.updater=n||V_}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(e,t){if(typeof e!=\"object\"&&typeof e!=\"function\"&&e!=null)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,e,t,\"setState\")};Uc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")};function H_(){}H_.prototype=Uc.prototype;function dw(e,t,n){this.props=e,this.context=t,this.refs=W_,this.updater=n||V_}var hw=dw.prototype=new H_;hw.constructor=dw;z_(hw,Uc.prototype);hw.isPureReactComponent=!0;var Nj=Array.isArray,q_=Object.prototype.hasOwnProperty,fw={current:null},K_={key:!0,ref:!0,__self:!0,__source:!0};function G_(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=\"\"+t.key),t)q_.call(t,s)&&!K_.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:wh,type:e,key:i,ref:a,props:r,_owner:fw.current}}function dO(e,t){return{$$typeof:wh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pw(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===wh}function hO(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+e.replace(/[=:]/g,function(n){return t[n]})}var Cj=/\\/+/g;function Jg(e,t){return typeof e==\"object\"&&e!==null&&e.key!=null?hO(\"\"+e.key):t.toString(36)}function zf(e,t,n,s,r){var i=typeof e;(i===\"undefined\"||i===\"boolean\")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case\"string\":case\"number\":a=!0;break;case\"object\":switch(e.$$typeof){case wh:case eO:a=!0}}if(a)return a=e,r=r(a),e=s===\"\"?\".\"+Jg(a,0):s,Nj(r)?(n=\"\",e!=null&&(n=e.replace(Cj,\"$&/\")+\"/\"),zf(r,t,n,\"\",function(u){return u})):r!=null&&(pw(r)&&(r=dO(r,n+(!r.key||a&&a.key===r.key?\"\":(\"\"+r.key).replace(Cj,\"$&/\")+\"/\")+e)),t.push(r)),1;if(a=0,s=s===\"\"?\".\":s+\":\",Nj(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Jg(i,l);a+=zf(i,t,n,c,r)}else if(c=uO(e),typeof c==\"function\")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Jg(i,l++),a+=zf(i,t,n,c,r);else if(i===\"object\")throw t=String(e),Error(\"Objects are not valid as a React child (found: \"+(t===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":t)+\"). If you meant to render a collection of children, use an array instead.\");return a}function ef(e,t,n){if(e==null)return e;var s=[],r=0;return zf(e,s,\"\",\"\",function(i){return t.call(n,i,r++)}),s}function fO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},Wf={transition:null},pO={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Wf,ReactCurrentOwner:fw};function Y_(){throw Error(\"act(...) is not supported in production builds of React.\")}Re.Children={map:ef,forEach:function(e,t,n){ef(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ef(e,function(){t++}),t},toArray:function(e){return ef(e,function(t){return t})||[]},only:function(e){if(!pw(e))throw Error(\"React.Children.only expected to receive a single React element child.\");return e}};Re.Component=Uc;Re.Fragment=tO;Re.Profiler=sO;Re.PureComponent=dw;Re.StrictMode=nO;Re.Suspense=oO;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pO;Re.act=Y_;Re.cloneElement=function(e,t,n){if(e==null)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+e+\".\");var s=z_({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=fw.current),t.key!==void 0&&(r=\"\"+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)q_.call(t,c)&&!K_.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:wh,type:e.type,key:r,ref:i,props:s,_owner:a}};Re.createContext=function(e){return e={$$typeof:iO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rO,_context:e},e.Consumer=e};Re.createElement=G_;Re.createFactory=function(e){var t=G_.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:aO,render:e}};Re.isValidElement=pw;Re.lazy=function(e){return{$$typeof:cO,_payload:{_status:-1,_result:e},_init:fO}};Re.memo=function(e,t){return{$$typeof:lO,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=Wf.transition;Wf.transition={};try{e()}finally{Wf.transition=t}};Re.unstable_act=Y_;Re.useCallback=function(e,t){return _n.current.useCallback(e,t)};Re.useContext=function(e){return _n.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};Re.useEffect=function(e,t){return _n.current.useEffect(e,t)};Re.useId=function(){return _n.current.useId()};Re.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return _n.current.useMemo(e,t)};Re.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};Re.useRef=function(e){return _n.current.useRef(e)};Re.useState=function(e){return _n.current.useState(e)};Re.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return _n.current.useTransition()};Re.version=\"18.3.1\";B_.exports=Re;var m=B_.exports;const je=di(m),Q_=JF({__proto__:null,default:je},[m]);/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var mO=m,gO=Symbol.for(\"react.element\"),yO=Symbol.for(\"react.fragment\"),vO=Object.prototype.hasOwnProperty,xO=mO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wO={key:!0,ref:!0,__self:!0,__source:!0};function Z_(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=\"\"+n),t.key!==void 0&&(i=\"\"+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)vO.call(t,s)&&!wO.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:gO,type:e,key:i,ref:a,props:r,_owner:xO.current}}Qm.Fragment=yO;Qm.jsx=Z_;Qm.jsxs=Z_;U_.exports=Qm;var o=U_.exports,X_={exports:{}},Xn={},J_={exports:{}},eP={};/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */(function(e){function t(_,B){var Q=_.length;_.push(B);e:for(;0<Q;){var se=Q-1>>>1,Ee=_[se];if(0<r(Ee,B))_[se]=B,_[Q]=Ee,Q=se;else break e}}function n(_){return _.length===0?null:_[0]}function s(_){if(_.length===0)return null;var B=_[0],Q=_.pop();if(Q!==B){_[0]=Q;e:for(var se=0,Ee=_.length,ft=Ee>>>1;se<ft;){var X=2*(se+1)-1,Xe=_[X],nt=X+1,me=_[nt];if(0>r(Xe,Q))nt<Ee&&0>r(me,Xe)?(_[se]=me,_[nt]=Q,se=nt):(_[se]=Xe,_[X]=Q,se=X);else if(nt<Ee&&0>r(me,Q))_[se]=me,_[nt]=Q,se=nt;else break e}}return B}function r(_,B){var Q=_.sortIndex-B.sortIndex;return Q!==0?Q:_.id-B.id}if(typeof performance==\"object\"&&typeof performance.now==\"function\"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,x=!1,g=!1,b=typeof setTimeout==\"function\"?setTimeout:null,v=typeof clearTimeout==\"function\"?clearTimeout:null,y=typeof setImmediate<\"u\"?setImmediate:null;typeof navigator<\"u\"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(_){for(var B=n(u);B!==null;){if(B.callback===null)s(u);else if(B.startTime<=_)s(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(u)}}function j(_){if(g=!1,w(_),!x)if(n(c)!==null)x=!0,K(N);else{var B=n(u);B!==null&&I(j,B.startTime-_)}}function N(_,B){x=!1,g&&(g=!1,v(T),T=-1),p=!0;var Q=f;try{for(w(B),h=n(c);h!==null&&(!(h.expirationTime>B)||_&&!O());){var se=h.callback;if(typeof se==\"function\"){h.callback=null,f=h.priorityLevel;var Ee=se(h.expirationTime<=B);B=e.unstable_now(),typeof Ee==\"function\"?h.callback=Ee:h===n(c)&&s(c),w(B)}else s(c);h=n(c)}if(h!==null)var ft=!0;else{var X=n(u);X!==null&&I(j,X.startTime-B),ft=!1}return ft}finally{h=null,f=Q,p=!1}}var k=!1,C=null,T=-1,M=5,E=-1;function O(){return!(e.unstable_now()-E<M)}function D(){if(C!==null){var _=e.unstable_now();E=_;var B=!0;try{B=C(!0,_)}finally{B?q():(k=!1,C=null)}}else k=!1}var q;if(typeof y==\"function\")q=function(){y(D)};else if(typeof MessageChannel<\"u\"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=D,q=function(){R.postMessage(null)}}else q=function(){b(D,0)};function K(_){C=_,k||(k=!0,q())}function I(_,B){T=b(function(){_(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,K(N))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):M=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(_){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var Q=f;f=B;try{return _()}finally{f=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,B){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Q=f;f=_;try{return B()}finally{f=Q}},e.unstable_scheduleCallback=function(_,B,Q){var se=e.unstable_now();switch(typeof Q==\"object\"&&Q!==null?(Q=Q.delay,Q=typeof Q==\"number\"&&0<Q?se+Q:se):Q=se,_){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Q+Ee,_={id:d++,callback:B,priorityLevel:_,startTime:Q,expirationTime:Ee,sortIndex:-1},Q>se?(_.sortIndex=Q,t(u,_),n(c)===null&&_===n(u)&&(g?(v(T),T=-1):g=!0,I(j,Q-se))):(_.sortIndex=Ee,t(c,_),x||p||(x=!0,K(N))),_},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(_){var B=f;return function(){var Q=f;f=B;try{return _.apply(this,arguments)}finally{f=Q}}}})(eP);J_.exports=eP;var bO=J_.exports;/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var jO=m,Yn=bO;function Y(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,n=1;n<arguments.length;n++)t+=\"&args[]=\"+encodeURIComponent(arguments[n]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var tP=new Set,ed={};function $o(e,t){dc(e,t),dc(e+\"Capture\",t)}function dc(e,t){for(ed[e]=t,e=0;e<t.length;e++)tP.add(t[e])}var si=!(typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"),Mv=Object.prototype.hasOwnProperty,SO=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,_j={},Pj={};function NO(e){return Mv.call(Pj,e)?!0:Mv.call(_j,e)?!1:SO.test(e)?Pj[e]=!0:(_j[e]=!0,!1)}function CO(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!==\"data-\"&&e!==\"aria-\");default:return!1}}function _O(e,t,n,s){if(t===null||typeof t>\"u\"||CO(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Zt={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){Zt[e]=new Pn(e,0,!1,e,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];Zt[t]=new Pn(t,1,!1,e[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){Zt[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){Zt[e]=new Pn(e,2,!1,e,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){Zt[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){Zt[e]=new Pn(e,3,!0,e,null,!1,!1)});[\"capture\",\"download\"].forEach(function(e){Zt[e]=new Pn(e,4,!1,e,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){Zt[e]=new Pn(e,6,!1,e,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(e){Zt[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var mw=/[\\-:]([a-z])/g;function gw(e){return e[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(mw,gw);Zt[t]=new Pn(t,1,!1,e,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(mw,gw);Zt[t]=new Pn(t,1,!1,e,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(mw,gw);Zt[t]=new Pn(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(e){Zt[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new Pn(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(e){Zt[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function yw(e,t,n,s){var r=Zt.hasOwnProperty(t)?Zt[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!==\"o\"&&t[0]!==\"O\"||t[1]!==\"n\"&&t[1]!==\"N\")&&(_O(t,n,r,s)&&(n=null),s||r===null?NO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,\"\"+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:\"\":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?\"\":\"\"+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var hi=jO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tf=Symbol.for(\"react.element\"),el=Symbol.for(\"react.portal\"),tl=Symbol.for(\"react.fragment\"),vw=Symbol.for(\"react.strict_mode\"),Rv=Symbol.for(\"react.profiler\"),nP=Symbol.for(\"react.provider\"),sP=Symbol.for(\"react.context\"),xw=Symbol.for(\"react.forward_ref\"),Dv=Symbol.for(\"react.suspense\"),Fv=Symbol.for(\"react.suspense_list\"),ww=Symbol.for(\"react.memo\"),Ni=Symbol.for(\"react.lazy\"),rP=Symbol.for(\"react.offscreen\"),kj=Symbol.iterator;function Jc(e){return e===null||typeof e!=\"object\"?null:(e=kj&&e[kj]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var ht=Object.assign,ey;function vu(e){if(ey===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\\n( *(at )?)/);ey=t&&t[1]||\"\"}return`\n`+ey+e}var ty=!1;function ny(e,t){if(!e||ty)return\"\";ty=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack==\"string\"){for(var r=u.stack.split(`\n`),i=s.stack.split(`\n`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`\n`+r[a].replace(\" at new \",\" at \");return e.displayName&&c.includes(\"<anonymous>\")&&(c=c.replace(\"<anonymous>\",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{ty=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:\"\")?vu(e):\"\"}function PO(e){switch(e.tag){case 5:return vu(e.type);case 16:return vu(\"Lazy\");case 13:return vu(\"Suspense\");case 19:return vu(\"SuspenseList\");case 0:case 2:case 15:return e=ny(e.type,!1),e;case 11:return e=ny(e.type.render,!1),e;case 1:return e=ny(e.type,!0),e;default:return\"\"}}function Ov(e){if(e==null)return null;if(typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case tl:return\"Fragment\";case el:return\"Portal\";case Rv:return\"Profiler\";case vw:return\"StrictMode\";case Dv:return\"Suspense\";case Fv:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case sP:return(e.displayName||\"Context\")+\".Consumer\";case nP:return(e._context.displayName||\"Context\")+\".Provider\";case xw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||\"\",e=e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\"),e;case ww:return t=e.displayName||null,t!==null?t:Ov(e.type)||\"Memo\";case Ni:t=e._payload,e=e._init;try{return Ov(e(t))}catch{}}return null}function kO(e){var t=e.type;switch(e.tag){case 24:return\"Cache\";case 9:return(t.displayName||\"Context\")+\".Consumer\";case 10:return(t._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return e=t.render,e=e.displayName||e.name||\"\",t.displayName||(e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return t;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Ov(t);case 8:return t===vw?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";case 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t==\"function\")return t.displayName||t.name||null;if(typeof t==\"string\")return t}return null}function ra(e){switch(typeof e){case\"boolean\":case\"number\":case\"string\":case\"undefined\":return e;case\"object\":return e;default:return\"\"}}function iP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===\"input\"&&(t===\"checkbox\"||t===\"radio\")}function TO(e){var t=iP(e)?\"checked\":\"value\",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=\"\"+e[t];if(!e.hasOwnProperty(t)&&typeof n<\"u\"&&typeof n.get==\"function\"&&typeof n.set==\"function\"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=\"\"+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=\"\"+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nf(e){e._valueTracker||(e._valueTracker=TO(e))}function aP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s=\"\";return e&&(s=iP(e)?e.checked?\"true\":\"false\":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function bp(e){if(e=e||(typeof document<\"u\"?document:void 0),typeof e>\"u\")return null;try{return e.activeElement||e.body}catch{return e.body}}function Iv(e,t){var n=t.checked;return ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Tj(e,t){var n=t.defaultValue==null?\"\":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ra(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type===\"checkbox\"||t.type===\"radio\"?t.checked!=null:t.value!=null}}function oP(e,t){t=t.checked,t!=null&&yw(e,\"checked\",t,!1)}function Lv(e,t){oP(e,t);var n=ra(t.value),s=t.type;if(n!=null)s===\"number\"?(n===0&&e.value===\"\"||e.value!=n)&&(e.value=\"\"+n):e.value!==\"\"+n&&(e.value=\"\"+n);else if(s===\"submit\"||s===\"reset\"){e.removeAttribute(\"value\");return}t.hasOwnProperty(\"value\")?$v(e,t.type,n):t.hasOwnProperty(\"defaultValue\")&&$v(e,t.type,ra(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ej(e,t,n){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var s=t.type;if(!(s!==\"submit\"&&s!==\"reset\"||t.value!==void 0&&t.value!==null))return;t=\"\"+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==\"\"&&(e.name=\"\"),e.defaultChecked=!!e._wrapperState.initialChecked,n!==\"\"&&(e.name=n)}function $v(e,t,n){(t!==\"number\"||bp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+n&&(e.defaultValue=\"\"+n))}var xu=Array.isArray;function wl(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t[\"$\"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty(\"$\"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=\"\"+ra(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Uv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ht({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function Aj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(xu(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=\"\"),n=t}e._wrapperState={initialValue:ra(n)}}function lP(e,t){var n=ra(t.value),s=ra(t.defaultValue);n!=null&&(n=\"\"+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=\"\"+s)}function Mj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==\"\"&&t!==null&&(e.value=t)}function cP(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function Bv(e,t){return e==null||e===\"http://www.w3.org/1999/xhtml\"?cP(t):e===\"http://www.w3.org/2000/svg\"&&t===\"foreignObject\"?\"http://www.w3.org/1999/xhtml\":e}var sf,uP=function(e){return typeof MSApp<\"u\"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!==\"http://www.w3.org/2000/svg\"||\"innerHTML\"in e)e.innerHTML=t;else{for(sf=sf||document.createElement(\"div\"),sf.innerHTML=\"<svg>\"+t.valueOf().toString()+\"</svg>\",t=sf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function td(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EO=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(Ru).forEach(function(e){EO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ru[t]=Ru[e]})});function dP(e,t,n){return t==null||typeof t==\"boolean\"||t===\"\"?\"\":n||typeof t!=\"number\"||t===0||Ru.hasOwnProperty(e)&&Ru[e]?(\"\"+t).trim():t+\"px\"}function hP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf(\"--\")===0,r=dP(n,t[n],s);n===\"float\"&&(n=\"cssFloat\"),s?e.setProperty(n,r):e[n]=r}}var AO=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vv(e,t){if(t){if(AO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!=\"object\"||!(\"__html\"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!=\"object\")throw Error(Y(62))}}function zv(e,t){if(e.indexOf(\"-\")===-1)return typeof t.is==\"string\";switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var Wv=null;function bw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hv=null,bl=null,jl=null;function Rj(e){if(e=Sh(e)){if(typeof Hv!=\"function\")throw Error(Y(280));var t=e.stateNode;t&&(t=tg(t),Hv(e.stateNode,e.type,t))}}function fP(e){bl?jl?jl.push(e):jl=[e]:bl=e}function pP(){if(bl){var e=bl,t=jl;if(jl=bl=null,Rj(e),t)for(e=0;e<t.length;e++)Rj(t[e])}}function mP(e,t){return e(t)}function gP(){}var sy=!1;function yP(e,t,n){if(sy)return e(t,n);sy=!0;try{return mP(e,t,n)}finally{sy=!1,(bl!==null||jl!==null)&&(gP(),pP())}}function nd(e,t){var n=e.stateNode;if(n===null)return null;var s=tg(n);if(s===null)return null;n=s[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(s=!s.disabled)||(e=e.type,s=!(e===\"button\"||e===\"input\"||e===\"select\"||e===\"textarea\")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!=\"function\")throw Error(Y(231,t,typeof n));return n}var qv=!1;if(si)try{var eu={};Object.defineProperty(eu,\"passive\",{get:function(){qv=!0}}),window.addEventListener(\"test\",eu,eu),window.removeEventListener(\"test\",eu,eu)}catch{qv=!1}function MO(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Du=!1,jp=null,Sp=!1,Kv=null,RO={onError:function(e){Du=!0,jp=e}};function DO(e,t,n,s,r,i,a,l,c){Du=!1,jp=null,MO.apply(RO,arguments)}function FO(e,t,n,s,r,i,a,l,c){if(DO.apply(this,arguments),Du){if(Du){var u=jp;Du=!1,jp=null}else throw Error(Y(198));Sp||(Sp=!0,Kv=u)}}function Uo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dj(e){if(Uo(e)!==e)throw Error(Y(188))}function OO(e){var t=e.alternate;if(!t){if(t=Uo(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Dj(r),e;if(i===s)return Dj(r),t;i=i.sibling}throw Error(Y(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function xP(e){return e=OO(e),e!==null?wP(e):null}function wP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wP(e);if(t!==null)return t;e=e.sibling}return null}var bP=Yn.unstable_scheduleCallback,Fj=Yn.unstable_cancelCallback,IO=Yn.unstable_shouldYield,LO=Yn.unstable_requestPaint,wt=Yn.unstable_now,$O=Yn.unstable_getCurrentPriorityLevel,jw=Yn.unstable_ImmediatePriority,jP=Yn.unstable_UserBlockingPriority,Np=Yn.unstable_NormalPriority,UO=Yn.unstable_LowPriority,SP=Yn.unstable_IdlePriority,Zm=null,wr=null;function BO(e){if(wr&&typeof wr.onCommitFiberRoot==\"function\")try{wr.onCommitFiberRoot(Zm,e,void 0,(e.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:WO,VO=Math.log,zO=Math.LN2;function WO(e){return e>>>=0,e===0?32:31-(VO(e)/zO|0)|0}var rf=64,af=4194304;function wu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cp(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=wu(l):(i&=a,i!==0&&(s=wu(i)))}else a=n&~r,a!==0?s=wu(a):i!==0&&(s=wu(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-zs(t),r=1<<n,s|=e[n],t&=~r;return s}function HO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qO(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-zs(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=HO(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Gv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NP(){var e=rf;return rf<<=1,!(rf&4194240)&&(rf=64),e}function ry(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zs(t),e[t]=n}function KO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-zs(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function Sw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-zs(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var Qe=0;function CP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _P,Nw,PP,kP,TP,Yv=!1,of=[],qi=null,Ki=null,Gi=null,sd=new Map,rd=new Map,_i=[],GO=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");function Oj(e,t){switch(e){case\"focusin\":case\"focusout\":qi=null;break;case\"dragenter\":case\"dragleave\":Ki=null;break;case\"mouseover\":case\"mouseout\":Gi=null;break;case\"pointerover\":case\"pointerout\":sd.delete(t.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":rd.delete(t.pointerId)}}function tu(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Sh(t),t!==null&&Nw(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function YO(e,t,n,s,r){switch(t){case\"focusin\":return qi=tu(qi,e,t,n,s,r),!0;case\"dragenter\":return Ki=tu(Ki,e,t,n,s,r),!0;case\"mouseover\":return Gi=tu(Gi,e,t,n,s,r),!0;case\"pointerover\":var i=r.pointerId;return sd.set(i,tu(sd.get(i)||null,e,t,n,s,r)),!0;case\"gotpointercapture\":return i=r.pointerId,rd.set(i,tu(rd.get(i)||null,e,t,n,s,r)),!0}return!1}function EP(e){var t=Ia(e.target);if(t!==null){var n=Uo(t);if(n!==null){if(t=n.tag,t===13){if(t=vP(n),t!==null){e.blockedOn=t,TP(e.priority,function(){PP(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Wv=s,n.target.dispatchEvent(s),Wv=null}else return t=Sh(n),t!==null&&Nw(t),e.blockedOn=n,!1;t.shift()}return!0}function Ij(e,t,n){Hf(e)&&n.delete(t)}function QO(){Yv=!1,qi!==null&&Hf(qi)&&(qi=null),Ki!==null&&Hf(Ki)&&(Ki=null),Gi!==null&&Hf(Gi)&&(Gi=null),sd.forEach(Ij),rd.forEach(Ij)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Yv||(Yv=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,QO)))}function id(e){function t(r){return nu(r,e)}if(0<of.length){nu(of[0],e);for(var n=1;n<of.length;n++){var s=of[n];s.blockedOn===e&&(s.blockedOn=null)}}for(qi!==null&&nu(qi,e),Ki!==null&&nu(Ki,e),Gi!==null&&nu(Gi,e),sd.forEach(t),rd.forEach(t),n=0;n<_i.length;n++)s=_i[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)EP(n),n.blockedOn===null&&_i.shift()}var Sl=hi.ReactCurrentBatchConfig,_p=!0;function ZO(e,t,n,s){var r=Qe,i=Sl.transition;Sl.transition=null;try{Qe=1,Cw(e,t,n,s)}finally{Qe=r,Sl.transition=i}}function XO(e,t,n,s){var r=Qe,i=Sl.transition;Sl.transition=null;try{Qe=4,Cw(e,t,n,s)}finally{Qe=r,Sl.transition=i}}function Cw(e,t,n,s){if(_p){var r=Qv(e,t,n,s);if(r===null)py(e,t,s,Pp,n),Oj(e,s);else if(YO(r,e,t,n,s))s.stopPropagation();else if(Oj(e,s),t&4&&-1<GO.indexOf(e)){for(;r!==null;){var i=Sh(r);if(i!==null&&_P(i),i=Qv(e,t,n,s),i===null&&py(e,t,s,Pp,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else py(e,t,s,null,n)}}var Pp=null;function Qv(e,t,n,s){if(Pp=null,e=bw(s),e=Ia(e),e!==null)if(t=Uo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pp=e,null}function AP(e){switch(e){case\"cancel\":case\"click\":case\"close\":case\"contextmenu\":case\"copy\":case\"cut\":case\"auxclick\":case\"dblclick\":case\"dragend\":case\"dragstart\":case\"drop\":case\"focusin\":case\"focusout\":case\"input\":case\"invalid\":case\"keydown\":case\"keypress\":case\"keyup\":case\"mousedown\":case\"mouseup\":case\"paste\":case\"pause\":case\"play\":case\"pointercancel\":case\"pointerdown\":case\"pointerup\":case\"ratechange\":case\"reset\":case\"resize\":case\"seeked\":case\"submit\":case\"touchcancel\":case\"touchend\":case\"touchstart\":case\"volumechange\":case\"change\":case\"selectionchange\":case\"textInput\":case\"compositionstart\":case\"compositionend\":case\"compositionupdate\":case\"beforeblur\":case\"afterblur\":case\"beforeinput\":case\"blur\":case\"fullscreenchange\":case\"focus\":case\"hashchange\":case\"popstate\":case\"select\":case\"selectstart\":return 1;case\"drag\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"mousemove\":case\"mouseout\":case\"mouseover\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"scroll\":case\"toggle\":case\"touchmove\":case\"wheel\":case\"mouseenter\":case\"mouseleave\":case\"pointerenter\":case\"pointerleave\":return 4;case\"message\":switch($O()){case jw:return 1;case jP:return 4;case Np:case UO:return 16;case SP:return 536870912;default:return 16}default:return 16}}var Bi=null,_w=null,qf=null;function MP(){if(qf)return qf;var e,t=_w,n=t.length,s,r=\"value\"in Bi?Bi.value:Bi.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return qf=r.slice(e,1<s?1-s:void 0)}function Kf(e){var t=e.keyCode;return\"charCode\"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lf(){return!0}function Lj(){return!1}function Jn(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lf:Lj,this.isPropagationStopped=Lj,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!=\"unknown\"&&(n.returnValue=!1),this.isDefaultPrevented=lf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!=\"unknown\"&&(n.cancelBubble=!0),this.isPropagationStopped=lf)},persist:function(){},isPersistent:lf}),t}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pw=Jn(Bc),jh=ht({},Bc,{view:0,detail:0}),JO=Jn(jh),iy,ay,su,Xm=ht({},jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return\"movementX\"in e?e.movementX:(e!==su&&(su&&e.type===\"mousemove\"?(iy=e.screenX-su.screenX,ay=e.screenY-su.screenY):ay=iy=0,su=e),iy)},movementY:function(e){return\"movementY\"in e?e.movementY:ay}}),$j=Jn(Xm),e3=ht({},Xm,{dataTransfer:0}),t3=Jn(e3),n3=ht({},jh,{relatedTarget:0}),oy=Jn(n3),s3=ht({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),r3=Jn(s3),i3=ht({},Bc,{clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),a3=Jn(i3),o3=ht({},Bc,{data:0}),Uj=Jn(o3),l3={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},c3={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},u3={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function d3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=u3[e])?!!t[e]:!1}function kw(){return d3}var h3=ht({},jh,{key:function(e){if(e.key){var t=l3[e.key]||e.key;if(t!==\"Unidentified\")return t}return e.type===\"keypress\"?(e=Kf(e),e===13?\"Enter\":String.fromCharCode(e)):e.type===\"keydown\"||e.type===\"keyup\"?c3[e.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kw,charCode:function(e){return e.type===\"keypress\"?Kf(e):0},keyCode:function(e){return e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0},which:function(e){return e.type===\"keypress\"?Kf(e):e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0}}),f3=Jn(h3),p3=ht({},Xm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bj=Jn(p3),m3=ht({},jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kw}),g3=Jn(m3),y3=ht({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),v3=Jn(y3),x3=ht({},Xm,{deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w3=Jn(x3),b3=[9,13,27,32],Tw=si&&\"CompositionEvent\"in window,Fu=null;si&&\"documentMode\"in document&&(Fu=document.documentMode);var j3=si&&\"TextEvent\"in window&&!Fu,RP=si&&(!Tw||Fu&&8<Fu&&11>=Fu),Vj=\" \",zj=!1;function DP(e,t){switch(e){case\"keyup\":return b3.indexOf(t.keyCode)!==-1;case\"keydown\":return t.keyCode!==229;case\"keypress\":case\"mousedown\":case\"focusout\":return!0;default:return!1}}function FP(e){return e=e.detail,typeof e==\"object\"&&\"data\"in e?e.data:null}var nl=!1;function S3(e,t){switch(e){case\"compositionend\":return FP(t);case\"keypress\":return t.which!==32?null:(zj=!0,Vj);case\"textInput\":return e=t.data,e===Vj&&zj?null:e;default:return null}}function N3(e,t){if(nl)return e===\"compositionend\"||!Tw&&DP(e,t)?(e=MP(),qf=_w=Bi=null,nl=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return RP&&t.locale!==\"ko\"?null:t.data;default:return null}}var C3={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===\"input\"?!!C3[e.type]:t===\"textarea\"}function OP(e,t,n,s){fP(s),t=kp(t,\"onChange\"),0<t.length&&(n=new Pw(\"onChange\",\"change\",null,n,s),e.push({event:n,listeners:t}))}var Ou=null,ad=null;function _3(e){KP(e,0)}function Jm(e){var t=il(e);if(aP(t))return e}function P3(e,t){if(e===\"change\")return t}var IP=!1;if(si){var ly;if(si){var cy=\"oninput\"in document;if(!cy){var Hj=document.createElement(\"div\");Hj.setAttribute(\"oninput\",\"return;\"),cy=typeof Hj.oninput==\"function\"}ly=cy}else ly=!1;IP=ly&&(!document.documentMode||9<document.documentMode)}function qj(){Ou&&(Ou.detachEvent(\"onpropertychange\",LP),ad=Ou=null)}function LP(e){if(e.propertyName===\"value\"&&Jm(ad)){var t=[];OP(t,ad,e,bw(e)),yP(_3,t)}}function k3(e,t,n){e===\"focusin\"?(qj(),Ou=t,ad=n,Ou.attachEvent(\"onpropertychange\",LP)):e===\"focusout\"&&qj()}function T3(e){if(e===\"selectionchange\"||e===\"keyup\"||e===\"keydown\")return Jm(ad)}function E3(e,t){if(e===\"click\")return Jm(t)}function A3(e,t){if(e===\"input\"||e===\"change\")return Jm(t)}function M3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qs=typeof Object.is==\"function\"?Object.is:M3;function od(e,t){if(qs(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Mv.call(t,r)||!qs(e[r],t[r]))return!1}return!0}function Kj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gj(e,t){var n=Kj(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kj(n)}}function $P(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$P(e,t.parentNode):\"contains\"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function UP(){for(var e=window,t=bp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==\"string\"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bp(e.document)}return t}function Ew(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===\"input\"&&(e.type===\"text\"||e.type===\"search\"||e.type===\"tel\"||e.type===\"url\"||e.type===\"password\")||t===\"textarea\"||e.contentEditable===\"true\")}function R3(e){var t=UP(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$P(n.ownerDocument.documentElement,n)){if(s!==null&&Ew(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),\"selectionStart\"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Gj(n,i);var a=Gj(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus==\"function\"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var D3=si&&\"documentMode\"in document&&11>=document.documentMode,sl=null,Zv=null,Iu=null,Xv=!1;function Yj(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xv||sl==null||sl!==bp(s)||(s=sl,\"selectionStart\"in s&&Ew(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Iu&&od(Iu,s)||(Iu=s,s=kp(Zv,\"onSelect\"),0<s.length&&(t=new Pw(\"onSelect\",\"select\",null,t,n),e.push({event:t,listeners:s}),t.target=sl)))}function cf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[\"Webkit\"+e]=\"webkit\"+t,n[\"Moz\"+e]=\"moz\"+t,n}var rl={animationend:cf(\"Animation\",\"AnimationEnd\"),animationiteration:cf(\"Animation\",\"AnimationIteration\"),animationstart:cf(\"Animation\",\"AnimationStart\"),transitionend:cf(\"Transition\",\"TransitionEnd\")},uy={},BP={};si&&(BP=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),\"TransitionEvent\"in window||delete rl.transitionend.transition);function eg(e){if(uy[e])return uy[e];if(!rl[e])return e;var t=rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in BP)return uy[e]=t[n];return e}var VP=eg(\"animationend\"),zP=eg(\"animationiteration\"),WP=eg(\"animationstart\"),HP=eg(\"transitionend\"),qP=new Map,Qj=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");function ya(e,t){qP.set(e,t),$o(t,[e])}for(var dy=0;dy<Qj.length;dy++){var hy=Qj[dy],F3=hy.toLowerCase(),O3=hy[0].toUpperCase()+hy.slice(1);ya(F3,\"on\"+O3)}ya(VP,\"onAnimationEnd\");ya(zP,\"onAnimationIteration\");ya(WP,\"onAnimationStart\");ya(\"dblclick\",\"onDoubleClick\");ya(\"focusin\",\"onFocus\");ya(\"focusout\",\"onBlur\");ya(HP,\"onTransitionEnd\");dc(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);dc(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);dc(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);dc(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);$o(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));$o(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));$o(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);$o(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));$o(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));$o(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var bu=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),I3=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(bu));function Zj(e,t,n){var s=e.type||\"unknown-event\";e.currentTarget=n,FO(s,t,void 0,e),e.currentTarget=null}function KP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Zj(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Zj(r,l,u),i=c}}}if(Sp)throw e=Kv,Sp=!1,Kv=null,e}function rt(e,t){var n=t[sx];n===void 0&&(n=t[sx]=new Set);var s=e+\"__bubble\";n.has(s)||(GP(t,e,2,!1),n.add(s))}function fy(e,t,n){var s=0;t&&(s|=4),GP(n,e,s,t)}var uf=\"_reactListening\"+Math.random().toString(36).slice(2);function ld(e){if(!e[uf]){e[uf]=!0,tP.forEach(function(n){n!==\"selectionchange\"&&(I3.has(n)||fy(n,!1,e),fy(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uf]||(t[uf]=!0,fy(\"selectionchange\",!1,t))}}function GP(e,t,n,s){switch(AP(t)){case 1:var r=ZO;break;case 4:r=XO;break;default:r=Cw}n=r.bind(null,t,n,e),r=void 0,!qv||t!==\"touchstart\"&&t!==\"touchmove\"&&t!==\"wheel\"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function py(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Ia(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}yP(function(){var u=i,d=bw(n),h=[];e:{var f=qP.get(e);if(f!==void 0){var p=Pw,x=e;switch(e){case\"keypress\":if(Kf(n)===0)break e;case\"keydown\":case\"keyup\":p=f3;break;case\"focusin\":x=\"focus\",p=oy;break;case\"focusout\":x=\"blur\",p=oy;break;case\"beforeblur\":case\"afterblur\":p=oy;break;case\"click\":if(n.button===2)break e;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":p=$j;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":p=t3;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":p=g3;break;case VP:case zP:case WP:p=r3;break;case HP:p=v3;break;case\"scroll\":p=JO;break;case\"wheel\":p=w3;break;case\"copy\":case\"cut\":case\"paste\":p=a3;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":p=Bj}var g=(t&4)!==0,b=!g&&e===\"scroll\",v=g?f!==null?f+\"Capture\":null:f;g=[];for(var y=u,w;y!==null;){w=y;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,v!==null&&(j=nd(y,v),j!=null&&g.push(cd(y,j,w)))),b)break;y=y.return}0<g.length&&(f=new p(f,x,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e===\"mouseover\"||e===\"pointerover\",p=e===\"mouseout\"||e===\"pointerout\",f&&n!==Wv&&(x=n.relatedTarget||n.fromElement)&&(Ia(x)||x[ri]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?Ia(x):null,x!==null&&(b=Uo(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(g=$j,j=\"onMouseLeave\",v=\"onMouseEnter\",y=\"mouse\",(e===\"pointerout\"||e===\"pointerover\")&&(g=Bj,j=\"onPointerLeave\",v=\"onPointerEnter\",y=\"pointer\"),b=p==null?f:il(p),w=x==null?f:il(x),f=new g(j,y+\"leave\",p,n,d),f.target=b,f.relatedTarget=w,j=null,Ia(d)===u&&(g=new g(v,y+\"enter\",x,n,d),g.target=w,g.relatedTarget=b,j=g),b=j,p&&x)t:{for(g=p,v=x,y=0,w=g;w;w=Wo(w))y++;for(w=0,j=v;j;j=Wo(j))w++;for(;0<y-w;)g=Wo(g),y--;for(;0<w-y;)v=Wo(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Wo(g),v=Wo(v)}g=null}else g=null;p!==null&&Xj(h,f,p,g,!1),x!==null&&b!==null&&Xj(h,b,x,g,!0)}}e:{if(f=u?il(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p===\"select\"||p===\"input\"&&f.type===\"file\")var N=P3;else if(Wj(f))if(IP)N=A3;else{N=T3;var k=k3}else(p=f.nodeName)&&p.toLowerCase()===\"input\"&&(f.type===\"checkbox\"||f.type===\"radio\")&&(N=E3);if(N&&(N=N(e,u))){OP(h,N,n,d);break e}k&&k(e,f,u),e===\"focusout\"&&(k=f._wrapperState)&&k.controlled&&f.type===\"number\"&&$v(f,\"number\",f.value)}switch(k=u?il(u):window,e){case\"focusin\":(Wj(k)||k.contentEditable===\"true\")&&(sl=k,Zv=u,Iu=null);break;case\"focusout\":Iu=Zv=sl=null;break;case\"mousedown\":Xv=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":Xv=!1,Yj(h,n,d);break;case\"selectionchange\":if(D3)break;case\"keydown\":case\"keyup\":Yj(h,n,d)}var C;if(Tw)e:{switch(e){case\"compositionstart\":var T=\"onCompositionStart\";break e;case\"compositionend\":T=\"onCompositionEnd\";break e;case\"compositionupdate\":T=\"onCompositionUpdate\";break e}T=void 0}else nl?DP(e,n)&&(T=\"onCompositionEnd\"):e===\"keydown\"&&n.keyCode===229&&(T=\"onCompositionStart\");T&&(RP&&n.locale!==\"ko\"&&(nl||T!==\"onCompositionStart\"?T===\"onCompositionEnd\"&&nl&&(C=MP()):(Bi=d,_w=\"value\"in Bi?Bi.value:Bi.textContent,nl=!0)),k=kp(u,T),0<k.length&&(T=new Uj(T,e,null,n,d),h.push({event:T,listeners:k}),C?T.data=C:(C=FP(n),C!==null&&(T.data=C)))),(C=j3?S3(e,n):N3(e,n))&&(u=kp(u,\"onBeforeInput\"),0<u.length&&(d=new Uj(\"onBeforeInput\",\"beforeinput\",null,n,d),h.push({event:d,listeners:u}),d.data=C))}KP(h,t)})}function cd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kp(e,t){for(var n=t+\"Capture\",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=nd(e,n),i!=null&&s.unshift(cd(e,i,r)),i=nd(e,t),i!=null&&s.push(cd(e,i,r))),e=e.return}return s}function Wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xj(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=nd(n,i),c!=null&&a.unshift(cd(n,c,l))):r||(c=nd(n,i),c!=null&&a.push(cd(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var L3=/\\r\\n?/g,$3=/\\u0000|\\uFFFD/g;function Jj(e){return(typeof e==\"string\"?e:\"\"+e).replace(L3,`\n`).replace($3,\"\")}function df(e,t,n){if(t=Jj(t),Jj(e)!==t&&n)throw Error(Y(425))}function Tp(){}var Jv=null,ex=null;function tx(e,t){return e===\"textarea\"||e===\"noscript\"||typeof t.children==\"string\"||typeof t.children==\"number\"||typeof t.dangerouslySetInnerHTML==\"object\"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nx=typeof setTimeout==\"function\"?setTimeout:void 0,U3=typeof clearTimeout==\"function\"?clearTimeout:void 0,eS=typeof Promise==\"function\"?Promise:void 0,B3=typeof queueMicrotask==\"function\"?queueMicrotask:typeof eS<\"u\"?function(e){return eS.resolve(null).then(e).catch(V3)}:nx;function V3(e){setTimeout(function(){throw e})}function my(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n===\"/$\"){if(s===0){e.removeChild(r),id(t);return}s--}else n!==\"$\"&&n!==\"$?\"&&n!==\"$!\"||s++;n=r}while(n);id(t)}function Yi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===\"$\"||t===\"$!\"||t===\"$?\")break;if(t===\"/$\")return null}}return e}function tS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===\"$\"||n===\"$!\"||n===\"$?\"){if(t===0)return e;t--}else n===\"/$\"&&t++}e=e.previousSibling}return null}var Vc=Math.random().toString(36).slice(2),mr=\"__reactFiber$\"+Vc,ud=\"__reactProps$\"+Vc,ri=\"__reactContainer$\"+Vc,sx=\"__reactEvents$\"+Vc,z3=\"__reactListeners$\"+Vc,W3=\"__reactHandles$\"+Vc;function Ia(e){var t=e[mr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ri]||n[mr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tS(e);e!==null;){if(n=e[mr])return n;e=tS(e)}return t}e=n,n=e.parentNode}return null}function Sh(e){return e=e[mr]||e[ri],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function il(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function tg(e){return e[ud]||null}var rx=[],al=-1;function va(e){return{current:e}}function it(e){0>al||(e.current=rx[al],rx[al]=null,al--)}function et(e,t){al++,rx[al]=e.current,e.current=t}var ia={},hn=va(ia),Mn=va(!1),fo=ia;function hc(e,t){var n=e.type.contextTypes;if(!n)return ia;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Rn(e){return e=e.childContextTypes,e!=null}function Ep(){it(Mn),it(hn)}function nS(e,t,n){if(hn.current!==ia)throw Error(Y(168));et(hn,t),et(Mn,n)}function YP(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!=\"function\")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(Y(108,kO(e)||\"Unknown\",r));return ht({},n,s)}function Ap(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,fo=hn.current,et(hn,e),et(Mn,Mn.current),!0}function sS(e,t,n){var s=e.stateNode;if(!s)throw Error(Y(169));n?(e=YP(e,t,fo),s.__reactInternalMemoizedMergedChildContext=e,it(Mn),it(hn),et(hn,e)):it(Mn),et(Mn,n)}var Ur=null,ng=!1,gy=!1;function QP(e){Ur===null?Ur=[e]:Ur.push(e)}function H3(e){ng=!0,QP(e)}function xa(){if(!gy&&Ur!==null){gy=!0;var e=0,t=Qe;try{var n=Ur;for(Qe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ur=null,ng=!1}catch(r){throw Ur!==null&&(Ur=Ur.slice(e+1)),bP(jw,xa),r}finally{Qe=t,gy=!1}}return null}var ol=[],ll=0,Mp=null,Rp=0,ds=[],hs=0,po=null,Gr=1,Yr=\"\";function ka(e,t){ol[ll++]=Rp,ol[ll++]=Mp,Mp=e,Rp=t}function ZP(e,t,n){ds[hs++]=Gr,ds[hs++]=Yr,ds[hs++]=po,po=e;var s=Gr;e=Yr;var r=32-zs(s)-1;s&=~(1<<r),n+=1;var i=32-zs(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Gr=1<<32-zs(t)+r|n<<r|s,Yr=i+e}else Gr=1<<i|n<<r|s,Yr=e}function Aw(e){e.return!==null&&(ka(e,1),ZP(e,1,0))}function Mw(e){for(;e===Mp;)Mp=ol[--ll],ol[ll]=null,Rp=ol[--ll],ol[ll]=null;for(;e===po;)po=ds[--hs],ds[hs]=null,Yr=ds[--hs],ds[hs]=null,Gr=ds[--hs],ds[hs]=null}var qn=null,Hn=null,ot=!1,Ds=null;function XP(e,t){var n=fs(5,null,null,0);n.elementType=\"DELETED\",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function rS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qn=e,Hn=Yi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===\"\"||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qn=e,Hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=po!==null?{id:Gr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qn=e,Hn=null,!0):!1;default:return!1}}function ix(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ax(e){if(ot){var t=Hn;if(t){var n=t;if(!rS(e,t)){if(ix(e))throw Error(Y(418));t=Yi(n.nextSibling);var s=qn;t&&rS(e,t)?XP(s,n):(e.flags=e.flags&-4097|2,ot=!1,qn=e)}}else{if(ix(e))throw Error(Y(418));e.flags=e.flags&-4097|2,ot=!1,qn=e}}}function iS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qn=e}function hf(e){if(e!==qn)return!1;if(!ot)return iS(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!==\"head\"&&t!==\"body\"&&!tx(e.type,e.memoizedProps)),t&&(t=Hn)){if(ix(e))throw JP(),Error(Y(418));for(;t;)XP(e,t),t=Yi(t.nextSibling)}if(iS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n===\"/$\"){if(t===0){Hn=Yi(e.nextSibling);break e}t--}else n!==\"$\"&&n!==\"$!\"&&n!==\"$?\"||t++}e=e.nextSibling}Hn=null}}else Hn=qn?Yi(e.stateNode.nextSibling):null;return!0}function JP(){for(var e=Hn;e;)e=Yi(e.nextSibling)}function fc(){Hn=qn=null,ot=!1}function Rw(e){Ds===null?Ds=[e]:Ds.push(e)}var q3=hi.ReactCurrentBatchConfig;function ru(e,t,n){if(e=n.ref,e!==null&&typeof e!=\"function\"&&typeof e!=\"object\"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var s=n.stateNode}if(!s)throw Error(Y(147,e));var r=s,i=\"\"+e;return t!==null&&t.ref!==null&&typeof t.ref==\"function\"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!=\"string\")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function ff(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":e))}function aS(e){var t=e._init;return t(e._payload)}function ek(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function s(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Ji(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,w,j){return y===null||y.tag!==6?(y=Sy(w,v.mode,j),y.return=v,y):(y=r(y,w),y.return=v,y)}function c(v,y,w,j){var N=w.type;return N===tl?d(v,y,w.props.children,j,w.key):y!==null&&(y.elementType===N||typeof N==\"object\"&&N!==null&&N.$$typeof===Ni&&aS(N)===y.type)?(j=r(y,w.props),j.ref=ru(v,y,w),j.return=v,j):(j=ep(w.type,w.key,w.props,null,v.mode,j),j.ref=ru(v,y,w),j.return=v,j)}function u(v,y,w,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Ny(w,v.mode,j),y.return=v,y):(y=r(y,w.children||[]),y.return=v,y)}function d(v,y,w,j,N){return y===null||y.tag!==7?(y=co(w,v.mode,j,N),y.return=v,y):(y=r(y,w),y.return=v,y)}function h(v,y,w){if(typeof y==\"string\"&&y!==\"\"||typeof y==\"number\")return y=Sy(\"\"+y,v.mode,w),y.return=v,y;if(typeof y==\"object\"&&y!==null){switch(y.$$typeof){case tf:return w=ep(y.type,y.key,y.props,null,v.mode,w),w.ref=ru(v,null,y),w.return=v,w;case el:return y=Ny(y,v.mode,w),y.return=v,y;case Ni:var j=y._init;return h(v,j(y._payload),w)}if(xu(y)||Jc(y))return y=co(y,v.mode,w,null),y.return=v,y;ff(v,y)}return null}function f(v,y,w,j){var N=y!==null?y.key:null;if(typeof w==\"string\"&&w!==\"\"||typeof w==\"number\")return N!==null?null:l(v,y,\"\"+w,j);if(typeof w==\"object\"&&w!==null){switch(w.$$typeof){case tf:return w.key===N?c(v,y,w,j):null;case el:return w.key===N?u(v,y,w,j):null;case Ni:return N=w._init,f(v,y,N(w._payload),j)}if(xu(w)||Jc(w))return N!==null?null:d(v,y,w,j,null);ff(v,w)}return null}function p(v,y,w,j,N){if(typeof j==\"string\"&&j!==\"\"||typeof j==\"number\")return v=v.get(w)||null,l(y,v,\"\"+j,N);if(typeof j==\"object\"&&j!==null){switch(j.$$typeof){case tf:return v=v.get(j.key===null?w:j.key)||null,c(y,v,j,N);case el:return v=v.get(j.key===null?w:j.key)||null,u(y,v,j,N);case Ni:var k=j._init;return p(v,y,w,k(j._payload),N)}if(xu(j)||Jc(j))return v=v.get(w)||null,d(y,v,j,N,null);ff(y,j)}return null}function x(v,y,w,j){for(var N=null,k=null,C=y,T=y=0,M=null;C!==null&&T<w.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var E=f(v,C,w[T],j);if(E===null){C===null&&(C=M);break}e&&C&&E.alternate===null&&t(v,C),y=i(E,y,T),k===null?N=E:k.sibling=E,k=E,C=M}if(T===w.length)return n(v,C),ot&&ka(v,T),N;if(C===null){for(;T<w.length;T++)C=h(v,w[T],j),C!==null&&(y=i(C,y,T),k===null?N=C:k.sibling=C,k=C);return ot&&ka(v,T),N}for(C=s(v,C);T<w.length;T++)M=p(C,v,T,w[T],j),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?T:M.key),y=i(M,y,T),k===null?N=M:k.sibling=M,k=M);return e&&C.forEach(function(O){return t(v,O)}),ot&&ka(v,T),N}function g(v,y,w,j){var N=Jc(w);if(typeof N!=\"function\")throw Error(Y(150));if(w=N.call(w),w==null)throw Error(Y(151));for(var k=N=null,C=y,T=y=0,M=null,E=w.next();C!==null&&!E.done;T++,E=w.next()){C.index>T?(M=C,C=null):M=C.sibling;var O=f(v,C,E.value,j);if(O===null){C===null&&(C=M);break}e&&C&&O.alternate===null&&t(v,C),y=i(O,y,T),k===null?N=O:k.sibling=O,k=O,C=M}if(E.done)return n(v,C),ot&&ka(v,T),N;if(C===null){for(;!E.done;T++,E=w.next())E=h(v,E.value,j),E!==null&&(y=i(E,y,T),k===null?N=E:k.sibling=E,k=E);return ot&&ka(v,T),N}for(C=s(v,C);!E.done;T++,E=w.next())E=p(C,v,T,E.value,j),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?T:E.key),y=i(E,y,T),k===null?N=E:k.sibling=E,k=E);return e&&C.forEach(function(D){return t(v,D)}),ot&&ka(v,T),N}function b(v,y,w,j){if(typeof w==\"object\"&&w!==null&&w.type===tl&&w.key===null&&(w=w.props.children),typeof w==\"object\"&&w!==null){switch(w.$$typeof){case tf:e:{for(var N=w.key,k=y;k!==null;){if(k.key===N){if(N=w.type,N===tl){if(k.tag===7){n(v,k.sibling),y=r(k,w.props.children),y.return=v,v=y;break e}}else if(k.elementType===N||typeof N==\"object\"&&N!==null&&N.$$typeof===Ni&&aS(N)===k.type){n(v,k.sibling),y=r(k,w.props),y.ref=ru(v,k,w),y.return=v,v=y;break e}n(v,k);break}else t(v,k);k=k.sibling}w.type===tl?(y=co(w.props.children,v.mode,j,w.key),y.return=v,v=y):(j=ep(w.type,w.key,w.props,null,v.mode,j),j.ref=ru(v,y,w),j.return=v,v=j)}return a(v);case el:e:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=r(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Ny(w,v.mode,j),y.return=v,v=y}return a(v);case Ni:return k=w._init,b(v,y,k(w._payload),j)}if(xu(w))return x(v,y,w,j);if(Jc(w))return g(v,y,w,j);ff(v,w)}return typeof w==\"string\"&&w!==\"\"||typeof w==\"number\"?(w=\"\"+w,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,w),y.return=v,v=y):(n(v,y),y=Sy(w,v.mode,j),y.return=v,v=y),a(v)):n(v,y)}return b}var pc=ek(!0),tk=ek(!1),Dp=va(null),Fp=null,cl=null,Dw=null;function Fw(){Dw=cl=Fp=null}function Ow(e){var t=Dp.current;it(Dp),e._currentValue=t}function ox(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Nl(e,t){Fp=e,Dw=cl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(An=!0),e.firstContext=null)}function ms(e){var t=e._currentValue;if(Dw!==e)if(e={context:e,memoizedValue:t,next:null},cl===null){if(Fp===null)throw Error(Y(308));cl=e,Fp.dependencies={lanes:0,firstContext:e}}else cl=cl.next=e;return t}var La=null;function Iw(e){La===null?La=[e]:La.push(e)}function nk(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,Iw(t)):(n.next=r.next,r.next=n),t.interleaved=n,ii(e,s)}function ii(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ci=!1;function Lw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qi(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ie&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,ii(e,n)}return r=s.interleaved,r===null?(t.next=t,Iw(s)):(t.next=r.next,r.next=t),s.interleaved=t,ii(e,n)}function Gf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Sw(e,n)}}function oS(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Op(e,t,n,s){var r=e.updateQueue;Ci=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(f=t,p=n,g.tag){case 1:if(x=g.payload,typeof x==\"function\"){h=x.call(p,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x==\"function\"?x.call(p,h,f):x,f==null)break e;h=ht({},h,f);break e;case 2:Ci=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);go|=a,e.lanes=a,e.memoizedState=h}}function lS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!=\"function\")throw Error(Y(191,r));r.call(s)}}}var Nh={},br=va(Nh),dd=va(Nh),hd=va(Nh);function $a(e){if(e===Nh)throw Error(Y(174));return e}function $w(e,t){switch(et(hd,t),et(dd,e),et(br,Nh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bv(null,\"\");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bv(t,e)}it(br),et(br,t)}function mc(){it(br),it(dd),it(hd)}function rk(e){$a(hd.current);var t=$a(br.current),n=Bv(t,e.type);t!==n&&(et(dd,e),et(br,n))}function Uw(e){dd.current===e&&(it(br),it(dd))}var ct=va(0);function Ip(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data===\"$?\"||n.data===\"$!\"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yy=[];function Bw(){for(var e=0;e<yy.length;e++)yy[e]._workInProgressVersionPrimary=null;yy.length=0}var Yf=hi.ReactCurrentDispatcher,vy=hi.ReactCurrentBatchConfig,mo=0,dt=null,Dt=null,Ut=null,Lp=!1,Lu=!1,fd=0,K3=0;function tn(){throw Error(Y(321))}function Vw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qs(e[n],t[n]))return!1;return!0}function zw(e,t,n,s,r,i){if(mo=i,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yf.current=e===null||e.memoizedState===null?Z3:X3,e=n(s,r),Lu){i=0;do{if(Lu=!1,fd=0,25<=i)throw Error(Y(301));i+=1,Ut=Dt=null,t.updateQueue=null,Yf.current=J3,e=n(s,r)}while(Lu)}if(Yf.current=$p,t=Dt!==null&&Dt.next!==null,mo=0,Ut=Dt=dt=null,Lp=!1,t)throw Error(Y(300));return e}function Ww(){var e=fd!==0;return fd=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?dt.memoizedState=Ut=e:Ut=Ut.next=e,Ut}function gs(){if(Dt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=Ut===null?dt.memoizedState:Ut.next;if(t!==null)Ut=t,Dt=e;else{if(e===null)throw Error(Y(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?dt.memoizedState=Ut=e:Ut=Ut.next=e}return Ut}function pd(e,t){return typeof t==\"function\"?t(e):t}function xy(e){var t=gs(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var s=Dt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((mo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,dt.lanes|=d,go|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,qs(s,t.memoizedState)||(An=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,dt.lanes|=i,go|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wy(e){var t=gs(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);qs(i,t.memoizedState)||(An=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function ik(){}function ak(e,t){var n=dt,s=gs(),r=t(),i=!qs(s.memoizedState,r);if(i&&(s.memoizedState=r,An=!0),s=s.queue,Hw(ck.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,md(9,lk.bind(null,n,s,r,t),void 0,null),Bt===null)throw Error(Y(349));mo&30||ok(n,t,r)}return r}function ok(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lk(e,t,n,s){t.value=n,t.getSnapshot=s,uk(t)&&dk(e)}function ck(e,t,n){return n(function(){uk(t)&&dk(e)})}function uk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qs(e,n)}catch{return!0}}function dk(e){var t=ii(e,1);t!==null&&Ws(t,e,1,-1)}function cS(e){var t=ir();return typeof e==\"function\"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:e},t.queue=e,e=e.dispatch=Q3.bind(null,dt,e),[t.memoizedState,e]}function md(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function hk(){return gs().memoizedState}function Qf(e,t,n,s){var r=ir();dt.flags|=e,r.memoizedState=md(1|t,n,void 0,s===void 0?null:s)}function sg(e,t,n,s){var r=gs();s=s===void 0?null:s;var i=void 0;if(Dt!==null){var a=Dt.memoizedState;if(i=a.destroy,s!==null&&Vw(s,a.deps)){r.memoizedState=md(t,n,i,s);return}}dt.flags|=e,r.memoizedState=md(1|t,n,i,s)}function uS(e,t){return Qf(8390656,8,e,t)}function Hw(e,t){return sg(2048,8,e,t)}function fk(e,t){return sg(4,2,e,t)}function pk(e,t){return sg(4,4,e,t)}function mk(e,t){if(typeof t==\"function\")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gk(e,t,n){return n=n!=null?n.concat([e]):null,sg(4,4,mk.bind(null,t,e),n)}function qw(){}function yk(e,t){var n=gs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vw(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function vk(e,t){var n=gs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vw(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function xk(e,t,n){return mo&21?(qs(n,t)||(n=NP(),dt.lanes|=n,go|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,An=!0),e.memoizedState=n)}function G3(e,t){var n=Qe;Qe=n!==0&&4>n?n:4,e(!0);var s=vy.transition;vy.transition={};try{e(!1),t()}finally{Qe=n,vy.transition=s}}function wk(){return gs().memoizedState}function Y3(e,t,n){var s=Xi(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},bk(e))jk(t,n);else if(n=nk(e,t,n,s),n!==null){var r=jn();Ws(n,e,s,r),Sk(n,t,s)}}function Q3(e,t,n){var s=Xi(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(bk(e))jk(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,qs(l,a)){var c=t.interleaved;c===null?(r.next=r,Iw(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=nk(e,t,r,s),n!==null&&(r=jn(),Ws(n,e,s,r),Sk(n,t,s))}}function bk(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function jk(e,t){Lu=Lp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sk(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Sw(e,n)}}var $p={readContext:ms,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Z3={readContext:ms,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:ms,useEffect:uS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qf(4194308,4,mk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qf(4,2,e,t)},useMemo:function(e,t){var n=ir();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ir();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Y3.bind(null,dt,e),[s.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:cS,useDebugValue:qw,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=cS(!1),t=e[0];return e=G3.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=dt,r=ir();if(ot){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),Bt===null)throw Error(Y(349));mo&30||ok(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,uS(ck.bind(null,s,i,e),[e]),s.flags|=2048,md(9,lk.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=ir(),t=Bt.identifierPrefix;if(ot){var n=Yr,s=Gr;n=(s&~(1<<32-zs(s)-1)).toString(32)+n,t=\":\"+t+\"R\"+n,n=fd++,0<n&&(t+=\"H\"+n.toString(32)),t+=\":\"}else n=K3++,t=\":\"+t+\"r\"+n.toString(32)+\":\";return e.memoizedState=t},unstable_isNewReconciler:!1},X3={readContext:ms,useCallback:yk,useContext:ms,useEffect:Hw,useImperativeHandle:gk,useInsertionEffect:fk,useLayoutEffect:pk,useMemo:vk,useReducer:xy,useRef:hk,useState:function(){return xy(pd)},useDebugValue:qw,useDeferredValue:function(e){var t=gs();return xk(t,Dt.memoizedState,e)},useTransition:function(){var e=xy(pd)[0],t=gs().memoizedState;return[e,t]},useMutableSource:ik,useSyncExternalStore:ak,useId:wk,unstable_isNewReconciler:!1},J3={readContext:ms,useCallback:yk,useContext:ms,useEffect:Hw,useImperativeHandle:gk,useInsertionEffect:fk,useLayoutEffect:pk,useMemo:vk,useReducer:wy,useRef:hk,useState:function(){return wy(pd)},useDebugValue:qw,useDeferredValue:function(e){var t=gs();return Dt===null?t.memoizedState=e:xk(t,Dt.memoizedState,e)},useTransition:function(){var e=wy(pd)[0],t=gs().memoizedState;return[e,t]},useMutableSource:ik,useSyncExternalStore:ak,useId:wk,unstable_isNewReconciler:!1};function js(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lx(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rg={isMounted:function(e){return(e=e._reactInternals)?Uo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=jn(),r=Xi(e),i=Zr(s,r);i.payload=t,n!=null&&(i.callback=n),t=Qi(e,i,r),t!==null&&(Ws(t,e,r,s),Gf(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=jn(),r=Xi(e),i=Zr(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Qi(e,i,r),t!==null&&(Ws(t,e,r,s),Gf(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jn(),s=Xi(e),r=Zr(n,s);r.tag=2,t!=null&&(r.callback=t),t=Qi(e,r,s),t!==null&&(Ws(t,e,s,n),Gf(t,e,s))}};function dS(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate==\"function\"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!od(n,s)||!od(r,i):!0}function Nk(e,t,n){var s=!1,r=ia,i=t.contextType;return typeof i==\"object\"&&i!==null?i=ms(i):(r=Rn(t)?fo:hn.current,s=t.contextTypes,i=(s=s!=null)?hc(e,r):ia),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rg,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function hS(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps==\"function\"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps==\"function\"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&rg.enqueueReplaceState(t,t.state,null)}function cx(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Lw(e);var i=t.contextType;typeof i==\"object\"&&i!==null?r.context=ms(i):(i=Rn(t)?fo:hn.current,r.context=hc(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i==\"function\"&&(lx(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps==\"function\"||typeof r.getSnapshotBeforeUpdate==\"function\"||typeof r.UNSAFE_componentWillMount!=\"function\"&&typeof r.componentWillMount!=\"function\"||(t=r.state,typeof r.componentWillMount==\"function\"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount==\"function\"&&r.UNSAFE_componentWillMount(),t!==r.state&&rg.enqueueReplaceState(r,r.state,null),Op(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount==\"function\"&&(e.flags|=4194308)}function gc(e,t){try{var n=\"\",s=t;do n+=PO(s),s=s.return;while(s);var r=n}catch(i){r=`\nError generating stack: `+i.message+`\n`+i.stack}return{value:e,source:t,stack:r,digest:null}}function by(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ux(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eI=typeof WeakMap==\"function\"?WeakMap:Map;function Ck(e,t,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Bp||(Bp=!0,wx=s),ux(e,t)},n}function _k(e,t,n){n=Zr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s==\"function\"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){ux(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch==\"function\"&&(n.callback=function(){ux(e,t),typeof s!=\"function\"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:\"\"})}),n}function fS(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new eI;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=pI.bind(null,e,t,n),t.then(e,e))}function pS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mS(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zr(-1,1),t.tag=2,Qi(n,t,1))),n.lanes|=1),e)}var tI=hi.ReactCurrentOwner,An=!1;function wn(e,t,n,s){t.child=e===null?tk(t,null,n,s):pc(t,e.child,n,s)}function gS(e,t,n,s,r){n=n.render;var i=t.ref;return Nl(t,r),s=zw(e,t,n,s,i,r),n=Ww(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ai(e,t,r)):(ot&&n&&Aw(t),t.flags|=1,wn(e,t,s,r),t.child)}function yS(e,t,n,s,r){if(e===null){var i=n.type;return typeof i==\"function\"&&!e1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Pk(e,t,i,s,r)):(e=ep(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:od,n(a,s)&&e.ref===t.ref)return ai(e,t,r)}return t.flags|=1,e=Ji(i,s),e.ref=t.ref,e.return=t,t.child=e}function Pk(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(od(i,s)&&e.ref===t.ref)if(An=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(An=!0);else return t.lanes=e.lanes,ai(e,t,r)}return dx(e,t,n,s,r)}function kk(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode===\"hidden\")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(dl,Vn),Vn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(dl,Vn),Vn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,et(dl,Vn),Vn|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,et(dl,Vn),Vn|=s;return wn(e,t,r,n),t.child}function Tk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dx(e,t,n,s,r){var i=Rn(n)?fo:hn.current;return i=hc(t,i),Nl(t,r),n=zw(e,t,n,s,i,r),s=Ww(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ai(e,t,r)):(ot&&s&&Aw(t),t.flags|=1,wn(e,t,n,r),t.child)}function vS(e,t,n,s,r){if(Rn(n)){var i=!0;Ap(t)}else i=!1;if(Nl(t,r),t.stateNode===null)Zf(e,t),Nk(t,n,s),cx(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u==\"object\"&&u!==null?u=ms(u):(u=Rn(n)?fo:hn.current,u=hc(t,u));var d=n.getDerivedStateFromProps,h=typeof d==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\";h||typeof a.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof a.componentWillReceiveProps!=\"function\"||(l!==s||c!==u)&&hS(t,a,s,u),Ci=!1;var f=t.memoizedState;a.state=f,Op(t,s,a,r),c=t.memoizedState,l!==s||f!==c||Mn.current||Ci?(typeof d==\"function\"&&(lx(t,n,d,s),c=t.memoizedState),(l=Ci||dS(t,n,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!=\"function\"&&typeof a.componentWillMount!=\"function\"||(typeof a.componentWillMount==\"function\"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==\"function\"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==\"function\"&&(t.flags|=4194308)):(typeof a.componentDidMount==\"function\"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount==\"function\"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,sk(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:js(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c==\"object\"&&c!==null?c=ms(c):(c=Rn(n)?fo:hn.current,c=hc(t,c));var p=n.getDerivedStateFromProps;(d=typeof p==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\")||typeof a.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof a.componentWillReceiveProps!=\"function\"||(l!==h||f!==c)&&hS(t,a,s,c),Ci=!1,f=t.memoizedState,a.state=f,Op(t,s,a,r);var x=t.memoizedState;l!==h||f!==x||Mn.current||Ci?(typeof p==\"function\"&&(lx(t,n,p,s),x=t.memoizedState),(u=Ci||dS(t,n,u,s,f,x,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!=\"function\"&&typeof a.componentWillUpdate!=\"function\"||(typeof a.componentWillUpdate==\"function\"&&a.componentWillUpdate(s,x,c),typeof a.UNSAFE_componentWillUpdate==\"function\"&&a.UNSAFE_componentWillUpdate(s,x,c)),typeof a.componentDidUpdate==\"function\"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==\"function\"&&(t.flags|=1024)):(typeof a.componentDidUpdate!=\"function\"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),a.props=s,a.state=x,a.context=c,s=u):(typeof a.componentDidUpdate!=\"function\"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return hx(e,t,n,s,i,r)}function hx(e,t,n,s,r,i){Tk(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&sS(t,n,!1),ai(e,t,i);s=t.stateNode,tI.current=t;var l=a&&typeof n.getDerivedStateFromError!=\"function\"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=pc(t,e.child,null,i),t.child=pc(t,null,l,i)):wn(e,t,l,i),t.memoizedState=s.state,r&&sS(t,n,!0),t.child}function Ek(e){var t=e.stateNode;t.pendingContext?nS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nS(e,t.context,!1),$w(e,t.containerInfo)}function xS(e,t,n,s,r){return fc(),Rw(r),t.flags|=256,wn(e,t,n,s),t.child}var fx={dehydrated:null,treeContext:null,retryLane:0};function px(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ak(e,t,n){var s=t.pendingProps,r=ct.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),et(ct,r&1),e===null)return ax(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data===\"$!\"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:\"hidden\",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=og(a,s,0,null),e=co(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=px(n),t.memoizedState=fx,e):Kw(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return nI(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:\"hidden\",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ji(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Ji(l,i):(i=co(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?px(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=fx,s}return i=e.child,e=i.sibling,s=Ji(i,{mode:\"visible\",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Kw(e,t){return t=og({mode:\"visible\",children:t},e.mode,0,null),t.return=e,e.child=t}function pf(e,t,n,s){return s!==null&&Rw(s),pc(t,e.child,null,n),e=Kw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nI(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=by(Error(Y(422))),pf(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=og({mode:\"visible\",children:s.children},r,0,null),i=co(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&pc(t,e.child,null,a),t.child.memoizedState=px(a),t.memoizedState=fx,i);if(!(t.mode&1))return pf(e,t,a,null);if(r.data===\"$!\"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Y(419)),s=by(i,s,void 0),pf(e,t,a,s)}if(l=(a&e.childLanes)!==0,An||l){if(s=Bt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ii(e,r),Ws(s,e,r,-1))}return Jw(),s=by(Error(Y(421))),pf(e,t,a,s)}return r.data===\"$?\"?(t.flags|=128,t.child=e.child,t=mI.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,Hn=Yi(r.nextSibling),qn=t,ot=!0,Ds=null,e!==null&&(ds[hs++]=Gr,ds[hs++]=Yr,ds[hs++]=po,Gr=e.id,Yr=e.overflow,po=t),t=Kw(t,s.children),t.flags|=4096,t)}function wS(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ox(e.return,t,n)}function jy(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Mk(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(wn(e,t,s.children,n),s=ct.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wS(e,n,t);else if(e.tag===19)wS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(et(ct,s),!(t.mode&1))t.memoizedState=null;else switch(r){case\"forwards\":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Ip(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),jy(t,!1,r,n,i);break;case\"backwards\":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ip(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}jy(t,!0,n,null,i);break;case\"together\":jy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),go|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=Ji(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ji(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sI(e,t,n){switch(t.tag){case 3:Ek(t),fc();break;case 5:rk(t);break;case 1:Rn(t.type)&&Ap(t);break;case 4:$w(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;et(Dp,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(et(ct,ct.current&1),t.flags|=128,null):n&t.child.childLanes?Ak(e,t,n):(et(ct,ct.current&1),e=ai(e,t,n),e!==null?e.sibling:null);et(ct,ct.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Mk(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(ct,ct.current),s)break;return null;case 22:case 23:return t.lanes=0,kk(e,t,n)}return ai(e,t,n)}var Rk,mx,Dk,Fk;Rk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mx=function(){};Dk=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,$a(br.current);var i=null;switch(n){case\"input\":r=Iv(e,r),s=Iv(e,s),i=[];break;case\"select\":r=ht({},r,{value:void 0}),s=ht({},s,{value:void 0}),i=[];break;case\"textarea\":r=Uv(e,r),s=Uv(e,s),i=[];break;default:typeof r.onClick!=\"function\"&&typeof s.onClick==\"function\"&&(e.onclick=Tp)}Vv(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u===\"style\"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]=\"\")}else u!==\"dangerouslySetInnerHTML\"&&u!==\"children\"&&u!==\"suppressContentEditableWarning\"&&u!==\"suppressHydrationWarning\"&&u!==\"autoFocus\"&&(ed.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u===\"style\")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]=\"\");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u===\"children\"?typeof c!=\"string\"&&typeof c!=\"number\"||(i=i||[]).push(u,\"\"+c):u!==\"suppressContentEditableWarning\"&&u!==\"suppressHydrationWarning\"&&(ed.hasOwnProperty(u)?(c!=null&&u===\"onScroll\"&&rt(\"scroll\",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push(\"style\",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Fk=function(e,t,n,s){n!==s&&(t.flags|=4)};function iu(e,t){if(!ot)switch(e.tailMode){case\"hidden\":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case\"collapsed\":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function rI(e,t,n){var s=t.pendingProps;switch(Mw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(t),null;case 1:return Rn(t.type)&&Ep(),nn(t),null;case 3:return s=t.stateNode,mc(),it(Mn),it(hn),Bw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(hf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ds!==null&&(Sx(Ds),Ds=null))),mx(e,t),nn(t),null;case 5:Uw(t);var r=$a(hd.current);if(n=t.type,e!==null&&t.stateNode!=null)Dk(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return nn(t),null}if(e=$a(br.current),hf(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[mr]=t,s[ud]=i,e=(t.mode&1)!==0,n){case\"dialog\":rt(\"cancel\",s),rt(\"close\",s);break;case\"iframe\":case\"object\":case\"embed\":rt(\"load\",s);break;case\"video\":case\"audio\":for(r=0;r<bu.length;r++)rt(bu[r],s);break;case\"source\":rt(\"error\",s);break;case\"img\":case\"image\":case\"link\":rt(\"error\",s),rt(\"load\",s);break;case\"details\":rt(\"toggle\",s);break;case\"input\":Tj(s,i),rt(\"invalid\",s);break;case\"select\":s._wrapperState={wasMultiple:!!i.multiple},rt(\"invalid\",s);break;case\"textarea\":Aj(s,i),rt(\"invalid\",s)}Vv(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a===\"children\"?typeof l==\"string\"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&df(s.textContent,l,e),r=[\"children\",l]):typeof l==\"number\"&&s.textContent!==\"\"+l&&(i.suppressHydrationWarning!==!0&&df(s.textContent,l,e),r=[\"children\",\"\"+l]):ed.hasOwnProperty(a)&&l!=null&&a===\"onScroll\"&&rt(\"scroll\",s)}switch(n){case\"input\":nf(s),Ej(s,i,!0);break;case\"textarea\":nf(s),Mj(s);break;case\"select\":case\"option\":break;default:typeof i.onClick==\"function\"&&(s.onclick=Tp)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e===\"http://www.w3.org/1999/xhtml\"&&(e=cP(n)),e===\"http://www.w3.org/1999/xhtml\"?n===\"script\"?(e=a.createElement(\"div\"),e.innerHTML=\"<script><\\/script>\",e=e.removeChild(e.firstChild)):typeof s.is==\"string\"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n===\"select\"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[mr]=t,e[ud]=s,Rk(e,t,!1,!1),t.stateNode=e;e:{switch(a=zv(n,s),n){case\"dialog\":rt(\"cancel\",e),rt(\"close\",e),r=s;break;case\"iframe\":case\"object\":case\"embed\":rt(\"load\",e),r=s;break;case\"video\":case\"audio\":for(r=0;r<bu.length;r++)rt(bu[r],e);r=s;break;case\"source\":rt(\"error\",e),r=s;break;case\"img\":case\"image\":case\"link\":rt(\"error\",e),rt(\"load\",e),r=s;break;case\"details\":rt(\"toggle\",e),r=s;break;case\"input\":Tj(e,s),r=Iv(e,s),rt(\"invalid\",e);break;case\"option\":r=s;break;case\"select\":e._wrapperState={wasMultiple:!!s.multiple},r=ht({},s,{value:void 0}),rt(\"invalid\",e);break;case\"textarea\":Aj(e,s),r=Uv(e,s),rt(\"invalid\",e);break;default:r=s}Vv(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i===\"style\"?hP(e,c):i===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,c!=null&&uP(e,c)):i===\"children\"?typeof c==\"string\"?(n!==\"textarea\"||c!==\"\")&&td(e,c):typeof c==\"number\"&&td(e,\"\"+c):i!==\"suppressContentEditableWarning\"&&i!==\"suppressHydrationWarning\"&&i!==\"autoFocus\"&&(ed.hasOwnProperty(i)?c!=null&&i===\"onScroll\"&&rt(\"scroll\",e):c!=null&&yw(e,i,c,a))}switch(n){case\"input\":nf(e),Ej(e,s,!1);break;case\"textarea\":nf(e),Mj(e);break;case\"option\":s.value!=null&&e.setAttribute(\"value\",\"\"+ra(s.value));break;case\"select\":e.multiple=!!s.multiple,i=s.value,i!=null?wl(e,!!s.multiple,i,!1):s.defaultValue!=null&&wl(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick==\"function\"&&(e.onclick=Tp)}switch(n){case\"button\":case\"input\":case\"select\":case\"textarea\":s=!!s.autoFocus;break e;case\"img\":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nn(t),null;case 6:if(e&&t.stateNode!=null)Fk(e,t,e.memoizedProps,s);else{if(typeof s!=\"string\"&&t.stateNode===null)throw Error(Y(166));if(n=$a(hd.current),$a(br.current),hf(t)){if(s=t.stateNode,n=t.memoizedProps,s[mr]=t,(i=s.nodeValue!==n)&&(e=qn,e!==null))switch(e.tag){case 3:df(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&df(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[mr]=t,t.stateNode=s}return nn(t),null;case 13:if(it(ct),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&Hn!==null&&t.mode&1&&!(t.flags&128))JP(),fc(),t.flags|=98560,i=!1;else if(i=hf(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Y(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[mr]=t}else fc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nn(t),i=!1}else Ds!==null&&(Sx(Ds),Ds=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?It===0&&(It=3):Jw())),t.updateQueue!==null&&(t.flags|=4),nn(t),null);case 4:return mc(),mx(e,t),e===null&&ld(t.stateNode.containerInfo),nn(t),null;case 10:return Ow(t.type._context),nn(t),null;case 17:return Rn(t.type)&&Ep(),nn(t),null;case 19:if(it(ct),i=t.memoizedState,i===null)return nn(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)iu(i,!1);else{if(It!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ip(e),a!==null){for(t.flags|=128,iu(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return et(ct,ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&wt()>yc&&(t.flags|=128,s=!0,iu(i,!1),t.lanes=4194304)}else{if(!s)if(e=Ip(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),iu(i,!0),i.tail===null&&i.tailMode===\"hidden\"&&!a.alternate&&!ot)return nn(t),null}else 2*wt()-i.renderingStartTime>yc&&n!==1073741824&&(t.flags|=128,s=!0,iu(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=wt(),t.sibling=null,n=ct.current,et(ct,s?n&1|2:n&1),t):(nn(t),null);case 22:case 23:return Xw(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Vn&1073741824&&(nn(t),t.subtreeFlags&6&&(t.flags|=8192)):nn(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function iI(e,t){switch(Mw(t),t.tag){case 1:return Rn(t.type)&&Ep(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mc(),it(Mn),it(hn),Bw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uw(t),null;case 13:if(it(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));fc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(ct),null;case 4:return mc(),null;case 10:return Ow(t.type._context),null;case 22:case 23:return Xw(),null;case 24:return null;default:return null}}var mf=!1,ln=!1,aI=typeof WeakSet==\"function\"?WeakSet:Set,oe=null;function ul(e,t){var n=e.ref;if(n!==null)if(typeof n==\"function\")try{n(null)}catch(s){gt(e,t,s)}else n.current=null}function gx(e,t,n){try{n()}catch(s){gt(e,t,s)}}var bS=!1;function oI(e,t){if(Jv=_p,e=UP(),Ew(e)){if(\"selectionStart\"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ex={focusedElem:e,selectionRange:n},_p=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:js(t.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent=\"\":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){gt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return x=bS,bS=!1,x}function $u(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&gx(t,n,i)}r=r.next}while(r!==s)}}function ig(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function yx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t==\"function\"?t(e):t.current=e}}function Ok(e){var t=e.alternate;t!==null&&(e.alternate=null,Ok(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mr],delete t[ud],delete t[sx],delete t[z3],delete t[W3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ik(e){return e.tag===5||e.tag===3||e.tag===4}function jS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ik(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tp));else if(s!==4&&(e=e.child,e!==null))for(vx(e,t,n),e=e.sibling;e!==null;)vx(e,t,n),e=e.sibling}function xx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(xx(e,t,n),e=e.sibling;e!==null;)xx(e,t,n),e=e.sibling}var qt=null,Es=!1;function gi(e,t,n){for(n=n.child;n!==null;)Lk(e,t,n),n=n.sibling}function Lk(e,t,n){if(wr&&typeof wr.onCommitFiberUnmount==\"function\")try{wr.onCommitFiberUnmount(Zm,n)}catch{}switch(n.tag){case 5:ln||ul(n,t);case 6:var s=qt,r=Es;qt=null,gi(e,t,n),qt=s,Es=r,qt!==null&&(Es?(e=qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Es?(e=qt,n=n.stateNode,e.nodeType===8?my(e.parentNode,n):e.nodeType===1&&my(e,n),id(e)):my(qt,n.stateNode));break;case 4:s=qt,r=Es,qt=n.stateNode.containerInfo,Es=!0,gi(e,t,n),qt=s,Es=r;break;case 0:case 11:case 14:case 15:if(!ln&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&gx(n,t,a),r=r.next}while(r!==s)}gi(e,t,n);break;case 1:if(!ln&&(ul(n,t),s=n.stateNode,typeof s.componentWillUnmount==\"function\"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){gt(n,t,l)}gi(e,t,n);break;case 21:gi(e,t,n);break;case 22:n.mode&1?(ln=(s=ln)||n.memoizedState!==null,gi(e,t,n),ln=s):gi(e,t,n);break;default:gi(e,t,n)}}function SS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new aI),t.forEach(function(s){var r=gI.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function xs(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:qt=l.stateNode,Es=!1;break e;case 3:qt=l.stateNode.containerInfo,Es=!0;break e;case 4:qt=l.stateNode.containerInfo,Es=!0;break e}l=l.return}if(qt===null)throw Error(Y(160));Lk(i,a,r),qt=null,Es=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){gt(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$k(t,e),t=t.sibling}function $k(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xs(t,e),sr(e),s&4){try{$u(3,e,e.return),ig(3,e)}catch(g){gt(e,e.return,g)}try{$u(5,e,e.return)}catch(g){gt(e,e.return,g)}}break;case 1:xs(t,e),sr(e),s&512&&n!==null&&ul(n,n.return);break;case 5:if(xs(t,e),sr(e),s&512&&n!==null&&ul(n,n.return),e.flags&32){var r=e.stateNode;try{td(r,\"\")}catch(g){gt(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l===\"input\"&&i.type===\"radio\"&&i.name!=null&&oP(r,i),zv(l,a);var u=zv(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d===\"style\"?hP(r,h):d===\"dangerouslySetInnerHTML\"?uP(r,h):d===\"children\"?td(r,h):yw(r,d,h,u)}switch(l){case\"input\":Lv(r,i);break;case\"textarea\":lP(r,i);break;case\"select\":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?wl(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?wl(r,!!i.multiple,i.defaultValue,!0):wl(r,!!i.multiple,i.multiple?[]:\"\",!1))}r[ud]=i}catch(g){gt(e,e.return,g)}}break;case 6:if(xs(t,e),sr(e),s&4){if(e.stateNode===null)throw Error(Y(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){gt(e,e.return,g)}}break;case 3:if(xs(t,e),sr(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{id(t.containerInfo)}catch(g){gt(e,e.return,g)}break;case 4:xs(t,e),sr(e);break;case 13:xs(t,e),sr(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Qw=wt())),s&4&&SS(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ln=(u=ln)||d,xs(t,e),ln=u):xs(t,e),sr(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:$u(4,f,f.return);break;case 1:ul(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount==\"function\"){s=f,n=f.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){gt(s,n,g)}}break;case 5:ul(f,f.return);break;case 22:if(f.memoizedState!==null){CS(h);continue}}p!==null?(p.return=f,oe=p):CS(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty==\"function\"?i.setProperty(\"display\",\"none\",\"important\"):i.display=\"none\"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty(\"display\")?c.display:null,l.style.display=dP(\"display\",a))}catch(g){gt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?\"\":h.memoizedProps}catch(g){gt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xs(t,e),sr(e),s&4&&SS(e);break;case 21:break;default:xs(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ik(n)){var s=n;break e}n=n.return}throw Error(Y(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(td(r,\"\"),s.flags&=-33);var i=jS(e);xx(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=jS(e);vx(e,l,a);break;default:throw Error(Y(161))}}catch(c){gt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lI(e,t,n){oe=e,Uk(e)}function Uk(e,t,n){for(var s=(e.mode&1)!==0;oe!==null;){var r=oe,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||mf;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||ln;l=mf;var u=ln;if(mf=a,(ln=c)&&!u)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?_S(r):c!==null?(c.return=a,oe=c):_S(r);for(;i!==null;)oe=i,Uk(i),i=i.sibling;oe=r,mf=l,ln=u}NS(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,oe=i):NS(e)}}function NS(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ln||ig(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ln)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:js(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&lS(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lS(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case\"button\":case\"input\":case\"select\":case\"textarea\":c.autoFocus&&n.focus();break;case\"img\":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&id(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}ln||t.flags&512&&yx(t)}catch(f){gt(t,t.return,f)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function CS(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function _S(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ig(4,t)}catch(c){gt(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount==\"function\"){var r=t.return;try{s.componentDidMount()}catch(c){gt(t,r,c)}}var i=t.return;try{yx(t)}catch(c){gt(t,i,c)}break;case 5:var a=t.return;try{yx(t)}catch(c){gt(t,a,c)}}}catch(c){gt(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var cI=Math.ceil,Up=hi.ReactCurrentDispatcher,Gw=hi.ReactCurrentOwner,ps=hi.ReactCurrentBatchConfig,Ie=0,Bt=null,Et=null,Qt=0,Vn=0,dl=va(0),It=0,gd=null,go=0,ag=0,Yw=0,Uu=null,En=null,Qw=0,yc=1/0,$r=null,Bp=!1,wx=null,Zi=null,gf=!1,Vi=null,Vp=0,Bu=0,bx=null,Xf=-1,Jf=0;function jn(){return Ie&6?wt():Xf!==-1?Xf:Xf=wt()}function Xi(e){return e.mode&1?Ie&2&&Qt!==0?Qt&-Qt:q3.transition!==null?(Jf===0&&(Jf=NP()),Jf):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:AP(e.type)),e):1}function Ws(e,t,n,s){if(50<Bu)throw Bu=0,bx=null,Error(Y(185));bh(e,n,s),(!(Ie&2)||e!==Bt)&&(e===Bt&&(!(Ie&2)&&(ag|=n),It===4&&Pi(e,Qt)),Dn(e,s),n===1&&Ie===0&&!(t.mode&1)&&(yc=wt()+500,ng&&xa()))}function Dn(e,t){var n=e.callbackNode;qO(e,t);var s=Cp(e,e===Bt?Qt:0);if(s===0)n!==null&&Fj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Fj(n),t===1)e.tag===0?H3(PS.bind(null,e)):QP(PS.bind(null,e)),B3(function(){!(Ie&6)&&xa()}),n=null;else{switch(CP(s)){case 1:n=jw;break;case 4:n=jP;break;case 16:n=Np;break;case 536870912:n=SP;break;default:n=Np}n=Gk(n,Bk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bk(e,t){if(Xf=-1,Jf=0,Ie&6)throw Error(Y(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var s=Cp(e,e===Bt?Qt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=zp(e,s);else{t=s;var r=Ie;Ie|=2;var i=zk();(Bt!==e||Qt!==t)&&($r=null,yc=wt()+500,lo(e,t));do try{hI();break}catch(l){Vk(e,l)}while(!0);Fw(),Up.current=i,Ie=r,Et!==null?t=0:(Bt=null,Qt=0,t=It)}if(t!==0){if(t===2&&(r=Gv(e),r!==0&&(s=r,t=jx(e,r))),t===1)throw n=gd,lo(e,0),Pi(e,s),Dn(e,wt()),n;if(t===6)Pi(e,s);else{if(r=e.current.alternate,!(s&30)&&!uI(r)&&(t=zp(e,s),t===2&&(i=Gv(e),i!==0&&(s=i,t=jx(e,i))),t===1))throw n=gd,lo(e,0),Pi(e,s),Dn(e,wt()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(Y(345));case 2:Ta(e,En,$r);break;case 3:if(Pi(e,s),(s&130023424)===s&&(t=Qw+500-wt(),10<t)){if(Cp(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){jn(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nx(Ta.bind(null,e,En,$r),t);break}Ta(e,En,$r);break;case 4:if(Pi(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-zs(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=wt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*cI(s/1960))-s,10<s){e.timeoutHandle=nx(Ta.bind(null,e,En,$r),s);break}Ta(e,En,$r);break;case 5:Ta(e,En,$r);break;default:throw Error(Y(329))}}}return Dn(e,wt()),e.callbackNode===n?Bk.bind(null,e):null}function jx(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(lo(e,t).flags|=256),e=zp(e,t),e!==2&&(t=En,En=n,t!==null&&Sx(t)),e}function Sx(e){En===null?En=e:En.push.apply(En,e)}function uI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!qs(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pi(e,t){for(t&=~Yw,t&=~ag,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zs(t),s=1<<n;e[n]=-1,t&=~s}}function PS(e){if(Ie&6)throw Error(Y(327));Cl();var t=Cp(e,0);if(!(t&1))return Dn(e,wt()),null;var n=zp(e,t);if(e.tag!==0&&n===2){var s=Gv(e);s!==0&&(t=s,n=jx(e,s))}if(n===1)throw n=gd,lo(e,0),Pi(e,t),Dn(e,wt()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ta(e,En,$r),Dn(e,wt()),null}function Zw(e,t){var n=Ie;Ie|=1;try{return e(t)}finally{Ie=n,Ie===0&&(yc=wt()+500,ng&&xa())}}function yo(e){Vi!==null&&Vi.tag===0&&!(Ie&6)&&Cl();var t=Ie;Ie|=1;var n=ps.transition,s=Qe;try{if(ps.transition=null,Qe=1,e)return e()}finally{Qe=s,ps.transition=n,Ie=t,!(Ie&6)&&xa()}}function Xw(){Vn=dl.current,it(dl)}function lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,U3(n)),Et!==null)for(n=Et.return;n!==null;){var s=n;switch(Mw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ep();break;case 3:mc(),it(Mn),it(hn),Bw();break;case 5:Uw(s);break;case 4:mc();break;case 13:it(ct);break;case 19:it(ct);break;case 10:Ow(s.type._context);break;case 22:case 23:Xw()}n=n.return}if(Bt=e,Et=e=Ji(e.current,null),Qt=Vn=t,It=0,gd=null,Yw=ag=go=0,En=Uu=null,La!==null){for(t=0;t<La.length;t++)if(n=La[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}La=null}return e}function Vk(e,t){do{var n=Et;try{if(Fw(),Yf.current=$p,Lp){for(var s=dt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Lp=!1}if(mo=0,Ut=Dt=dt=null,Lu=!1,fd=0,Gw.current=null,n===null||n.return===null){It=1,gd=t,Et=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Qt,l.flags|=32768,c!==null&&typeof c==\"object\"&&typeof c.then==\"function\"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=pS(a);if(p!==null){p.flags&=-257,mS(p,a,l,i,t),p.mode&1&&fS(i,u,t),t=p,c=u;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){fS(i,u,t),Jw();break e}c=Error(Y(426))}}else if(ot&&l.mode&1){var b=pS(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),mS(b,a,l,i,t),Rw(gc(c,l));break e}}i=c=gc(c,l),It!==4&&(It=2),Uu===null?Uu=[i]:Uu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Ck(i,c,t);oS(i,v);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError==\"function\"||w!==null&&typeof w.componentDidCatch==\"function\"&&(Zi===null||!Zi.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=_k(i,l,t);oS(i,j);break e}}i=i.return}while(i!==null)}Hk(n)}catch(N){t=N,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function zk(){var e=Up.current;return Up.current=$p,e===null?$p:e}function Jw(){(It===0||It===3||It===2)&&(It=4),Bt===null||!(go&268435455)&&!(ag&268435455)||Pi(Bt,Qt)}function zp(e,t){var n=Ie;Ie|=2;var s=zk();(Bt!==e||Qt!==t)&&($r=null,lo(e,t));do try{dI();break}catch(r){Vk(e,r)}while(!0);if(Fw(),Ie=n,Up.current=s,Et!==null)throw Error(Y(261));return Bt=null,Qt=0,It}function dI(){for(;Et!==null;)Wk(Et)}function hI(){for(;Et!==null&&!IO();)Wk(Et)}function Wk(e){var t=Kk(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,t===null?Hk(e):Et=t,Gw.current=null}function Hk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=iI(n,t),n!==null){n.flags&=32767,Et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{It=6,Et=null;return}}else if(n=rI(n,t,Vn),n!==null){Et=n;return}if(t=t.sibling,t!==null){Et=t;return}Et=t=e}while(t!==null);It===0&&(It=5)}function Ta(e,t,n){var s=Qe,r=ps.transition;try{ps.transition=null,Qe=1,fI(e,t,n,s)}finally{ps.transition=r,Qe=s}return null}function fI(e,t,n,s){do Cl();while(Vi!==null);if(Ie&6)throw Error(Y(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(KO(e,i),e===Bt&&(Et=Bt=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gf||(gf=!0,Gk(Np,function(){return Cl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var a=Qe;Qe=1;var l=Ie;Ie|=4,Gw.current=null,oI(e,n),$k(n,e),R3(ex),_p=!!Jv,ex=Jv=null,e.current=n,lI(n),LO(),Ie=l,Qe=a,ps.transition=i}else e.current=n;if(gf&&(gf=!1,Vi=e,Vp=r),i=e.pendingLanes,i===0&&(Zi=null),BO(n.stateNode),Dn(e,wt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Bp)throw Bp=!1,e=wx,wx=null,e;return Vp&1&&e.tag!==0&&Cl(),i=e.pendingLanes,i&1?e===bx?Bu++:(Bu=0,bx=e):Bu=0,xa(),null}function Cl(){if(Vi!==null){var e=CP(Vp),t=ps.transition,n=Qe;try{if(ps.transition=null,Qe=16>e?16:e,Vi===null)var s=!1;else{if(e=Vi,Vi=null,Vp=0,Ie&6)throw Error(Y(331));var r=Ie;for(Ie|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:$u(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,p=d.return;if(Ok(d),d===u){oe=null;break}if(f!==null){f.return=p,oe=f;break}oe=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$u(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,oe=v;break e}oe=i.return}}var y=e.current;for(oe=y;oe!==null;){a=oe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,oe=w;else e:for(a=y;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ig(9,l)}}catch(N){gt(l,l.return,N)}if(l===a){oe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,oe=j;break e}oe=l.return}}if(Ie=r,xa(),wr&&typeof wr.onPostCommitFiberRoot==\"function\")try{wr.onPostCommitFiberRoot(Zm,e)}catch{}s=!0}return s}finally{Qe=n,ps.transition=t}}return!1}function kS(e,t,n){t=gc(n,t),t=Ck(e,t,1),e=Qi(e,t,1),t=jn(),e!==null&&(bh(e,1,t),Dn(e,t))}function gt(e,t,n){if(e.tag===3)kS(e,e,n);else for(;t!==null;){if(t.tag===3){kS(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError==\"function\"||typeof s.componentDidCatch==\"function\"&&(Zi===null||!Zi.has(s))){e=gc(n,e),e=_k(t,e,1),t=Qi(t,e,1),e=jn(),t!==null&&(bh(t,1,e),Dn(t,e));break}}t=t.return}}function pI(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=jn(),e.pingedLanes|=e.suspendedLanes&n,Bt===e&&(Qt&n)===n&&(It===4||It===3&&(Qt&130023424)===Qt&&500>wt()-Qw?lo(e,0):Yw|=n),Dn(e,t)}function qk(e,t){t===0&&(e.mode&1?(t=af,af<<=1,!(af&130023424)&&(af=4194304)):t=1);var n=jn();e=ii(e,t),e!==null&&(bh(e,t,n),Dn(e,n))}function mI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qk(e,n)}function gI(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Y(314))}s!==null&&s.delete(t),qk(e,n)}var Kk;Kk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)An=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return An=!1,sI(e,t,n);An=!!(e.flags&131072)}else An=!1,ot&&t.flags&1048576&&ZP(t,Rp,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Zf(e,t),e=t.pendingProps;var r=hc(t,hn.current);Nl(t,n),r=zw(null,t,s,e,r,n);var i=Ww();return t.flags|=1,typeof r==\"object\"&&r!==null&&typeof r.render==\"function\"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(s)?(i=!0,Ap(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Lw(t),r.updater=rg,t.stateNode=r,r._reactInternals=t,cx(t,s,e,n),t=hx(null,t,s,!0,i,n)):(t.tag=0,ot&&i&&Aw(t),wn(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Zf(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=vI(s),e=js(s,e),r){case 0:t=dx(null,t,s,e,n);break e;case 1:t=vS(null,t,s,e,n);break e;case 11:t=gS(null,t,s,e,n);break e;case 14:t=yS(null,t,s,js(s.type,e),n);break e}throw Error(Y(306,s,\"\"))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),dx(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),vS(e,t,s,r,n);case 3:e:{if(Ek(t),e===null)throw Error(Y(387));s=t.pendingProps,i=t.memoizedState,r=i.element,sk(e,t),Op(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=gc(Error(Y(423)),t),t=xS(e,t,s,n,r);break e}else if(s!==r){r=gc(Error(Y(424)),t),t=xS(e,t,s,n,r);break e}else for(Hn=Yi(t.stateNode.containerInfo.firstChild),qn=t,ot=!0,Ds=null,n=tk(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fc(),s===r){t=ai(e,t,n);break e}wn(e,t,s,n)}t=t.child}return t;case 5:return rk(t),e===null&&ax(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,tx(s,r)?a=null:i!==null&&tx(s,i)&&(t.flags|=32),Tk(e,t),wn(e,t,a,n),t.child;case 6:return e===null&&ax(t),null;case 13:return Ak(e,t,n);case 4:return $w(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=pc(t,null,s,n):wn(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),gS(e,t,s,r,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,et(Dp,s._currentValue),s._currentValue=a,i!==null)if(qs(i.value,a)){if(i.children===r.children&&!Mn.current){t=ai(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Zr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ox(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Y(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ox(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}wn(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Nl(t,n),r=ms(r),s=s(r),t.flags|=1,wn(e,t,s,n),t.child;case 14:return s=t.type,r=js(s,t.pendingProps),r=js(s.type,r),yS(e,t,s,r,n);case 15:return Pk(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),Zf(e,t),t.tag=1,Rn(s)?(e=!0,Ap(t)):e=!1,Nl(t,n),Nk(t,s,r),cx(t,s,r,n),hx(null,t,s,!0,e,n);case 19:return Mk(e,t,n);case 22:return kk(e,t,n)}throw Error(Y(156,t.tag))};function Gk(e,t){return bP(e,t)}function yI(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,n,s){return new yI(e,t,n,s)}function e1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vI(e){if(typeof e==\"function\")return e1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xw)return 11;if(e===ww)return 14}return 2}function Ji(e,t){var n=e.alternate;return n===null?(n=fs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ep(e,t,n,s,r,i){var a=2;if(s=e,typeof e==\"function\")e1(e)&&(a=1);else if(typeof e==\"string\")a=5;else e:switch(e){case tl:return co(n.children,r,i,t);case vw:a=8,r|=8;break;case Rv:return e=fs(12,n,t,r|2),e.elementType=Rv,e.lanes=i,e;case Dv:return e=fs(13,n,t,r),e.elementType=Dv,e.lanes=i,e;case Fv:return e=fs(19,n,t,r),e.elementType=Fv,e.lanes=i,e;case rP:return og(n,r,i,t);default:if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case nP:a=10;break e;case sP:a=9;break e;case xw:a=11;break e;case ww:a=14;break e;case Ni:a=16,s=null;break e}throw Error(Y(130,e==null?e:typeof e,\"\"))}return t=fs(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function co(e,t,n,s){return e=fs(7,e,s,t),e.lanes=n,e}function og(e,t,n,s){return e=fs(22,e,s,t),e.elementType=rP,e.lanes=n,e.stateNode={isHidden:!1},e}function Sy(e,t,n){return e=fs(6,e,null,t),e.lanes=n,e}function Ny(e,t,n){return t=fs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xI(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ry(0),this.expirationTimes=ry(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ry(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function t1(e,t,n,s,r,i,a,l,c){return e=new xI(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lw(i),e}function wI(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:s==null?null:\"\"+s,children:e,containerInfo:t,implementation:n}}function Yk(e){if(!e)return ia;e=e._reactInternals;e:{if(Uo(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(Rn(n))return YP(e,n,t)}return t}function Qk(e,t,n,s,r,i,a,l,c){return e=t1(n,s,!0,e,r,i,a,l,c),e.context=Yk(null),n=e.current,s=jn(),r=Xi(n),i=Zr(s,r),i.callback=t??null,Qi(n,i,r),e.current.lanes=r,bh(e,r,s),Dn(e,s),e}function lg(e,t,n,s){var r=t.current,i=jn(),a=Xi(r);return n=Yk(n),t.context===null?t.context=n:t.pendingContext=n,t=Zr(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Qi(r,t,a),e!==null&&(Ws(e,r,a,i),Gf(e,r,a)),a}function Wp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function TS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function n1(e,t){TS(e,t),(e=e.alternate)&&TS(e,t)}function bI(){return null}var Zk=typeof reportError==\"function\"?reportError:function(e){console.error(e)};function s1(e){this._internalRoot=e}cg.prototype.render=s1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));lg(e,t,null,null)};cg.prototype.unmount=s1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yo(function(){lg(null,e,null,null)}),t[ri]=null}};function cg(e){this._internalRoot=e}cg.prototype.unstable_scheduleHydration=function(e){if(e){var t=kP();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_i.length&&t!==0&&t<_i[n].priority;n++);_i.splice(n,0,e),n===0&&EP(e)}};function r1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ug(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==\" react-mount-point-unstable \"))}function ES(){}function jI(e,t,n,s,r){if(r){if(typeof s==\"function\"){var i=s;s=function(){var u=Wp(a);i.call(u)}}var a=Qk(t,s,e,0,null,!1,!1,\"\",ES);return e._reactRootContainer=a,e[ri]=a.current,ld(e.nodeType===8?e.parentNode:e),yo(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s==\"function\"){var l=s;s=function(){var u=Wp(c);l.call(u)}}var c=t1(e,0,!1,null,null,!1,!1,\"\",ES);return e._reactRootContainer=c,e[ri]=c.current,ld(e.nodeType===8?e.parentNode:e),yo(function(){lg(t,c,n,s)}),c}function dg(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r==\"function\"){var l=r;r=function(){var c=Wp(a);l.call(c)}}lg(t,a,e,r)}else a=jI(n,t,e,r,s);return Wp(a)}_P=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wu(t.pendingLanes);n!==0&&(Sw(t,n|1),Dn(t,wt()),!(Ie&6)&&(yc=wt()+500,xa()))}break;case 13:yo(function(){var s=ii(e,1);if(s!==null){var r=jn();Ws(s,e,1,r)}}),n1(e,1)}};Nw=function(e){if(e.tag===13){var t=ii(e,134217728);if(t!==null){var n=jn();Ws(t,e,134217728,n)}n1(e,134217728)}};PP=function(e){if(e.tag===13){var t=Xi(e),n=ii(e,t);if(n!==null){var s=jn();Ws(n,e,t,s)}n1(e,t)}};kP=function(){return Qe};TP=function(e,t){var n=Qe;try{return Qe=e,t()}finally{Qe=n}};Hv=function(e,t,n){switch(t){case\"input\":if(Lv(e,n),t=n.name,n.type===\"radio\"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=tg(s);if(!r)throw Error(Y(90));aP(s),Lv(s,r)}}}break;case\"textarea\":lP(e,n);break;case\"select\":t=n.value,t!=null&&wl(e,!!n.multiple,t,!1)}};mP=Zw;gP=yo;var SI={usingClientEntryPoint:!1,Events:[Sh,il,tg,fP,pP,Zw]},au={findFiberByHostInstance:Ia,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"},NI={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xP(e),e===null?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||bI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<\"u\"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{Zm=yf.inject(NI),wr=yf}catch{}}Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SI;Xn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r1(t))throw Error(Y(200));return wI(e,t,null,n)};Xn.createRoot=function(e,t){if(!r1(e))throw Error(Y(299));var n=!1,s=\"\",r=Zk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=t1(e,1,!1,null,null,n,!1,s,r),e[ri]=t.current,ld(e.nodeType===8?e.parentNode:e),new s1(t)};Xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render==\"function\"?Error(Y(188)):(e=Object.keys(e).join(\",\"),Error(Y(268,e)));return e=xP(t),e=e===null?null:e.stateNode,e};Xn.flushSync=function(e){return yo(e)};Xn.hydrate=function(e,t,n){if(!ug(t))throw Error(Y(200));return dg(null,e,t,!0,n)};Xn.hydrateRoot=function(e,t,n){if(!r1(e))throw Error(Y(405));var s=n!=null&&n.hydratedSources||null,r=!1,i=\"\",a=Zk;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Qk(t,null,e,1,n??null,r,!1,i,a),e[ri]=t.current,ld(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new cg(t)};Xn.render=function(e,t,n){if(!ug(t))throw Error(Y(200));return dg(null,e,t,!1,n)};Xn.unmountComponentAtNode=function(e){if(!ug(e))throw Error(Y(40));return e._reactRootContainer?(yo(function(){dg(null,null,e,!1,function(){e._reactRootContainer=null,e[ri]=null})}),!0):!1};Xn.unstable_batchedUpdates=Zw;Xn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ug(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return dg(e,t,n,!1,s)};Xn.version=\"18.3.1-next-f1338f8080-20240426\";function Xk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xk)}catch(e){console.error(e)}}Xk(),X_.exports=Xn;var Bo=X_.exports;const CI=di(Bo);var Jk,AS=Bo;Jk=AS.createRoot,AS.hydrateRoot;function _I(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,r,i,a=[],l=\"\",c=e.split(\"/\");for(c[0]||c.shift();r=c.shift();)n=r[0],n===\"*\"?(a.push(n),l+=r[1]===\"?\"?\"(?:/(.*))?\":\"/(.*)\"):n===\":\"?(s=r.indexOf(\"?\",1),i=r.indexOf(\".\",1),a.push(r.substring(1,~s?s:~i?i:r.length)),l+=~s&&!~i?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~i&&(l+=(~s?\"?\":\"\")+\"\\\\\"+r.substring(i))):l+=\"/\"+r;return{keys:a,pattern:new RegExp(\"^\"+l+(t?\"(?=$|/)\":\"/?$\"),\"i\")}}var eT={exports:{}},tT={};/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var vc=m;function PI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kI=typeof Object.is==\"function\"?Object.is:PI,TI=vc.useState,EI=vc.useEffect,AI=vc.useLayoutEffect,MI=vc.useDebugValue;function RI(e,t){var n=t(),s=TI({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return AI(function(){r.value=n,r.getSnapshot=t,Cy(r)&&i({inst:r})},[e,n,t]),EI(function(){return Cy(r)&&i({inst:r}),e(function(){Cy(r)&&i({inst:r})})},[e]),MI(n),n}function Cy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kI(e,n)}catch{return!0}}function DI(e,t){return t()}var FI=typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"?DI:RI;tT.useSyncExternalStore=vc.useSyncExternalStore!==void 0?vc.useSyncExternalStore:FI;eT.exports=tT;var OI=eT.exports;const II=Q_.useInsertionEffect,LI=typeof window<\"u\"&&typeof window.document<\"u\"&&typeof window.document.createElement<\"u\",$I=LI?m.useLayoutEffect:m.useEffect,UI=II||$I,nT=e=>{const t=m.useRef([e,(...n)=>t[0](...n)]).current;return UI(()=>{t[0]=e}),t[1]},BI=\"popstate\",i1=\"pushState\",a1=\"replaceState\",VI=\"hashchange\",MS=[BI,i1,a1,VI],zI=e=>{for(const t of MS)addEventListener(t,e);return()=>{for(const t of MS)removeEventListener(t,e)}},sT=(e,t)=>OI.useSyncExternalStore(zI,e,t),WI=()=>location.search,HI=({ssrSearch:e=\"\"}={})=>sT(WI,()=>e),RS=()=>location.pathname,qI=({ssrPath:e}={})=>sT(RS,e?()=>e:RS),KI=(e,{replace:t=!1,state:n=null}={})=>history[t?a1:i1](n,\"\",e),GI=(e={})=>[qI(e),KI],DS=Symbol.for(\"wouter_v3\");if(typeof history<\"u\"&&typeof window[DS]>\"u\"){for(const e of[i1,a1]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,DS,{value:!0})}const YI=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?\"~\"+t:t.slice(e.length)||\"/\",rT=(e=\"\")=>e===\"/\"?\"\":e,QI=(e,t)=>e[0]===\"~\"?e.slice(1):rT(t)+e,ZI=(e=\"\",t)=>YI(FS(rT(e)),FS(t)),FS=e=>{try{return decodeURI(e)}catch{return e}},iT={hook:GI,searchHook:HI,parser:_I,base:\"\",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},aT=m.createContext(iT),Ch=()=>m.useContext(aT),oT={},lT=m.createContext(oT),XI=()=>m.useContext(lT),hg=e=>{const[t,n]=e.hook(e);return[ZI(e.base,t),nT((s,r)=>n(QI(s,e.base),r))]},_h=()=>hg(Ch()),cT=(e,t,n,s)=>{const{pattern:r,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||\"*\",s),a=r.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((h,f)=>[h,c[f]])):a.groups;let d={...c};return u&&Object.assign(d,u),d})(),...s?[l]:[]]:[!1,null]},JI=({children:e,...t})=>{var d,h;const n=Ch(),s=t.hook?iT:n;let r=s;const[i,a]=((d=t.ssrPath)==null?void 0:d.split(\"?\"))??[];a&&(t.ssrSearch=a,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let f in s){const p=f===\"base\"?s[f]+(t[f]||\"\"):t[f]||s[f];c===u&&p!==u[f]&&(l.current=u={...u}),u[f]=p,p!==s[f]&&(r=u)}return m.createElement(aT.Provider,{value:r,children:e})},OS=({children:e,component:t},n)=>t?m.createElement(t,{params:n}):typeof e==\"function\"?e(n):e,eL=e=>{let t=m.useRef(oT),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},sn=({path:e,nest:t,match:n,...s})=>{const r=Ch(),[i]=hg(r),[a,l,c]=n??cT(r.parser,e,i,t),u=eL({...XI(),...l});if(!a)return null;const d=c?m.createElement(JI,{base:c},OS(s,u)):OS(s,u);return m.createElement(lT.Provider,{value:u,children:d})},uT=m.forwardRef((e,t)=>{const n=Ch(),[s,r]=hg(n),{to:i=\"\",href:a=i,onClick:l,asChild:c,children:u,className:d,replace:h,state:f,...p}=e,x=nT(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),r(a,e)))}),g=n.hrefs(a[0]===\"~\"?a.slice(1):n.base+a,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:x,href:g}):m.createElement(\"a\",{...p,onClick:x,href:g,className:d!=null&&d.call?d(s===a):d,children:u,ref:t})}),dT=e=>Array.isArray(e)?e.flatMap(t=>dT(t&&t.type===m.Fragment?t.props.children:t)):[e],tL=({children:e,location:t})=>{const n=Ch(),[s]=hg(n);for(const r of dT(e)){let i=0;if(m.isValidElement(r)&&(i=cT(n.parser,r.props.path,t||s,r.props.nest))[0])return m.cloneElement(r,{match:i})}return null};var zc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vo=typeof window>\"u\"||\"Deno\"in globalThis;function as(){}function nL(e,t){return typeof e==\"function\"?e(t):e}function Nx(e){return typeof e==\"number\"&&e>=0&&e!==1/0}function hT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function _l(e,t){return typeof e==\"function\"?e(t):e}function Fs(e,t){return typeof e==\"function\"?e(t):e}function IS(e,t){const{type:n=\"all\",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:l}=e;if(a){if(s){if(t.queryHash!==o1(a,t.options))return!1}else if(!yd(t.queryKey,a))return!1}if(n!==\"all\"){const c=t.isActive();if(n===\"active\"&&!c||n===\"inactive\"&&c)return!1}return!(typeof l==\"boolean\"&&t.isStale()!==l||r&&r!==t.state.fetchStatus||i&&!i(t))}function LS(e,t){const{exact:n,status:s,predicate:r,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(xo(t.options.mutationKey)!==xo(i))return!1}else if(!yd(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function o1(e,t){return((t==null?void 0:t.queryKeyHashFn)||xo)(e)}function xo(e){return JSON.stringify(e,(t,n)=>Cx(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function yd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e==\"object\"&&typeof t==\"object\"?!Object.keys(t).some(n=>!yd(e[n],t[n])):!1}function fT(e,t){if(e===t)return e;const n=$S(e)&&$S(t);if(n||Cx(e)&&Cx(t)){const s=n?e:Object.keys(e),r=s.length,i=n?t:Object.keys(t),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const d=n?u:i[u];(!n&&s.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=fT(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return r===a&&c===r?e:l}return t}function Hp(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function $S(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cx(e){if(!US(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!US(n)||!n.hasOwnProperty(\"isPrototypeOf\")||Object.getPrototypeOf(e)!==Object.prototype)}function US(e){return Object.prototype.toString.call(e)===\"[object Object]\"}function sL(e){return new Promise(t=>{setTimeout(t,e)})}function _x(e,t,n){return typeof n.structuralSharing==\"function\"?n.structuralSharing(e,t):n.structuralSharing!==!1?fT(e,t):t}function rL(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function iL(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var l1=Symbol();function pT(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===l1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Wa,Ti,Ml,E_,aL=(E_=class extends zc{constructor(){super();$(this,Wa);$(this,Ti);$(this,Ml);U(this,Ml,t=>{if(!vo&&window.addEventListener){const n=()=>t();return window.addEventListener(\"visibilitychange\",n,!1),()=>{window.removeEventListener(\"visibilitychange\",n)}}})}onSubscribe(){S(this,Ti)||this.setEventListener(S(this,Ml))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,Ti))==null||t.call(this),U(this,Ti,void 0))}setEventListener(t){var n;U(this,Ml,t),(n=S(this,Ti))==null||n.call(this),U(this,Ti,t(s=>{typeof s==\"boolean\"?this.setFocused(s):this.onFocus()}))}setFocused(t){S(this,Wa)!==t&&(U(this,Wa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,Wa)==\"boolean\"?S(this,Wa):((t=globalThis.document)==null?void 0:t.visibilityState)!==\"hidden\"}},Wa=new WeakMap,Ti=new WeakMap,Ml=new WeakMap,E_),c1=new aL,Rl,Ei,Dl,A_,oL=(A_=class extends zc{constructor(){super();$(this,Rl,!0);$(this,Ei);$(this,Dl);U(this,Dl,t=>{if(!vo&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener(\"online\",n,!1),window.addEventListener(\"offline\",s,!1),()=>{window.removeEventListener(\"online\",n),window.removeEventListener(\"offline\",s)}}})}onSubscribe(){S(this,Ei)||this.setEventListener(S(this,Dl))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,Ei))==null||t.call(this),U(this,Ei,void 0))}setEventListener(t){var n;U(this,Dl,t),(n=S(this,Ei))==null||n.call(this),U(this,Ei,t(this.setOnline.bind(this)))}setOnline(t){S(this,Rl)!==t&&(U(this,Rl,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return S(this,Rl)}},Rl=new WeakMap,Ei=new WeakMap,Dl=new WeakMap,A_),qp=new oL;function Px(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});n.status=\"pending\",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:\"fulfilled\",value:r}),e(r)},n.reject=r=>{s({status:\"rejected\",reason:r}),t(r)},n}function lL(e){return Math.min(1e3*2**e,3e4)}function mT(e){return(e??\"online\")===\"online\"?qp.isOnline():!0}var gT=class extends Error{constructor(e){super(\"CancelledError\"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function _y(e){return e instanceof gT}function yT(e){let t=!1,n=0,s=!1,r;const i=Px(),a=g=>{var b;s||(f(new gT(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>c1.isFocused()&&(e.networkMode===\"always\"||qp.isOnline())&&e.canRun(),d=()=>mT(e.networkMode)&&e.canRun(),h=g=>{var b;s||(s=!0,(b=e.onSuccess)==null||b.call(e,g),r==null||r(),i.resolve(g))},f=g=>{var b;s||(s=!0,(b=e.onError)==null||b.call(e,g),r==null||r(),i.reject(g))},p=()=>new Promise(g=>{var b;r=v=>{(s||u())&&g(v)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;r=void 0,s||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(s)return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var k;if(s)return;const y=e.retry??(vo?0:3),w=e.retryDelay??lL,j=typeof w==\"function\"?w(n,v):w,N=y===!0||typeof y==\"number\"&&n<y||typeof y==\"function\"&&y(n,v);if(t||!N){f(v);return}n++,(k=e.onFail)==null||k.call(e,n,v),sL(j).then(()=>u()?void 0:p()).then(()=>{t?f(v):x()})})};return{promise:i,cancel:a,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():p().then(x),i)}}function cL(){let e=[],t=0,n=l=>{l()},s=l=>{l()},r=l=>setTimeout(l,0);const i=l=>{t?e.push(l):r(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&r(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{r=l}}}var Ot=cL(),Ha,M_,vT=(M_=class{constructor(){$(this,Ha)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nx(this.gcTime)&&U(this,Ha,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(vo?1/0:5*60*1e3))}clearGcTimeout(){S(this,Ha)&&(clearTimeout(S(this,Ha)),U(this,Ha,void 0))}},Ha=new WeakMap,M_),Fl,Ol,rs,rn,Yd,qa,Ss,Ir,R_,uL=(R_=class extends vT{constructor(t){super();$(this,Ss);$(this,Fl);$(this,Ol);$(this,rs);$(this,rn);$(this,Yd);$(this,qa);U(this,qa,!1),U(this,Yd,t.defaultOptions),this.setOptions(t.options),this.observers=[],U(this,rs,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,U(this,Fl,dL(this.options)),this.state=t.state??S(this,Fl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,rn))==null?void 0:t.promise}setOptions(t){this.options={...S(this,Yd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus===\"idle\"&&S(this,rs).remove(this)}setData(t,n){const s=_x(this.state.data,t,this.options);return z(this,Ss,Ir).call(this,{data:s,type:\"success\",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){z(this,Ss,Ir).call(this,{type:\"setState\",state:t,setStateOptions:n})}cancel(t){var s,r;const n=(s=S(this,rn))==null?void 0:s.promise;return(r=S(this,rn))==null||r.cancel(t),n?n.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Fl))}isActive(){return this.observers.some(t=>Fs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===l1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!hT(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,rn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,rn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,rs).notify({type:\"observerAdded\",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,rn)&&(S(this,qa)?S(this,rn).cancel({revert:!0}):S(this,rn).cancelRetry()),this.scheduleGc()),S(this,rs).notify({type:\"observerRemoved\",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||z(this,Ss,Ir).call(this,{type:\"invalidate\"})}fetch(t,n){var c,u,d;if(this.state.fetchStatus!==\"idle\"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,rn))return S(this,rn).continueRetry(),S(this,rn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,r=h=>{Object.defineProperty(h,\"signal\",{enumerable:!0,get:()=>(U(this,qa,!0),s.signal)})},i=()=>{const h=pT(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return r(f),U(this,qa,!1),this.options.persister?this.options.persister(h,f,this):h(f)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(a),(c=this.options.behavior)==null||c.onFetch(a,this),U(this,Ol,this.state),(this.state.fetchStatus===\"idle\"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&z(this,Ss,Ir).call(this,{type:\"fetch\",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=h=>{var f,p,x,g;_y(h)&&h.silent||z(this,Ss,Ir).call(this,{type:\"error\",error:h}),_y(h)||((p=(f=S(this,rs).config).onError)==null||p.call(f,h,this),(g=(x=S(this,rs).config).onSettled)==null||g.call(x,this.state.data,h,this)),this.scheduleGc()};return U(this,rn,yT({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,p,x,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){l(b);return}(p=(f=S(this,rs).config).onSuccess)==null||p.call(f,h,this),(g=(x=S(this,rs).config).onSettled)==null||g.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{z(this,Ss,Ir).call(this,{type:\"failed\",failureCount:h,error:f})},onPause:()=>{z(this,Ss,Ir).call(this,{type:\"pause\"})},onContinue:()=>{z(this,Ss,Ir).call(this,{type:\"continue\"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),S(this,rn).start()}},Fl=new WeakMap,Ol=new WeakMap,rs=new WeakMap,rn=new WeakMap,Yd=new WeakMap,qa=new WeakMap,Ss=new WeakSet,Ir=function(t){const n=s=>{switch(t.type){case\"failed\":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case\"pause\":return{...s,fetchStatus:\"paused\"};case\"continue\":return{...s,fetchStatus:\"fetching\"};case\"fetch\":return{...s,...xT(s.data,this.options),fetchMeta:t.meta??null};case\"success\":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:\"success\",...!t.manual&&{fetchStatus:\"idle\",fetchFailureCount:0,fetchFailureReason:null}};case\"error\":const r=t.error;return _y(r)&&r.revert&&S(this,Ol)?{...S(this,Ol),fetchStatus:\"idle\"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:\"idle\",status:\"error\"};case\"invalidate\":return{...s,isInvalidated:!0};case\"setState\":return{...s,...t.state}}};this.state=n(this.state),Ot.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,rs).notify({query:this,type:\"updated\",action:t})})},R_);function xT(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mT(t.networkMode)?\"fetching\":\"paused\",...e===void 0&&{error:null,status:\"pending\"}}}function dL(e){const t=typeof e.initialData==\"function\"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt==\"function\"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?\"success\":\"pending\",fetchStatus:\"idle\"}}var or,D_,hL=(D_=class extends zc{constructor(t={}){super();$(this,or);this.config=t,U(this,or,new Map)}build(t,n,s){const r=n.queryKey,i=n.queryHash??o1(r,n);let a=this.get(i);return a||(a=new uL({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){S(this,or).has(t.queryHash)||(S(this,or).set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const n=S(this,or).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,or).delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){Ot.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,or).get(t)}getAll(){return[...S(this,or).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>IS(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>IS(t,s)):n}notify(t){Ot.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ot.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ot.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},or=new WeakMap,D_),lr,gn,Ka,cr,wi,F_,fL=(F_=class extends vT{constructor(t){super();$(this,cr);$(this,lr);$(this,gn);$(this,Ka);this.mutationId=t.mutationId,U(this,gn,t.mutationCache),U(this,lr,[]),this.state=t.state||wT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,lr).includes(t)||(S(this,lr).push(t),this.clearGcTimeout(),S(this,gn).notify({type:\"observerAdded\",mutation:this,observer:t}))}removeObserver(t){U(this,lr,S(this,lr).filter(n=>n!==t)),this.scheduleGc(),S(this,gn).notify({type:\"observerRemoved\",mutation:this,observer:t})}optionalRemove(){S(this,lr).length||(this.state.status===\"pending\"?this.scheduleGc():S(this,gn).remove(this))}continue(){var t;return((t=S(this,Ka))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var r,i,a,l,c,u,d,h,f,p,x,g,b,v,y,w,j,N,k,C;U(this,Ka,yT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error(\"No mutationFn found\")),onFail:(T,M)=>{z(this,cr,wi).call(this,{type:\"failed\",failureCount:T,error:M})},onPause:()=>{z(this,cr,wi).call(this,{type:\"pause\"})},onContinue:()=>{z(this,cr,wi).call(this,{type:\"continue\"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,gn).canRun(this)}));const n=this.state.status===\"pending\",s=!S(this,Ka).canStart();try{if(!n){z(this,cr,wi).call(this,{type:\"pending\",variables:t,isPaused:s}),await((i=(r=S(this,gn).config).onMutate)==null?void 0:i.call(r,t,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));M!==this.state.context&&z(this,cr,wi).call(this,{type:\"pending\",context:M,variables:t,isPaused:s})}const T=await S(this,Ka).start();return await((u=(c=S(this,gn).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,T,t,this.state.context)),await((p=(f=S(this,gn).config).onSettled)==null?void 0:p.call(f,T,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,T,null,t,this.state.context)),z(this,cr,wi).call(this,{type:\"success\",data:T}),T}catch(T){try{throw await((v=(b=S(this,gn).config).onError)==null?void 0:v.call(b,T,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,T,t,this.state.context)),await((N=(j=S(this,gn).config).onSettled)==null?void 0:N.call(j,void 0,T,this.state.variables,this.state.context,this)),await((C=(k=this.options).onSettled)==null?void 0:C.call(k,void 0,T,t,this.state.context)),T}finally{z(this,cr,wi).call(this,{type:\"error\",error:T})}}finally{S(this,gn).runNext(this)}}},lr=new WeakMap,gn=new WeakMap,Ka=new WeakMap,cr=new WeakSet,wi=function(t){const n=s=>{switch(t.type){case\"failed\":return{...s,failureCount:t.failureCount,failureReason:t.error};case\"pause\":return{...s,isPaused:!0};case\"continue\":return{...s,isPaused:!1};case\"pending\":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:\"pending\",variables:t.variables,submittedAt:Date.now()};case\"success\":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:\"success\",isPaused:!1};case\"error\":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:\"error\"}}};this.state=n(this.state),Ot.batch(()=>{S(this,lr).forEach(s=>{s.onMutationUpdate(t)}),S(this,gn).notify({mutation:this,type:\"updated\",action:t})})},F_);function wT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:\"idle\",variables:void 0,submittedAt:0}}var Bn,Qd,O_,pL=(O_=class extends zc{constructor(t={}){super();$(this,Bn);$(this,Qd);this.config=t,U(this,Bn,new Map),U(this,Qd,Date.now())}build(t,n,s){const r=new fL({mutationCache:this,mutationId:++Xh(this,Qd)._,options:t.defaultMutationOptions(n),state:s});return this.add(r),r}add(t){const n=vf(t),s=S(this,Bn).get(n)??[];s.push(t),S(this,Bn).set(n,s),this.notify({type:\"added\",mutation:t})}remove(t){var s;const n=vf(t);if(S(this,Bn).has(n)){const r=(s=S(this,Bn).get(n))==null?void 0:s.filter(i=>i!==t);r&&(r.length===0?S(this,Bn).delete(n):S(this,Bn).set(n,r))}this.notify({type:\"removed\",mutation:t})}canRun(t){var s;const n=(s=S(this,Bn).get(vf(t)))==null?void 0:s.find(r=>r.state.status===\"pending\");return!n||n===t}runNext(t){var s;const n=(s=S(this,Bn).get(vf(t)))==null?void 0:s.find(r=>r!==t&&r.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Ot.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...S(this,Bn).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>LS(n,s))}findAll(t={}){return this.getAll().filter(n=>LS(t,n))}notify(t){Ot.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ot.batch(()=>Promise.all(t.map(n=>n.continue().catch(as))))}},Bn=new WeakMap,Qd=new WeakMap,O_);function vf(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function BS(e){return{onFetch:(t,n)=>{var d,h,f,p,x;const s=t.options,r=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],a=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=w=>{Object.defineProperty(w,\"signal\",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener(\"abort\",()=>{g=!0}),t.signal)})},v=pT(t.options,t.fetchOptions),y=async(w,j,N)=>{if(g)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const k={queryKey:t.queryKey,pageParam:j,direction:N?\"backward\":\"forward\",meta:t.options.meta};b(k);const C=await v(k),{maxPages:T}=t.options,M=N?iL:rL;return{pages:M(w.pages,C,T),pageParams:M(w.pageParams,j,T)}};if(r&&i.length){const w=r===\"backward\",j=w?mL:VS,N={pages:i,pageParams:a},k=j(s,N);l=await y(N,k,w)}else{const w=e??i.length;do{const j=c===0?a[0]??s.initialPageParam:VS(s,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function VS(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function mL(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var pt,Ai,Mi,Il,Ll,Ri,$l,Ul,I_,gL=(I_=class{constructor(e={}){$(this,pt);$(this,Ai);$(this,Mi);$(this,Il);$(this,Ll);$(this,Ri);$(this,$l);$(this,Ul);U(this,pt,e.queryCache||new hL),U(this,Ai,e.mutationCache||new pL),U(this,Mi,e.defaultOptions||{}),U(this,Il,new Map),U(this,Ll,new Map),U(this,Ri,0)}mount(){Xh(this,Ri)._++,S(this,Ri)===1&&(U(this,$l,c1.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,pt).onFocus())})),U(this,Ul,qp.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,pt).onOnline())})))}unmount(){var e,t;Xh(this,Ri)._--,S(this,Ri)===0&&((e=S(this,$l))==null||e.call(this),U(this,$l,void 0),(t=S(this,Ul))==null||t.call(this),U(this,Ul,void 0))}isFetching(e){return S(this,pt).findAll({...e,fetchStatus:\"fetching\"}).length}isMutating(e){return S(this,Ai).findAll({...e,status:\"pending\"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=S(this,pt).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(_l(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return S(this,pt).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),r=S(this,pt).get(s.queryHash),i=r==null?void 0:r.state.data,a=nL(t,i);if(a!==void 0)return S(this,pt).build(this,s).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Ot.batch(()=>S(this,pt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,pt);Ot.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,pt),s={type:\"active\",...e};return Ot.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Ot.batch(()=>S(this,pt).findAll(e).map(r=>r.cancel(n)));return Promise.all(s).then(as).catch(as)}invalidateQueries(e={},t={}){return Ot.batch(()=>{if(S(this,pt).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType===\"none\")return Promise.resolve();const n={...e,type:e.refetchType??e.type??\"active\"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Ot.batch(()=>S(this,pt).findAll(e).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(as)),r.state.fetchStatus===\"paused\"?Promise.resolve():i}));return Promise.all(s).then(as)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,pt).build(this,t);return n.isStaleByTime(_l(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(as).catch(as)}fetchInfiniteQuery(e){return e.behavior=BS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(as).catch(as)}ensureInfiniteQueryData(e){return e.behavior=BS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qp.isOnline()?S(this,Ai).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,pt)}getMutationCache(){return S(this,Ai)}getDefaultOptions(){return S(this,Mi)}setDefaultOptions(e){U(this,Mi,e)}setQueryDefaults(e,t){S(this,Il).set(xo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,Il).values()];let n={};return t.forEach(s=>{yd(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){S(this,Ll).set(xo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,Ll).values()];let n={};return t.forEach(s=>{yd(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,Mi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=o1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!==\"always\"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode=\"offlineFirst\"),t.enabled!==!0&&t.queryFn===l1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,Mi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,pt).clear(),S(this,Ai).clear()}},pt=new WeakMap,Ai=new WeakMap,Mi=new WeakMap,Il=new WeakMap,Ll=new WeakMap,Ri=new WeakMap,$l=new WeakMap,Ul=new WeakMap,I_),kn,Fe,Zd,yn,Ga,Bl,Di,ur,Xd,Vl,zl,Ya,Qa,Fi,Wl,Ke,ju,kx,Tx,Ex,Ax,Mx,Rx,Dx,bT,L_,yL=(L_=class extends zc{constructor(t,n){super();$(this,Ke);$(this,kn);$(this,Fe);$(this,Zd);$(this,yn);$(this,Ga);$(this,Bl);$(this,Di);$(this,ur);$(this,Xd);$(this,Vl);$(this,zl);$(this,Ya);$(this,Qa);$(this,Fi);$(this,Wl,new Set);this.options=n,U(this,kn,t),U(this,ur,null),U(this,Di,Px()),this.options.experimental_prefetchInRender||S(this,Di).reject(new Error(\"experimental_prefetchInRender feature flag is not enabled\")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Fe).addObserver(this),zS(S(this,Fe),this.options)?z(this,Ke,ju).call(this):this.updateResult(),z(this,Ke,Ax).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fx(S(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fx(S(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,z(this,Ke,Mx).call(this),z(this,Ke,Rx).call(this),S(this,Fe).removeObserver(this)}setOptions(t,n){const s=this.options,r=S(this,Fe);if(this.options=S(this,kn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!=\"boolean\"&&typeof this.options.enabled!=\"function\"&&typeof Fs(this.options.enabled,S(this,Fe))!=\"boolean\")throw new Error(\"Expected enabled to be a boolean or a callback that returns a boolean\");z(this,Ke,Dx).call(this),S(this,Fe).setOptions(this.options),s._defaulted&&!Hp(this.options,s)&&S(this,kn).getQueryCache().notify({type:\"observerOptionsUpdated\",query:S(this,Fe),observer:this});const i=this.hasListeners();i&&WS(S(this,Fe),r,this.options,s)&&z(this,Ke,ju).call(this),this.updateResult(n),i&&(S(this,Fe)!==r||Fs(this.options.enabled,S(this,Fe))!==Fs(s.enabled,S(this,Fe))||_l(this.options.staleTime,S(this,Fe))!==_l(s.staleTime,S(this,Fe)))&&z(this,Ke,kx).call(this);const a=z(this,Ke,Tx).call(this);i&&(S(this,Fe)!==r||Fs(this.options.enabled,S(this,Fe))!==Fs(s.enabled,S(this,Fe))||a!==S(this,Fi))&&z(this,Ke,Ex).call(this,a)}getOptimisticResult(t){const n=S(this,kn).getQueryCache().build(S(this,kn),t),s=this.createResult(n,t);return xL(this,s)&&(U(this,yn,s),U(this,Bl,this.options),U(this,Ga,S(this,Fe).state)),s}getCurrentResult(){return S(this,yn)}trackResult(t,n){const s={};return Object.keys(t).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),n==null||n(r),t[r])})}),s}trackProp(t){S(this,Wl).add(t)}getCurrentQuery(){return S(this,Fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,kn).defaultQueryOptions(t),s=S(this,kn).getQueryCache().build(S(this,kn),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return z(this,Ke,ju).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,yn)))}createResult(t,n){var T;const s=S(this,Fe),r=this.options,i=S(this,yn),a=S(this,Ga),l=S(this,Bl),u=t!==s?t.state:S(this,Zd),{state:d}=t;let h={...d},f=!1,p;if(n._optimisticResults){const M=this.hasListeners(),E=!M&&zS(t,n),O=M&&WS(t,s,n,r);(E||O)&&(h={...h,...xT(d.data,t.options)}),n._optimisticResults===\"isRestoring\"&&(h.fetchStatus=\"idle\")}let{error:x,errorUpdatedAt:g,status:b}=h;if(n.select&&h.data!==void 0)if(i&&h.data===(a==null?void 0:a.data)&&n.select===S(this,Xd))p=S(this,Vl);else try{U(this,Xd,n.select),p=n.select(h.data),p=_x(i==null?void 0:i.data,p,n),U(this,Vl,p),U(this,ur,null)}catch(M){U(this,ur,M)}else p=h.data;if(n.placeholderData!==void 0&&p===void 0&&b===\"pending\"){let M;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))M=i.data;else if(M=typeof n.placeholderData==\"function\"?n.placeholderData((T=S(this,zl))==null?void 0:T.state.data,S(this,zl)):n.placeholderData,n.select&&M!==void 0)try{M=n.select(M),U(this,ur,null)}catch(E){U(this,ur,E)}M!==void 0&&(b=\"success\",p=_x(i==null?void 0:i.data,M,n),f=!0)}S(this,ur)&&(x=S(this,ur),p=S(this,Vl),g=Date.now(),b=\"error\");const v=h.fetchStatus===\"fetching\",y=b===\"pending\",w=b===\"error\",j=y&&v,N=p!==void 0,C={status:b,fetchStatus:h.fetchStatus,isPending:y,isSuccess:b===\"success\",isError:w,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:w&&!N,isPaused:h.fetchStatus===\"paused\",isPlaceholderData:f,isRefetchError:w&&N,isStale:u1(t,n),refetch:this.refetch,promise:S(this,Di)};if(this.options.experimental_prefetchInRender){const M=D=>{C.status===\"error\"?D.reject(C.error):C.data!==void 0&&D.resolve(C.data)},E=()=>{const D=U(this,Di,C.promise=Px());M(D)},O=S(this,Di);switch(O.status){case\"pending\":t.queryHash===s.queryHash&&M(O);break;case\"fulfilled\":(C.status===\"error\"||C.data!==O.value)&&E();break;case\"rejected\":(C.status!==\"error\"||C.error!==O.reason)&&E();break}}return C}updateResult(t){const n=S(this,yn),s=this.createResult(S(this,Fe),this.options);if(U(this,Ga,S(this,Fe).state),U(this,Bl,this.options),S(this,Ga).data!==void 0&&U(this,zl,S(this,Fe)),Hp(s,n))return;U(this,yn,s);const r={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a==\"function\"?a():a;if(l===\"all\"||!l&&!S(this,Wl).size)return!0;const c=new Set(l??S(this,Wl));return this.options.throwOnError&&c.add(\"error\"),Object.keys(S(this,yn)).some(u=>{const d=u;return S(this,yn)[d]!==n[d]&&c.has(d)})};(t==null?void 0:t.listeners)!==!1&&i()&&(r.listeners=!0),z(this,Ke,bT).call(this,{...r,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&z(this,Ke,Ax).call(this)}},kn=new WeakMap,Fe=new WeakMap,Zd=new WeakMap,yn=new WeakMap,Ga=new WeakMap,Bl=new WeakMap,Di=new WeakMap,ur=new WeakMap,Xd=new WeakMap,Vl=new WeakMap,zl=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,Fi=new WeakMap,Wl=new WeakMap,Ke=new WeakSet,ju=function(t){z(this,Ke,Dx).call(this);let n=S(this,Fe).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(as)),n},kx=function(){z(this,Ke,Mx).call(this);const t=_l(this.options.staleTime,S(this,Fe));if(vo||S(this,yn).isStale||!Nx(t))return;const s=hT(S(this,yn).dataUpdatedAt,t)+1;U(this,Ya,setTimeout(()=>{S(this,yn).isStale||this.updateResult()},s))},Tx=function(){return(typeof this.options.refetchInterval==\"function\"?this.options.refetchInterval(S(this,Fe)):this.options.refetchInterval)??!1},Ex=function(t){z(this,Ke,Rx).call(this),U(this,Fi,t),!(vo||Fs(this.options.enabled,S(this,Fe))===!1||!Nx(S(this,Fi))||S(this,Fi)===0)&&U(this,Qa,setInterval(()=>{(this.options.refetchIntervalInBackground||c1.isFocused())&&z(this,Ke,ju).call(this)},S(this,Fi)))},Ax=function(){z(this,Ke,kx).call(this),z(this,Ke,Ex).call(this,z(this,Ke,Tx).call(this))},Mx=function(){S(this,Ya)&&(clearTimeout(S(this,Ya)),U(this,Ya,void 0))},Rx=function(){S(this,Qa)&&(clearInterval(S(this,Qa)),U(this,Qa,void 0))},Dx=function(){const t=S(this,kn).getQueryCache().build(S(this,kn),this.options);if(t===S(this,Fe))return;const n=S(this,Fe);U(this,Fe,t),U(this,Zd,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},bT=function(t){Ot.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,yn))}),S(this,kn).getQueryCache().notify({query:S(this,Fe),type:\"observerResultsUpdated\"})})},L_);function vL(e,t){return Fs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status===\"error\"&&t.retryOnMount===!1)}function zS(e,t){return vL(e,t)||e.state.data!==void 0&&Fx(e,t,t.refetchOnMount)}function Fx(e,t,n){if(Fs(t.enabled,e)!==!1){const s=typeof n==\"function\"?n(e):n;return s===\"always\"||s!==!1&&u1(e,t)}return!1}function WS(e,t,n,s){return(e!==t||Fs(s.enabled,e)===!1)&&(!n.suspense||e.state.status!==\"error\")&&u1(e,n)}function u1(e,t){return Fs(t.enabled,e)!==!1&&e.isStaleByTime(_l(t.staleTime,e))}function xL(e,t){return!Hp(e.getCurrentResult(),t)}var Oi,Ii,Tn,Vr,ni,tp,Ox,$_,wL=($_=class extends zc{constructor(n,s){super();$(this,ni);$(this,Oi);$(this,Ii);$(this,Tn);$(this,Vr);U(this,Oi,n),this.setOptions(s),this.bindMethods(),z(this,ni,tp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const s=this.options;this.options=S(this,Oi).defaultMutationOptions(n),Hp(this.options,s)||S(this,Oi).getMutationCache().notify({type:\"observerOptionsUpdated\",mutation:S(this,Tn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&xo(s.mutationKey)!==xo(this.options.mutationKey)?this.reset():((r=S(this,Tn))==null?void 0:r.state.status)===\"pending\"&&S(this,Tn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,Tn))==null||n.removeObserver(this)}onMutationUpdate(n){z(this,ni,tp).call(this),z(this,ni,Ox).call(this,n)}getCurrentResult(){return S(this,Ii)}reset(){var n;(n=S(this,Tn))==null||n.removeObserver(this),U(this,Tn,void 0),z(this,ni,tp).call(this),z(this,ni,Ox).call(this)}mutate(n,s){var r;return U(this,Vr,s),(r=S(this,Tn))==null||r.removeObserver(this),U(this,Tn,S(this,Oi).getMutationCache().build(S(this,Oi),this.options)),S(this,Tn).addObserver(this),S(this,Tn).execute(n)}},Oi=new WeakMap,Ii=new WeakMap,Tn=new WeakMap,Vr=new WeakMap,ni=new WeakSet,tp=function(){var s;const n=((s=S(this,Tn))==null?void 0:s.state)??wT();U(this,Ii,{...n,isPending:n.status===\"pending\",isSuccess:n.status===\"success\",isError:n.status===\"error\",isIdle:n.status===\"idle\",mutate:this.mutate,reset:this.reset})},Ox=function(n){Ot.batch(()=>{var s,r,i,a,l,c,u,d;if(S(this,Vr)&&this.hasListeners()){const h=S(this,Ii).variables,f=S(this,Ii).context;(n==null?void 0:n.type)===\"success\"?((r=(s=S(this,Vr)).onSuccess)==null||r.call(s,n.data,h,f),(a=(i=S(this,Vr)).onSettled)==null||a.call(i,n.data,null,h,f)):(n==null?void 0:n.type)===\"error\"&&((c=(l=S(this,Vr)).onError)==null||c.call(l,n.error,h,f),(d=(u=S(this,Vr)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(S(this,Ii))})})},$_),jT=m.createContext(void 0),_t=e=>{const t=m.useContext(jT);if(!t)throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");return t},bL=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(jT.Provider,{value:e,children:t})),ST=m.createContext(!1),jL=()=>m.useContext(ST);ST.Provider;function SL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var NL=m.createContext(SL()),CL=()=>m.useContext(NL);function NT(e,t){return typeof e==\"function\"?e(...t):!!e}function Ix(){}var _L=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},PL=e=>{m.useEffect(()=>{e.clearReset()},[e])},kL=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&NT(n,[e.error,s]),TL=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime==\"number\"&&(e.gcTime=Math.max(e.gcTime,1e3)))},EL=(e,t)=>e.isLoading&&e.isFetching&&!t,AL=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,HS=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function ML(e,t,n){var d,h,f,p,x;const s=_t(),r=jL(),i=CL(),a=s.defaultQueryOptions(e);(h=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,a),a._optimisticResults=r?\"isRestoring\":\"optimistic\",TL(a),_L(a,i),PL(i);const l=!s.getQueryCache().get(a.queryHash),[c]=m.useState(()=>new t(s,a)),u=c.getOptimisticResult(a);if(m.useSyncExternalStore(m.useCallback(g=>{const b=r?Ix:c.subscribe(Ot.batchCalls(g));return c.updateResult(),b},[c,r]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),AL(a,u))throw HS(a,c,i);if(kL({result:u,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash)}))throw u.error;if((p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,a,u),a.experimental_prefetchInRender&&!vo&&EL(u,r)){const g=l?HS(a,c,i):(x=s.getQueryCache().get(a.queryHash))==null?void 0:x.promise;g==null||g.catch(Ix).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function We(e,t){return ML(e,yL)}function Ne(e,t){const n=_t(),[s]=m.useState(()=>new wL(n,e));m.useEffect(()=>{s.setOptions(e)},[s,e]);const r=m.useSyncExternalStore(m.useCallback(a=>s.subscribe(Ot.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=m.useCallback((a,l)=>{s.mutate(a,l).catch(Ix)},[s]);if(r.error&&NT(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}async function CT(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Ae(e,t,n){const s=await fetch(t,{method:e,headers:n?{\"Content-Type\":\"application/json\"}:{},body:n?JSON.stringify(n):void 0,credentials:\"include\"});return await CT(s),s}const RL=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join(\"/\"),{credentials:\"include\"});return e===\"returnNull\"&&n.status===401?null:(await CT(n),await n.json())},Kp=new gL({defaultOptions:{queries:{queryFn:RL({on401:\"throw\"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),DL=1,FL=1e6;let Py=0;function OL(){return Py=(Py+1)%Number.MAX_SAFE_INTEGER,Py.toString()}const ky=new Map,qS=e=>{if(ky.has(e))return;const t=setTimeout(()=>{ky.delete(e),Vu({type:\"REMOVE_TOAST\",toastId:e})},FL);ky.set(e,t)},IL=(e,t)=>{switch(t.type){case\"ADD_TOAST\":return{...e,toasts:[t.toast,...e.toasts].slice(0,DL)};case\"UPDATE_TOAST\":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case\"DISMISS_TOAST\":{const{toastId:n}=t;return n?qS(n):e.toasts.forEach(s=>{qS(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case\"REMOVE_TOAST\":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},np=[];let sp={toasts:[]};function Vu(e){sp=IL(sp,e),np.forEach(t=>{t(sp)})}function LL({...e}){const t=OL(),n=r=>Vu({type:\"UPDATE_TOAST\",toast:{...r,id:t}}),s=()=>Vu({type:\"DISMISS_TOAST\",toastId:t});return Vu({type:\"ADD_TOAST\",toast:{...e,id:t,open:!0,onOpenChange:r=>{r||s()}}}),{id:t,dismiss:s,update:n}}function at(){const[e,t]=m.useState(sp);return m.useEffect(()=>(np.push(t),()=>{const n=np.indexOf(t);n>-1&&np.splice(n,1)}),[e]),{...e,toast:LL,dismiss:n=>Vu({type:\"DISMISS_TOAST\",toastId:n})}}function fe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function KS(e,t){if(typeof e==\"function\")return e(t);e!=null&&(e.current=t)}function _T(...e){return t=>{let n=!1;const s=e.map(r=>{const i=KS(r,t);return!n&&typeof i==\"function\"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i==\"function\"?i():KS(e[r],null)}}}}function Me(...e){return m.useCallback(_T(...e),e)}function $L(e,t){const n=m.createContext(t),s=i=>{const{children:a,...l}=i,c=m.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};s.displayName=e+\"Provider\";function r(i){const a=m.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\\`${i}\\` must be used within \\`${e}\\``)}return[s,r]}function es(e,t=[]){let n=[];function s(i,a){const l=m.createContext(a),c=n.length;n=[...n,a];const u=h=>{var v;const{scope:f,children:p,...x}=h,g=((v=f==null?void 0:f[e])==null?void 0:v[c])||l,b=m.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:p})};u.displayName=i+\"Provider\";function d(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,x=m.useContext(p);if(x)return x;if(a!==void 0)return a;throw new Error(`\\`${h}\\` must be used within \\`${i}\\``)}return[u,d]}const r=()=>{const i=n.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,UL(r,...t)]}function UL(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function wo(e){const t=BL(e),n=m.forwardRef((s,r)=>{const{children:i,...a}=s,l=m.Children.toArray(i),c=l.find(VL);if(c){const u=c.props.children,d=l.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:r,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}var PT=wo(\"Slot\");function BL(e){const t=m.forwardRef((n,s)=>{const{children:r,...i}=n;if(m.isValidElement(r)){const a=WL(r),l=zL(i,r.props);return r.type!==m.Fragment&&(l.ref=s?_T(s,a):a),m.cloneElement(r,l)}return m.Children.count(r)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kT=Symbol(\"radix.slottable\");function TT(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=kT,t}function VL(e){return m.isValidElement(e)&&typeof e.type==\"function\"&&\"__radixId\"in e.type&&e.type.__radixId===kT}function zL(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{i(...l),r(...l)}:r&&(n[s]=r):s===\"style\"?n[s]={...r,...i}:s===\"className\"&&(n[s]=[r,i].filter(Boolean).join(\" \"))}return{...e,...n}}function WL(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,\"ref\"))==null?void 0:s.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,\"ref\"))==null?void 0:r.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ET(e){const t=e+\"CollectionProvider\",[n,s]=es(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:b,children:v}=g,y=je.useRef(null),w=je.useRef(new Map).current;return o.jsx(r,{scope:b,itemMap:w,collectionRef:y,children:v})};a.displayName=t;const l=e+\"CollectionSlot\",c=wo(l),u=je.forwardRef((g,b)=>{const{scope:v,children:y}=g,w=i(l,v),j=Me(b,w.collectionRef);return o.jsx(c,{ref:j,children:y})});u.displayName=l;const d=e+\"CollectionItemSlot\",h=\"data-radix-collection-item\",f=wo(d),p=je.forwardRef((g,b)=>{const{scope:v,children:y,...w}=g,j=je.useRef(null),N=Me(b,j),k=i(d,v);return je.useEffect(()=>(k.itemMap.set(j,{ref:j,...w}),()=>void k.itemMap.delete(j))),o.jsx(f,{[h]:\"\",ref:N,children:y})});p.displayName=d;function x(g){const b=i(e+\"CollectionConsumer\",g);return je.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((k,C)=>w.indexOf(k.ref.current)-w.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},x,s]}var HL=[\"a\",\"button\",\"div\",\"form\",\"h2\",\"h3\",\"img\",\"input\",\"label\",\"li\",\"nav\",\"ol\",\"p\",\"span\",\"svg\",\"ul\"],ge=HL.reduce((e,t)=>{const n=wo(`Primitive.${t}`),s=m.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:t;return typeof window<\"u\"&&(window[Symbol.for(\"radix-ui\")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function AT(e,t){e&&Bo.flushSync(()=>e.dispatchEvent(t))}function bt(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function qL(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e);m.useEffect(()=>{const s=r=>{r.key===\"Escape\"&&n(r)};return t.addEventListener(\"keydown\",s,{capture:!0}),()=>t.removeEventListener(\"keydown\",s,{capture:!0})},[n,t])}var KL=\"DismissableLayer\",Lx=\"dismissableLayer.update\",GL=\"dismissableLayer.pointerDownOutside\",YL=\"dismissableLayer.focusOutside\",GS,MT=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wc=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=m.useContext(MT),[d,h]=m.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),x=Me(t,C=>h(C)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),y=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=y>=v,N=ZL(C=>{const T=C.target,M=[...u.branches].some(E=>E.contains(T));!j||M||(r==null||r(C),a==null||a(C),C.defaultPrevented||l==null||l())},f),k=XL(C=>{const T=C.target;[...u.branches].some(E=>E.contains(T))||(i==null||i(C),a==null||a(C),C.defaultPrevented||l==null||l())},f);return qL(C=>{y===u.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(GS=f.body.style.pointerEvents,f.body.style.pointerEvents=\"none\"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),YS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=GS)}},[d,f,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),YS())},[d,u]),m.useEffect(()=>{const C=()=>p({});return document.addEventListener(Lx,C),()=>document.removeEventListener(Lx,C)},[]),o.jsx(ge.div,{...c,ref:x,style:{pointerEvents:w?j?\"auto\":\"none\":void 0,...e.style},onFocusCapture:fe(e.onFocusCapture,k.onFocusCapture),onBlurCapture:fe(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:fe(e.onPointerDownCapture,N.onPointerDownCapture)})});Wc.displayName=KL;var QL=\"DismissableLayerBranch\",RT=m.forwardRef((e,t)=>{const n=m.useContext(MT),s=m.useRef(null),r=Me(t,s);return m.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(ge.div,{...e,ref:r})});RT.displayName=QL;function ZL(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e),s=m.useRef(!1),r=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){DT(GL,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType===\"touch\"?(t.removeEventListener(\"click\",r.current),r.current=c,t.addEventListener(\"click\",r.current,{once:!0})):c()}else t.removeEventListener(\"click\",r.current);s.current=!1},a=window.setTimeout(()=>{t.addEventListener(\"pointerdown\",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener(\"pointerdown\",i),t.removeEventListener(\"click\",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function XL(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e),s=m.useRef(!1);return m.useEffect(()=>{const r=i=>{i.target&&!s.current&&DT(YL,n,{originalEvent:i},{discrete:!1})};return t.addEventListener(\"focusin\",r),()=>t.removeEventListener(\"focusin\",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function YS(){const e=new CustomEvent(Lx);document.dispatchEvent(e)}function DT(e,t,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?AT(r,i):r.dispatchEvent(i)}var JL=Wc,e6=RT,Ct=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},t6=\"Portal\",Ph=m.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,i]=m.useState(!1);Ct(()=>i(!0),[]);const a=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?CI.createPortal(o.jsx(ge.div,{...s,ref:t}),a):null});Ph.displayName=t6;function n6(e,t){return m.useReducer((n,s)=>t[n][s]??n,e)}var $n=e=>{const{present:t,children:n}=e,s=s6(t),r=typeof n==\"function\"?n({present:s.isPresent}):m.Children.only(n),i=Me(s.ref,r6(r));return typeof n==\"function\"||s.isPresent?m.cloneElement(r,{ref:i}):null};$n.displayName=\"Presence\";function s6(e){const[t,n]=m.useState(),s=m.useRef({}),r=m.useRef(e),i=m.useRef(\"none\"),a=e?\"mounted\":\"unmounted\",[l,c]=n6(a,{mounted:{UNMOUNT:\"unmounted\",ANIMATION_OUT:\"unmountSuspended\"},unmountSuspended:{MOUNT:\"mounted\",ANIMATION_END:\"unmounted\"},unmounted:{MOUNT:\"mounted\"}});return m.useEffect(()=>{const u=xf(s.current);i.current=l===\"mounted\"?u:\"none\"},[l]),Ct(()=>{const u=s.current,d=r.current;if(d!==e){const f=i.current,p=xf(u);e?c(\"MOUNT\"):p===\"none\"||(u==null?void 0:u.display)===\"none\"?c(\"UNMOUNT\"):c(d&&f!==p?\"ANIMATION_OUT\":\"UNMOUNT\"),r.current=e}},[e,c]),Ct(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=p=>{const g=xf(s.current).includes(p.animationName);if(p.target===t&&g&&(c(\"ANIMATION_END\"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode=\"forwards\",u=d.setTimeout(()=>{t.style.animationFillMode===\"forwards\"&&(t.style.animationFillMode=b)})}},f=p=>{p.target===t&&(i.current=xf(s.current))};return t.addEventListener(\"animationstart\",f),t.addEventListener(\"animationcancel\",h),t.addEventListener(\"animationend\",h),()=>{d.clearTimeout(u),t.removeEventListener(\"animationstart\",f),t.removeEventListener(\"animationcancel\",h),t.removeEventListener(\"animationend\",h)}}else c(\"ANIMATION_END\")},[t,c]),{isPresent:[\"mounted\",\"unmountSuspended\"].includes(l),ref:m.useCallback(u=>{u&&(s.current=getComputedStyle(u)),n(u)},[])}}function xf(e){return(e==null?void 0:e.animationName)||\"none\"}function r6(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,\"ref\"))==null?void 0:s.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,\"ref\"))==null?void 0:r.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=i6({defaultProp:t,onChange:n}),i=e!==void 0,a=i?e:s,l=bt(n),c=m.useCallback(u=>{if(i){const h=typeof u==\"function\"?u(e):u;h!==e&&l(h)}else r(u)},[i,e,r,l]);return[a,c]}function i6({defaultProp:e,onChange:t}){const n=m.useState(e),[s]=n,r=m.useRef(s),i=bt(t);return m.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),n}var a6=\"VisuallyHidden\",kh=m.forwardRef((e,t)=>o.jsx(ge.span,{...e,ref:t,style:{position:\"absolute\",border:0,width:1,height:1,padding:0,margin:-1,overflow:\"hidden\",clip:\"rect(0, 0, 0, 0)\",whiteSpace:\"nowrap\",wordWrap:\"normal\",...e.style}}));kh.displayName=a6;var o6=kh,d1=\"ToastProvider\",[h1,l6,c6]=ET(\"Toast\"),[FT,Dre]=es(\"Toast\",[c6]),[u6,fg]=FT(d1),OT=e=>{const{__scopeToast:t,label:n=\"Notification\",duration:s=5e3,swipeDirection:r=\"right\",swipeThreshold:i=50,children:a}=e,[l,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \\`label\\` supplied to \\`${d1}\\`. Expected non-empty \\`string\\`.`),o.jsx(h1.Provider,{scope:t,children:o.jsx(u6,{scope:t,label:n,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};OT.displayName=d1;var IT=\"ToastViewport\",d6=[\"F8\"],$x=\"toast.viewportPause\",Ux=\"toast.viewportResume\",LT=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=d6,label:r=\"Notifications ({hotkey})\",...i}=e,a=fg(IT,n),l=l6(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=Me(t,h,a.onViewportChange),p=s.join(\"+\").replace(/Key/g,\"\").replace(/Digit/g,\"\"),x=a.toastCount>0;m.useEffect(()=>{const b=v=>{var w;s.length!==0&&s.every(j=>v[j]||v.code===j)&&((w=h.current)==null||w.focus())};return document.addEventListener(\"keydown\",b),()=>document.removeEventListener(\"keydown\",b)},[s]),m.useEffect(()=>{const b=c.current,v=h.current;if(x&&b&&v){const y=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent($x);v.dispatchEvent(k),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(Ux);v.dispatchEvent(k),a.isClosePausedRef.current=!1}},j=k=>{!b.contains(k.relatedTarget)&&w()},N=()=>{b.contains(document.activeElement)||w()};return b.addEventListener(\"focusin\",y),b.addEventListener(\"focusout\",j),b.addEventListener(\"pointermove\",y),b.addEventListener(\"pointerleave\",N),window.addEventListener(\"blur\",y),window.addEventListener(\"focus\",w),()=>{b.removeEventListener(\"focusin\",y),b.removeEventListener(\"focusout\",j),b.removeEventListener(\"pointermove\",y),b.removeEventListener(\"pointerleave\",N),window.removeEventListener(\"blur\",y),window.removeEventListener(\"focus\",w)}}},[x,a.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:b})=>{const y=l().map(w=>{const j=w.ref.current,N=[j,...N6(j)];return b===\"forwards\"?N:N.reverse()});return(b===\"forwards\"?y.reverse():y).flat()},[l]);return m.useEffect(()=>{const b=h.current;if(b){const v=y=>{var N,k,C;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key===\"Tab\"&&!w){const T=document.activeElement,M=y.shiftKey;if(y.target===b&&M){(N=u.current)==null||N.focus();return}const D=g({tabbingDirection:M?\"backwards\":\"forwards\"}),q=D.findIndex(W=>W===T);Ty(D.slice(q+1))?y.preventDefault():M?(k=u.current)==null||k.focus():(C=d.current)==null||C.focus()}};return b.addEventListener(\"keydown\",v),()=>b.removeEventListener(\"keydown\",v)}},[l,g]),o.jsxs(e6,{ref:c,role:\"region\",\"aria-label\":r.replace(\"{hotkey}\",p),tabIndex:-1,style:{pointerEvents:x?void 0:\"none\"},children:[x&&o.jsx(Bx,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:\"forwards\"});Ty(b)}}),o.jsx(h1.Slot,{scope:n,children:o.jsx(ge.ol,{tabIndex:-1,...i,ref:f})}),x&&o.jsx(Bx,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:\"backwards\"});Ty(b)}})]})});LT.displayName=IT;var $T=\"ToastFocusProxy\",Bx=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=e,i=fg($T,n);return o.jsx(kh,{\"aria-hidden\":!0,tabIndex:0,...r,ref:t,style:{position:\"fixed\"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});Bx.displayName=$T;var pg=\"Toast\",h6=\"toast.swipeStart\",f6=\"toast.swipeMove\",p6=\"toast.swipeCancel\",m6=\"toast.swipeEnd\",UT=m.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:i,...a}=e,[l=!0,c]=bo({prop:s,defaultProp:r,onChange:i});return o.jsx($n,{present:n||l,children:o.jsx(v6,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:bt(e.onPause),onResume:bt(e.onResume),onSwipeStart:fe(e.onSwipeStart,u=>{u.currentTarget.setAttribute(\"data-swipe\",\"start\")}),onSwipeMove:fe(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute(\"data-swipe\",\"move\"),u.currentTarget.style.setProperty(\"--radix-toast-swipe-move-x\",`${d}px`),u.currentTarget.style.setProperty(\"--radix-toast-swipe-move-y\",`${h}px`)}),onSwipeCancel:fe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute(\"data-swipe\",\"cancel\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-x\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-y\")}),onSwipeEnd:fe(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute(\"data-swipe\",\"end\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\"),u.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\"),u.currentTarget.style.setProperty(\"--radix-toast-swipe-end-x\",`${d}px`),u.currentTarget.style.setProperty(\"--radix-toast-swipe-end-y\",`${h}px`),c(!1)})})})});UT.displayName=pg;var[g6,y6]=FT(pg,{onClose(){}}),v6=m.forwardRef((e,t)=>{const{__scopeToast:n,type:s=\"foreground\",duration:r,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...x}=e,g=fg(pg,n),[b,v]=m.useState(null),y=Me(t,W=>v(W)),w=m.useRef(null),j=m.useRef(null),N=r||g.duration,k=m.useRef(0),C=m.useRef(N),T=m.useRef(0),{onToastAdd:M,onToastRemove:E}=g,O=bt(()=>{var R;(b==null?void 0:b.contains(document.activeElement))&&((R=g.viewport)==null||R.focus()),a()}),D=m.useCallback(W=>{!W||W===1/0||(window.clearTimeout(T.current),k.current=new Date().getTime(),T.current=window.setTimeout(O,W))},[O]);m.useEffect(()=>{const W=g.viewport;if(W){const R=()=>{D(C.current),u==null||u()},K=()=>{const I=new Date().getTime()-k.current;C.current=C.current-I,window.clearTimeout(T.current),c==null||c()};return W.addEventListener($x,K),W.addEventListener(Ux,R),()=>{W.removeEventListener($x,K),W.removeEventListener(Ux,R)}}},[g.viewport,N,c,u,D]),m.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(N)},[i,N,g.isClosePausedRef,D]),m.useEffect(()=>(M(),()=>E()),[M,E]);const q=m.useMemo(()=>b?KT(b):null,[b]);return g.viewport?o.jsxs(o.Fragment,{children:[q&&o.jsx(x6,{__scopeToast:n,role:\"status\",\"aria-live\":s===\"foreground\"?\"assertive\":\"polite\",\"aria-atomic\":!0,children:q}),o.jsx(g6,{scope:n,onClose:O,children:Bo.createPortal(o.jsx(h1.ItemSlot,{scope:n,children:o.jsx(JL,{asChild:!0,onEscapeKeyDown:fe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(ge.li,{role:\"status\",\"aria-live\":\"off\",\"aria-atomic\":!0,tabIndex:0,\"data-state\":i?\"open\":\"closed\",\"data-swipe-direction\":g.swipeDirection,...x,ref:y,style:{userSelect:\"none\",touchAction:\"none\",...e.style},onKeyDown:fe(e.onKeyDown,W=>{W.key===\"Escape\"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:fe(e.onPointerDown,W=>{W.button===0&&(w.current={x:W.clientX,y:W.clientY})}),onPointerMove:fe(e.onPointerMove,W=>{if(!w.current)return;const R=W.clientX-w.current.x,K=W.clientY-w.current.y,I=!!j.current,_=[\"left\",\"right\"].includes(g.swipeDirection),B=[\"left\",\"up\"].includes(g.swipeDirection)?Math.min:Math.max,Q=_?B(0,R):0,se=_?0:B(0,K),Ee=W.pointerType===\"touch\"?10:2,ft={x:Q,y:se},X={originalEvent:W,delta:ft};I?(j.current=ft,wf(f6,h,X,{discrete:!1})):QS(ft,g.swipeDirection,Ee)?(j.current=ft,wf(h6,d,X,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(R)>Ee||Math.abs(K)>Ee)&&(w.current=null)}),onPointerUp:fe(e.onPointerUp,W=>{const R=j.current,K=W.target;if(K.hasPointerCapture(W.pointerId)&&K.releasePointerCapture(W.pointerId),j.current=null,w.current=null,R){const I=W.currentTarget,_={originalEvent:W,delta:R};QS(R,g.swipeDirection,g.swipeThreshold)?wf(m6,p,_,{discrete:!0}):wf(p6,f,_,{discrete:!0}),I.addEventListener(\"click\",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),x6=e=>{const{__scopeToast:t,children:n,...s}=e,r=fg(pg,t),[i,a]=m.useState(!1),[l,c]=m.useState(!1);return j6(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Ph,{asChild:!0,children:o.jsx(kh,{...s,children:i&&o.jsxs(o.Fragment,{children:[r.label,\" \",n]})})})},w6=\"ToastTitle\",BT=m.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return o.jsx(ge.div,{...s,ref:t})});BT.displayName=w6;var b6=\"ToastDescription\",VT=m.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return o.jsx(ge.div,{...s,ref:t})});VT.displayName=b6;var zT=\"ToastAction\",WT=m.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?o.jsx(qT,{altText:n,asChild:!0,children:o.jsx(f1,{...s,ref:t})}):(console.error(`Invalid prop \\`altText\\` supplied to \\`${zT}\\`. Expected non-empty \\`string\\`.`),null)});WT.displayName=zT;var HT=\"ToastClose\",f1=m.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,r=y6(HT,n);return o.jsx(qT,{asChild:!0,children:o.jsx(ge.button,{type:\"button\",...s,ref:t,onClick:fe(e.onClick,r.onClose)})})});f1.displayName=HT;var qT=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...r}=e;return o.jsx(ge.div,{\"data-radix-toast-announce-exclude\":\"\",\"data-radix-toast-announce-alt\":s||void 0,...r,ref:t})});function KT(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),S6(s)){const r=s.ariaHidden||s.hidden||s.style.display===\"none\",i=s.dataset.radixToastAnnounceExclude===\"\";if(!r)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...KT(s))}}),t}function wf(e,t,n,{discrete:s}){const r=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?AT(r,i):r.dispatchEvent(i)}var QS=(e,t,n=0)=>{const s=Math.abs(e.x),r=Math.abs(e.y),i=s>r;return t===\"left\"||t===\"right\"?i&&s>n:!i&&r>n};function j6(e=()=>{}){const t=bt(e);Ct(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function S6(e){return e.nodeType===e.ELEMENT_NODE}function N6(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName===\"INPUT\"&&s.type===\"hidden\";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ty(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var C6=OT,GT=LT,YT=UT,QT=BT,ZT=VT,XT=WT,JT=f1;function eE(e){var t,n,s=\"\";if(typeof e==\"string\"||typeof e==\"number\")s+=e;else if(typeof e==\"object\")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=eE(e[t]))&&(s&&(s+=\" \"),s+=n)}else for(n in e)e[n]&&(s&&(s+=\" \"),s+=n);return s}function tE(){for(var e,t,n=0,s=\"\",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=eE(e))&&(s&&(s+=\" \"),s+=t);return s}const ZS=e=>typeof e==\"boolean\"?`${e}`:e===0?\"0\":e,XS=tE,Th=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return XS(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=ZS(d)||ZS(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...u,h,f]:u},[]);return XS(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const _6=e=>e.replace(/([a-z0-9])([A-Z])/g,\"$1-$2\").toLowerCase(),nE=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(\" \");/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */var P6={xmlns:\"http://www.w3.org/2000/svg\",width:24,height:24,viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:2,strokeLinecap:\"round\",strokeLinejoin:\"round\"};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const k6=m.forwardRef(({color:e=\"currentColor\",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r=\"\",children:i,iconNode:a,...l},c)=>m.createElement(\"svg\",{ref:c,...P6,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:nE(\"lucide\",r),...l},[...a.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const ie=(e,t)=>{const n=m.forwardRef(({className:s,...r},i)=>m.createElement(k6,{ref:i,iconNode:t,className:nE(`lucide-${_6(e)}`,s),...r}));return n.displayName=`${e}`,n};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Da=ie(\"Activity\",[[\"path\",{d:\"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",key:\"169zse\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const JS=ie(\"Archive\",[[\"rect\",{width:\"20\",height:\"5\",x:\"2\",y:\"3\",rx:\"1\",key:\"1wp1u1\"}],[\"path\",{d:\"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\",key:\"1s80jp\"}],[\"path\",{d:\"M10 12h4\",key:\"a56b0p\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const T6=ie(\"ArrowLeft\",[[\"path\",{d:\"m12 19-7-7 7-7\",key:\"1l729n\"}],[\"path\",{d:\"M19 12H5\",key:\"x3x0zl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const E6=ie(\"ArrowRight\",[[\"path\",{d:\"M5 12h14\",key:\"1ays0h\"}],[\"path\",{d:\"m12 5 7 7-7 7\",key:\"xquz4c\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const mg=ie(\"ArrowUpDown\",[[\"path\",{d:\"m21 16-4 4-4-4\",key:\"f6ql7i\"}],[\"path\",{d:\"M17 20V4\",key:\"1ejh1v\"}],[\"path\",{d:\"m3 8 4-4 4 4\",key:\"11wl7u\"}],[\"path\",{d:\"M7 4v16\",key:\"1glfcx\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const sE=ie(\"Award\",[[\"path\",{d:\"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",key:\"1yiouv\"}],[\"circle\",{cx:\"12\",cy:\"8\",r:\"6\",key:\"1vp47v\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const hl=ie(\"Bell\",[[\"path\",{d:\"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\",key:\"1qo2s2\"}],[\"path\",{d:\"M10.3 21a1.94 1.94 0 0 0 3.4 0\",key:\"qgo35s\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const A6=ie(\"CalendarClock\",[[\"path\",{d:\"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5\",key:\"1osxxc\"}],[\"path\",{d:\"M16 2v4\",key:\"4m81vk\"}],[\"path\",{d:\"M8 2v4\",key:\"1cmpym\"}],[\"path\",{d:\"M3 10h5\",key:\"r794hk\"}],[\"path\",{d:\"M17.5 17.5 16 16.3V14\",key:\"akvzfd\"}],[\"circle\",{cx:\"16\",cy:\"16\",r:\"6\",key:\"qoo3c4\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Fn=ie(\"Calendar\",[[\"path\",{d:\"M8 2v4\",key:\"1cmpym\"}],[\"path\",{d:\"M16 2v4\",key:\"4m81vk\"}],[\"rect\",{width:\"18\",height:\"18\",x:\"3\",y:\"4\",rx:\"2\",key:\"1hopcy\"}],[\"path\",{d:\"M3 10h18\",key:\"8toen8\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const M6=ie(\"Camera\",[[\"path\",{d:\"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\",key:\"1tc9qg\"}],[\"circle\",{cx:\"12\",cy:\"13\",r:\"3\",key:\"1vg3eu\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const gg=ie(\"Check\",[[\"path\",{d:\"M20 6 9 17l-5-5\",key:\"1gmf2c\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Gp=ie(\"ChevronDown\",[[\"path\",{d:\"m6 9 6 6 6-6\",key:\"qrunsl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const rE=ie(\"ChevronLeft\",[[\"path\",{d:\"m15 18-6-6 6-6\",key:\"1wnfg3\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const yg=ie(\"ChevronRight\",[[\"path\",{d:\"m9 18 6-6-6-6\",key:\"mthhwq\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Vx=ie(\"ChevronUp\",[[\"path\",{d:\"m18 15-6-6-6 6\",key:\"153udz\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Yp=ie(\"CircleAlert\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"line\",{x1:\"12\",x2:\"12\",y1:\"8\",y2:\"12\",key:\"1pkeuh\"}],[\"line\",{x1:\"12\",x2:\"12.01\",y1:\"16\",y2:\"16\",key:\"4dfq90\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const zx=ie(\"CircleCheckBig\",[[\"path\",{d:\"M21.801 10A10 10 0 1 1 17 3.335\",key:\"yps3ct\"}],[\"path\",{d:\"m9 11 3 3L22 4\",key:\"1pflzl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const iE=ie(\"CircleCheck\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"m9 12 2 2 4-4\",key:\"dzmm74\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const R6=ie(\"CircleHelp\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\",key:\"1u773s\"}],[\"path\",{d:\"M12 17h.01\",key:\"p32p05\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const D6=ie(\"CircleUser\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"circle\",{cx:\"12\",cy:\"10\",r:\"3\",key:\"ilqhr7\"}],[\"path\",{d:\"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662\",key:\"154egf\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const vd=ie(\"CircleX\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"m15 9-6 6\",key:\"1uzhvr\"}],[\"path\",{d:\"m9 9 6 6\",key:\"z0biqf\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ks=ie(\"Clock\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"polyline\",{points:\"12 6 12 12 16 14\",key:\"68esgv\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const F6=ie(\"Download\",[[\"path\",{d:\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\",key:\"ih7n3h\"}],[\"polyline\",{points:\"7 10 12 15 17 10\",key:\"2ggqvy\"}],[\"line\",{x1:\"12\",x2:\"12\",y1:\"15\",y2:\"3\",key:\"1vk2je\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const O6=ie(\"EyeOff\",[[\"path\",{d:\"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",key:\"ct8e1f\"}],[\"path\",{d:\"M14.084 14.158a3 3 0 0 1-4.242-4.242\",key:\"151rxh\"}],[\"path\",{d:\"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",key:\"13bj9a\"}],[\"path\",{d:\"m2 2 20 20\",key:\"1ooewy\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const p1=ie(\"Eye\",[[\"path\",{d:\"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",key:\"1nclc0\"}],[\"circle\",{cx:\"12\",cy:\"12\",r:\"3\",key:\"1v7zrd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const I6=ie(\"FileSpreadsheet\",[[\"path\",{d:\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\",key:\"1rqfz7\"}],[\"path\",{d:\"M14 2v4a2 2 0 0 0 2 2h4\",key:\"tnqrlb\"}],[\"path\",{d:\"M8 13h2\",key:\"yr2amv\"}],[\"path\",{d:\"M14 13h2\",key:\"un5t4a\"}],[\"path\",{d:\"M8 17h2\",key:\"2yhykz\"}],[\"path\",{d:\"M14 17h2\",key:\"10kma7\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const L6=ie(\"FileText\",[[\"path\",{d:\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\",key:\"1rqfz7\"}],[\"path\",{d:\"M14 2v4a2 2 0 0 0 2 2h4\",key:\"tnqrlb\"}],[\"path\",{d:\"M10 9H8\",key:\"b1mrlr\"}],[\"path\",{d:\"M16 13H8\",key:\"t4e002\"}],[\"path\",{d:\"M16 17H8\",key:\"z1uh3a\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const $6=ie(\"Filter\",[[\"polygon\",{points:\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\",key:\"1yg77f\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const U6=ie(\"Globe\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"path\",{d:\"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\",key:\"13o1zl\"}],[\"path\",{d:\"M2 12h20\",key:\"9i4pu4\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const B6=ie(\"History\",[[\"path\",{d:\"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\",key:\"1357e3\"}],[\"path\",{d:\"M3 3v5h5\",key:\"1xhq8a\"}],[\"path\",{d:\"M12 7v5l4 2\",key:\"1fdv2h\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const aE=ie(\"House\",[[\"path\",{d:\"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8\",key:\"5wwlr5\"}],[\"path\",{d:\"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\",key:\"1d0kgt\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const eN=ie(\"Key\",[[\"path\",{d:\"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4\",key:\"g0fldk\"}],[\"path\",{d:\"m21 2-9.6 9.6\",key:\"1j0ho8\"}],[\"circle\",{cx:\"7.5\",cy:\"15.5\",r:\"5.5\",key:\"yqb3hr\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const V6=ie(\"ListTodo\",[[\"rect\",{x:\"3\",y:\"5\",width:\"6\",height:\"6\",rx:\"1\",key:\"1defrl\"}],[\"path\",{d:\"m3 17 2 2 4-4\",key:\"1jhpwq\"}],[\"path\",{d:\"M13 6h8\",key:\"15sg57\"}],[\"path\",{d:\"M13 12h8\",key:\"h98zly\"}],[\"path\",{d:\"M13 18h8\",key:\"oe0vm4\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const z6=ie(\"List\",[[\"path\",{d:\"M3 12h.01\",key:\"nlz23k\"}],[\"path\",{d:\"M3 18h.01\",key:\"1tta3j\"}],[\"path\",{d:\"M3 6h.01\",key:\"1rqtza\"}],[\"path\",{d:\"M8 12h13\",key:\"1za7za\"}],[\"path\",{d:\"M8 18h13\",key:\"1lx6n3\"}],[\"path\",{d:\"M8 6h13\",key:\"ik3vkj\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ho=ie(\"LoaderCircle\",[[\"path\",{d:\"M21 12a9 9 0 1 1-6.219-8.56\",key:\"13zald\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const W6=ie(\"Lock\",[[\"rect\",{width:\"18\",height:\"11\",x:\"3\",y:\"11\",rx:\"2\",ry:\"2\",key:\"1w4ew1\"}],[\"path\",{d:\"M7 11V7a5 5 0 0 1 10 0v4\",key:\"fwvmzm\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const oE=ie(\"LogOut\",[[\"path\",{d:\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\",key:\"1uf3rs\"}],[\"polyline\",{points:\"16 17 21 12 16 7\",key:\"1gabdz\"}],[\"line\",{x1:\"21\",x2:\"9\",y1:\"12\",y2:\"12\",key:\"1uyos4\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Qp=ie(\"Mail\",[[\"rect\",{width:\"20\",height:\"16\",x:\"2\",y:\"4\",rx:\"2\",key:\"18n3k1\"}],[\"path\",{d:\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\",key:\"1ocrg3\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const zu=ie(\"MapPin\",[[\"path\",{d:\"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",key:\"1r0f0z\"}],[\"circle\",{cx:\"12\",cy:\"10\",r:\"3\",key:\"ilqhr7\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const tN=ie(\"Map\",[[\"path\",{d:\"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",key:\"169xi5\"}],[\"path\",{d:\"M15 5.764v15\",key:\"1pn4in\"}],[\"path\",{d:\"M9 3.236v15\",key:\"1uimfh\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Xr=ie(\"MessageCircle\",[[\"path\",{d:\"M7.9 20A9 9 0 1 0 4 16.1L2 22Z\",key:\"vv11sd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Zp=ie(\"MessageSquare\",[[\"path\",{d:\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\",key:\"1lielz\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Wx=ie(\"Navigation\",[[\"polygon\",{points:\"3 11 22 2 13 21 11 13 3 11\",key:\"1ltx0t\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const H6=ie(\"Pen\",[[\"path\",{d:\"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",key:\"1a8usu\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const xd=ie(\"Phone\",[[\"path\",{d:\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",key:\"foiqr5\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const nN=ie(\"Play\",[[\"polygon\",{points:\"6 3 20 12 6 21 6 3\",key:\"1oa8hb\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Hc=ie(\"Plus\",[[\"path\",{d:\"M5 12h14\",key:\"1ays0h\"}],[\"path\",{d:\"M12 5v14\",key:\"s699le\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const q6=ie(\"Power\",[[\"path\",{d:\"M12 2v10\",key:\"mnfbl\"}],[\"path\",{d:\"M18.4 6.6a9 9 0 1 1-12.77.04\",key:\"obofu9\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const rp=ie(\"QrCode\",[[\"rect\",{width:\"5\",height:\"5\",x:\"3\",y:\"3\",rx:\"1\",key:\"1tu5fj\"}],[\"rect\",{width:\"5\",height:\"5\",x:\"16\",y:\"3\",rx:\"1\",key:\"1v8r4q\"}],[\"rect\",{width:\"5\",height:\"5\",x:\"3\",y:\"16\",rx:\"1\",key:\"1x03jg\"}],[\"path\",{d:\"M21 16h-3a2 2 0 0 0-2 2v3\",key:\"177gqh\"}],[\"path\",{d:\"M21 21v.01\",key:\"ents32\"}],[\"path\",{d:\"M12 7v3a2 2 0 0 1-2 2H7\",key:\"8crl2c\"}],[\"path\",{d:\"M3 12h.01\",key:\"nlz23k\"}],[\"path\",{d:\"M12 3h.01\",key:\"n36tog\"}],[\"path\",{d:\"M12 16v.01\",key:\"133mhm\"}],[\"path\",{d:\"M16 12h1\",key:\"1slzba\"}],[\"path\",{d:\"M21 12v.01\",key:\"1lwtk9\"}],[\"path\",{d:\"M12 21v-1\",key:\"1880an\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const jo=ie(\"RefreshCw\",[[\"path\",{d:\"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\",key:\"v9h5vc\"}],[\"path\",{d:\"M21 3v5h-5\",key:\"1q7to0\"}],[\"path\",{d:\"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\",key:\"3uifl3\"}],[\"path\",{d:\"M8 16H3v5\",key:\"1cv678\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Hx=ie(\"RotateCcw\",[[\"path\",{d:\"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\",key:\"1357e3\"}],[\"path\",{d:\"M3 3v5h5\",key:\"1xhq8a\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const sN=ie(\"Save\",[[\"path\",{d:\"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",key:\"1c8476\"}],[\"path\",{d:\"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\",key:\"1ydtos\"}],[\"path\",{d:\"M7 3v4a1 1 0 0 0 1 1h7\",key:\"t51u73\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const ip=ie(\"Search\",[[\"circle\",{cx:\"11\",cy:\"11\",r:\"8\",key:\"4ej97u\"}],[\"path\",{d:\"m21 21-4.3-4.3\",key:\"1qie3q\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const xc=ie(\"Send\",[[\"path\",{d:\"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",key:\"1ffxy3\"}],[\"path\",{d:\"m21.854 2.147-10.94 10.939\",key:\"12cjpa\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const wd=ie(\"Settings\",[[\"path\",{d:\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",key:\"1qme2f\"}],[\"circle\",{cx:\"12\",cy:\"12\",r:\"3\",key:\"1v7zrd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ua=ie(\"Shield\",[[\"path\",{d:\"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",key:\"oel41y\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const lE=ie(\"Smartphone\",[[\"rect\",{width:\"14\",height:\"20\",x:\"5\",y:\"2\",rx:\"2\",ry:\"2\",key:\"1yt0o3\"}],[\"path\",{d:\"M12 18h.01\",key:\"mhygvu\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Xp=ie(\"SquarePen\",[[\"path\",{d:\"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\",key:\"1m0v6g\"}],[\"path\",{d:\"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",key:\"ohrbg2\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Jp=ie(\"Star\",[[\"polygon\",{points:\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",key:\"8f66p6\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Eh=ie(\"Trash2\",[[\"path\",{d:\"M3 6h18\",key:\"d0wm0j\"}],[\"path\",{d:\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\",key:\"4alrt4\"}],[\"path\",{d:\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\",key:\"v07s0e\"}],[\"line\",{x1:\"10\",x2:\"10\",y1:\"11\",y2:\"17\",key:\"1uufr5\"}],[\"line\",{x1:\"14\",x2:\"14\",y1:\"11\",y2:\"17\",key:\"xtxkd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const K6=ie(\"TrendingUp\",[[\"polyline\",{points:\"22 7 13.5 15.5 8.5 10.5 2 17\",key:\"126l90\"}],[\"polyline\",{points:\"16 7 22 7 22 13\",key:\"kwv8wd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const wc=ie(\"TriangleAlert\",[[\"path\",{d:\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",key:\"wmoenq\"}],[\"path\",{d:\"M12 9v4\",key:\"juzpu7\"}],[\"path\",{d:\"M12 17h.01\",key:\"p32p05\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Wu=ie(\"Trophy\",[[\"path\",{d:\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\",key:\"17hqa7\"}],[\"path\",{d:\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\",key:\"lmptdp\"}],[\"path\",{d:\"M4 22h16\",key:\"57wxv0\"}],[\"path\",{d:\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\",key:\"1nw9bq\"}],[\"path\",{d:\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\",key:\"1np0yb\"}],[\"path\",{d:\"M18 2H6v7a6 6 0 0 0 12 0V2Z\",key:\"u46fv3\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Hu=ie(\"UserCheck\",[[\"path\",{d:\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\",key:\"1yyitq\"}],[\"circle\",{cx:\"9\",cy:\"7\",r:\"4\",key:\"nufk8\"}],[\"polyline\",{points:\"16 11 18 13 22 9\",key:\"1pwet4\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ah=ie(\"UserPlus\",[[\"path\",{d:\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\",key:\"1yyitq\"}],[\"circle\",{cx:\"9\",cy:\"7\",r:\"4\",key:\"nufk8\"}],[\"line\",{x1:\"19\",x2:\"19\",y1:\"8\",y2:\"14\",key:\"1bvyxn\"}],[\"line\",{x1:\"22\",x2:\"16\",y1:\"11\",y2:\"11\",key:\"1shjgl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ey=ie(\"UserX\",[[\"path\",{d:\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\",key:\"1yyitq\"}],[\"circle\",{cx:\"9\",cy:\"7\",r:\"4\",key:\"nufk8\"}],[\"line\",{x1:\"17\",x2:\"22\",y1:\"8\",y2:\"13\",key:\"3nzzx3\"}],[\"line\",{x1:\"22\",x2:\"17\",y1:\"8\",y2:\"13\",key:\"1swrse\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const _r=ie(\"User\",[[\"path\",{d:\"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\",key:\"975kel\"}],[\"circle\",{cx:\"12\",cy:\"7\",r:\"4\",key:\"17ys0d\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Jr=ie(\"Users\",[[\"path\",{d:\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\",key:\"1yyitq\"}],[\"circle\",{cx:\"9\",cy:\"7\",r:\"4\",key:\"nufk8\"}],[\"path\",{d:\"M22 21v-2a4 4 0 0 0-3-3.87\",key:\"kshegd\"}],[\"path\",{d:\"M16 3.13a4 4 0 0 1 0 7.75\",key:\"1da9ce\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const So=ie(\"X\",[[\"path\",{d:\"M18 6 6 18\",key:\"1bl5f8\"}],[\"path\",{d:\"m6 6 12 12\",key:\"d8bk6v\"}]]),m1=\"-\",G6=e=>{const t=Q6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(m1);return l[0]===\"\"&&l.length!==1&&l.shift(),cE(l,t)||Y6(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},cE=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?cE(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(m1);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},rN=/^\\[(.+)\\]$/,Y6=e=>{if(rN.test(e)){const t=rN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(\":\"));if(n)return\"arbitrary..\"+n}},Q6=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return X6(Object.entries(e.classGroups),n).forEach(([i,a])=>{qx(a,s,i,t)}),s},qx=(e,t,n,s)=>{e.forEach(r=>{if(typeof r==\"string\"){const i=r===\"\"?t:iN(t,r);i.classGroupId=n;return}if(typeof r==\"function\"){if(Z6(r)){qx(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{qx(a,iN(t,i),n,s)})})},iN=(e,t)=>{let n=e;return t.split(m1).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},Z6=e=>e.isThemeGetter,X6=(e,t)=>t?e.map(([n,s])=>{const r=s.map(i=>typeof i==\"string\"?t+i:typeof i==\"object\"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,r]}):e,J6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},uE=\"!\",e8=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,r=t[0],i=t.length,a=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let v=l[b];if(u===0){if(v===r&&(s||l.slice(b,b+i)===t)){c.push(l.slice(d,b)),d=b+i;continue}if(v===\"/\"){h=b;continue}}v===\"[\"?u++:v===\"]\"&&u--}const f=c.length===0?l:l.substring(d),p=f.startsWith(uE),x=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:a}):a},t8=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]===\"[\"?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},n8=e=>({cache:J6(e.cacheSize),parseClassName:e8(e),...G6(e)}),s8=/\\s+/,r8=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=t,i=[],a=e.trim().split(s8);let l=\"\";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let x=!!p,g=s(x?f.substring(0,p):f);if(!g){if(!x){l=u+(l.length>0?\" \"+l:l);continue}if(g=s(f),!g){l=u+(l.length>0?\" \"+l:l);continue}x=!1}const b=t8(d).join(\":\"),v=h?b+uE:b,y=v+g;if(i.includes(y))continue;i.push(y);const w=r(g,x);for(let j=0;j<w.length;++j){const N=w[j];i.push(v+N)}l=u+(l.length>0?\" \"+l:l)}return l};function i8(){let e=0,t,n,s=\"\";for(;e<arguments.length;)(t=arguments[e++])&&(n=dE(t))&&(s&&(s+=\" \"),s+=n);return s}const dE=e=>{if(typeof e==\"string\")return e;let t,n=\"\";for(let s=0;s<e.length;s++)e[s]&&(t=dE(e[s]))&&(n&&(n+=\" \"),n+=t);return n};function a8(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=n8(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=r8(c,n);return r(c,d),d}return function(){return i(i8.apply(null,arguments))}}const st=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},hE=/^\\[(?:([a-z-]+):)?(.+)\\]$/i,o8=/^\\d+\\/\\d+$/,l8=new Set([\"px\",\"full\",\"screen\"]),c8=/^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/,u8=/\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/,d8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\\(.+\\)$/,h8=/^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/,f8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/,Rr=e=>Pl(e)||l8.has(e)||o8.test(e),yi=e=>qc(e,\"length\",b8),Pl=e=>!!e&&!Number.isNaN(Number(e)),Ay=e=>qc(e,\"number\",Pl),ou=e=>!!e&&Number.isInteger(Number(e)),p8=e=>e.endsWith(\"%\")&&Pl(e.slice(0,-1)),_e=e=>hE.test(e),vi=e=>c8.test(e),m8=new Set([\"length\",\"size\",\"percentage\"]),g8=e=>qc(e,m8,fE),y8=e=>qc(e,\"position\",fE),v8=new Set([\"image\",\"url\"]),x8=e=>qc(e,v8,S8),w8=e=>qc(e,\"\",j8),lu=()=>!0,qc=(e,t,n)=>{const s=hE.exec(e);return s?s[1]?typeof t==\"string\"?s[1]===t:t.has(s[1]):n(s[2]):!1},b8=e=>u8.test(e)&&!d8.test(e),fE=()=>!1,j8=e=>h8.test(e),S8=e=>f8.test(e),N8=()=>{const e=st(\"colors\"),t=st(\"spacing\"),n=st(\"blur\"),s=st(\"brightness\"),r=st(\"borderColor\"),i=st(\"borderRadius\"),a=st(\"borderSpacing\"),l=st(\"borderWidth\"),c=st(\"contrast\"),u=st(\"grayscale\"),d=st(\"hueRotate\"),h=st(\"invert\"),f=st(\"gap\"),p=st(\"gradientColorStops\"),x=st(\"gradientColorStopPositions\"),g=st(\"inset\"),b=st(\"margin\"),v=st(\"opacity\"),y=st(\"padding\"),w=st(\"saturate\"),j=st(\"scale\"),N=st(\"sepia\"),k=st(\"skew\"),C=st(\"space\"),T=st(\"translate\"),M=()=>[\"auto\",\"contain\",\"none\"],E=()=>[\"auto\",\"hidden\",\"clip\",\"visible\",\"scroll\"],O=()=>[\"auto\",_e,t],D=()=>[_e,t],q=()=>[\"\",Rr,yi],W=()=>[\"auto\",Pl,_e],R=()=>[\"bottom\",\"center\",\"left\",\"left-bottom\",\"left-top\",\"right\",\"right-bottom\",\"right-top\",\"top\"],K=()=>[\"solid\",\"dashed\",\"dotted\",\"double\",\"none\"],I=()=>[\"normal\",\"multiply\",\"screen\",\"overlay\",\"darken\",\"lighten\",\"color-dodge\",\"color-burn\",\"hard-light\",\"soft-light\",\"difference\",\"exclusion\",\"hue\",\"saturation\",\"color\",\"luminosity\"],_=()=>[\"start\",\"end\",\"center\",\"between\",\"around\",\"evenly\",\"stretch\"],B=()=>[\"\",\"0\",_e],Q=()=>[\"auto\",\"avoid\",\"all\",\"avoid-page\",\"page\",\"left\",\"right\",\"column\"],se=()=>[Pl,_e];return{cacheSize:500,separator:\":\",theme:{colors:[lu],spacing:[Rr,yi],blur:[\"none\",\"\",vi,_e],brightness:se(),borderColor:[e],borderRadius:[\"none\",\"\",\"full\",vi,_e],borderSpacing:D(),borderWidth:q(),contrast:se(),grayscale:B(),hueRotate:se(),invert:B(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[p8,yi],inset:O(),margin:O(),opacity:se(),padding:D(),saturate:se(),scale:se(),sepia:B(),skew:se(),space:D(),translate:D()},classGroups:{aspect:[{aspect:[\"auto\",\"square\",\"video\",_e]}],container:[\"container\"],columns:[{columns:[vi]}],\"break-after\":[{\"break-after\":Q()}],\"break-before\":[{\"break-before\":Q()}],\"break-inside\":[{\"break-inside\":[\"auto\",\"avoid\",\"avoid-page\",\"avoid-column\"]}],\"box-decoration\":[{\"box-decoration\":[\"slice\",\"clone\"]}],box:[{box:[\"border\",\"content\"]}],display:[\"block\",\"inline-block\",\"inline\",\"flex\",\"inline-flex\",\"table\",\"inline-table\",\"table-caption\",\"table-cell\",\"table-column\",\"table-column-group\",\"table-footer-group\",\"table-header-group\",\"table-row-group\",\"table-row\",\"flow-root\",\"grid\",\"inline-grid\",\"contents\",\"list-item\",\"hidden\"],float:[{float:[\"right\",\"left\",\"none\",\"start\",\"end\"]}],clear:[{clear:[\"left\",\"right\",\"both\",\"none\",\"start\",\"end\"]}],isolation:[\"isolate\",\"isolation-auto\"],\"object-fit\":[{object:[\"contain\",\"cover\",\"fill\",\"none\",\"scale-down\"]}],\"object-position\":[{object:[...R(),_e]}],overflow:[{overflow:E()}],\"overflow-x\":[{\"overflow-x\":E()}],\"overflow-y\":[{\"overflow-y\":E()}],overscroll:[{overscroll:M()}],\"overscroll-x\":[{\"overscroll-x\":M()}],\"overscroll-y\":[{\"overscroll-y\":M()}],position:[\"static\",\"fixed\",\"absolute\",\"relative\",\"sticky\"],inset:[{inset:[g]}],\"inset-x\":[{\"inset-x\":[g]}],\"inset-y\":[{\"inset-y\":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:[\"visible\",\"invisible\",\"collapse\"],z:[{z:[\"auto\",ou,_e]}],basis:[{basis:O()}],\"flex-direction\":[{flex:[\"row\",\"row-reverse\",\"col\",\"col-reverse\"]}],\"flex-wrap\":[{flex:[\"wrap\",\"wrap-reverse\",\"nowrap\"]}],flex:[{flex:[\"1\",\"auto\",\"initial\",\"none\",_e]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:[\"first\",\"last\",\"none\",ou,_e]}],\"grid-cols\":[{\"grid-cols\":[lu]}],\"col-start-end\":[{col:[\"auto\",{span:[\"full\",ou,_e]},_e]}],\"col-start\":[{\"col-start\":W()}],\"col-end\":[{\"col-end\":W()}],\"grid-rows\":[{\"grid-rows\":[lu]}],\"row-start-end\":[{row:[\"auto\",{span:[ou,_e]},_e]}],\"row-start\":[{\"row-start\":W()}],\"row-end\":[{\"row-end\":W()}],\"grid-flow\":[{\"grid-flow\":[\"row\",\"col\",\"dense\",\"row-dense\",\"col-dense\"]}],\"auto-cols\":[{\"auto-cols\":[\"auto\",\"min\",\"max\",\"fr\",_e]}],\"auto-rows\":[{\"auto-rows\":[\"auto\",\"min\",\"max\",\"fr\",_e]}],gap:[{gap:[f]}],\"gap-x\":[{\"gap-x\":[f]}],\"gap-y\":[{\"gap-y\":[f]}],\"justify-content\":[{justify:[\"normal\",..._()]}],\"justify-items\":[{\"justify-items\":[\"start\",\"end\",\"center\",\"stretch\"]}],\"justify-self\":[{\"justify-self\":[\"auto\",\"start\",\"end\",\"center\",\"stretch\"]}],\"align-content\":[{content:[\"normal\",..._(),\"baseline\"]}],\"align-items\":[{items:[\"start\",\"end\",\"center\",\"baseline\",\"stretch\"]}],\"align-self\":[{self:[\"auto\",\"start\",\"end\",\"center\",\"stretch\",\"baseline\"]}],\"place-content\":[{\"place-content\":[..._(),\"baseline\"]}],\"place-items\":[{\"place-items\":[\"start\",\"end\",\"center\",\"baseline\",\"stretch\"]}],\"place-self\":[{\"place-self\":[\"auto\",\"start\",\"end\",\"center\",\"stretch\"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],\"space-x\":[{\"space-x\":[C]}],\"space-x-reverse\":[\"space-x-reverse\"],\"space-y\":[{\"space-y\":[C]}],\"space-y-reverse\":[\"space-y-reverse\"],w:[{w:[\"auto\",\"min\",\"max\",\"fit\",\"svw\",\"lvw\",\"dvw\",_e,t]}],\"min-w\":[{\"min-w\":[_e,t,\"min\",\"max\",\"fit\"]}],\"max-w\":[{\"max-w\":[_e,t,\"none\",\"full\",\"min\",\"max\",\"fit\",\"prose\",{screen:[vi]},vi]}],h:[{h:[_e,t,\"auto\",\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],\"min-h\":[{\"min-h\":[_e,t,\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],\"max-h\":[{\"max-h\":[_e,t,\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],size:[{size:[_e,t,\"auto\",\"min\",\"max\",\"fit\"]}],\"font-size\":[{text:[\"base\",vi,yi]}],\"font-smoothing\":[\"antialiased\",\"subpixel-antialiased\"],\"font-style\":[\"italic\",\"not-italic\"],\"font-weight\":[{font:[\"thin\",\"extralight\",\"light\",\"normal\",\"medium\",\"semibold\",\"bold\",\"extrabold\",\"black\",Ay]}],\"font-family\":[{font:[lu]}],\"fvn-normal\":[\"normal-nums\"],\"fvn-ordinal\":[\"ordinal\"],\"fvn-slashed-zero\":[\"slashed-zero\"],\"fvn-figure\":[\"lining-nums\",\"oldstyle-nums\"],\"fvn-spacing\":[\"proportional-nums\",\"tabular-nums\"],\"fvn-fraction\":[\"diagonal-fractions\",\"stacked-fractions\"],tracking:[{tracking:[\"tighter\",\"tight\",\"normal\",\"wide\",\"wider\",\"widest\",_e]}],\"line-clamp\":[{\"line-clamp\":[\"none\",Pl,Ay]}],leading:[{leading:[\"none\",\"tight\",\"snug\",\"normal\",\"relaxed\",\"loose\",Rr,_e]}],\"list-image\":[{\"list-image\":[\"none\",_e]}],\"list-style-type\":[{list:[\"none\",\"disc\",\"decimal\",_e]}],\"list-style-position\":[{list:[\"inside\",\"outside\"]}],\"placeholder-color\":[{placeholder:[e]}],\"placeholder-opacity\":[{\"placeholder-opacity\":[v]}],\"text-alignment\":[{text:[\"left\",\"center\",\"right\",\"justify\",\"start\",\"end\"]}],\"text-color\":[{text:[e]}],\"text-opacity\":[{\"text-opacity\":[v]}],\"text-decoration\":[\"underline\",\"overline\",\"line-through\",\"no-underline\"],\"text-decoration-style\":[{decoration:[...K(),\"wavy\"]}],\"text-decoration-thickness\":[{decoration:[\"auto\",\"from-font\",Rr,yi]}],\"underline-offset\":[{\"underline-offset\":[\"auto\",Rr,_e]}],\"text-decoration-color\":[{decoration:[e]}],\"text-transform\":[\"uppercase\",\"lowercase\",\"capitalize\",\"normal-case\"],\"text-overflow\":[\"truncate\",\"text-ellipsis\",\"text-clip\"],\"text-wrap\":[{text:[\"wrap\",\"nowrap\",\"balance\",\"pretty\"]}],indent:[{indent:D()}],\"vertical-align\":[{align:[\"baseline\",\"top\",\"middle\",\"bottom\",\"text-top\",\"text-bottom\",\"sub\",\"super\",_e]}],whitespace:[{whitespace:[\"normal\",\"nowrap\",\"pre\",\"pre-line\",\"pre-wrap\",\"break-spaces\"]}],break:[{break:[\"normal\",\"words\",\"all\",\"keep\"]}],hyphens:[{hyphens:[\"none\",\"manual\",\"auto\"]}],content:[{content:[\"none\",_e]}],\"bg-attachment\":[{bg:[\"fixed\",\"local\",\"scroll\"]}],\"bg-clip\":[{\"bg-clip\":[\"border\",\"padding\",\"content\",\"text\"]}],\"bg-opacity\":[{\"bg-opacity\":[v]}],\"bg-origin\":[{\"bg-origin\":[\"border\",\"padding\",\"content\"]}],\"bg-position\":[{bg:[...R(),y8]}],\"bg-repeat\":[{bg:[\"no-repeat\",{repeat:[\"\",\"x\",\"y\",\"round\",\"space\"]}]}],\"bg-size\":[{bg:[\"auto\",\"cover\",\"contain\",g8]}],\"bg-image\":[{bg:[\"none\",{\"gradient-to\":[\"t\",\"tr\",\"r\",\"br\",\"b\",\"bl\",\"l\",\"tl\"]},x8]}],\"bg-color\":[{bg:[e]}],\"gradient-from-pos\":[{from:[x]}],\"gradient-via-pos\":[{via:[x]}],\"gradient-to-pos\":[{to:[x]}],\"gradient-from\":[{from:[p]}],\"gradient-via\":[{via:[p]}],\"gradient-to\":[{to:[p]}],rounded:[{rounded:[i]}],\"rounded-s\":[{\"rounded-s\":[i]}],\"rounded-e\":[{\"rounded-e\":[i]}],\"rounded-t\":[{\"rounded-t\":[i]}],\"rounded-r\":[{\"rounded-r\":[i]}],\"rounded-b\":[{\"rounded-b\":[i]}],\"rounded-l\":[{\"rounded-l\":[i]}],\"rounded-ss\":[{\"rounded-ss\":[i]}],\"rounded-se\":[{\"rounded-se\":[i]}],\"rounded-ee\":[{\"rounded-ee\":[i]}],\"rounded-es\":[{\"rounded-es\":[i]}],\"rounded-tl\":[{\"rounded-tl\":[i]}],\"rounded-tr\":[{\"rounded-tr\":[i]}],\"rounded-br\":[{\"rounded-br\":[i]}],\"rounded-bl\":[{\"rounded-bl\":[i]}],\"border-w\":[{border:[l]}],\"border-w-x\":[{\"border-x\":[l]}],\"border-w-y\":[{\"border-y\":[l]}],\"border-w-s\":[{\"border-s\":[l]}],\"border-w-e\":[{\"border-e\":[l]}],\"border-w-t\":[{\"border-t\":[l]}],\"border-w-r\":[{\"border-r\":[l]}],\"border-w-b\":[{\"border-b\":[l]}],\"border-w-l\":[{\"border-l\":[l]}],\"border-opacity\":[{\"border-opacity\":[v]}],\"border-style\":[{border:[...K(),\"hidden\"]}],\"divide-x\":[{\"divide-x\":[l]}],\"divide-x-reverse\":[\"divide-x-reverse\"],\"divide-y\":[{\"divide-y\":[l]}],\"divide-y-reverse\":[\"divide-y-reverse\"],\"divide-opacity\":[{\"divide-opacity\":[v]}],\"divide-style\":[{divide:K()}],\"border-color\":[{border:[r]}],\"border-color-x\":[{\"border-x\":[r]}],\"border-color-y\":[{\"border-y\":[r]}],\"border-color-s\":[{\"border-s\":[r]}],\"border-color-e\":[{\"border-e\":[r]}],\"border-color-t\":[{\"border-t\":[r]}],\"border-color-r\":[{\"border-r\":[r]}],\"border-color-b\":[{\"border-b\":[r]}],\"border-color-l\":[{\"border-l\":[r]}],\"divide-color\":[{divide:[r]}],\"outline-style\":[{outline:[\"\",...K()]}],\"outline-offset\":[{\"outline-offset\":[Rr,_e]}],\"outline-w\":[{outline:[Rr,yi]}],\"outline-color\":[{outline:[e]}],\"ring-w\":[{ring:q()}],\"ring-w-inset\":[\"ring-inset\"],\"ring-color\":[{ring:[e]}],\"ring-opacity\":[{\"ring-opacity\":[v]}],\"ring-offset-w\":[{\"ring-offset\":[Rr,yi]}],\"ring-offset-color\":[{\"ring-offset\":[e]}],shadow:[{shadow:[\"\",\"inner\",\"none\",vi,w8]}],\"shadow-color\":[{shadow:[lu]}],opacity:[{opacity:[v]}],\"mix-blend\":[{\"mix-blend\":[...I(),\"plus-lighter\",\"plus-darker\"]}],\"bg-blend\":[{\"bg-blend\":I()}],filter:[{filter:[\"\",\"none\"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],\"drop-shadow\":[{\"drop-shadow\":[\"\",\"none\",vi,_e]}],grayscale:[{grayscale:[u]}],\"hue-rotate\":[{\"hue-rotate\":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],\"backdrop-filter\":[{\"backdrop-filter\":[\"\",\"none\"]}],\"backdrop-blur\":[{\"backdrop-blur\":[n]}],\"backdrop-brightness\":[{\"backdrop-brightness\":[s]}],\"backdrop-contrast\":[{\"backdrop-contrast\":[c]}],\"backdrop-grayscale\":[{\"backdrop-grayscale\":[u]}],\"backdrop-hue-rotate\":[{\"backdrop-hue-rotate\":[d]}],\"backdrop-invert\":[{\"backdrop-invert\":[h]}],\"backdrop-opacity\":[{\"backdrop-opacity\":[v]}],\"backdrop-saturate\":[{\"backdrop-saturate\":[w]}],\"backdrop-sepia\":[{\"backdrop-sepia\":[N]}],\"border-collapse\":[{border:[\"collapse\",\"separate\"]}],\"border-spacing\":[{\"border-spacing\":[a]}],\"border-spacing-x\":[{\"border-spacing-x\":[a]}],\"border-spacing-y\":[{\"border-spacing-y\":[a]}],\"table-layout\":[{table:[\"auto\",\"fixed\"]}],caption:[{caption:[\"top\",\"bottom\"]}],transition:[{transition:[\"none\",\"all\",\"\",\"colors\",\"opacity\",\"shadow\",\"transform\",_e]}],duration:[{duration:se()}],ease:[{ease:[\"linear\",\"in\",\"out\",\"in-out\",_e]}],delay:[{delay:se()}],animate:[{animate:[\"none\",\"spin\",\"ping\",\"pulse\",\"bounce\",_e]}],transform:[{transform:[\"\",\"gpu\",\"none\"]}],scale:[{scale:[j]}],\"scale-x\":[{\"scale-x\":[j]}],\"scale-y\":[{\"scale-y\":[j]}],rotate:[{rotate:[ou,_e]}],\"translate-x\":[{\"translate-x\":[T]}],\"translate-y\":[{\"translate-y\":[T]}],\"skew-x\":[{\"skew-x\":[k]}],\"skew-y\":[{\"skew-y\":[k]}],\"transform-origin\":[{origin:[\"center\",\"top\",\"top-right\",\"right\",\"bottom-right\",\"bottom\",\"bottom-left\",\"left\",\"top-left\",_e]}],accent:[{accent:[\"auto\",e]}],appearance:[{appearance:[\"none\",\"auto\"]}],cursor:[{cursor:[\"auto\",\"default\",\"pointer\",\"wait\",\"text\",\"move\",\"help\",\"not-allowed\",\"none\",\"context-menu\",\"progress\",\"cell\",\"crosshair\",\"vertical-text\",\"alias\",\"copy\",\"no-drop\",\"grab\",\"grabbing\",\"all-scroll\",\"col-resize\",\"row-resize\",\"n-resize\",\"e-resize\",\"s-resize\",\"w-resize\",\"ne-resize\",\"nw-resize\",\"se-resize\",\"sw-resize\",\"ew-resize\",\"ns-resize\",\"nesw-resize\",\"nwse-resize\",\"zoom-in\",\"zoom-out\",_e]}],\"caret-color\":[{caret:[e]}],\"pointer-events\":[{\"pointer-events\":[\"none\",\"auto\"]}],resize:[{resize:[\"none\",\"y\",\"x\",\"\"]}],\"scroll-behavior\":[{scroll:[\"auto\",\"smooth\"]}],\"scroll-m\":[{\"scroll-m\":D()}],\"scroll-mx\":[{\"scroll-mx\":D()}],\"scroll-my\":[{\"scroll-my\":D()}],\"scroll-ms\":[{\"scroll-ms\":D()}],\"scroll-me\":[{\"scroll-me\":D()}],\"scroll-mt\":[{\"scroll-mt\":D()}],\"scroll-mr\":[{\"scroll-mr\":D()}],\"scroll-mb\":[{\"scroll-mb\":D()}],\"scroll-ml\":[{\"scroll-ml\":D()}],\"scroll-p\":[{\"scroll-p\":D()}],\"scroll-px\":[{\"scroll-px\":D()}],\"scroll-py\":[{\"scroll-py\":D()}],\"scroll-ps\":[{\"scroll-ps\":D()}],\"scroll-pe\":[{\"scroll-pe\":D()}],\"scroll-pt\":[{\"scroll-pt\":D()}],\"scroll-pr\":[{\"scroll-pr\":D()}],\"scroll-pb\":[{\"scroll-pb\":D()}],\"scroll-pl\":[{\"scroll-pl\":D()}],\"snap-align\":[{snap:[\"start\",\"end\",\"center\",\"align-none\"]}],\"snap-stop\":[{snap:[\"normal\",\"always\"]}],\"snap-type\":[{snap:[\"none\",\"x\",\"y\",\"both\"]}],\"snap-strictness\":[{snap:[\"mandatory\",\"proximity\"]}],touch:[{touch:[\"auto\",\"none\",\"manipulation\"]}],\"touch-x\":[{\"touch-pan\":[\"x\",\"left\",\"right\"]}],\"touch-y\":[{\"touch-pan\":[\"y\",\"up\",\"down\"]}],\"touch-pz\":[\"touch-pinch-zoom\"],select:[{select:[\"none\",\"text\",\"all\",\"auto\"]}],\"will-change\":[{\"will-change\":[\"auto\",\"scroll\",\"contents\",\"transform\",_e]}],fill:[{fill:[e,\"none\"]}],\"stroke-w\":[{stroke:[Rr,yi,Ay]}],stroke:[{stroke:[e,\"none\"]}],sr:[\"sr-only\",\"not-sr-only\"],\"forced-color-adjust\":[{\"forced-color-adjust\":[\"auto\",\"none\"]}]},conflictingClassGroups:{overflow:[\"overflow-x\",\"overflow-y\"],overscroll:[\"overscroll-x\",\"overscroll-y\"],inset:[\"inset-x\",\"inset-y\",\"start\",\"end\",\"top\",\"right\",\"bottom\",\"left\"],\"inset-x\":[\"right\",\"left\"],\"inset-y\":[\"top\",\"bottom\"],flex:[\"basis\",\"grow\",\"shrink\"],gap:[\"gap-x\",\"gap-y\"],p:[\"px\",\"py\",\"ps\",\"pe\",\"pt\",\"pr\",\"pb\",\"pl\"],px:[\"pr\",\"pl\"],py:[\"pt\",\"pb\"],m:[\"mx\",\"my\",\"ms\",\"me\",\"mt\",\"mr\",\"mb\",\"ml\"],mx:[\"mr\",\"ml\"],my:[\"mt\",\"mb\"],size:[\"w\",\"h\"],\"font-size\":[\"leading\"],\"fvn-normal\":[\"fvn-ordinal\",\"fvn-slashed-zero\",\"fvn-figure\",\"fvn-spacing\",\"fvn-fraction\"],\"fvn-ordinal\":[\"fvn-normal\"],\"fvn-slashed-zero\":[\"fvn-normal\"],\"fvn-figure\":[\"fvn-normal\"],\"fvn-spacing\":[\"fvn-normal\"],\"fvn-fraction\":[\"fvn-normal\"],\"line-clamp\":[\"display\",\"overflow\"],rounded:[\"rounded-s\",\"rounded-e\",\"rounded-t\",\"rounded-r\",\"rounded-b\",\"rounded-l\",\"rounded-ss\",\"rounded-se\",\"rounded-ee\",\"rounded-es\",\"rounded-tl\",\"rounded-tr\",\"rounded-br\",\"rounded-bl\"],\"rounded-s\":[\"rounded-ss\",\"rounded-es\"],\"rounded-e\":[\"rounded-se\",\"rounded-ee\"],\"rounded-t\":[\"rounded-tl\",\"rounded-tr\"],\"rounded-r\":[\"rounded-tr\",\"rounded-br\"],\"rounded-b\":[\"rounded-br\",\"rounded-bl\"],\"rounded-l\":[\"rounded-tl\",\"rounded-bl\"],\"border-spacing\":[\"border-spacing-x\",\"border-spacing-y\"],\"border-w\":[\"border-w-s\",\"border-w-e\",\"border-w-t\",\"border-w-r\",\"border-w-b\",\"border-w-l\"],\"border-w-x\":[\"border-w-r\",\"border-w-l\"],\"border-w-y\":[\"border-w-t\",\"border-w-b\"],\"border-color\":[\"border-color-s\",\"border-color-e\",\"border-color-t\",\"border-color-r\",\"border-color-b\",\"border-color-l\"],\"border-color-x\":[\"border-color-r\",\"border-color-l\"],\"border-color-y\":[\"border-color-t\",\"border-color-b\"],\"scroll-m\":[\"scroll-mx\",\"scroll-my\",\"scroll-ms\",\"scroll-me\",\"scroll-mt\",\"scroll-mr\",\"scroll-mb\",\"scroll-ml\"],\"scroll-mx\":[\"scroll-mr\",\"scroll-ml\"],\"scroll-my\":[\"scroll-mt\",\"scroll-mb\"],\"scroll-p\":[\"scroll-px\",\"scroll-py\",\"scroll-ps\",\"scroll-pe\",\"scroll-pt\",\"scroll-pr\",\"scroll-pb\",\"scroll-pl\"],\"scroll-px\":[\"scroll-pr\",\"scroll-pl\"],\"scroll-py\":[\"scroll-pt\",\"scroll-pb\"],touch:[\"touch-x\",\"touch-y\",\"touch-pz\"],\"touch-x\":[\"touch\"],\"touch-y\":[\"touch\"],\"touch-pz\":[\"touch\"]},conflictingClassGroupModifiers:{\"font-size\":[\"leading\"]}}},C8=a8(N8);function ue(...e){return C8(tE(e))}const _8=C6,pE=m.forwardRef(({className:e,...t},n)=>o.jsx(GT,{ref:n,className:ue(\"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",e),...t}));pE.displayName=GT.displayName;const P8=Th(\"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",{variants:{variant:{default:\"border bg-background text-foreground\",destructive:\"destructive border-destructive bg-destructive text-destructive-foreground\"}},defaultVariants:{variant:\"default\"}}),mE=m.forwardRef(({className:e,variant:t,...n},s)=>o.jsx(YT,{ref:s,className:ue(P8({variant:t}),e),...n}));mE.displayName=YT.displayName;const k8=m.forwardRef(({className:e,...t},n)=>o.jsx(XT,{ref:n,className:ue(\"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",e),...t}));k8.displayName=XT.displayName;const gE=m.forwardRef(({className:e,...t},n)=>o.jsx(JT,{ref:n,className:ue(\"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",e),\"toast-close\":\"\",...t,children:o.jsx(So,{className:\"h-4 w-4\"})}));gE.displayName=JT.displayName;const yE=m.forwardRef(({className:e,...t},n)=>o.jsx(QT,{ref:n,className:ue(\"text-sm font-semibold\",e),...t}));yE.displayName=QT.displayName;const vE=m.forwardRef(({className:e,...t},n)=>o.jsx(ZT,{ref:n,className:ue(\"text-sm opacity-90\",e),...t}));vE.displayName=ZT.displayName;function T8(){const{toasts:e}=at();return o.jsxs(_8,{children:[e.map(function({id:t,title:n,description:s,action:r,...i}){return o.jsxs(mE,{...i,children:[o.jsxs(\"div\",{className:\"grid gap-1\",children:[n&&o.jsx(yE,{children:n}),s&&o.jsx(vE,{children:s})]}),r,o.jsx(gE,{})]},t)}),o.jsx(pE,{})]})}var E8=Q_[\" useId \".trim().toString()]||(()=>{}),A8=0;function ea(e){const[t,n]=m.useState(E8());return Ct(()=>{n(s=>s??String(A8++))},[e]),t?`radix-${t}`:\"\"}const M8=[\"top\",\"right\",\"bottom\",\"left\"],aa=Math.min,Wn=Math.max,em=Math.round,bf=Math.floor,jr=e=>({x:e,y:e}),R8={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"},D8={start:\"end\",end:\"start\"};function Kx(e,t,n){return Wn(e,aa(t,n))}function oi(e,t){return typeof e==\"function\"?e(t):e}function li(e){return e.split(\"-\")[0]}function Kc(e){return e.split(\"-\")[1]}function g1(e){return e===\"x\"?\"y\":\"x\"}function y1(e){return e===\"y\"?\"height\":\"width\"}function oa(e){return[\"top\",\"bottom\"].includes(li(e))?\"y\":\"x\"}function v1(e){return g1(oa(e))}function F8(e,t,n){n===void 0&&(n=!1);const s=Kc(e),r=v1(e),i=y1(r);let a=r===\"x\"?s===(n?\"end\":\"start\")?\"right\":\"left\":s===\"start\"?\"bottom\":\"top\";return t.reference[i]>t.floating[i]&&(a=tm(a)),[a,tm(a)]}function O8(e){const t=tm(e);return[Gx(e),t,Gx(t)]}function Gx(e){return e.replace(/start|end/g,t=>D8[t])}function I8(e,t,n){const s=[\"left\",\"right\"],r=[\"right\",\"left\"],i=[\"top\",\"bottom\"],a=[\"bottom\",\"top\"];switch(e){case\"top\":case\"bottom\":return n?t?r:s:t?s:r;case\"left\":case\"right\":return t?i:a;default:return[]}}function L8(e,t,n,s){const r=Kc(e);let i=I8(li(e),n===\"start\",s);return r&&(i=i.map(a=>a+\"-\"+r),t&&(i=i.concat(i.map(Gx)))),i}function tm(e){return e.replace(/left|right|bottom|top/g,t=>R8[t])}function $8(e){return{top:0,right:0,bottom:0,left:0,...e}}function xE(e){return typeof e!=\"number\"?$8(e):{top:e,right:e,bottom:e,left:e}}function nm(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function aN(e,t,n){let{reference:s,floating:r}=e;const i=oa(t),a=v1(t),l=y1(a),c=li(t),u=i===\"y\",d=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,f=s[l]/2-r[l]/2;let p;switch(c){case\"top\":p={x:d,y:s.y-r.height};break;case\"bottom\":p={x:d,y:s.y+s.height};break;case\"right\":p={x:s.x+s.width,y:h};break;case\"left\":p={x:s.x-r.width,y:h};break;default:p={x:s.x,y:s.y}}switch(Kc(t)){case\"start\":p[a]-=f*(n&&u?-1:1);break;case\"end\":p[a]+=f*(n&&u?-1:1);break}return p}const U8=async(e,t,n)=>{const{placement:s=\"bottom\",strategy:r=\"absolute\",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:h}=aN(u,s,c),f=s,p={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:v}=l[g],{x:y,y:w,data:j,reset:N}=await v({x:d,y:h,initialPlacement:s,placement:f,strategy:r,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=y??d,h=w??h,p={...p,[b]:{...p[b],...j}},N&&x<=50&&(x++,typeof N==\"object\"&&(N.placement&&(f=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:r}):N.rects),{x:d,y:h}=aN(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:r,middlewareData:p}};async function bd(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u=\"clippingAncestors\",rootBoundary:d=\"viewport\",elementContext:h=\"floating\",altBoundary:f=!1,padding:p=0}=oi(t,e),x=xE(p),b=l[f?h===\"floating\"?\"reference\":\"floating\":h],v=nm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h===\"floating\"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},N=nm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(v.top-N.top+x.top)/j.y,bottom:(N.bottom-v.bottom+x.bottom)/j.y,left:(v.left-N.left+x.left)/j.x,right:(N.right-v.right+x.right)/j.x}}const B8=e=>({name:\"arrow\",options:e,async fn(t){const{x:n,y:s,placement:r,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=oi(e,t)||{};if(u==null)return{};const h=xE(d),f={x:n,y:s},p=v1(r),x=y1(p),g=await a.getDimensions(u),b=p===\"y\",v=b?\"top\":\"left\",y=b?\"bottom\":\"right\",w=b?\"clientHeight\":\"clientWidth\",j=i.reference[x]+i.reference[p]-f[p]-i.floating[x],N=f[p]-i.reference[p],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let C=k?k[w]:0;(!C||!await(a.isElement==null?void 0:a.isElement(k)))&&(C=l.floating[w]||i.floating[x]);const T=j/2-N/2,M=C/2-g[x]/2-1,E=aa(h[v],M),O=aa(h[y],M),D=E,q=C-g[x]-O,W=C/2-g[x]/2+T,R=Kx(D,W,q),K=!c.arrow&&Kc(r)!=null&&W!==R&&i.reference[x]/2-(W<D?E:O)-g[x]/2<0,I=K?W<D?W-D:W-q:0;return{[p]:f[p]+I,data:{[p]:R,centerOffset:W-R-I,...K&&{alignmentOffset:I}},reset:K}}}),V8=function(e){return e===void 0&&(e={}),{name:\"flip\",options:e,async fn(t){var n,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p=\"bestFit\",fallbackAxisSideDirection:x=\"none\",flipAlignment:g=!0,...b}=oi(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=li(r),y=oa(l),w=li(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=f||(w||!g?[tm(l)]:O8(l)),k=x!==\"none\";!f&&k&&N.push(...L8(l,g,x,j));const C=[l,...N],T=await bd(t,b),M=[];let E=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&M.push(T[v]),h){const W=F8(r,a,j);M.push(T[W[0]],T[W[1]])}if(E=[...E,{placement:r,overflows:M}],!M.every(W=>W<=0)){var O,D;const W=(((O=i.flip)==null?void 0:O.index)||0)+1,R=C[W];if(R)return{data:{index:W,overflows:E},reset:{placement:R}};let K=(D=E.filter(I=>I.overflows[0]<=0).sort((I,_)=>I.overflows[1]-_.overflows[1])[0])==null?void 0:D.placement;if(!K)switch(p){case\"bestFit\":{var q;const I=(q=E.filter(_=>{if(k){const B=oa(_.placement);return B===y||B===\"y\"}return!0}).map(_=>[_.placement,_.overflows.filter(B=>B>0).reduce((B,Q)=>B+Q,0)]).sort((_,B)=>_[1]-B[1])[0])==null?void 0:q[0];I&&(K=I);break}case\"initialPlacement\":K=l;break}if(r!==K)return{reset:{placement:K}}}return{}}}};function oN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lN(e){return M8.some(t=>e[t]>=0)}const z8=function(e){return e===void 0&&(e={}),{name:\"hide\",options:e,async fn(t){const{rects:n}=t,{strategy:s=\"referenceHidden\",...r}=oi(e,t);switch(s){case\"referenceHidden\":{const i=await bd(t,{...r,elementContext:\"reference\"}),a=oN(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:lN(a)}}}case\"escaped\":{const i=await bd(t,{...r,altBoundary:!0}),a=oN(i,n.floating);return{data:{escapedOffsets:a,escaped:lN(a)}}}default:return{}}}}};async function W8(e,t){const{placement:n,platform:s,elements:r}=e,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=li(n),l=Kc(n),c=oa(n)===\"y\",u=[\"left\",\"top\"].includes(a)?-1:1,d=i&&c?-1:1,h=oi(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:x}=typeof h==\"number\"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x==\"number\"&&(p=l===\"end\"?x*-1:x),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const H8=function(e){return e===void 0&&(e=0),{name:\"offset\",options:e,async fn(t){var n,s;const{x:r,y:i,placement:a,middlewareData:l}=t,c=await W8(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:a}}}}},q8=function(e){return e===void 0&&(e={}),{name:\"shift\",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...c}=oi(e,t),u={x:n,y:s},d=await bd(t,c),h=oa(li(r)),f=g1(h);let p=u[f],x=u[h];if(i){const b=f===\"y\"?\"top\":\"left\",v=f===\"y\"?\"bottom\":\"right\",y=p+d[b],w=p-d[v];p=Kx(y,p,w)}if(a){const b=h===\"y\"?\"top\":\"left\",v=h===\"y\"?\"bottom\":\"right\",y=x+d[b],w=x-d[v];x=Kx(y,x,w)}const g=l.fn({...t,[f]:p,[h]:x});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[f]:i,[h]:a}}}}}},K8=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=oi(e,t),d={x:n,y:s},h=oa(r),f=g1(h);let p=d[f],x=d[h];const g=oi(l,t),b=typeof g==\"number\"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f===\"y\"?\"height\":\"width\",j=i.reference[f]-i.floating[w]+b.mainAxis,N=i.reference[f]+i.reference[w]-b.mainAxis;p<j?p=j:p>N&&(p=N)}if(u){var v,y;const w=f===\"y\"?\"width\":\"height\",j=[\"top\",\"left\"].includes(li(r)),N=i.reference[h]-i.floating[w]+(j&&((v=a.offset)==null?void 0:v[h])||0)+(j?0:b.crossAxis),k=i.reference[h]+i.reference[w]+(j?0:((y=a.offset)==null?void 0:y[h])||0)-(j?b.crossAxis:0);x<N?x=N:x>k&&(x=k)}return{[f]:p,[h]:x}}}},G8=function(e){return e===void 0&&(e={}),{name:\"size\",options:e,async fn(t){var n,s;const{placement:r,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=oi(e,t),d=await bd(t,u),h=li(r),f=Kc(r),p=oa(r)===\"y\",{width:x,height:g}=i.floating;let b,v;h===\"top\"||h===\"bottom\"?(b=h,v=f===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?\"start\":\"end\")?\"left\":\"right\"):(v=h,b=f===\"end\"?\"top\":\"bottom\");const y=g-d.top-d.bottom,w=x-d.left-d.right,j=aa(g-d[b],y),N=aa(x-d[v],w),k=!t.middlewareData.shift;let C=j,T=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=y),k&&!f){const E=Wn(d.left,0),O=Wn(d.right,0),D=Wn(d.top,0),q=Wn(d.bottom,0);p?T=x-2*(E!==0||O!==0?E+O:Wn(d.left,d.right)):C=g-2*(D!==0||q!==0?D+q:Wn(d.top,d.bottom))}await c({...t,availableWidth:T,availableHeight:C});const M=await a.getDimensions(l.floating);return x!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function vg(){return typeof window<\"u\"}function Gc(e){return wE(e)?(e.nodeName||\"\").toLowerCase():\"#document\"}function Kn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Er(e){var t;return(t=(wE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wE(e){return vg()?e instanceof Node||e instanceof Kn(e).Node:!1}function Gs(e){return vg()?e instanceof Element||e instanceof Kn(e).Element:!1}function Pr(e){return vg()?e instanceof HTMLElement||e instanceof Kn(e).HTMLElement:!1}function cN(e){return!vg()||typeof ShadowRoot>\"u\"?!1:e instanceof ShadowRoot||e instanceof Kn(e).ShadowRoot}function Mh(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=Ys(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&![\"inline\",\"contents\"].includes(r)}function Y8(e){return[\"table\",\"td\",\"th\"].includes(Gc(e))}function xg(e){return[\":popover-open\",\":modal\"].some(t=>{try{return e.matches(t)}catch{return!1}})}function x1(e){const t=w1(),n=Gs(e)?Ys(e):e;return[\"transform\",\"translate\",\"scale\",\"rotate\",\"perspective\"].some(s=>n[s]?n[s]!==\"none\":!1)||(n.containerType?n.containerType!==\"normal\":!1)||!t&&(n.backdropFilter?n.backdropFilter!==\"none\":!1)||!t&&(n.filter?n.filter!==\"none\":!1)||[\"transform\",\"translate\",\"scale\",\"rotate\",\"perspective\",\"filter\"].some(s=>(n.willChange||\"\").includes(s))||[\"paint\",\"layout\",\"strict\",\"content\"].some(s=>(n.contain||\"\").includes(s))}function Q8(e){let t=la(e);for(;Pr(t)&&!bc(t);){if(x1(t))return t;if(xg(t))return null;t=la(t)}return null}function w1(){return typeof CSS>\"u\"||!CSS.supports?!1:CSS.supports(\"-webkit-backdrop-filter\",\"none\")}function bc(e){return[\"html\",\"body\",\"#document\"].includes(Gc(e))}function Ys(e){return Kn(e).getComputedStyle(e)}function wg(e){return Gs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function la(e){if(Gc(e)===\"html\")return e;const t=e.assignedSlot||e.parentNode||cN(e)&&e.host||Er(e);return cN(t)?t.host:t}function bE(e){const t=la(e);return bc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pr(t)&&Mh(t)?t:bE(t)}function jd(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=bE(e),i=r===((s=e.ownerDocument)==null?void 0:s.body),a=Kn(r);if(i){const l=Yx(a);return t.concat(a,a.visualViewport||[],Mh(r)?r:[],l&&n?jd(l):[])}return t.concat(r,jd(r,[],n))}function Yx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jE(e){const t=Ys(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=Pr(e),i=r?e.offsetWidth:n,a=r?e.offsetHeight:s,l=em(n)!==i||em(s)!==a;return l&&(n=i,s=a),{width:n,height:s,$:l}}function b1(e){return Gs(e)?e:e.contextElement}function kl(e){const t=b1(e);if(!Pr(t))return jr(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:i}=jE(t);let a=(i?em(n.width):n.width)/s,l=(i?em(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Z8=jr(0);function SE(e){const t=Kn(e);return!w1()||!t.visualViewport?Z8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function X8(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Kn(e)?!1:t}function No(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=b1(e);let a=jr(1);t&&(s?Gs(s)&&(a=kl(s)):a=kl(e));const l=X8(i,n,s)?SE(i):jr(0);let c=(r.left+l.x)/a.x,u=(r.top+l.y)/a.y,d=r.width/a.x,h=r.height/a.y;if(i){const f=Kn(i),p=s&&Gs(s)?Kn(s):s;let x=f,g=Yx(x);for(;g&&s&&p!==x;){const b=kl(g),v=g.getBoundingClientRect(),y=Ys(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,j=v.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=w,u+=j,x=Kn(g),g=Yx(x)}}return nm({width:d,height:h,x:c,y:u})}function j1(e,t){const n=wg(e).scrollLeft;return t?t.left+n:No(Er(e)).left+n}function NE(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:j1(e,s)),i=s.top+t.scrollTop;return{x:r,y:i}}function J8(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const i=r===\"fixed\",a=Er(s),l=t?xg(t.floating):!1;if(s===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=jr(1);const d=jr(0),h=Pr(s);if((h||!h&&!i)&&((Gc(s)!==\"body\"||Mh(a))&&(c=wg(s)),Pr(s))){const p=No(s);u=kl(s),d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}const f=a&&!h&&!i?NE(a,c,!0):jr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function e$(e){return Array.from(e.getClientRects())}function t$(e){const t=Er(e),n=wg(e),s=e.ownerDocument.body,r=Wn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Wn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+j1(e);const l=-n.scrollTop;return Ys(s).direction===\"rtl\"&&(a+=Wn(t.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:l}}function n$(e,t){const n=Kn(e),s=Er(e),r=n.visualViewport;let i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const u=w1();(!u||u&&t===\"fixed\")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}function s$(e,t){const n=No(e,!0,t===\"fixed\"),s=n.top+e.clientTop,r=n.left+e.clientLeft,i=Pr(e)?kl(e):jr(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=r*i.x,u=s*i.y;return{width:a,height:l,x:c,y:u}}function uN(e,t,n){let s;if(t===\"viewport\")s=n$(e,n);else if(t===\"document\")s=t$(Er(e));else if(Gs(t))s=s$(t,n);else{const r=SE(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return nm(s)}function CE(e,t){const n=la(e);return n===t||!Gs(n)||bc(n)?!1:Ys(n).position===\"fixed\"||CE(n,t)}function r$(e,t){const n=t.get(e);if(n)return n;let s=jd(e,[],!1).filter(l=>Gs(l)&&Gc(l)!==\"body\"),r=null;const i=Ys(e).position===\"fixed\";let a=i?la(e):e;for(;Gs(a)&&!bc(a);){const l=Ys(a),c=x1(a);!c&&l.position===\"fixed\"&&(r=null),(i?!c&&!r:!c&&l.position===\"static\"&&!!r&&[\"absolute\",\"fixed\"].includes(r.position)||Mh(a)&&!c&&CE(e,a))?s=s.filter(d=>d!==a):r=l,a=la(a)}return t.set(e,s),s}function i$(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const a=[...n===\"clippingAncestors\"?xg(t)?[]:r$(t,this._c):[].concat(n),s],l=a[0],c=a.reduce((u,d)=>{const h=uN(t,d,r);return u.top=Wn(h.top,u.top),u.right=aa(h.right,u.right),u.bottom=aa(h.bottom,u.bottom),u.left=Wn(h.left,u.left),u},uN(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function a$(e){const{width:t,height:n}=jE(e);return{width:t,height:n}}function o$(e,t,n){const s=Pr(t),r=Er(t),i=n===\"fixed\",a=No(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=jr(0);if(s||!s&&!i)if((Gc(t)!==\"body\"||Mh(r))&&(l=wg(t)),s){const f=No(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else r&&(c.x=j1(r));const u=r&&!s&&!i?NE(r,l):jr(0),d=a.left+l.scrollLeft-c.x-u.x,h=a.top+l.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function My(e){return Ys(e).position===\"static\"}function dN(e,t){if(!Pr(e)||Ys(e).position===\"fixed\")return null;if(t)return t(e);let n=e.offsetParent;return Er(e)===n&&(n=n.ownerDocument.body),n}function _E(e,t){const n=Kn(e);if(xg(e))return n;if(!Pr(e)){let r=la(e);for(;r&&!bc(r);){if(Gs(r)&&!My(r))return r;r=la(r)}return n}let s=dN(e,t);for(;s&&Y8(s)&&My(s);)s=dN(s,t);return s&&bc(s)&&My(s)&&!x1(s)?n:s||Q8(e)||n}const l$=async function(e){const t=this.getOffsetParent||_E,n=this.getDimensions,s=await n(e.floating);return{reference:o$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function c$(e){return Ys(e).direction===\"rtl\"}const u$={convertOffsetParentRelativeRectToViewportRelativeRect:J8,getDocumentElement:Er,getClippingRect:i$,getOffsetParent:_E,getElementRects:l$,getClientRects:e$,getDimensions:a$,getScale:kl,isElement:Gs,isRTL:c$};function PE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function d$(e,t){let n=null,s;const r=Er(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||t(),!f||!p)return;const x=bf(h),g=bf(r.clientWidth-(d+f)),b=bf(r.clientHeight-(h+p)),v=bf(d),w={rootMargin:-x+\"px \"+-g+\"px \"+-b+\"px \"+-v+\"px\",threshold:Wn(0,aa(1,c))||1};let j=!0;function N(k){const C=k[0].intersectionRatio;if(C!==c){if(!j)return a();C?a(!1,C):s=setTimeout(()=>{a(!1,1e-7)},1e3)}C===1&&!PE(u,e.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(N,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,w)}n.observe(e)}return a(!0),i}function h$(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver==\"function\",layoutShift:l=typeof IntersectionObserver==\"function\",animationFrame:c=!1}=s,u=b1(e),d=r||i?[...u?jd(u):[],...jd(t)]:[];d.forEach(v=>{r&&v.addEventListener(\"scroll\",n,{passive:!0}),i&&v.addEventListener(\"resize\",n)});const h=u&&l?d$(u,n):null;let f=-1,p=null;a&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let x,g=c?No(e):null;c&&b();function b(){const v=No(e);g&&!PE(g,v)&&n(),g=v,x=requestAnimationFrame(b)}return n(),()=>{var v;d.forEach(y=>{r&&y.removeEventListener(\"scroll\",n),i&&y.removeEventListener(\"resize\",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const f$=H8,p$=q8,m$=V8,g$=G8,y$=z8,hN=B8,v$=K8,x$=(e,t,n)=>{const s=new Map,r={platform:u$,...n},i={...r.platform,_c:s};return U8(e,t,{...r,platform:i})};var ap=typeof document<\"u\"?m.useLayoutEffect:m.useEffect;function sm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e==\"function\"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e==\"object\"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!sm(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i===\"_owner\"&&e.$$typeof)&&!sm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function kE(e){return typeof window>\"u\"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fN(e,t){const n=kE(e);return Math.round(t*n)/n}function Ry(e){const t=m.useRef(e);return ap(()=>{t.current=e}),t}function w$(e){e===void 0&&(e={});const{placement:t=\"bottom\",strategy:n=\"absolute\",middleware:s=[],platform:r,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(s);sm(f,s)||p(s);const[x,g]=m.useState(null),[b,v]=m.useState(null),y=m.useCallback(_=>{_!==k.current&&(k.current=_,g(_))},[]),w=m.useCallback(_=>{_!==C.current&&(C.current=_,v(_))},[]),j=i||x,N=a||b,k=m.useRef(null),C=m.useRef(null),T=m.useRef(d),M=c!=null,E=Ry(c),O=Ry(r),D=Ry(u),q=m.useCallback(()=>{if(!k.current||!C.current)return;const _={placement:t,strategy:n,middleware:f};O.current&&(_.platform=O.current),x$(k.current,C.current,_).then(B=>{const Q={...B,isPositioned:D.current!==!1};W.current&&!sm(T.current,Q)&&(T.current=Q,Bo.flushSync(()=>{h(Q)}))})},[f,t,n,O,D]);ap(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(_=>({..._,isPositioned:!1})))},[u]);const W=m.useRef(!1);ap(()=>(W.current=!0,()=>{W.current=!1}),[]),ap(()=>{if(j&&(k.current=j),N&&(C.current=N),j&&N){if(E.current)return E.current(j,N,q);q()}},[j,N,q,E,M]);const R=m.useMemo(()=>({reference:k,floating:C,setReference:y,setFloating:w}),[y,w]),K=m.useMemo(()=>({reference:j,floating:N}),[j,N]),I=m.useMemo(()=>{const _={position:n,left:0,top:0};if(!K.floating)return _;const B=fN(K.floating,d.x),Q=fN(K.floating,d.y);return l?{..._,transform:\"translate(\"+B+\"px, \"+Q+\"px)\",...kE(K.floating)>=1.5&&{willChange:\"transform\"}}:{position:n,left:B,top:Q}},[n,l,K.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:q,refs:R,elements:K,floatingStyles:I}),[d,q,R,K,I])}const b$=e=>{function t(n){return{}.hasOwnProperty.call(n,\"current\")}return{name:\"arrow\",options:e,fn(n){const{element:s,padding:r}=typeof e==\"function\"?e(n):e;return s&&t(s)?s.current!=null?hN({element:s.current,padding:r}).fn(n):{}:s?hN({element:s,padding:r}).fn(n):{}}}},j$=(e,t)=>({...f$(e),options:[e,t]}),S$=(e,t)=>({...p$(e),options:[e,t]}),N$=(e,t)=>({...v$(e),options:[e,t]}),C$=(e,t)=>({...m$(e),options:[e,t]}),_$=(e,t)=>({...g$(e),options:[e,t]}),P$=(e,t)=>({...y$(e),options:[e,t]}),k$=(e,t)=>({...b$(e),options:[e,t]});var T$=\"Arrow\",TE=m.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...i}=e;return o.jsx(ge.svg,{...i,ref:t,width:s,height:r,viewBox:\"0 0 30 10\",preserveAspectRatio:\"none\",children:e.asChild?n:o.jsx(\"polygon\",{points:\"0,0 30,0 15,10\"})})});TE.displayName=T$;var E$=TE;function EE(e){const[t,n]=m.useState(void 0);return Ct(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,l;if(\"borderBoxSize\"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return s.observe(e,{box:\"border-box\"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var S1=\"Popper\",[AE,Yc]=es(S1),[A$,ME]=AE(S1),RE=e=>{const{__scopePopper:t,children:n}=e,[s,r]=m.useState(null);return o.jsx(A$,{scope:t,anchor:s,onAnchorChange:r,children:n})};RE.displayName=S1;var DE=\"PopperAnchor\",FE=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,i=ME(DE,n),a=m.useRef(null),l=Me(t,a);return m.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:o.jsx(ge.div,{...r,ref:l})});FE.displayName=DE;var N1=\"PopperContent\",[M$,R$]=AE(N1),OE=m.forwardRef((e,t)=>{var me,Ue,Pt,Ge,Be,ze;const{__scopePopper:n,side:s=\"bottom\",sideOffset:r=0,align:i=\"center\",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h=\"partial\",hideWhenDetached:f=!1,updatePositionStrategy:p=\"optimized\",onPlaced:x,...g}=e,b=ME(N1,n),[v,y]=m.useState(null),w=Me(t,pn=>y(pn)),[j,N]=m.useState(null),k=EE(j),C=(k==null?void 0:k.width)??0,T=(k==null?void 0:k.height)??0,M=s+(i!==\"center\"?\"-\"+i:\"\"),E=typeof d==\"number\"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],D=O.length>0,q={padding:E,boundary:O.filter(F$),altBoundary:D},{refs:W,floatingStyles:R,placement:K,isPositioned:I,middlewareData:_}=w$({strategy:\"fixed\",placement:M,whileElementsMounted:(...pn)=>h$(...pn,{animationFrame:p===\"always\"}),elements:{reference:b.anchor},middleware:[j$({mainAxis:r+T,alignmentAxis:a}),c&&S$({mainAxis:!0,crossAxis:!1,limiter:h===\"partial\"?N$():void 0,...q}),c&&C$({...q}),_$({...q,apply:({elements:pn,rects:Un,availableWidth:_a,availableHeight:pi})=>{const{width:mi,height:Yg}=Un.reference,zo=pn.floating.style;zo.setProperty(\"--radix-popper-available-width\",`${_a}px`),zo.setProperty(\"--radix-popper-available-height\",`${pi}px`),zo.setProperty(\"--radix-popper-anchor-width\",`${mi}px`),zo.setProperty(\"--radix-popper-anchor-height\",`${Yg}px`)}}),j&&k$({element:j,padding:l}),O$({arrowWidth:C,arrowHeight:T}),f&&P$({strategy:\"referenceHidden\",...q})]}),[B,Q]=$E(K),se=bt(x);Ct(()=>{I&&(se==null||se())},[I,se]);const Ee=(me=_.arrow)==null?void 0:me.x,ft=(Ue=_.arrow)==null?void 0:Ue.y,X=((Pt=_.arrow)==null?void 0:Pt.centerOffset)!==0,[Xe,nt]=m.useState();return Ct(()=>{v&&nt(window.getComputedStyle(v).zIndex)},[v]),o.jsx(\"div\",{ref:W.setFloating,\"data-radix-popper-content-wrapper\":\"\",style:{...R,transform:I?R.transform:\"translate(0, -200%)\",minWidth:\"max-content\",zIndex:Xe,\"--radix-popper-transform-origin\":[(Ge=_.transformOrigin)==null?void 0:Ge.x,(Be=_.transformOrigin)==null?void 0:Be.y].join(\" \"),...((ze=_.hide)==null?void 0:ze.referenceHidden)&&{visibility:\"hidden\",pointerEvents:\"none\"}},dir:e.dir,children:o.jsx(M$,{scope:n,placedSide:B,onArrowChange:N,arrowX:Ee,arrowY:ft,shouldHideArrow:X,children:o.jsx(ge.div,{\"data-side\":B,\"data-align\":Q,...g,ref:w,style:{...g.style,animation:I?void 0:\"none\"}})})})});OE.displayName=N1;var IE=\"PopperArrow\",D$={top:\"bottom\",right:\"left\",bottom:\"top\",left:\"right\"},LE=m.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,i=R$(IE,s),a=D$[i.placedSide];return o.jsx(\"span\",{ref:i.onArrowChange,style:{position:\"absolute\",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:\"\",right:\"0 0\",bottom:\"center 0\",left:\"100% 0\"}[i.placedSide],transform:{top:\"translateY(100%)\",right:\"translateY(50%) rotate(90deg) translateX(-50%)\",bottom:\"rotate(180deg)\",left:\"translateY(50%) rotate(-90deg) translateX(50%)\"}[i.placedSide],visibility:i.shouldHideArrow?\"hidden\":void 0},children:o.jsx(E$,{...r,ref:n,style:{...r.style,display:\"block\"}})})});LE.displayName=IE;function F$(e){return e!==null}var O$=e=>({name:\"transformOrigin\",options:e,fn(t){var b,v,y;const{placement:n,rects:s,middlewareData:r}=t,a=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=$E(n),h={start:\"0%\",center:\"50%\",end:\"100%\"}[d],f=(((v=r.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let x=\"\",g=\"\";return u===\"bottom\"?(x=a?h:`${f}px`,g=`${-c}px`):u===\"top\"?(x=a?h:`${f}px`,g=`${s.floating.height+c}px`):u===\"right\"?(x=`${-c}px`,g=a?h:`${p}px`):u===\"left\"&&(x=`${s.floating.width+c}px`,g=a?h:`${p}px`),{data:{x,y:g}}}});function $E(e){const[t,n=\"center\"]=e.split(\"-\");return[t,n]}var UE=RE,bg=FE,C1=OE,_1=LE,[jg,Fre]=es(\"Tooltip\",[Yc]),P1=Yc(),BE=\"TooltipProvider\",I$=700,pN=\"tooltip.open\",[L$,VE]=jg(BE),zE=e=>{const{__scopeTooltip:t,delayDuration:n=I$,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=e,a=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(L$,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:r,children:i})};zE.displayName=BE;var WE=\"Tooltip\",[Ore,Sg]=jg(WE),Qx=\"TooltipTrigger\",$$=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=Sg(Qx,n),i=VE(Qx,n),a=P1(n),l=m.useRef(null),c=Me(t,l,r.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener(\"pointerup\",h),[h]),o.jsx(bg,{asChild:!0,...a,children:o.jsx(ge.button,{\"aria-describedby\":r.open?r.contentId:void 0,\"data-state\":r.stateAttribute,...s,ref:c,onPointerMove:fe(e.onPointerMove,f=>{f.pointerType!==\"touch\"&&!d.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:fe(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:fe(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener(\"pointerup\",h,{once:!0})}),onFocus:fe(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:fe(e.onBlur,r.onClose),onClick:fe(e.onClick,r.onClose)})})});$$.displayName=Qx;var U$=\"TooltipPortal\",[Ire,B$]=jg(U$,{forceMount:void 0}),jc=\"TooltipContent\",HE=m.forwardRef((e,t)=>{const n=B$(jc,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r=\"top\",...i}=e,a=Sg(jc,e.__scopeTooltip);return o.jsx($n,{present:s||a.open,children:a.disableHoverableContent?o.jsx(qE,{side:r,...i,ref:t}):o.jsx(V$,{side:r,...i,ref:t})})}),V$=m.forwardRef((e,t)=>{const n=Sg(jc,e.__scopeTooltip),s=VE(jc,e.__scopeTooltip),r=m.useRef(null),i=Me(t,r),[a,l]=m.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:h}=s,f=m.useCallback(()=>{l(null),h(!1)},[h]),p=m.useCallback((x,g)=>{const b=x.currentTarget,v={x:x.clientX,y:x.clientY},y=K$(v,b.getBoundingClientRect()),w=G$(v,y),j=Y$(g.getBoundingClientRect()),N=Z$([...w,...j]);l(N),h(!0)},[h]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&d){const x=b=>p(b,d),g=b=>p(b,c);return c.addEventListener(\"pointerleave\",x),d.addEventListener(\"pointerleave\",g),()=>{c.removeEventListener(\"pointerleave\",x),d.removeEventListener(\"pointerleave\",g)}}},[c,d,p,f]),m.useEffect(()=>{if(a){const x=g=>{const b=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),w=!Q$(v,a);y?f():w&&(f(),u())};return document.addEventListener(\"pointermove\",x),()=>document.removeEventListener(\"pointermove\",x)}},[c,d,a,u,f]),o.jsx(qE,{...e,ref:i})}),[z$,W$]=jg(WE,{isInside:!1}),H$=TT(\"TooltipContent\"),qE=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,\"aria-label\":r,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Sg(jc,n),u=P1(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(pN,d),()=>document.removeEventListener(pN,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener(\"scroll\",h,{capture:!0}),()=>window.removeEventListener(\"scroll\",h,{capture:!0})}},[c.trigger,d]),o.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(C1,{\"data-state\":c.stateAttribute,...u,...l,ref:t,style:{...l.style,\"--radix-tooltip-content-transform-origin\":\"var(--radix-popper-transform-origin)\",\"--radix-tooltip-content-available-width\":\"var(--radix-popper-available-width)\",\"--radix-tooltip-content-available-height\":\"var(--radix-popper-available-height)\",\"--radix-tooltip-trigger-width\":\"var(--radix-popper-anchor-width)\",\"--radix-tooltip-trigger-height\":\"var(--radix-popper-anchor-height)\"},children:[o.jsx(H$,{children:s}),o.jsx(z$,{scope:n,isInside:!0,children:o.jsx(o6,{id:c.contentId,role:\"tooltip\",children:r||s})})]})})});HE.displayName=jc;var KE=\"TooltipArrow\",q$=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=P1(n);return W$(KE,n).isInside?null:o.jsx(_1,{...r,...s,ref:t})});q$.displayName=KE;function K$(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,r,i)){case i:return\"left\";case r:return\"right\";case n:return\"top\";case s:return\"bottom\";default:throw new Error(\"unreachable\")}}function G$(e,t,n=5){const s=[];switch(t){case\"top\":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case\"bottom\":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case\"left\":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case\"right\":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function Y$(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function Q$(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,d=t[a].y;c>s!=d>s&&n<(u-l)*(s-c)/(d-c)+l&&(r=!r)}return r}function Z$(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),X$(t)}function X$(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var J$=zE,GE=HE;const eU=J$,tU=m.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(GE,{ref:s,sideOffset:t,className:ue(\"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",e),...n}));tU.displayName=GE.displayName;const Sd=Th(\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",{variants:{variant:{default:\"bg-primary text-primary-foreground hover:bg-primary/90\",destructive:\"bg-destructive text-destructive-foreground hover:bg-destructive/90\",outline:\"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",secondary:\"bg-secondary text-secondary-foreground hover:bg-secondary/80\",ghost:\"hover:bg-accent hover:text-accent-foreground\",link:\"text-primary underline-offset-4 hover:underline\"},size:{default:\"h-10 px-4 py-2\",sm:\"h-9 rounded-md px-3\",lg:\"h-11 rounded-md px-8\",icon:\"h-10 w-10\"}},defaultVariants:{variant:\"default\",size:\"default\"}}),V=m.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...r},i)=>{const a=s?PT:\"button\";return o.jsx(a,{className:ue(Sd({variant:t,size:n,className:e})),ref:i,...r})});V.displayName=\"Button\";const nU=Th(\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",{variants:{variant:{default:\"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",secondary:\"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",destructive:\"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",outline:\"text-foreground\"}},defaultVariants:{variant:\"default\"}});function Te({className:e,variant:t,...n}){return o.jsx(\"div\",{className:ue(nU({variant:t}),e),...n})}var k1=\"Avatar\",[sU,Lre]=es(k1),[rU,YE]=sU(k1),QE=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[r,i]=m.useState(\"idle\");return o.jsx(rU,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:o.jsx(ge.span,{...s,ref:t})})});QE.displayName=k1;var ZE=\"AvatarImage\",XE=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:r=()=>{},...i}=e,a=YE(ZE,n),l=iU(s,i),c=bt(u=>{r(u),a.onImageLoadingStatusChange(u)});return Ct(()=>{l!==\"idle\"&&c(l)},[l,c]),l===\"loaded\"?o.jsx(ge.img,{...i,ref:t,src:s}):null});XE.displayName=ZE;var JE=\"AvatarFallback\",eA=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...r}=e,i=YE(JE,n),[a,l]=m.useState(s===void 0);return m.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),a&&i.imageLoadingStatus!==\"loaded\"?o.jsx(ge.span,{...r,ref:t}):null});eA.displayName=JE;function mN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?\"loaded\":\"loading\"):\"error\":\"idle\"}function iU(e,{referrerPolicy:t,crossOrigin:n}){const s=oU(),r=m.useRef(null),i=s?(r.current||(r.current=new window.Image),r.current):null,[a,l]=m.useState(()=>mN(i,e));return Ct(()=>{l(mN(i,e))},[i,e]),Ct(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c(\"loaded\"),d=c(\"error\");return i.addEventListener(\"load\",u),i.addEventListener(\"error\",d),t&&(i.referrerPolicy=t),typeof n==\"string\"&&(i.crossOrigin=n),()=>{i.removeEventListener(\"load\",u),i.removeEventListener(\"error\",d)}},[i,n,t]),a}function aU(){return()=>{}}function oU(){return m.useSyncExternalStore(aU,()=>!0,()=>!1)}var tA=QE,nA=XE,sA=eA;const Ng=m.forwardRef(({className:e,...t},n)=>o.jsx(tA,{ref:n,className:ue(\"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",e),...t}));Ng.displayName=tA.displayName;const T1=m.forwardRef(({className:e,...t},n)=>o.jsx(nA,{ref:n,className:ue(\"aspect-square h-full w-full\",e),...t}));T1.displayName=nA.displayName;const Cg=m.forwardRef(({className:e,...t},n)=>o.jsx(sA,{ref:n,className:ue(\"flex h-full w-full items-center justify-center rounded-full bg-muted\",e),...t}));Cg.displayName=sA.displayName;const rA=m.createContext(void 0),lU={en:{\"nav.dashboard\":\"Dashboard\",\"nav.tasks\":\"Tasks\",\"nav.myTasks\":\"My Tasks\",\"nav.team\":\"Team\",\"nav.customers\":\"Customers\",\"nav.profile\":\"Profile\",\"nav.admin\":\"Admin\",\"dashboard.title\":\"Dashboard\",\"dashboard.welcome\":\"Welcome to TaskFlow\",\"dashboard.quickActions\":\"Quick Actions\",\"dashboard.createTask\":\"Create Task\",\"dashboard.addMember\":\"Add Member\",\"dashboard.admin\":\"Admin\",\"dashboard.weeklySchedule\":\"Weekly Schedule\",\"dashboard.upcomingSchedule\":\"Upcoming Schedule\",\"dashboard.recentTasks\":\"Recent Tasks\",\"task.title\":\"Title\",\"task.description\":\"Description\",\"task.customer\":\"Customer\",\"task.phone\":\"Phone\",\"task.address\":\"Address\",\"task.time\":\"Time\",\"task.notes\":\"Notes\",\"task.priority\":\"Priority\",\"task.status\":\"Status\",\"task.assignees\":\"Assignees\",\"task.dueDate\":\"Due Date\",\"task.progress\":\"Progress\",\"status.pending\":\"Pending\",\"status.start\":\"Started\",\"status.complete\":\"Complete\",\"priority.low\":\"Low\",\"priority.medium\":\"Medium\",\"priority.high\":\"High\",\"action.create\":\"Create\",\"action.edit\":\"Edit\",\"action.delete\":\"Delete\",\"action.save\":\"Save\",\"action.cancel\":\"Cancel\",\"action.close\":\"Close\",\"action.submit\":\"Submit\",\"action.startTask\":\"Start Task\",\"action.completeTask\":\"Complete Task\",\"action.resetTask\":\"Reset to Pending\",\"common.viewAll\":\"View All\",\"msg.noTasks\":\"No tasks found\",\"msg.noTeamMembers\":\"No team members found\",\"msg.noUpcomingTasks\":\"No upcoming tasks in the next 7 days\",\"msg.taskCreated\":\"Task created successfully\",\"msg.taskUpdated\":\"Task updated successfully\",\"msg.loading\":\"Loading...\",\"msg.saving\":\"Saving...\",\"msg.updating\":\"Updating...\",\"myTasks.title\":\"My Tasks\",\"myTasks.subtitle\":\"Personal task overview with priorities and reminders\",\"myTasks.highPriority\":\"High Priority Tasks\",\"myTasks.overdue\":\"Overdue Tasks\",\"myTasks.upcoming\":\"Upcoming This Week\",\"myTasks.withComments\":\"Tasks with Comments\",\"admin.logs\":\"System Logs\",\"admin.access\":\"Administrator Access\",\"error.generic\":\"An error occurred. Please try again.\",\"error.network\":\"Network connection error. Please check your internet connection.\",\"error.unauthorized\":\"You are not authorized to access this resource.\",\"error.forbidden\":\"Access denied. Insufficient permissions.\",\"error.notFound\":\"The requested resource was not found.\",\"error.validation\":\"Please check your input and try again.\",\"error.server\":\"Server error. Please try again later.\",\"error.timeout\":\"Request timed out. Please try again.\",\"error.database\":\"Database error. Please contact support.\",\"error.session\":\"Your session has expired. Please log in again.\",\"error.fileUpload\":\"File upload failed. Please check file size and format.\",\"error.invalidFormat\":\"Invalid format. Please check your input.\",\"error.tooManyRequests\":\"Too many requests. Please wait before trying again.\",\"validation.required\":\"This field is required\",\"validation.email\":\"Please enter a valid email address\",\"validation.phone\":\"Please enter a valid phone number\",\"validation.minLength\":\"Minimum {min} characters required\",\"validation.maxLength\":\"Maximum {max} characters allowed\",\"validation.password\":\"Password must be at least 6 characters\",\"validation.passwordMatch\":\"Passwords do not match\",\"validation.future\":\"Date must be in the future\",\"validation.past\":\"Date must be in the past\",\"guidance.loading\":\"Loading data, please wait...\",\"guidance.saving\":\"Saving your changes...\",\"guidance.deleting\":\"Deleting item...\",\"guidance.uploading\":\"Uploading file...\",\"guidance.connecting\":\"Establishing connection...\",\"guidance.processing\":\"Processing your request...\",\"guidance.retry\":\"Click to retry\",\"guidance.refresh\":\"Refresh the page\",\"guidance.contactSupport\":\"Contact support if the problem persists\",\"whatsapp.connecting\":\"Connecting to WhatsApp...\",\"whatsapp.connected\":\"WhatsApp connected successfully\",\"whatsapp.disconnected\":\"WhatsApp disconnected\",\"whatsapp.qrCode\":\"Scan QR code with WhatsApp\",\"whatsapp.reconnecting\":\"Reconnecting to WhatsApp...\",\"whatsapp.messageSent\":\"Message sent successfully\",\"whatsapp.messageFailed\":\"Failed to send message\",\"whatsapp.settingsUpdated\":\"WhatsApp settings updated\",\"success.taskCreated\":\"Task created successfully\",\"success.taskUpdated\":\"Task updated successfully\",\"success.taskDeleted\":\"Task deleted successfully\",\"success.userCreated\":\"User created successfully\",\"success.userUpdated\":\"User updated successfully\",\"success.profileUpdated\":\"Profile updated successfully\",\"success.passwordChanged\":\"Password changed successfully\",\"success.settingsSaved\":\"Settings saved successfully\",\"admin.password\":\"Enter admin password\",\"admin.login\":\"Access Admin Panel\",\"admin.userManagement\":\"User Management\",\"admin.addUser\":\"Add User\",\"admin.approveUsers\":\"Approve Users\",\"team.title\":\"Team\",\"team.addMember\":\"Add Member\",\"team.memberName\":\"Member Name\",\"team.memberRole\":\"Member Role\",\"team.memberEmail\":\"Member Email\",\"team.memberStatus\":\"Member Status\",\"team.available\":\"Available\",\"team.busy\":\"Busy\",\"team.offline\":\"Offline\",\"user.username\":\"Username\",\"user.password\":\"Password\",\"user.role\":\"Role\",\"user.admin\":\"Administrator\",\"user.regular\":\"Regular User\",\"user.approve\":\"Approve\",\"user.reject\":\"Reject\",\"user.pending\":\"Pending\",\"user.approved\":\"Approved\",\"user.rejected\":\"Rejected\",\"auth.login\":\"Login\",\"auth.logout\":\"Logout\",\"auth.username\":\"Username\",\"auth.password\":\"Password\",\"auth.loginBtn\":\"Login\",\"auth.logoutConfirm\":\"Are you sure you want to logout?\",\"lang.english\":\"English\",\"lang.arabic\":\"العربية\",\"lang.switch\":\"Switch Language\",\"chat.title\":\"Team Chat\",\"chat.taskChat\":\"Task Chat\",\"chat.typeMessage\":\"Type a message...\",\"chat.send\":\"Send\",\"chat.close\":\"Close\",\"profile.title\":\"Profile\",\"profile.settings\":\"Settings\",\"profile.helpSupport\":\"Help & Support\",\"profile.adminOptions\":\"Admin Options\",\"stats.activeTasks\":\"Active Tasks\",\"stats.completed\":\"Completed\",\"stats.overdue\":\"Overdue\",\"stats.total\":\"Total\"},ar:{\"nav.dashboard\":\"لوحة التحكم\",\"nav.tasks\":\"المهام\",\"nav.myTasks\":\"مهامي\",\"nav.team\":\"الفريق\",\"nav.customers\":\"العملاء\",\"nav.profile\":\"الملف الشخصي\",\"nav.admin\":\"المدير\",\"dashboard.title\":\"لوحة التحكم\",\"dashboard.welcome\":\"أهلاً بك في نظام إدارة المهام\",\"dashboard.quickActions\":\"إجراءات سريعة\",\"dashboard.createTask\":\"إنشاء مهمة\",\"dashboard.addMember\":\"إضافة عضو\",\"dashboard.admin\":\"المدير\",\"dashboard.weeklySchedule\":\"الجدول الأسبوعي\",\"dashboard.upcomingSchedule\":\"الجدول القادم\",\"dashboard.recentTasks\":\"المهام الحديثة\",\"task.title\":\"العنوان\",\"task.description\":\"الوصف\",\"task.customer\":\"العميل\",\"task.phone\":\"الهاتف\",\"task.address\":\"العنوان\",\"task.time\":\"الوقت\",\"task.notes\":\"ملاحظات\",\"task.priority\":\"الأولوية\",\"task.status\":\"الحالة\",\"task.assignees\":\"المكلفون\",\"task.dueDate\":\"تاريخ الاستحقاق\",\"task.progress\":\"التقدم\",\"status.pending\":\"في الانتظار\",\"status.todo\":\"في الانتظار\",\"status.start\":\"بدأ\",\"status.complete\":\"مكتمل\",\"priority.low\":\"منخفض\",\"priority.medium\":\"متوسط\",\"priority.متوسطة\":\"متوسط\",\"priority.high\":\"عالي\",\"action.create\":\"إنشاء\",\"action.edit\":\"تحرير\",\"action.delete\":\"حذف\",\"action.save\":\"حفظ\",\"action.cancel\":\"إلغاء\",\"action.close\":\"إغلاق\",\"action.submit\":\"إرسال\",\"action.startTask\":\"بدء المهمة\",\"action.completeTask\":\"إكمال المهمة\",\"action.resetTask\":\"إعادة تعيين للانتظار\",\"common.viewAll\":\"عرض الكل\",\"msg.noTasks\":\"لا توجد مهام\",\"msg.noTeamMembers\":\"لا يوجد أعضاء في الفريق\",\"msg.noUpcomingTasks\":\"لا توجد مهام قادمة في الأيام السبعة القادمة\",\"msg.taskCreated\":\"تم إنشاء المهمة بنجاح\",\"msg.taskUpdated\":\"تم تحديث المهمة بنجاح\",\"msg.loading\":\"جاري التحميل...\",\"msg.saving\":\"جاري الحفظ...\",\"msg.updating\":\"جاري التحديث...\",\"myTasks.title\":\"مهامي\",\"myTasks.subtitle\":\"نظرة عامة على المهام الشخصية مع الأولويات والتذكيرات\",\"myTasks.highPriority\":\"المهام عالية الأولوية\",\"myTasks.overdue\":\"المهام المتأخرة\",\"myTasks.upcoming\":\"القادمة هذا الأسبوع\",\"myTasks.withComments\":\"المهام مع التعليقات\",\"admin.logs\":\"سجلات النظام\",\"admin.access\":\"وصول المدير\",\"admin.password\":\"أدخل كلمة مرور المدير\",\"admin.login\":\"الوصول إلى لوحة المدير\",\"admin.userManagement\":\"إدارة المستخدمين\",\"admin.addUser\":\"إضافة مستخدم\",\"admin.approveUsers\":\"موافقة المستخدمين\",\"team.title\":\"الفريق\",\"team.addMember\":\"إضافة عضو\",\"team.memberName\":\"اسم العضو\",\"team.memberRole\":\"دور العضو\",\"team.memberEmail\":\"بريد العضو الإلكتروني\",\"team.memberStatus\":\"حالة العضو\",\"team.available\":\"متوفر\",\"team.busy\":\"مشغول\",\"team.offline\":\"غير متصل\",\"user.username\":\"اسم المستخدم\",\"user.password\":\"كلمة المرور\",\"user.role\":\"الدور\",\"user.admin\":\"مدير\",\"user.regular\":\"مستخدم عادي\",\"user.approve\":\"موافقة\",\"user.reject\":\"رفض\",\"user.pending\":\"في الانتظار\",\"user.approved\":\"مقبول\",\"user.rejected\":\"مرفوض\",\"auth.login\":\"تسجيل الدخول\",\"auth.logout\":\"تسجيل الخروج\",\"auth.username\":\"اسم المستخدم\",\"auth.password\":\"كلمة المرور\",\"auth.loginBtn\":\"دخول\",\"auth.logoutConfirm\":\"هل أنت متأكد من تسجيل الخروج؟\",\"lang.english\":\"English\",\"lang.arabic\":\"العربية\",\"lang.switch\":\"تبديل اللغة\",\"chat.title\":\"دردشة الفريق\",\"chat.taskChat\":\"دردشة المهمة\",\"chat.typeMessage\":\"اكتب رسالة...\",\"chat.send\":\"إرسال\",\"chat.close\":\"إغلاق\",\"profile.title\":\"الملف الشخصي\",\"profile.settings\":\"الإعدادات\",\"profile.helpSupport\":\"المساعدة والدعم\",\"profile.adminOptions\":\"خيارات المدير\",\"stats.activeTasks\":\"المهام الفعالة\",\"stats.completed\":\"المهام المكتملة\",\"stats.overdue\":\"في الانتظار\",\"stats.total\":\"الإجمالي\",\"error.generic\":\"حدث خطأ. يرجى المحاولة مرة أخرى.\",\"error.network\":\"خطأ في الاتصال بالشبكة. يرجى التحقق من اتصالك بالإنترنت.\",\"error.unauthorized\":\"غير مصرح لك بالوصول لهذا المورد.\",\"error.forbidden\":\"تم رفض الوصول. صلاحيات غير كافية.\",\"error.notFound\":\"المورد المطلوب غير موجود.\",\"error.validation\":\"يرجى التحقق من البيانات المدخلة والمحاولة مرة أخرى.\",\"error.server\":\"خطأ في الخادم. يرجى المحاولة لاحقاً.\",\"error.timeout\":\"انتهت مهلة الطلب. يرجى المحاولة مرة أخرى.\",\"error.database\":\"خطأ في قاعدة البيانات. يرجى التواصل مع الدعم الفني.\",\"error.session\":\"انتهت صلاحية جلستك. يرجى تسجيل الدخول مرة أخرى.\",\"error.fileUpload\":\"فشل في رفع الملف. يرجى التحقق من حجم ونوع الملف.\",\"error.invalidFormat\":\"تنسيق غير صحيح. يرجى التحقق من البيانات المدخلة.\",\"error.tooManyRequests\":\"طلبات كثيرة جداً. يرجى الانتظار قبل المحاولة مرة أخرى.\",\"validation.required\":\"هذا الحقل مطلوب\",\"validation.email\":\"يرجى إدخال عنوان بريد إلكتروني صحيح\",\"validation.phone\":\"يرجى إدخال رقم هاتف صحيح\",\"validation.minLength\":\"يجب أن يكون {min} أحرف على الأقل\",\"validation.maxLength\":\"الحد الأقصى {max} حرف\",\"validation.password\":\"كلمة المرور يجب أن تكون 6 أحرف على الأقل\",\"validation.passwordMatch\":\"كلمات المرور غير متطابقة\",\"validation.future\":\"التاريخ يجب أن يكون في المستقبل\",\"validation.past\":\"التاريخ يجب أن يكون في الماضي\",\"guidance.loading\":\"جاري تحميل البيانات، يرجى الانتظار...\",\"guidance.saving\":\"جاري حفظ التغييرات...\",\"guidance.deleting\":\"جاري حذف العنصر...\",\"guidance.uploading\":\"جاري رفع الملف...\",\"guidance.connecting\":\"جاري تأسيس الاتصال...\",\"guidance.processing\":\"جاري معالجة طلبك...\",\"guidance.retry\":\"اضغط للمحاولة مرة أخرى\",\"guidance.refresh\":\"أعد تحميل الصفحة\",\"guidance.contactSupport\":\"تواصل مع الدعم الفني إذا استمرت المشكلة\",\"whatsapp.connecting\":\"جاري الاتصال بالواتساب...\",\"whatsapp.connected\":\"تم الاتصال بالواتساب بنجاح\",\"whatsapp.disconnected\":\"تم قطع الاتصال مع الواتساب\",\"whatsapp.qrCode\":\"امسح رمز QR بالواتساب\",\"whatsapp.reconnecting\":\"جاري إعادة الاتصال بالواتساب...\",\"whatsapp.messageSent\":\"تم إرسال الرسالة بنجاح\",\"whatsapp.messageFailed\":\"فشل في إرسال الرسالة\",\"whatsapp.settingsUpdated\":\"تم تحديث إعدادات الواتساب\",\"success.taskCreated\":\"تم إنشاء المهمة بنجاح\",\"success.taskUpdated\":\"تم تحديث المهمة بنجاح\",\"success.taskDeleted\":\"تم حذف المهمة بنجاح\",\"success.userCreated\":\"تم إنشاء المستخدم بنجاح\",\"success.userUpdated\":\"تم تحديث المستخدم بنجاح\",\"success.profileUpdated\":\"تم تحديث الملف الشخصي بنجاح\",\"success.passwordChanged\":\"تم تغيير كلمة المرور بنجاح\",\"success.settingsSaved\":\"تم حفظ الإعدادات بنجاح\"}};function gN({children:e}){const[t,n]=m.useState(\"ar\");m.useEffect(()=>{n(\"ar\")},[]),m.useEffect(()=>{document.documentElement.dir=t===\"ar\"?\"rtl\":\"ltr\",document.documentElement.lang=t,localStorage.setItem(\"language\",t)},[t]);const s=a=>{console.log(\"Setting language to:\",a),n(a)},r=a=>{const l=lU[t][a];return l||(console.warn(`Missing translation for key: ${a} in language: ${t}`),a)},i=t===\"ar\";return o.jsx(rA.Provider,{value:{language:t,setLanguage:s,t:r,isRTL:i},children:e})}function Jt(){const e=m.useContext(rA);if(e===void 0)throw new Error(\"useLanguage must be used within a LanguageProvider\");return e}function wa(){const{data:e,isLoading:t}=We({queryKey:[\"/api/auth/user\"],retry:!1});return{user:e,isLoading:t,isAuthenticated:!!e}}function cU(){Jt();const{toast:e}=at(),{user:t}=wa(),n=_t(),{data:s=0}=We({queryKey:[\"/api/notifications/unread-count\"],enabled:!!t,refetchInterval:3e4}),r=typeof s==\"object\"&&s!==null?s.count:0,i=Ne({mutationFn:async()=>{await Ae(\"POST\",\"/api/auth/logout\")},onSuccess:()=>{n.clear(),window.location.reload()},onError:()=>{e({title:\"خطأ في تسجيل الخروج\",description:\"حدث خطأ أثناء تسجيل الخروج\",variant:\"destructive\"})}}),a=()=>{i.mutate()};return o.jsx(\"header\",{className:\"bg-primary text-primary-foreground px-3 sm:px-4 lg:px-6 py-2 sm:py-3 shadow-md\",children:o.jsxs(\"div\",{className:\"flex items-center justify-between max-w-full\",children:[o.jsxs(\"div\",{className:\"flex items-center space-x-2 sm:space-x-3 rtl:space-x-reverse min-w-0 flex-shrink\",children:[o.jsx(\"img\",{src:\"/attached_assets/319159472_2787094371424406_3593723820726937846_n_1755704545593.jpg\",alt:\"TaskFlow Logo\",className:\"w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 rounded-full object-cover shadow-sm border-2 border-white/20 flex-shrink-0\"}),o.jsx(\"h1\",{className:\"text-base sm:text-lg lg:text-xl font-medium truncate responsive-text\",\"data-testid\":\"text-app-title\",children:\"TaskFlow\"})]}),o.jsxs(\"div\",{className:\"flex items-center space-x-1 sm:space-x-2 rtl:space-x-reverse flex-shrink-0\",children:[o.jsxs(V,{variant:\"ghost\",size:\"icon\",className:\"text-primary-foreground hover:bg-primary-dark rounded-full relative touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11\",\"data-testid\":\"button-notifications\",children:[o.jsx(hl,{className:\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6\"}),r>0&&o.jsx(Te,{variant:\"destructive\",className:\"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 flex items-center justify-center text-[10px] sm:text-xs font-bold min-w-[16px] sm:min-w-[20px]\",children:r>99?\"99+\":r})]}),o.jsx(V,{variant:\"ghost\",size:\"icon\",className:\"text-primary-foreground hover:bg-primary-dark rounded-full touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11 p-1\",\"data-testid\":\"button-profile-menu\",children:o.jsxs(Ng,{className:\"h-7 w-7 sm:h-8 sm:w-8 lg:h-9 lg:w-9\",children:[o.jsx(T1,{src:(t==null?void 0:t.profileImageUrl)||\"\",alt:(t==null?void 0:t.firstName)||\"المستخدم\",className:\"object-cover\"}),o.jsx(Cg,{className:\"bg-primary-dark text-primary-foreground text-xs sm:text-sm font-medium\",children:t!=null&&t.firstName?t.firstName.charAt(0):o.jsx(D6,{className:\"h-4 w-4\"})})]})}),o.jsx(V,{variant:\"ghost\",size:\"icon\",className:\"text-primary-foreground hover:bg-red-600/20 rounded-full touch-target w-9 h-9 sm:w-10 sm:h-10 lg:w-11 lg:h-11\",onClick:a,disabled:i.isPending,\"data-testid\":\"button-logout\",title:\"تسجيل الخروج\",children:o.jsx(oE,{className:\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6\"})})]})]})})}function uU(){const[e,t]=_h();Jt();const n=[{path:\"/\",icon:aE,label:\"الرئيسية\",testId:\"nav-dashboard\"},{path:\"/tasks\",icon:V6,label:\"المهام\",testId:\"nav-tasks\"},{path:\"/customers\",icon:Ah,label:\"العملاء\",testId:\"nav-customers\"},{path:\"/messages\",icon:Xr,label:\"الرسائل\",testId:\"nav-messages\"},{path:\"/team-members\",icon:Jr,label:\"أعضاء الفريق\",testId:\"nav-team-members\"},{path:\"/profile\",icon:_r,label:\"الملف الشخصي\",testId:\"nav-profile\"}];return o.jsx(\"nav\",{className:\"fixed bottom-0 left-0 right-0 w-full bg-gradient-to-r from-white/95 to-white/90 backdrop-blur-lg border-t border-border/50 z-50 safe-area-bottom shadow-2xl\",children:o.jsx(\"div\",{className:\"grid grid-cols-6 h-14 sm:h-16 lg:h-18 max-w-full mx-auto\",children:n.map(({path:s,icon:r,label:i,testId:a})=>o.jsxs(V,{variant:\"ghost\",className:`flex flex-col items-center justify-center space-y-0.5 sm:space-y-1 h-full rounded-none touch-manipulation touch-target px-1 transition-all duration-200 ${e===s?\"text-primary bg-primary/10 scale-110\":\"text-gray-400 hover:text-on-surface hover:bg-muted/30 hover:scale-105\"}`,onClick:()=>t(s),\"data-testid\":a,children:[o.jsx(r,{className:\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 flex-shrink-0\"}),o.jsx(\"span\",{className:\"text-[10px] sm:text-xs lg:text-sm font-medium truncate max-w-full text-center leading-tight\",children:i})]},s))})})}const Se=m.forwardRef(({className:e,type:t,...n},s)=>o.jsx(\"input\",{type:t,className:ue(\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",e),ref:s,...n}));Se.displayName=\"Input\";var dU=\"Label\",iA=m.forwardRef((e,t)=>o.jsx(ge.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest(\"button, input, select, textarea\")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));iA.displayName=dU;var aA=iA;const hU=Th(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"),ne=m.forwardRef(({className:e,...t},n)=>o.jsx(aA,{ref:n,className:ue(hU(),e),...t}));ne.displayName=aA.displayName;const Qn=m.forwardRef(({className:e,...t},n)=>o.jsx(\"textarea\",{className:ue(\"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",e),ref:n,...t}));Qn.displayName=\"Textarea\";function Zx(e,[t,n]){return Math.min(n,Math.max(t,e))}var fU=m.createContext(void 0);function oA(e){const t=m.useContext(fU);return e||t||\"ltr\"}var Dy=0;function E1(){m.useEffect(()=>{const e=document.querySelectorAll(\"[data-radix-focus-guard]\");return document.body.insertAdjacentElement(\"afterbegin\",e[0]??yN()),document.body.insertAdjacentElement(\"beforeend\",e[1]??yN()),Dy++,()=>{Dy===1&&document.querySelectorAll(\"[data-radix-focus-guard]\").forEach(t=>t.remove()),Dy--}},[])}function yN(){const e=document.createElement(\"span\");return e.setAttribute(\"data-radix-focus-guard\",\"\"),e.tabIndex=0,e.style.outline=\"none\",e.style.opacity=\"0\",e.style.position=\"fixed\",e.style.pointerEvents=\"none\",e}var Fy=\"focusScope.autoFocusOnMount\",Oy=\"focusScope.autoFocusOnUnmount\",vN={bubbles:!1,cancelable:!0},pU=\"FocusScope\",_g=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=e,[l,c]=m.useState(null),u=bt(r),d=bt(i),h=m.useRef(null),f=Me(t,g=>c(g)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(s){let g=function(w){if(p.paused||!l)return;const j=w.target;l.contains(j)?h.current=j:bi(h.current,{select:!0})},b=function(w){if(p.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||bi(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&bi(l)};document.addEventListener(\"focusin\",g),document.addEventListener(\"focusout\",b);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener(\"focusin\",g),document.removeEventListener(\"focusout\",b),y.disconnect()}}},[s,l,p.paused]),m.useEffect(()=>{if(l){wN.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Fy,vN);l.addEventListener(Fy,u),l.dispatchEvent(v),v.defaultPrevented||(mU(wU(lA(l)),{select:!0}),document.activeElement===g&&bi(l))}return()=>{l.removeEventListener(Fy,u),setTimeout(()=>{const v=new CustomEvent(Oy,vN);l.addEventListener(Oy,d),l.dispatchEvent(v),v.defaultPrevented||bi(g??document.body,{select:!0}),l.removeEventListener(Oy,d),wN.remove(p)},0)}}},[l,u,d,p]);const x=m.useCallback(g=>{if(!n&&!s||p.paused)return;const b=g.key===\"Tab\"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[w,j]=gU(y);w&&j?!g.shiftKey&&v===j?(g.preventDefault(),n&&bi(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&bi(j,{select:!0})):v===y&&g.preventDefault()}},[n,s,p.paused]);return o.jsx(ge.div,{tabIndex:-1,...a,ref:f,onKeyDown:x})});_g.displayName=pU;function mU(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(bi(s,{select:t}),document.activeElement!==n)return}function gU(e){const t=lA(e),n=xN(t,e),s=xN(t.reverse(),e);return[n,s]}function lA(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName===\"INPUT\"&&s.type===\"hidden\";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xN(e,t){for(const n of e)if(!yU(n,{upTo:t}))return n}function yU(e,{upTo:t}){if(getComputedStyle(e).visibility===\"hidden\")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display===\"none\")return!0;e=e.parentElement}return!1}function vU(e){return e instanceof HTMLInputElement&&\"select\"in e}function bi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&vU(e)&&t&&e.select()}}var wN=xU();function xU(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bN(e,t),e.unshift(t)},remove(t){var n;e=bN(e,t),(n=e[0])==null||n.resume()}}}function bN(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function wU(e){return e.filter(t=>t.tagName!==\"A\")}function cA(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bU=function(e){if(typeof document>\"u\")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qo=new WeakMap,jf=new WeakMap,Sf={},Iy=0,uA=function(e){return e&&(e.host||uA(e.parentNode))},jU=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=uA(n);return s&&e.contains(s)?s:(console.error(\"aria-hidden\",n,\"in not contained inside\",e,\". Doing nothing\"),null)}).filter(function(n){return!!n})},SU=function(e,t,n,s){var r=jU(t,Array.isArray(e)?e:[e]);Sf[n]||(Sf[n]=new WeakMap);var i=Sf[n],a=[],l=new Set,c=new Set(r),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};r.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var p=f.getAttribute(s),x=p!==null&&p!==\"false\",g=(qo.get(f)||0)+1,b=(i.get(f)||0)+1;qo.set(f,g),i.set(f,b),a.push(f),g===1&&x&&jf.set(f,!0),b===1&&f.setAttribute(n,\"true\"),x||f.setAttribute(s,\"true\")}catch(v){console.error(\"aria-hidden: cannot operate on \",f,v)}})};return d(t),l.clear(),Iy++,function(){a.forEach(function(h){var f=qo.get(h)-1,p=i.get(h)-1;qo.set(h,f),i.set(h,p),f||(jf.has(h)||h.removeAttribute(s),jf.delete(h)),p||h.removeAttribute(n)}),Iy--,Iy||(qo=new WeakMap,qo=new WeakMap,jf=new WeakMap,Sf={})}},A1=function(e,t,n){n===void 0&&(n=\"data-aria-hidden\");var s=Array.from(Array.isArray(e)?e:[e]),r=bU(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll(\"[aria-live]\"))),SU(s,r,n,\"aria-hidden\")):function(){return null}},gr=function(){return gr=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gr.apply(this,arguments)};function dA(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function NU(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var op=\"right-scroll-bar-position\",lp=\"width-before-scroll-bar\",CU=\"with-scroll-bars-hidden\",_U=\"--removed-body-scroll-bar-size\";function Ly(e,t){return typeof e==\"function\"?e(t):e&&(e.current=t),e}function PU(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var kU=typeof window<\"u\"?m.useLayoutEffect:m.useEffect,jN=new WeakMap;function TU(e,t){var n=PU(null,function(s){return e.forEach(function(r){return Ly(r,s)})});return kU(function(){var s=jN.get(n);if(s){var r=new Set(s),i=new Set(e),a=n.current;r.forEach(function(l){i.has(l)||Ly(l,null)}),i.forEach(function(l){r.has(l)||Ly(l,a)})}jN.set(n,e)},[e]),n}function EU(e){return e}function AU(e,t){t===void 0&&(t=EU);var n=[],s=!1,r={read:function(){if(s)throw new Error(\"Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.\");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,s);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(s=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return r}function MU(e){e===void 0&&(e={});var t=AU(null);return t.options=gr({async:!0,ssr:!1},e),t}var hA=function(e){var t=e.sideCar,n=dA(e,[\"sideCar\"]);if(!t)throw new Error(\"Sidecar: please provide `sideCar` property to import the right car\");var s=t.read();if(!s)throw new Error(\"Sidecar medium not found\");return m.createElement(s,gr({},n))};hA.isSideCarExport=!0;function RU(e,t){return e.useMedium(t),hA}var fA=MU(),$y=function(){},Pg=m.forwardRef(function(e,t){var n=m.useRef(null),s=m.useState({onScrollCapture:$y,onWheelCapture:$y,onTouchMoveCapture:$y}),r=s[0],i=s[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,x=e.inert,g=e.allowPinchZoom,b=e.as,v=b===void 0?\"div\":b,y=e.gapMode,w=dA(e,[\"forwardProps\",\"children\",\"className\",\"removeScrollBar\",\"enabled\",\"shards\",\"sideCar\",\"noIsolation\",\"inert\",\"allowPinchZoom\",\"as\",\"gapMode\"]),j=f,N=TU([n,t]),k=gr(gr({},w),r);return m.createElement(m.Fragment,null,d&&m.createElement(j,{sideCar:fA,removeScrollBar:u,shards:h,noIsolation:p,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:y}),a?m.cloneElement(m.Children.only(l),gr(gr({},k),{ref:N})):m.createElement(v,gr({},k,{className:c,ref:N}),l))});Pg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pg.classNames={fullWidth:lp,zeroRight:op};var DU=function(){if(typeof __webpack_nonce__<\"u\")return __webpack_nonce__};function FU(){if(!document)return null;var e=document.createElement(\"style\");e.type=\"text/css\";var t=DU();return t&&e.setAttribute(\"nonce\",t),e}function OU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function IU(e){var t=document.head||document.getElementsByTagName(\"head\")[0];t.appendChild(e)}var LU=function(){var e=0,t=null;return{add:function(n){e==0&&(t=FU())&&(OU(t,n),IU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$U=function(){var e=LU();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},pA=function(){var e=$U(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},UU={left:0,top:0,right:0,gap:0},Uy=function(e){return parseInt(e||\"\",10)||0},BU=function(e){var t=window.getComputedStyle(document.body),n=t[e===\"padding\"?\"paddingLeft\":\"marginLeft\"],s=t[e===\"padding\"?\"paddingTop\":\"marginTop\"],r=t[e===\"padding\"?\"paddingRight\":\"marginRight\"];return[Uy(n),Uy(s),Uy(r)]},VU=function(e){if(e===void 0&&(e=\"margin\"),typeof window>\"u\")return UU;var t=BU(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},zU=pA(),Tl=\"data-scroll-locked\",WU=function(e,t,n,s){var r=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n=\"margin\"),`\n  .`.concat(CU,` {\n   overflow: hidden `).concat(s,`;\n   padding-right: `).concat(l,\"px \").concat(s,`;\n  }\n  body[`).concat(Tl,`] {\n    overflow: hidden `).concat(s,`;\n    overscroll-behavior: contain;\n    `).concat([t&&\"position: relative \".concat(s,\";\"),n===\"margin\"&&`\n    padding-left: `.concat(r,`px;\n    padding-top: `).concat(i,`px;\n    padding-right: `).concat(a,`px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: `).concat(l,\"px \").concat(s,`;\n    `),n===\"padding\"&&\"padding-right: \".concat(l,\"px \").concat(s,\";\")].filter(Boolean).join(\"\"),`\n  }\n  \n  .`).concat(op,` {\n    right: `).concat(l,\"px \").concat(s,`;\n  }\n  \n  .`).concat(lp,` {\n    margin-right: `).concat(l,\"px \").concat(s,`;\n  }\n  \n  .`).concat(op,\" .\").concat(op,` {\n    right: 0 `).concat(s,`;\n  }\n  \n  .`).concat(lp,\" .\").concat(lp,` {\n    margin-right: 0 `).concat(s,`;\n  }\n  \n  body[`).concat(Tl,`] {\n    `).concat(_U,\": \").concat(l,`px;\n  }\n`)},SN=function(){var e=parseInt(document.body.getAttribute(Tl)||\"0\",10);return isFinite(e)?e:0},HU=function(){m.useEffect(function(){return document.body.setAttribute(Tl,(SN()+1).toString()),function(){var e=SN()-1;e<=0?document.body.removeAttribute(Tl):document.body.setAttribute(Tl,e.toString())}},[])},qU=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?\"margin\":s;HU();var i=m.useMemo(function(){return VU(r)},[r]);return m.createElement(zU,{styles:WU(i,!t,r,n?\"\":\"!important\")})},Xx=!1;if(typeof window<\"u\")try{var Nf=Object.defineProperty({},\"passive\",{get:function(){return Xx=!0,!0}});window.addEventListener(\"test\",Nf,Nf),window.removeEventListener(\"test\",Nf,Nf)}catch{Xx=!1}var Ko=Xx?{passive:!1}:!1,KU=function(e){return e.tagName===\"TEXTAREA\"},mA=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!==\"hidden\"&&!(n.overflowY===n.overflowX&&!KU(e)&&n[t]===\"visible\")},GU=function(e){return mA(e,\"overflowY\")},YU=function(e){return mA(e,\"overflowX\")},NN=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<\"u\"&&s instanceof ShadowRoot&&(s=s.host);var r=gA(e,s);if(r){var i=yA(e,s),a=i[1],l=i[2];if(a>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},QU=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},ZU=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},gA=function(e,t){return e===\"v\"?GU(t):YU(t)},yA=function(e,t){return e===\"v\"?QU(t):ZU(t)},XU=function(e,t){return e===\"h\"&&t===\"rtl\"?-1:1},JU=function(e,t,n,s,r){var i=XU(e,window.getComputedStyle(t).direction),a=i*s,l=n.target,c=t.contains(l),u=!1,d=a>0,h=0,f=0;do{var p=yA(e,l),x=p[0],g=p[1],b=p[2],v=g-b-i*x;(x||v)&&gA(e,l)&&(h+=v,f+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!r)||!d&&(Math.abs(f)<1||!r))&&(u=!0),u},Cf=function(e){return\"changedTouches\"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CN=function(e){return[e.deltaX,e.deltaY]},_N=function(e){return e&&\"current\"in e?e.current:e},e7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t7=function(e){return`\n  .block-interactivity-`.concat(e,` {pointer-events: none;}\n  .allow-interactivity-`).concat(e,` {pointer-events: all;}\n`)},n7=0,Go=[];function s7(e){var t=m.useRef([]),n=m.useRef([0,0]),s=m.useRef(),r=m.useState(n7++)[0],i=m.useState(pA)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add(\"block-interactivity-\".concat(r));var g=NU([e.lockRef.current],(e.shards||[]).map(_N),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add(\"allow-interactivity-\".concat(r))}),function(){document.body.classList.remove(\"block-interactivity-\".concat(r)),g.forEach(function(b){return b.classList.remove(\"allow-interactivity-\".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(g,b){if(\"touches\"in g&&g.touches.length===2||g.type===\"wheel\"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=Cf(g),y=n.current,w=\"deltaX\"in g?g.deltaX:y[0]-v[0],j=\"deltaY\"in g?g.deltaY:y[1]-v[1],N,k=g.target,C=Math.abs(w)>Math.abs(j)?\"h\":\"v\";if(\"touches\"in g&&C===\"h\"&&k.type===\"range\")return!1;var T=NN(C,k);if(!T)return!0;if(T?N=C:(N=C===\"v\"?\"h\":\"v\",T=NN(C,k)),!T)return!1;if(!s.current&&\"changedTouches\"in g&&(w||j)&&(s.current=N),!N)return!0;var M=s.current||N;return JU(M,b,g,M===\"h\"?w:j,!0)},[]),c=m.useCallback(function(g){var b=g;if(!(!Go.length||Go[Go.length-1]!==i)){var v=\"deltaY\"in b?CN(b):Cf(b),y=t.current.filter(function(N){return N.name===b.type&&(N.target===b.target||b.target===N.shadowParent)&&e7(N.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(_N).filter(Boolean).filter(function(N){return N.contains(b.target)}),j=w.length>0?l(b,w[0]):!a.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(g,b,v,y){var w={name:g,delta:b,target:v,should:y,shadowParent:r7(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),d=m.useCallback(function(g){n.current=Cf(g),s.current=void 0},[]),h=m.useCallback(function(g){u(g.type,CN(g),g.target,l(g,e.lockRef.current))},[]),f=m.useCallback(function(g){u(g.type,Cf(g),g.target,l(g,e.lockRef.current))},[]);m.useEffect(function(){return Go.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener(\"wheel\",c,Ko),document.addEventListener(\"touchmove\",c,Ko),document.addEventListener(\"touchstart\",d,Ko),function(){Go=Go.filter(function(g){return g!==i}),document.removeEventListener(\"wheel\",c,Ko),document.removeEventListener(\"touchmove\",c,Ko),document.removeEventListener(\"touchstart\",d,Ko)}},[]);var p=e.removeScrollBar,x=e.inert;return m.createElement(m.Fragment,null,x?m.createElement(i,{styles:t7(r)}):null,p?m.createElement(qU,{gapMode:e.gapMode}):null)}function r7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const i7=RU(fA,s7);var kg=m.forwardRef(function(e,t){return m.createElement(Pg,gr({},e,{ref:t,sideCar:i7}))});kg.classNames=Pg.classNames;var a7=[\" \",\"Enter\",\"ArrowUp\",\"ArrowDown\"],o7=[\" \",\"Enter\"],Rh=\"Select\",[Tg,Eg,l7]=ET(Rh),[Qc,$re]=es(Rh,[l7,Yc]),Ag=Yc(),[c7,ba]=Qc(Rh),[u7,d7]=Qc(Rh),vA=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:r,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:x}=e,g=Ag(t),[b,v]=m.useState(null),[y,w]=m.useState(null),[j,N]=m.useState(!1),k=oA(u),[C=!1,T]=bo({prop:s,defaultProp:r,onChange:i}),[M,E]=bo({prop:a,defaultProp:l,onChange:c}),O=m.useRef(null),D=b?x||!!b.closest(\"form\"):!0,[q,W]=m.useState(new Set),R=Array.from(q).map(K=>K.props.value).join(\";\");return o.jsx(UE,{...g,children:o.jsxs(c7,{required:p,scope:t,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:ea(),value:M,onValueChange:E,open:C,onOpenChange:T,dir:k,triggerPointerDownPosRef:O,disabled:f,children:[o.jsx(Tg.Provider,{scope:t,children:o.jsx(u7,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(K=>{W(I=>new Set(I).add(K))},[]),onNativeOptionRemove:m.useCallback(K=>{W(I=>{const _=new Set(I);return _.delete(K),_})},[]),children:n})}),D?o.jsxs(zA,{\"aria-hidden\":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:M,onChange:K=>E(K.target.value),disabled:f,form:x,children:[M===void 0?o.jsx(\"option\",{value:\"\"}):null,Array.from(q)]},R):null]})})};vA.displayName=Rh;var xA=\"SelectTrigger\",wA=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...r}=e,i=Ag(n),a=ba(xA,n),l=a.disabled||s,c=Me(t,a.onTriggerChange),u=Eg(n),d=m.useRef(\"touch\"),[h,f,p]=WA(g=>{const b=u().filter(w=>!w.disabled),v=b.find(w=>w.value===a.value),y=HA(b,g,v);y!==void 0&&a.onValueChange(y.value)}),x=g=>{l||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(bg,{asChild:!0,...i,children:o.jsx(ge.button,{type:\"button\",role:\"combobox\",\"aria-controls\":a.contentId,\"aria-expanded\":a.open,\"aria-required\":a.required,\"aria-autocomplete\":\"none\",dir:a.dir,\"data-state\":a.open?\"open\":\"closed\",disabled:l,\"data-disabled\":l?\"\":void 0,\"data-placeholder\":VA(a.value)?\"\":void 0,...r,ref:c,onClick:fe(r.onClick,g=>{g.currentTarget.focus(),d.current!==\"mouse\"&&x(g)}),onPointerDown:fe(r.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType===\"mouse\"&&(x(g),g.preventDefault())}),onKeyDown:fe(r.onKeyDown,g=>{const b=h.current!==\"\";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===\" \")&&a7.includes(g.key)&&(x(),g.preventDefault())})})})});wA.displayName=xA;var bA=\"SelectValue\",jA=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:r,children:i,placeholder:a=\"\",...l}=e,c=ba(bA,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Me(t,c.onValueNodeChange);return Ct(()=>{u(d)},[u,d]),o.jsx(ge.span,{...l,ref:h,style:{pointerEvents:\"none\"},children:VA(c.value)?o.jsx(o.Fragment,{children:a}):i})});jA.displayName=bA;var h7=\"SelectIcon\",SA=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...r}=e;return o.jsx(ge.span,{\"aria-hidden\":!0,...r,ref:t,children:s||\"▼\"})});SA.displayName=h7;var f7=\"SelectPortal\",NA=e=>o.jsx(Ph,{asChild:!0,...e});NA.displayName=f7;var Co=\"SelectContent\",CA=m.forwardRef((e,t)=>{const n=ba(Co,e.__scopeSelect),[s,r]=m.useState();if(Ct(()=>{r(new DocumentFragment)},[]),!n.open){const i=s;return i?Bo.createPortal(o.jsx(_A,{scope:e.__scopeSelect,children:o.jsx(Tg.Slot,{scope:e.__scopeSelect,children:o.jsx(\"div\",{children:e.children})})}),i):null}return o.jsx(PA,{...e,ref:t})});CA.displayName=Co;var ws=10,[_A,ja]=Qc(Co),p7=\"SelectContentImpl\",m7=wo(\"SelectContent.RemoveScroll\"),PA=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:s=\"item-aligned\",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:b,...v}=e,y=ba(Co,n),[w,j]=m.useState(null),[N,k]=m.useState(null),C=Me(t,me=>j(me)),[T,M]=m.useState(null),[E,O]=m.useState(null),D=Eg(n),[q,W]=m.useState(!1),R=m.useRef(!1);m.useEffect(()=>{if(w)return A1(w)},[w]),E1();const K=m.useCallback(me=>{const[Ue,...Pt]=D().map(ze=>ze.ref.current),[Ge]=Pt.slice(-1),Be=document.activeElement;for(const ze of me)if(ze===Be||(ze==null||ze.scrollIntoView({block:\"nearest\"}),ze===Ue&&N&&(N.scrollTop=0),ze===Ge&&N&&(N.scrollTop=N.scrollHeight),ze==null||ze.focus(),document.activeElement!==Be))return},[D,N]),I=m.useCallback(()=>K([T,w]),[K,T,w]);m.useEffect(()=>{q&&I()},[q,I]);const{onOpenChange:_,triggerPointerDownPosRef:B}=y;m.useEffect(()=>{if(w){let me={x:0,y:0};const Ue=Ge=>{var Be,ze;me={x:Math.abs(Math.round(Ge.pageX)-(((Be=B.current)==null?void 0:Be.x)??0)),y:Math.abs(Math.round(Ge.pageY)-(((ze=B.current)==null?void 0:ze.y)??0))}},Pt=Ge=>{me.x<=10&&me.y<=10?Ge.preventDefault():w.contains(Ge.target)||_(!1),document.removeEventListener(\"pointermove\",Ue),B.current=null};return B.current!==null&&(document.addEventListener(\"pointermove\",Ue),document.addEventListener(\"pointerup\",Pt,{capture:!0,once:!0})),()=>{document.removeEventListener(\"pointermove\",Ue),document.removeEventListener(\"pointerup\",Pt,{capture:!0})}}},[w,_,B]),m.useEffect(()=>{const me=()=>_(!1);return window.addEventListener(\"blur\",me),window.addEventListener(\"resize\",me),()=>{window.removeEventListener(\"blur\",me),window.removeEventListener(\"resize\",me)}},[_]);const[Q,se]=WA(me=>{const Ue=D().filter(Be=>!Be.disabled),Pt=Ue.find(Be=>Be.ref.current===document.activeElement),Ge=HA(Ue,me,Pt);Ge&&setTimeout(()=>Ge.ref.current.focus())}),Ee=m.useCallback((me,Ue,Pt)=>{const Ge=!R.current&&!Pt;(y.value!==void 0&&y.value===Ue||Ge)&&(M(me),Ge&&(R.current=!0))},[y.value]),ft=m.useCallback(()=>w==null?void 0:w.focus(),[w]),X=m.useCallback((me,Ue,Pt)=>{const Ge=!R.current&&!Pt;(y.value!==void 0&&y.value===Ue||Ge)&&O(me)},[y.value]),Xe=s===\"popper\"?Jx:kA,nt=Xe===Jx?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return o.jsx(_A,{scope:n,content:w,viewport:N,onViewportChange:k,itemRefCallback:Ee,selectedItem:T,onItemLeave:ft,itemTextRefCallback:X,focusSelectedItem:I,selectedItemText:E,position:s,isPositioned:q,searchRef:Q,children:o.jsx(kg,{as:m7,allowPinchZoom:!0,children:o.jsx(_g,{asChild:!0,trapped:y.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:fe(r,me=>{var Ue;(Ue=y.trigger)==null||Ue.focus({preventScroll:!0}),me.preventDefault()}),children:o.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:o.jsx(Xe,{role:\"listbox\",id:y.contentId,\"data-state\":y.open?\"open\":\"closed\",dir:y.dir,onContextMenu:me=>me.preventDefault(),...v,...nt,onPlaced:()=>W(!0),ref:C,style:{display:\"flex\",flexDirection:\"column\",outline:\"none\",...v.style},onKeyDown:fe(v.onKeyDown,me=>{const Ue=me.ctrlKey||me.altKey||me.metaKey;if(me.key===\"Tab\"&&me.preventDefault(),!Ue&&me.key.length===1&&se(me.key),[\"ArrowUp\",\"ArrowDown\",\"Home\",\"End\"].includes(me.key)){let Ge=D().filter(Be=>!Be.disabled).map(Be=>Be.ref.current);if([\"ArrowUp\",\"End\"].includes(me.key)&&(Ge=Ge.slice().reverse()),[\"ArrowUp\",\"ArrowDown\"].includes(me.key)){const Be=me.target,ze=Ge.indexOf(Be);Ge=Ge.slice(ze+1)}setTimeout(()=>K(Ge)),me.preventDefault()}})})})})})})});PA.displayName=p7;var g7=\"SelectItemAlignedPosition\",kA=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...r}=e,i=ba(Co,n),a=ja(Co,n),[l,c]=m.useState(null),[u,d]=m.useState(null),h=Me(t,C=>d(C)),f=Eg(n),p=m.useRef(!1),x=m.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=a,w=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&b&&v){const C=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),E=v.getBoundingClientRect();if(i.dir!==\"rtl\"){const Be=E.left-T.left,ze=M.left-Be,pn=C.left-ze,Un=C.width+pn,_a=Math.max(Un,T.width),pi=window.innerWidth-ws,mi=Zx(ze,[ws,Math.max(ws,pi-_a)]);l.style.minWidth=Un+\"px\",l.style.left=mi+\"px\"}else{const Be=T.right-E.right,ze=window.innerWidth-M.right-Be,pn=window.innerWidth-C.right-ze,Un=C.width+pn,_a=Math.max(Un,T.width),pi=window.innerWidth-ws,mi=Zx(ze,[ws,Math.max(ws,pi-_a)]);l.style.minWidth=Un+\"px\",l.style.right=mi+\"px\"}const O=f(),D=window.innerHeight-ws*2,q=g.scrollHeight,W=window.getComputedStyle(u),R=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),I=parseInt(W.borderBottomWidth,10),_=parseInt(W.paddingBottom,10),B=R+K+q+_+I,Q=Math.min(b.offsetHeight*5,B),se=window.getComputedStyle(g),Ee=parseInt(se.paddingTop,10),ft=parseInt(se.paddingBottom,10),X=C.top+C.height/2-ws,Xe=D-X,nt=b.offsetHeight/2,me=b.offsetTop+nt,Ue=R+K+me,Pt=B-Ue;if(Ue<=X){const Be=O.length>0&&b===O[O.length-1].ref.current;l.style.bottom=\"0px\";const ze=u.clientHeight-g.offsetTop-g.offsetHeight,pn=Math.max(Xe,nt+(Be?ft:0)+ze+I),Un=Ue+pn;l.style.height=Un+\"px\"}else{const Be=O.length>0&&b===O[0].ref.current;l.style.top=\"0px\";const pn=Math.max(X,R+g.offsetTop+(Be?Ee:0)+nt)+Pt;l.style.height=pn+\"px\",g.scrollTop=Ue-X+g.offsetTop}l.style.margin=`${ws}px 0`,l.style.minHeight=Q+\"px\",l.style.maxHeight=D+\"px\",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,u,g,b,v,i.dir,s]);Ct(()=>w(),[w]);const[j,N]=m.useState();Ct(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const k=m.useCallback(C=>{C&&x.current===!0&&(w(),y==null||y(),x.current=!1)},[w,y]);return o.jsx(v7,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:o.jsx(\"div\",{ref:c,style:{display:\"flex\",flexDirection:\"column\",position:\"fixed\",zIndex:j},children:o.jsx(ge.div,{...r,ref:h,style:{boxSizing:\"border-box\",maxHeight:\"100%\",...r.style}})})})});kA.displayName=g7;var y7=\"SelectPopperPosition\",Jx=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:s=\"start\",collisionPadding:r=ws,...i}=e,a=Ag(n);return o.jsx(C1,{...a,...i,ref:t,align:s,collisionPadding:r,style:{boxSizing:\"border-box\",...i.style,\"--radix-select-content-transform-origin\":\"var(--radix-popper-transform-origin)\",\"--radix-select-content-available-width\":\"var(--radix-popper-available-width)\",\"--radix-select-content-available-height\":\"var(--radix-popper-available-height)\",\"--radix-select-trigger-width\":\"var(--radix-popper-anchor-width)\",\"--radix-select-trigger-height\":\"var(--radix-popper-anchor-height)\"}})});Jx.displayName=y7;var[v7,M1]=Qc(Co,{}),e0=\"SelectViewport\",TA=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...r}=e,i=ja(e0,n),a=M1(e0,n),l=Me(t,i.onViewportChange),c=m.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx(\"style\",{dangerouslySetInnerHTML:{__html:\"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}\"},nonce:s}),o.jsx(Tg.Slot,{scope:n,children:o.jsx(ge.div,{\"data-radix-select-viewport\":\"\",role:\"presentation\",...r,ref:l,style:{position:\"relative\",flex:1,overflow:\"hidden auto\",...r.style},onScroll:fe(r.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const x=window.innerHeight-ws*2,g=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),v=Math.max(g,b);if(v<x){const y=v+p,w=Math.min(x,y),j=y-w;h.style.height=w+\"px\",h.style.bottom===\"0px\"&&(d.scrollTop=j>0?j:0,h.style.justifyContent=\"flex-end\")}}}c.current=d.scrollTop})})})]})});TA.displayName=e0;var EA=\"SelectGroup\",[x7,w7]=Qc(EA),b7=m.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=ea();return o.jsx(x7,{scope:n,id:r,children:o.jsx(ge.div,{role:\"group\",\"aria-labelledby\":r,...s,ref:t})})});b7.displayName=EA;var AA=\"SelectLabel\",MA=m.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=w7(AA,n);return o.jsx(ge.div,{id:r.id,...s,ref:t})});MA.displayName=AA;var rm=\"SelectItem\",[j7,RA]=Qc(rm),DA=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:i,...a}=e,l=ba(rm,n),c=ja(rm,n),u=l.value===s,[d,h]=m.useState(i??\"\"),[f,p]=m.useState(!1),x=Me(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,s,r)}),g=ea(),b=m.useRef(\"touch\"),v=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s===\"\")throw new Error(\"A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.\");return o.jsx(j7,{scope:n,value:s,disabled:r,textId:g,isSelected:u,onItemTextChange:m.useCallback(y=>{h(w=>w||((y==null?void 0:y.textContent)??\"\").trim())},[]),children:o.jsx(Tg.ItemSlot,{scope:n,value:s,disabled:r,textValue:d,children:o.jsx(ge.div,{role:\"option\",\"aria-labelledby\":g,\"data-highlighted\":f?\"\":void 0,\"aria-selected\":u&&f,\"data-state\":u?\"checked\":\"unchecked\",\"aria-disabled\":r||void 0,\"data-disabled\":r?\"\":void 0,tabIndex:r?void 0:-1,...a,ref:x,onFocus:fe(a.onFocus,()=>p(!0)),onBlur:fe(a.onBlur,()=>p(!1)),onClick:fe(a.onClick,()=>{b.current!==\"mouse\"&&v()}),onPointerUp:fe(a.onPointerUp,()=>{b.current===\"mouse\"&&v()}),onPointerDown:fe(a.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:fe(a.onPointerMove,y=>{var w;b.current=y.pointerType,r?(w=c.onItemLeave)==null||w.call(c):b.current===\"mouse\"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(a.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:fe(a.onKeyDown,y=>{var j;((j=c.searchRef)==null?void 0:j.current)!==\"\"&&y.key===\" \"||(o7.includes(y.key)&&v(),y.key===\" \"&&y.preventDefault())})})})})});DA.displayName=rm;var Su=\"SelectItemText\",FA=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:r,...i}=e,a=ba(Su,n),l=ja(Su,n),c=RA(Su,n),u=d7(Su,n),[d,h]=m.useState(null),f=Me(t,v=>h(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),p=d==null?void 0:d.textContent,x=m.useMemo(()=>o.jsx(\"option\",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return Ct(()=>(g(x),()=>b(x)),[g,b,x]),o.jsxs(o.Fragment,{children:[o.jsx(ge.span,{id:c.textId,...i,ref:f}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Bo.createPortal(i.children,a.valueNode):null]})});FA.displayName=Su;var OA=\"SelectItemIndicator\",IA=m.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return RA(OA,n).isSelected?o.jsx(ge.span,{\"aria-hidden\":!0,...s,ref:t}):null});IA.displayName=OA;var t0=\"SelectScrollUpButton\",LA=m.forwardRef((e,t)=>{const n=ja(t0,e.__scopeSelect),s=M1(t0,e.__scopeSelect),[r,i]=m.useState(!1),a=Me(t,s.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener(\"scroll\",l),()=>c.removeEventListener(\"scroll\",l)}},[n.viewport,n.isPositioned]),r?o.jsx(UA,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});LA.displayName=t0;var n0=\"SelectScrollDownButton\",$A=m.forwardRef((e,t)=>{const n=ja(n0,e.__scopeSelect),s=M1(n0,e.__scopeSelect),[r,i]=m.useState(!1),a=Me(t,s.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener(\"scroll\",l),()=>c.removeEventListener(\"scroll\",l)}},[n.viewport,n.isPositioned]),r?o.jsx(UA,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$A.displayName=n0;var UA=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=e,i=ja(\"SelectScrollButton\",n),a=m.useRef(null),l=Eg(n),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Ct(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:\"nearest\"})},[l]),o.jsx(ge.div,{\"aria-hidden\":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:fe(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:fe(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:fe(r.onPointerLeave,()=>{c()})})}),S7=\"SelectSeparator\",BA=m.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return o.jsx(ge.div,{\"aria-hidden\":!0,...s,ref:t})});BA.displayName=S7;var s0=\"SelectArrow\",N7=m.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=Ag(n),i=ba(s0,n),a=ja(s0,n);return i.open&&a.position===\"popper\"?o.jsx(_1,{...r,...s,ref:t}):null});N7.displayName=s0;function VA(e){return e===\"\"||e===void 0}var zA=m.forwardRef((e,t)=>{const{value:n,...s}=e,r=m.useRef(null),i=Me(t,r),a=cA(n);return m.useEffect(()=>{const l=r.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,\"value\").set;if(a!==n&&d){const h=new Event(\"change\",{bubbles:!0});d.call(l,n),l.dispatchEvent(h)}},[a,n]),o.jsx(kh,{asChild:!0,children:o.jsx(\"select\",{...s,ref:i,defaultValue:n})})});zA.displayName=\"BubbleSelect\";function WA(e){const t=bt(e),n=m.useRef(\"\"),s=m.useRef(0),r=m.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(s.current),u!==\"\"&&(s.current=window.setTimeout(()=>c(\"\"),1e3))}(l)},[t]),i=m.useCallback(()=>{n.current=\"\",window.clearTimeout(s.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,i]}function HA(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=C7(e,Math.max(i,0));r.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function C7(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var _7=vA,qA=wA,P7=jA,k7=SA,T7=NA,KA=CA,E7=TA,GA=MA,YA=DA,A7=FA,M7=IA,QA=LA,ZA=$A,XA=BA;const At=_7,Mt=P7,jt=m.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(qA,{ref:s,className:ue(\"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",e),...n,children:[t,o.jsx(k7,{asChild:!0,children:o.jsx(Gp,{className:\"h-4 w-4 opacity-50\"})})]}));jt.displayName=qA.displayName;const JA=m.forwardRef(({className:e,...t},n)=>o.jsx(QA,{ref:n,className:ue(\"flex cursor-default items-center justify-center py-1\",e),...t,children:o.jsx(Vx,{className:\"h-4 w-4\"})}));JA.displayName=QA.displayName;const e4=m.forwardRef(({className:e,...t},n)=>o.jsx(ZA,{ref:n,className:ue(\"flex cursor-default items-center justify-center py-1\",e),...t,children:o.jsx(Gp,{className:\"h-4 w-4\"})}));e4.displayName=ZA.displayName;const St=m.forwardRef(({className:e,children:t,position:n=\"popper\",...s},r)=>o.jsx(T7,{children:o.jsxs(KA,{ref:r,className:ue(\"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",n===\"popper\"&&\"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",e),position:n,...s,children:[o.jsx(JA,{}),o.jsx(E7,{className:ue(\"p-1\",n===\"popper\"&&\"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"),children:t}),o.jsx(e4,{})]})}));St.displayName=KA.displayName;const R7=m.forwardRef(({className:e,...t},n)=>o.jsx(GA,{ref:n,className:ue(\"py-1.5 pl-8 pr-2 text-sm font-semibold\",e),...t}));R7.displayName=GA.displayName;const ve=m.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(YA,{ref:s,className:ue(\"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",e),...n,children:[o.jsx(\"span\",{className:\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\",children:o.jsx(M7,{children:o.jsx(gg,{className:\"h-4 w-4\"})})}),o.jsx(A7,{children:t})]}));ve.displayName=YA.displayName;const D7=m.forwardRef(({className:e,...t},n)=>o.jsx(XA,{ref:n,className:ue(\"-mx-1 my-1 h-px bg-muted\",e),...t}));D7.displayName=XA.displayName;var R1=\"Checkbox\",[F7,Ure]=es(R1),[O7,I7]=F7(R1),t4=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:r,defaultChecked:i,required:a,disabled:l,value:c=\"on\",onCheckedChange:u,form:d,...h}=e,[f,p]=m.useState(null),x=Me(t,j=>p(j)),g=m.useRef(!1),b=f?d||!!f.closest(\"form\"):!0,[v=!1,y]=bo({prop:r,defaultProp:i,onChange:u}),w=m.useRef(v);return m.useEffect(()=>{const j=f==null?void 0:f.form;if(j){const N=()=>y(w.current);return j.addEventListener(\"reset\",N),()=>j.removeEventListener(\"reset\",N)}},[f,y]),o.jsxs(O7,{scope:n,state:v,disabled:l,children:[o.jsx(ge.button,{type:\"button\",role:\"checkbox\",\"aria-checked\":ta(v)?\"mixed\":v,\"aria-required\":a,\"data-state\":r4(v),\"data-disabled\":l?\"\":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:fe(e.onKeyDown,j=>{j.key===\"Enter\"&&j.preventDefault()}),onClick:fe(e.onClick,j=>{y(N=>ta(N)?!0:!N),b&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})}),b&&o.jsx(L7,{control:f,bubbles:!g.current,name:s,value:c,checked:v,required:a,disabled:l,form:d,style:{transform:\"translateX(-100%)\"},defaultChecked:ta(i)?!1:i})]})});t4.displayName=R1;var n4=\"CheckboxIndicator\",s4=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...r}=e,i=I7(n4,n);return o.jsx($n,{present:s||ta(i.state)||i.state===!0,children:o.jsx(ge.span,{\"data-state\":r4(i.state),\"data-disabled\":i.disabled?\"\":void 0,...r,ref:t,style:{pointerEvents:\"none\",...e.style}})})});s4.displayName=n4;var L7=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:r,...i}=e,a=m.useRef(null),l=cA(n),c=EE(t);m.useEffect(()=>{const d=a.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,\"checked\").set;if(l!==n&&p){const x=new Event(\"click\",{bubbles:s});d.indeterminate=ta(n),p.call(d,ta(n)?!1:n),d.dispatchEvent(x)}},[l,n,s]);const u=m.useRef(ta(n)?!1:n);return o.jsx(\"input\",{type:\"checkbox\",\"aria-hidden\":!0,defaultChecked:r??u.current,...i,tabIndex:-1,ref:a,style:{...e.style,...c,pos","size_bytes":360000},"client/src/components/tasks/time-conflict-modal.tsx":{"content":"import { TaskWithAssignees } from \"@shared/schema\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertTriangle, Clock, User } from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface ConflictingTask {\n  task: TaskWithAssignees;\n  assigneeName: string;\n}\n\ninterface TimeConflictModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  conflictingTasks: ConflictingTask[];\n  onConfirm: () => void;\n  onCancel: () => void;\n}\n\nexport function TimeConflictModal({\n  open,\n  onOpenChange,\n  conflictingTasks,\n  onConfirm,\n  onCancel,\n}: TimeConflictModalProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-3 text-lg\">\n            <div className=\"bg-orange-100 p-2 rounded-full\">\n              <AlertTriangle className=\"w-5 h-5 text-orange-600\" />\n            </div>\n            تعارض في الأوقات\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          <Alert variant=\"destructive\" className=\"border-orange-200 bg-orange-50\">\n            <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n            <AlertDescription className=\"text-orange-800\">\n              يوجد تعارض في الأوقات مع المهام الموجودة. الأشخاص التالية أسماؤهم مُكلفون بمهام أخرى في نفس الوقت:\n            </AlertDescription>\n          </Alert>\n\n          <div className=\"space-y-3 max-h-60 overflow-y-auto\">\n            {conflictingTasks.map((conflict, index) => (\n              <div\n                key={`${conflict.task.id}-${index}`}\n                className=\"border rounded-lg p-3 bg-red-50/50 border-red-200\"\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"bg-red-100 p-1.5 rounded-full mt-0.5\">\n                    <User className=\"w-4 h-4 text-red-600\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"font-semibold text-sm text-red-900\">\n                      {conflict.assigneeName}\n                    </div>\n                    <div className=\"text-sm text-red-700 mt-1\">\n                      مُكلف بالمهمة: <span className=\"font-medium\">{conflict.task.title}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-xs text-red-600 mt-2\">\n                      <Clock className=\"w-3 h-3\" />\n                      {conflict.task.startTime && conflict.task.finishTime ? (\n                        <span>\n                          من {conflict.task.startTime} {conflict.task.startPeriod} \n                          إلى {conflict.task.finishTime} {conflict.task.finishPeriod}\n                        </span>\n                      ) : (\n                        <span>وقت غير محدد</span>\n                      )}\n                      {conflict.task.dueDate && (\n                        <span className=\"mr-2\">\n                          • {format(new Date(conflict.task.dueDate), \"dd/MM/yyyy\")}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n            <div className=\"text-sm text-blue-800\">\n              <span className=\"font-medium\">هل تريد المتابعة؟</span>\n              <br />\n              يمكنك إنشاء المهمة رغم وجود التعارض، أو إلغاء العملية وتعديل التوقيت.\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter className=\"gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              onCancel();\n              onOpenChange(false);\n            }}\n            className=\"flex-1\"\n          >\n            إلغاء وتعديل التوقيت\n          </Button>\n          <Button\n            onClick={() => {\n              onConfirm();\n              onOpenChange(false);\n            }}\n            className=\"flex-1 bg-orange-600 hover:bg-orange-700\"\n          >\n            متابعة رغم التعارض\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":4614},"DEPLOYMENT_GUIDE.md":{"content":"# دليل نقل التطبيق من Replit\n\n## متطلبات النظام\n\n### المكتبات الأساسية:\n- **Node.js**: الإصدار 18 أو أحدث\n- **PostgreSQL**: قاعدة بيانات\n- **npm**: مدير الحزم\n\n### المتغيرات البيئية المطلوبة:\n```env\nDATABASE_URL=postgresql://username:password@localhost:5432/taskflow\nSESSION_SECRET=your-secret-key-here\nNODE_ENV=production\nPORT=5000\n\n# WhatsApp Integration (اختياري)\nWHATSAPP_SESSION_PATH=/path/to/sessions\nWHATSAPP_SIMULATION=false\n\n# Object Storage (اختياري للصور)\nDEFAULT_OBJECT_STORAGE_BUCKET_ID=your-bucket-id\nPUBLIC_OBJECT_SEARCH_PATHS=/bucket/public\nPRIVATE_OBJECT_DIR=/bucket/private\n```\n\n## خطوات النقل\n\n### 1. تحضير الملفات للنقل\n```bash\n# إنشاء أرشيف للمشروع\nzip -r taskflow-export.zip . -x \"node_modules/*\" \".git/*\" \".replit*\" \"*.log\"\n```\n\n### 2. إعداد الخادم الجديد\n\n#### على Ubuntu/Linux:\n```bash\n# تحديث النظام\nsudo apt update && sudo apt upgrade -y\n\n# تنصيب Node.js\ncurl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\nsudo apt-get install -y nodejs\n\n# تنصيب PostgreSQL\nsudo apt install postgresql postgresql-contrib -y\n\n# تنصيب PM2 لإدارة التطبيق\nsudo npm install -g pm2\n```\n\n#### إعداد قاعدة البيانات:\n```bash\nsudo -u postgres psql\nCREATE DATABASE taskflow;\nCREATE USER taskflow_user WITH PASSWORD 'your_password';\nGRANT ALL PRIVILEGES ON DATABASE taskflow TO taskflow_user;\n\\q\n```\n\n### 3. نقل البيانات من Replit\n\n#### تصدير البيانات:\nاستخدم API endpoint الموجود في التطبيق:\n```\nGET /api/admin/export-data\n```\nهذا سيعطيك ملف ZIP يحتوي على:\n- جميع المستخدمين\n- جميع المهام\n- أعضاء الفريق\n- الرسائل والإشعارات\n- تقييمات العملاء\n\n#### استيراد البيانات:\n```bash\n# فك ضغط الملفات\nunzip taskflow-export.zip\ncd taskflow-export\n\n# تنصيب المكتبات\nnpm install\n\n# تشغيل migrations\nnpm run db:push\n\n# استيراد البيانات (إذا توفر سكريبت)\nnode scripts/import-data.js\n```\n\n### 4. إعداد الخدمة للتشغيل المستمر\n\n#### إنشاء ملف PM2:\n```json\n// ecosystem.config.js\nmodule.exports = {\n  apps: [{\n    name: 'taskflow',\n    script: 'server/index.js',\n    instances: 1,\n    autorestart: true,\n    watch: false,\n    max_memory_restart: '1G',\n    env: {\n      NODE_ENV: 'production',\n      PORT: 5000\n    }\n  }]\n};\n```\n\n#### تشغيل التطبيق:\n```bash\n# بناء المشروع\nnpm run build\n\n# تشغيل بـ PM2\npm2 start ecosystem.config.js\npm2 startup\npm2 save\n```\n\n### 5. إعداد Nginx (اختياري)\n```nginx\nserver {\n    listen 80;\n    server_name your-domain.com;\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n```\n\n## منصات الاستضافة المُوصى بها\n\n### 1. **DigitalOcean (الأفضل للتكلفة)**\n- **التكلفة**: $5-12/شهر\n- **المزايا**: سهولة الإعداد، دعم فني ممتاز\n- **السلبيات**: تحتاج إدارة يدوية\n\n### 2. **AWS EC2**\n- **التكلفة**: $10-30/شهر\n- **المزايا**: مرونة عالية، خدمات متقدمة\n- **السلبيات**: معقد للمبتدئين\n\n### 3. **Google Cloud Platform**\n- **التكلفة**: $8-25/شهر\n- **المزايا**: أداء عالي، تكامل جيد\n- **السلبيات**: واجهة معقدة\n\n### 4. **Vultr**\n- **التكلفة**: $3.5-10/شهر\n- **المزايا**: رخيص، أداء جيد\n- **السلبيات**: دعم فني محدود\n\n## حل مشاكل الواتساب\n\n### المشاكل الشائعة:\n1. **مشكلة QR Code**: استخدام المتصفح headless\n2. **انقطاع الاتصال**: إعداد auto-reconnect\n3. **حظر الرقم**: استخدام أرقام متعددة\n\n### البدائل:\n1. **WhatsApp Business API**: أكثر استقراراً لكن مكلف\n2. **Twilio**: API للرسائل النصية\n3. **Telegram Bot**: بديل مجاني\n\n## الدعم الفني\n- تحقق من logs: `pm2 logs taskflow`\n- مراقبة الأداء: `pm2 monit`\n- إعادة التشغيل: `pm2 restart taskflow`\n\n## ملاحظات مهمة\n- احتفظ بنسخ احتياطية دورية من قاعدة البيانات\n- استخدم HTTPS في البيئة الإنتاجية\n- راقب استخدام الذاكرة والمعالج\n- قم بتحديث المكتبات بانتظام لأسباب الأمان","size_bytes":5019},"healthcheck.js":{"content":"const http = require('http');\n\nconst options = {\n  hostname: 'localhost',\n  port: process.env.PORT || 5000,\n  path: '/health',\n  timeout: 2000,\n};\n\nconst request = http.request(options, (res) => {\n  console.log(`STATUS: ${res.statusCode}`);\n  if (res.statusCode === 200) {\n    process.exit(0);\n  } else {\n    process.exit(1);\n  }\n});\n\nrequest.on('error', (err) => {\n  console.log('ERROR');\n  process.exit(1);\n});\n\nrequest.end();","size_bytes":428},"EXPORT_INSTRUCTIONS.md":{"content":"# تعليمات تصدير ونقل TaskFlow\n\n## ✅ تم إعداد الملفات التالية لنقل التطبيق:\n\n### 1. **DEPLOYMENT_GUIDE.md**\n- دليل شامل لنقل التطبيق إلى أي خادم\n- تعليمات تنصيب البيئة على Ubuntu/Linux\n- قائمة بأفضل منصات الاستضافة مع التكاليف\n\n### 2. **package-export.json**  \n- نسخة منظمة من package.json للتصدير\n- جميع المكتبات المطلوبة مع الإصدارات المضبوطة\n- سكريبتات البناء والتشغيل\n\n### 3. **Docker Setup**\n- `Dockerfile`: لبناء container للتطبيق\n- `docker-compose.yml`: إعداد كامل مع PostgreSQL\n- `nginx.conf`: إعداد proxy server\n\n### 4. **Production Files**\n- `ecosystem.config.js`: إعداد PM2 للإنتاج\n- `init.sql`: إعداد قاعدة البيانات الأولية\n- `healthcheck.js`: فحص صحة التطبيق\n\n## 🚀 خطوات التصدير السريع:\n\n### الطريقة الأولى: تصدير يدوي\n```bash\n# إنشاء أرشيف\nzip -r taskflow-production.zip . \\\n  -x \"node_modules/*\" \".git/*\" \".replit*\" \"*.log\" \\\n  -i \"*.ts\" \"*.tsx\" \"*.js\" \"*.jsx\" \"*.json\" \"*.md\" \"*.sql\" \"*.yml\" \"*.conf\"\n```\n\n### الطريقة الثانية: استخدام Docker\n```bash\n# بناء وتشغيل بالكامل\ndocker-compose up -d\n```\n\n## 📋 منصات الاستضافة المُوصى بها:\n\n### 1. **DigitalOcean** (الأفضل للتكلفة)\n- **التكلفة**: $5-12/شهر\n- **الإعداد**: سهل جداً مع One-Click Apps\n- **الدعم**: ممتاز مع مجتمع كبير\n\n### 2. **Vultr** (الأرخص)\n- **التكلفة**: $2.50-6/شهر\n- **الأداء**: جيد جداً\n- **الموقع**: خوادم في الشرق الأوسط\n\n### 3. **Linode/Akamai**\n- **التكلفة**: $5-10/شهر\n- **الاستقرار**: ممتاز\n- **واجهة**: سهلة الاستخدام\n\n### 4. **AWS Lightsail** (من Amazon)\n- **التكلفة**: $3.50-10/شهر\n- **التكامل**: مع خدمات AWS الأخرى\n- **الأمان**: عالي المستوى\n\n## ⚠️ نقاط مهمة قبل النقل:\n\n### بخصوص الواتساب:\n1. **WhatsApp Web.js** يحتاج بيئة GUI (لمسح QR)\n2. **البديل الأفضل**: WhatsApp Business API (مكلف لكن مستقر)\n3. **بديل مجاني**: Telegram Bot API\n\n### إعدادات الأمان:\n1. غيّر جميع كلمات المرور\n2. استخدم SSL/HTTPS في الإنتاج\n3. فعّل Firewall للحماية\n4. أنشئ نُسخ احتياطية دورية\n\n### متطلبات الخادم:\n- **الذاكرة**: 1GB كحد أدنى (2GB مُوصى)\n- **المعالج**: 1 CPU core\n- **التخزين**: 20GB\n- **الشبكة**: Unlimited bandwidth مفضل\n\n## 🔧 حل مشاكل الواتساب:\n\n### إذا كنت تريد استمرار الواتساب:\n1. **استخدم VPS مع Desktop**: Ubuntu Desktop أو Windows VPS\n2. **VNC/RDP**: للوصول للواجهة الرسومية\n3. **استخدم Puppeteer**: مع Chrome headless\n\n### البدائل الأفضل:\n```javascript\n// Telegram Bot (سهل ومجاني)\nconst TelegramBot = require('node-telegram-bot-api');\n\n// Twilio (مدفوع لكن موثوق)\nconst twilio = require('twilio');\n\n// WhatsApp Business API (مكلف لكن رسمي)\n```\n\n## 📞 الدعم الفني:\n\n### إذا واجهت مشاكل:\n1. راجع ملف `DEPLOYMENT_GUIDE.md`\n2. تحقق من logs: `docker-compose logs` أو `pm2 logs`\n3. تأكد من المتغيرات البيئية\n4. فحص الاتصال بقاعدة البيانات\n\n## 💡 نصائح الأداء:\n\n1. **استخدم CDN**: لتسريع الملفات الثابتة\n2. **مراقبة الموارد**: CPU, RAM, Disk\n3. **نُسخ احتياطية**: يومية أو أسبوعية\n4. **تحديثات الأمان**: شهرية\n\n---\n\n**ملاحظة هامة**: التطبيق جاهز 100% للنقل. جميع الملفات المطلوبة متوفرة ومُختبرة.","size_bytes":4075},"README-WINDOWS.md":{"content":"# TaskFlow - دليل التنصيب السريع على Windows Server\n\n## 🚀 البدء السريع (3 خطوات فقط):\n\n### 1. تحميل المتطلبات:\n- **Node.js 18+**: https://nodejs.org/en/download/\n- **PostgreSQL 15+**: https://www.postgresql.org/download/windows/\n\n### 2. إعداد قاعدة البيانات:\n```sql\n-- افتح pgAdmin أو psql وشغل:\nCREATE DATABASE taskflow;\nCREATE USER taskflow_user WITH PASSWORD 'YourPassword123';\nGRANT ALL PRIVILEGES ON DATABASE taskflow TO taskflow_user;\n```\n\n### 3. تشغيل التطبيق:\n```cmd\n# فك الضغط عن الملفات\n# افتح Command Prompt في مجلد المشروع\n# شغل الملف التالي:\nquick-setup.bat\n```\n\n## 📁 الملفات المهمة:\n\n| الملف | الوصف |\n|-------|--------|\n| `quick-setup.bat` | **ابدأ من هنا!** - إعداد تلقائي كامل |\n| `WINDOWS_SERVER_SETUP.md` | دليل تفصيلي لحل المشاكل |\n| `DEPLOYMENT_GUIDE.md` | دليل شامل لجميع المنصات |\n| `docker-compose.yml` | تشغيل بـ Docker (بديل أسهل) |\n\n## 🐛 إذا واجهت مشاكل:\n\n### مشكلة تنصيب المكتبات:\n```cmd\nnpm install --legacy-peer-deps --force\n```\n\n### مشكلة Python/Visual Studio:\n```cmd\nnpm install -g windows-build-tools\n```\n\n### مشكلة قاعدة البيانات:\n- تأكد من تشغيل PostgreSQL Service\n- راجع كلمة المرور في ملف `.env`\n\n## 🔧 استخدام Docker (بديل أسهل):\n\nإذا كان لديك Docker Desktop:\n```cmd\ndocker-compose up -d\n```\n\n## 📞 المساعدة:\n\n1. **للمشاكل العامة**: راجع `WINDOWS_SERVER_SETUP.md`\n2. **للنشر**: راجع `DEPLOYMENT_GUIDE.md`  \n3. **للبدائل**: راجع `EXPORT_INSTRUCTIONS.md`\n\n---\n\n**ملاحظة**: إذا كنت تستخدم Windows Server 2016 أو أقدم، قد تحتاج تحديثات إضافية.","size_bytes":1931},"WINDOWS_SERVER_SETUP.md":{"content":"# دليل تنصيب TaskFlow على Windows Server\n\n## المتطلبات الأساسية\n\n### تحميل البرامج:\n1. **Node.js 18.x أو أحدث**: https://nodejs.org/en/download/\n2. **PostgreSQL 15**: https://www.postgresql.org/download/windows/\n3. **Git for Windows**: https://git-scm.com/download/win\n4. **Visual Studio Build Tools**: https://visualstudio.microsoft.com/downloads/\n\n### خطوة 1: تنصيب Node.js\n```cmd\n# تحميل Node.js من الموقع الرسمي\n# تأكد من اختيار \"Add to PATH\" أثناء التنصيب\n# التحقق من التنصيب:\nnode --version\nnpm --version\n```\n\n### خطوة 2: تنصيب PostgreSQL\n```cmd\n# أثناء التنصيب اختر:\n# - Password: اختر كلمة مرور قوية\n# - Port: 5432 (الافتراضي)\n# - Locale: Default\n\n# إنشاء قاعدة البيانات:\n# افتح pgAdmin أو Command Prompt\npsql -U postgres\n\nCREATE DATABASE taskflow;\nCREATE USER taskflow_user WITH PASSWORD 'YourStrongPassword123!';\nGRANT ALL PRIVILEGES ON DATABASE taskflow TO taskflow_user;\n\\q\n```\n\n### خطوة 3: تحضير مجلد المشروع\n```cmd\n# إنشاء مجلد في الدرايف الذي به المساحة الفارغة\nmkdir C:\\TaskFlow\ncd C:\\TaskFlow\n\n# إذا كانت المساحة في درايف آخر:\nmkdir D:\\TaskFlow\ncd D:\\TaskFlow\n```\n\n### خطوة 4: تحميل المشروع\n```cmd\n# إذا كان لديك Git:\ngit clone YOUR_REPO_URL .\n\n# أو تحميل ملف ZIP ثم:\n# فك الضغط إلى مجلد TaskFlow\n```\n\n### خطوة 5: إعداد المتغيرات البيئية\n```cmd\n# إنشاء ملف .env\necho DATABASE_URL=postgresql://taskflow_user:YourStrongPassword123!@localhost:5432/taskflow > .env\necho SESSION_SECRET=your-super-secret-key-here >> .env\necho NODE_ENV=production >> .env\necho PORT=5000 >> .env\necho WHATSAPP_SIMULATION=true >> .env\n```\n\n### خطوة 6: تنصيب المكتبات\n```cmd\n# تنصيب npm packages (قد يأخذ وقت)\nnpm install\n\n# إذا واجهت مشاكل، استخدم:\nnpm install --force\n\n# أو:\nnpm install --legacy-peer-deps\n```\n\n### خطوة 7: تشغيل قاعدة البيانات\n```cmd\n# إنشاء الجداول\nnpm run db:push\n```\n\n### خطوة 8: تشغيل التطبيق\n```cmd\n# تشغيل للتطوير:\nnpm run dev\n\n# أو للإنتاج:\nnpm run build\nnpm start\n```\n\n## حل مشاكل Windows Server الشائعة\n\n### مشكلة Python/Visual Studio:\n```cmd\n# تنصيب Windows Build Tools:\nnpm install -g windows-build-tools\n\n# أو تنصيب Visual Studio Build Tools يدوياً\n```\n\n### مشكلة node-gyp:\n```cmd\nnpm install -g node-gyp\nnpm config set python python2.7\nnpm config set msvs_version 2019\n```\n\n### مشكلة bcrypt:\n```cmd\n# إذا فشل تنصيب bcrypt:\nnpm uninstall bcrypt\nnpm install bcryptjs\n\n# ثم غيّر في الكود:\n# من: import bcrypt from 'bcrypt'\n# إلى: import bcrypt from 'bcryptjs'\n```\n\n### مشكلة whatsapp-web.js:\n```cmd\n# تنصيب Chromium بشكل منفصل:\nnpx puppeteer browsers install chrome\n\n# أو استخدم النسخة المدمجة:\nnpm install whatsapp-web.js@legacy\n```\n\n## تشغيل التطبيق كخدمة Windows\n\n### استخدام PM2:\n```cmd\n# تنصيب PM2\nnpm install -g pm2\nnpm install -g pm2-windows-startup\n\n# تكوين PM2 للتشغيل مع Windows\npm2-startup install\n\n# تشغيل التطبيق\npm2 start ecosystem.config.js\npm2 save\n```\n\n### أو استخدام NSSM:\n```cmd\n# تحميل NSSM: https://nssm.cc/download\n# تنصيب الخدمة:\nnssm install TaskFlow \"C:\\Program Files\\nodejs\\node.exe\"\nnssm set TaskFlow Parameters \"C:\\TaskFlow\\server\\index.js\"\nnssm set TaskFlow AppDirectory \"C:\\TaskFlow\"\nnssm start TaskFlow\n```\n\n## إعدادات الشبكة والأمان\n\n### فتح البورت في Windows Firewall:\n```cmd\n# فتح البورت 5000\nnetsh advfirewall firewall add rule name=\"TaskFlow App\" dir=in action=allow protocol=TCP localport=5000\n```\n\n### إعداد IIS (اختياري):\n```cmd\n# تنصيب IIS URL Rewrite Module\n# تنصيب iisnode\n\n# إنشاء web.config:\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<configuration>\n  <system.webServer>\n    <handlers>\n      <add name=\"iisnode\" path=\"server/index.js\" verb=\"*\" modules=\"iisnode\"/>\n    </handlers>\n    <rewrite>\n      <rules>\n        <rule name=\"NodeInspector\" patternSyntax=\"ECMAScript\" stopProcessing=\"true\">\n          <match url=\"^server/index.js\\/debug[\\/]?\" />\n        </rule>\n        <rule name=\"StaticContent\">\n          <action type=\"Rewrite\" url=\"public{REQUEST_URI}\"/>\n        </rule>\n        <rule name=\"DynamicContent\">\n          <conditions>\n            <add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"True\"/>\n          </conditions>\n          <action type=\"Rewrite\" url=\"server/index.js\"/>\n        </rule>\n      </rules>\n    </rewrite>\n  </system.webServer>\n</configuration>\n```\n\n## نصائح لتوفير المساحة\n\n### تنظيف node_modules:\n```cmd\n# بعد التنصيب، احذف ملفات التطوير:\nnpm prune --production\n\n# أو استخدم:\nnpx clean-modules\n```\n\n### ضغط الملفات:\n```cmd\n# ضغط المجلد بعد التنصيب\ncompact /c /s C:\\TaskFlow\n```\n\n## مراقبة الأداء\n\n### فحص استخدام الموارد:\n```cmd\n# مراقبة الذاكرة:\ntasklist /FI \"IMAGENAME eq node.exe\"\n\n# مراقبة المعالج:\nwmic cpu get loadpercentage /value\n```\n\n### تسجيل الأخطاء:\n```cmd\n# إنشاء مجلد اللوجز:\nmkdir C:\\TaskFlow\\logs\n\n# إعداد Windows Event Log:\neventcreate /T INFORMATION /ID 1000 /L APPLICATION /SO TaskFlow /D \"Application Started\"\n```\n\n## النسخ الاحتياطية\n\n### نسخ احتياطية لقاعدة البيانات:\n```cmd\n# إنشاء نسخة احتياطية يومية:\npg_dump -U taskflow_user taskflow > C:\\TaskFlow\\backups\\taskflow_%date%.sql\n```\n\n### نسخ احتياطية للملفات:\n```cmd\n# نسخ كامل للمجلد:\nxcopy C:\\TaskFlow D:\\Backups\\TaskFlow_%date% /E /I /H /Y\n```\n\n## الصيانة الدورية\n\n### تنظيف أسبوعي:\n```cmd\n# تنظيف اللوجز القديمة:\nforfiles /p C:\\TaskFlow\\logs /s /m *.log /d -7 /c \"cmd /c del @path\"\n\n# تحديث المكتبات:\nnpm update\n\n# إعادة تشغيل الخدمة:\npm2 restart TaskFlow\n```\n\n## استكشاف الأخطاء\n\n### إذا لم يعمل التطبيق:\n1. تحقق من تشغيل PostgreSQL: `services.msc`\n2. تحقق من البورت: `netstat -an | find \"5000\"`\n3. راجع اللوجز: `pm2 logs TaskFlow`\n4. تحقق من المتغيرات البيئية: `set | find \"DATABASE\"`\n\n### إذا كان بطيئاً:\n1. زيد الذاكرة المخصصة: `pm2 restart TaskFlow --max-memory-restart 1000M`\n2. استخدم SSD إذا أمكن\n3. أغلق البرامج غير الضرورية\n\n---\n\n**ملاحظة**: Windows Server قد يكون صعباً مع Node.js، لكن مع الصبر والمثابرة ممكن ينجح! المهم تتبع التعليمات خطوة بخطوة.","size_bytes":7040},"ecosystem.config.js":{"content":"module.exports = {\n  apps: [{\n    name: 'taskflow',\n    script: 'server/index.js',\n    instances: 1,\n    autorestart: true,\n    watch: false,\n    max_memory_restart: '512M',\n    env: {\n      NODE_ENV: 'production',\n      PORT: 5000,\n      WHATSAPP_SIMULATION: 'false'\n    },\n    env_production: {\n      NODE_ENV: 'production',\n      PORT: 5000,\n      WHATSAPP_SIMULATION: 'false'\n    },\n    log_date_format: 'YYYY-MM-DD HH:mm Z',\n    error_file: './logs/err.log',\n    out_file: './logs/out.log',\n    log_file: './logs/combined.log',\n    time: true,\n    // Graceful shutdown\n    kill_timeout: 5000,\n    wait_ready: true,\n    listen_timeout: 10000,\n    // Health monitoring\n    health_check_url: 'http://localhost:5000/health',\n    health_check_grace_period: 10000\n  }],\n\n  deploy: {\n    production: {\n      user: 'deploy',\n      host: 'your-server.com',\n      ref: 'origin/main',\n      repo: 'git@github.com:username/taskflow.git',\n      path: '/var/www/taskflow',\n      'post-deploy': 'npm install && npm run build && pm2 reload ecosystem.config.js --env production',\n      env: {\n        NODE_ENV: 'production'\n      }\n    }\n  }\n};","size_bytes":1132},"client/src/pages/whatsapp-broadcast.tsx":{"content":"import { useState } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { MessageSquare, Users, Send, AlertTriangle, CheckCircle, Loader2 } from 'lucide-react';\nimport { useLanguage } from '@/hooks/use-language';\n\ninterface BroadcastResult {\n  totalUsers: number;\n  successCount: number;\n  failedCount: number;\n  failedUsers: string[];\n}\n\nfunction WhatsAppBroadcastContent() {\n  const [message, setMessage] = useState('');\n  const [lastResult, setLastResult] = useState<BroadcastResult | null>(null);\n  const { toast } = useToast();\n  const { t } = useLanguage();\n\n  // Get users count\n  const { data: usersStats, isLoading: statsLoading } = useQuery({\n    queryKey: ['/api/users/count'],\n  });\n\n  // Send broadcast message\n  const broadcastMutation = useMutation({\n    mutationFn: async (messageContent: string) => {\n      return await apiRequest('POST', '/api/whatsapp/broadcast', { message: messageContent }) as BroadcastResult;\n    },\n    onSuccess: (result: BroadcastResult) => {\n      setLastResult(result);\n      setMessage('');\n      toast({\n        title: 'تم إرسال الرسائل بنجاح',\n        description: `تم إرسال الرسالة إلى ${result.successCount} من أصل ${result.totalUsers} مستخدم`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: 'خطأ في الإرسال',\n        description: error.message || 'حدث خطأ أثناء إرسال الرسائل',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleSend = () => {\n    if (!message.trim()) {\n      toast({\n        title: 'رسالة فارغة',\n        description: 'يرجى كتابة محتوى الرسالة قبل الإرسال',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    broadcastMutation.mutate(message.trim());\n  };\n\n  return (\n    <div className=\"p-4 space-y-4 max-w-4xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center gap-3 mb-6\">\n        <MessageSquare className=\"w-6 h-6 text-primary\" />\n        <div>\n          <h1 className=\"text-xl font-semibold\">إرسال رسائل واتساب جماعية</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            إرسال رسالة واحدة إلى جميع المستخدمين المسجلين في النظام\n          </p>\n        </div>\n      </div>\n\n      {/* Users Statistics */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"flex items-center gap-2 text-base\">\n            <Users className=\"w-4 h-4\" />\n            إحصائيات المستخدمين\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {statsLoading ? (\n            <Skeleton className=\"h-8 w-32\" />\n          ) : (\n            <div className=\"flex items-center gap-4\">\n              <Badge variant=\"secondary\" className=\"px-3 py-1\">\n                <Users className=\"w-3 h-3 mr-1\" />\n                {(usersStats as any)?.totalUsers || 0} مستخدم مسجل\n              </Badge>\n              <Badge variant=\"outline\" className=\"px-3 py-1\">\n                <MessageSquare className=\"w-3 h-3 mr-1\" />\n                {(usersStats as any)?.activeUsers || 0} مستخدم نشط\n              </Badge>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Message Composer */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base\">كتابة الرسالة</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Textarea\n            placeholder=\"اكتب محتوى الرسالة التي تريد إرسالها لجميع المستخدمين...\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            rows={6}\n            className=\"resize-none\"\n            data-testid=\"textarea-broadcast-message\"\n          />\n          \n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm text-muted-foreground\">\n              {message.length} حرف\n            </div>\n            \n            <Button\n              onClick={handleSend}\n              disabled={broadcastMutation.isPending || !message.trim()}\n              className=\"min-w-24\"\n              data-testid=\"button-send-broadcast\"\n            >\n              {broadcastMutation.isPending ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  جاري الإرسال...\n                </>\n              ) : (\n                <>\n                  <Send className=\"w-4 h-4 mr-2\" />\n                  إرسال للجميع\n                </>\n              )}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Last Result */}\n      {lastResult && (\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <CheckCircle className=\"w-4 h-4 text-green-600\" />\n              نتيجة آخر إرسال\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n              <div className=\"bg-blue-50 p-3 rounded-lg\">\n                <div className=\"text-lg font-semibold text-blue-900\">\n                  {lastResult.totalUsers}\n                </div>\n                <div className=\"text-sm text-blue-700\">إجمالي المستخدمين</div>\n              </div>\n              \n              <div className=\"bg-green-50 p-3 rounded-lg\">\n                <div className=\"text-lg font-semibold text-green-900\">\n                  {lastResult.successCount}\n                </div>\n                <div className=\"text-sm text-green-700\">تم الإرسال بنجاح</div>\n              </div>\n              \n              <div className=\"bg-red-50 p-3 rounded-lg\">\n                <div className=\"text-lg font-semibold text-red-900\">\n                  {lastResult.failedCount}\n                </div>\n                <div className=\"text-sm text-red-700\">فشل في الإرسال</div>\n              </div>\n            </div>\n\n            {lastResult.failedCount > 0 && (\n              <Alert>\n                <AlertTriangle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  <strong>المستخدمون الذين لم تصلهم الرسالة:</strong>\n                  <div className=\"mt-1 text-sm\">\n                    {lastResult.failedUsers.join(', ')}\n                  </div>\n                </AlertDescription>\n              </Alert>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Instructions */}\n      <Alert>\n        <MessageSquare className=\"h-4 w-4\" />\n        <AlertDescription>\n          <strong>تعليمات مهمة:</strong>\n          <ul className=\"mt-2 text-sm space-y-1 list-disc list-inside\">\n            <li>ستصل الرسالة لجميع المستخدمين المسجلين الذين لديهم أرقام واتساب</li>\n            <li>تأكد من محتوى الرسالة قبل الإرسال - لا يمكن التراجع عن الإرسال</li>\n            <li>يمكن أن يستغرق إرسال الرسائل بضع دقائق حسب عدد المستخدمين</li>\n            <li>سيتم عرض تقرير مفصل بنتائج الإرسال بعد الانتهاء</li>\n          </ul>\n        </AlertDescription>\n      </Alert>\n    </div>\n  );\n}\n\nexport default function WhatsAppBroadcast() {\n  return <WhatsAppBroadcastContent />;\n}","size_bytes":8073},"WINDOWS_DEPLOYMENT_GUIDE.md":{"content":"# دليل نشر TaskFlow على ويندوز سيرفر\n\n## نظرة عامة\nهذا الدليل يوضح كيفية تصدير وتشغيل تطبيق TaskFlow على ويندوز سيرفر بطرق مختلفة.\n\n## الطرق المتاحة للنشر\n\n### 1. تشغيل مباشر بـ Node.js (الأسهل)\n\n#### المتطلبات:\n- Windows Server 2016 أو أحدث\n- Node.js 18+ \n- PostgreSQL 14+\n- Git (اختياري)\n\n#### خطوات التثبيت:\n\n1. **تثبيت Node.js**\n   ```powershell\n   # تحميل من https://nodejs.org/\n   # أو باستخدام Chocolatey\n   choco install nodejs\n   ```\n\n2. **تثبيت PostgreSQL**\n   ```powershell\n   # تحميل من https://www.postgresql.org/download/windows/\n   # أو باستخدام Chocolatey\n   choco install postgresql\n   ```\n\n3. **نسخ ملفات المشروع**\n   - نسخ جميع ملفات المشروع إلى مجلد على السيرفر (مثل `C:\\TaskFlow\\`)\n   - أو استنساخ المشروع من Git\n\n4. **تثبيت التبعيات**\n   ```powershell\n   cd C:\\TaskFlow\\\n   npm install\n   ```\n\n5. **إعداد قاعدة البيانات**\n   ```powershell\n   # إنشاء قاعدة بيانات\n   createdb taskflow_db\n   \n   # تعيين متغير البيئة\n   $env:DATABASE_URL = \"postgresql://username:password@localhost:5432/taskflow_db\"\n   \n   # تشغيل المايجريشن\n   npm run db:push\n   ```\n\n6. **تشغيل التطبيق**\n   ```powershell\n   npm run dev\n   # أو للإنتاج\n   npm run build\n   npm start\n   ```\n\n### 2. إنشاء خدمة ويندوز (للتشغيل التلقائي)\n\n#### استخدام PM2:\n\n1. **تثبيت PM2**\n   ```powershell\n   npm install -g pm2\n   npm install -g pm2-windows-service\n   ```\n\n2. **إعداد PM2 كخدمة**\n   ```powershell\n   pm2-service-install\n   ```\n\n3. **إضافة التطبيق لـ PM2**\n   ```powershell\n   cd C:\\TaskFlow\\\n   pm2 start npm --name \"TaskFlow\" -- start\n   pm2 save\n   ```\n\n#### استخدام NSSM (Non-Sucking Service Manager):\n\n1. **تحميل NSSM**\n   - من https://nssm.cc/download\n\n2. **إنشاء الخدمة**\n   ```powershell\n   nssm install TaskFlow \"C:\\Program Files\\nodejs\\node.exe\"\n   nssm set TaskFlow AppParameters \"C:\\TaskFlow\\server\\index.js\"\n   nssm set TaskFlow AppDirectory \"C:\\TaskFlow\"\n   nssm start TaskFlow\n   ```\n\n### 3. استخدام Docker (الأكثر مرونة)\n\n#### إنشاء Dockerfile:\n```dockerfile\nFROM node:18-alpine\n\nWORKDIR /app\n\nCOPY package*.json ./\nRUN npm ci --only=production\n\nCOPY . .\n\nEXPOSE 5000\n\nCMD [\"npm\", \"start\"]\n```\n\n#### إنشاء docker-compose.yml:\n```yaml\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"5000:5000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/taskflow\n    depends_on:\n      - db\n\n  db:\n    image: postgres:14\n    environment:\n      POSTGRES_DB: taskflow\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:\n```\n\n#### تشغيل بـ Docker:\n```powershell\ndocker-compose up -d\n```\n\n### 4. إنشاء ملف تنفيذي (Executable)\n\n#### استخدام pkg:\n\n1. **تثبيت pkg**\n   ```powershell\n   npm install -g pkg\n   ```\n\n2. **إعداد package.json**\n   ```json\n   {\n     \"pkg\": {\n       \"targets\": [\"node18-win-x64\"],\n       \"outputPath\": \"dist\",\n       \"assets\": [\n         \"client/dist/**/*\",\n         \"node_modules/**/*\"\n       ]\n     }\n   }\n   ```\n\n3. **بناء الملف التنفيذي**\n   ```powershell\n   npm run build\n   pkg . --output taskflow.exe\n   ```\n\n#### استخدام Nexe:\n\n1. **تثبيت nexe**\n   ```powershell\n   npm install -g nexe\n   ```\n\n2. **بناء الملف التنفيذي**\n   ```powershell\n   nexe -i server/index.js -o taskflow.exe -t windows\n   ```\n\n## متغيرات البيئة المطلوبة\n\nإنشاء ملف `.env` في المجلد الجذر:\n\n```env\nDATABASE_URL=postgresql://username:password@localhost:5432/taskflow_db\nSESSION_SECRET=your-secret-key-here\nNODE_ENV=production\nPORT=5000\n```\n\n## إعداد قاعدة البيانات\n\n### إنشاء قاعدة البيانات:\n```sql\nCREATE DATABASE taskflow_db;\nCREATE USER taskflow_user WITH PASSWORD 'secure_password';\nGRANT ALL PRIVILEGES ON DATABASE taskflow_db TO taskflow_user;\n```\n\n### تشغيل المايجريشن:\n```powershell\nnpm run db:push\n```\n\n## إعداد الشبكة\n\n### فتح المنافذ في Windows Firewall:\n```powershell\nNew-NetFirewallRule -DisplayName \"TaskFlow App\" -Direction Inbound -Port 5000 -Protocol TCP -Action Allow\n```\n\n### إعداد IIS (اختياري):\n```xml\n<!-- web.config -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<configuration>\n  <system.webServer>\n    <handlers>\n      <add name=\"iisnode\" path=\"server/index.js\" verb=\"*\" modules=\"iisnode\"/>\n    </handlers>\n    <rewrite>\n      <rules>\n        <rule name=\"StaticContent\">\n          <action type=\"Rewrite\" url=\"public{REQUEST_URI}\"/>\n        </rule>\n        <rule name=\"DynamicContent\">\n          <conditions>\n            <add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"True\"/>\n          </conditions>\n          <action type=\"Rewrite\" url=\"server/index.js\"/>\n        </rule>\n      </rules>\n    </rewrite>\n  </system.webServer>\n</configuration>\n```\n\n## مراقبة ونسخ احتياطي\n\n### سكريبت النسخ الاحتياطي:\n```powershell\n# backup.ps1\n$date = Get-Date -Format \"yyyy-MM-dd-HHmm\"\npg_dump -h localhost -U taskflow_user taskflow_db > \"backup_$date.sql\"\n```\n\n### مراقبة التطبيق:\n```powershell\n# استخدام PM2\npm2 monit\n\n# أو استخدام PowerShell\nGet-Process -Name \"node\" | Select-Object Id, ProcessName, CPU, WorkingSet\n```\n\n## استكشاف الأخطاء\n\n### مشاكل شائعة:\n\n1. **خطأ في الاتصال بقاعدة البيانات**\n   - تأكد من تشغيل PostgreSQL\n   - تحقق من صحة DATABASE_URL\n\n2. **مشكلة في المنافذ**\n   - تأكد من عدم استخدام المنفذ 5000\n   - تحقق من إعدادات Firewall\n\n3. **مشاكل الصلاحيات**\n   - تشغيل PowerShell كمدير\n   - تعديل صلاحيات المجلد\n\n## الأمان\n\n### إعدادات الأمان:\n1. تغيير كلمات المرور الافتراضية\n2. تفعيل SSL/HTTPS\n3. تحديث النظام بانتظام\n4. إعداد جدار حماية\n5. مراقبة السجلات\n\n## الصيانة\n\n### تحديث التطبيق:\n```powershell\n# إيقاف التطبيق\npm2 stop TaskFlow\n\n# تحديث الملفات\ngit pull origin main\nnpm install\n\n# إعادة تشغيل\npm2 restart TaskFlow\n```\n\n### تنظيف السجلات:\n```powershell\n# تنظيف سجلات PM2\npm2 flush\n\n# تنظيف سجلات Windows\nwevtutil cl Application\n```\n\n## الدعم الفني\n\nللحصول على المساعدة:\n1. مراجعة سجلات الأخطاء\n2. التحقق من حالة الخدمات\n3. مراجعة إعدادات الشبكة\n4. الاتصال بفريق الدعم الفني\n\n---\n\n**ملاحظة**: يُنصح باختبار جميع الخطوات في بيئة تطوير قبل النشر في الإنتاج.","size_bytes":7200},"build-exe.js":{"content":"const { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nconsole.log('🔨 بناء ملف التنفيذي لـ TaskFlow...');\n\n// التأكد من بناء التطبيق أولاً\nconsole.log('📦 بناء التطبيق...');\ntry {\n  execSync('npm run build', { stdio: 'inherit' });\n  console.log('✅ تم بناء التطبيق بنجاح');\n} catch (error) {\n  console.error('❌ خطأ في بناء التطبيق:', error.message);\n  process.exit(1);\n}\n\n// إنشاء ملف package.json مؤقت للـ exe\nconst exePackageJson = {\n  \"name\": \"taskflow-server\",\n  \"version\": \"1.0.0\",\n  \"main\": \"dist/index.js\",\n  \"type\": \"module\",\n  \"bin\": \"dist/index.js\",\n  \"pkg\": {\n    \"scripts\": [\"dist/**/*.js\"],\n    \"assets\": [\n      \"client/dist/**/*\",\n      \"node_modules/@neondatabase/**/*\",\n      \"node_modules/whatsapp-web.js/**/*\"\n    ],\n    \"targets\": [\n      \"node18-win-x64\"\n    ],\n    \"outputPath\": \"build\"\n  },\n  \"dependencies\": {\n    \"@neondatabase/serverless\": \"*\",\n    \"express\": \"*\",\n    \"whatsapp-web.js\": \"*\"\n  }\n};\n\nfs.writeFileSync('package-exe.json', JSON.stringify(exePackageJson, null, 2));\n\n// إنشاء سكريپت التشغيل\nconst startScript = `\n@echo off\ntitle TaskFlow Server - Windows Server\ncolor 0A\n\necho ===============================================\necho      TaskFlow Server - Standalone\necho      شركة اشراق الودق لتكنولوجيا المعلومات\necho ===============================================\necho.\n\necho [%time%] بدء تشغيل TaskFlow...\n\n:: تعيين متغيرات البيئة\nset NODE_ENV=production\nset PORT=5000\n\n:: فتح المنفذ في Windows Firewall\nnetsh advfirewall firewall add rule name=\"TaskFlow Application\" dir=in action=allow protocol=TCP localport=5000 >nul 2>&1\n\necho ✅ التطبيق جاهز على: http://localhost:5000\necho.\necho بيانات تسجيل الدخول:\necho اسم المستخدم: administrator\necho كلمة المرور: wdq@#$\necho.\necho اضغط Ctrl+C للإيقاف\necho ===============================================\necho.\n\n:: تشغيل التطبيق\ntaskflow-server.exe\n\npause\n`;\n\nfs.writeFileSync('start-taskflow.bat', startScript);\n\nconsole.log('🏗️ إنشاء الملف التنفيذي...');\n\ntry {\n  // بناء الملف التنفيذي\n  execSync('npx pkg . --config package-exe.json --out-path build', { stdio: 'inherit' });\n  \n  // نسخ الملفات المطلوبة\n  if (!fs.existsSync('build')) {\n    fs.mkdirSync('build');\n  }\n  \n  // نسخ ملفات الواجهة الأمامية\n  if (fs.existsSync('client/dist')) {\n    execSync('xcopy client\\\\dist build\\\\client\\\\dist /E /I /Y', { stdio: 'inherit' });\n  }\n  \n  // نسخ ملفات الإعداد\n  if (fs.existsSync('.env.example')) {\n    fs.copyFileSync('.env.example', 'build/.env.example');\n  }\n  \n  // نسخ سكريپت التشغيل\n  fs.copyFileSync('start-taskflow.bat', 'build/start-taskflow.bat');\n  \n  // إنشاء دليل التشغيل\n  const readme = `\n# TaskFlow - Windows Server\n\n## تشغيل التطبيق:\n1. تأكد من تثبيت PostgreSQL\n2. انسخ .env.example إلى .env وعدل الإعدادات\n3. شغل: start-taskflow.bat\n\n## أو شغل مباشرة:\ntaskflow-server.exe\n\n## الوصول:\nhttp://localhost:5000\n\n## بيانات الدخول:\n- اسم المستخدم: administrator\n- كلمة المرور: wdq@#$\n`;\n  \n  fs.writeFileSync('build/README.txt', readme);\n  \n  console.log('✅ تم إنشاء الملف التنفيذي بنجاح!');\n  console.log('📁 المجلد: build/');\n  console.log('🚀 الملف التنفيذي: build/taskflow-server.exe');\n  console.log('▶️ سكريپت التشغيل: build/start-taskflow.bat');\n  \n} catch (error) {\n  console.error('❌ خطأ في إنشاء الملف التنفيذي:', error.message);\n  process.exit(1);\n} finally {\n  // حذف الملفات المؤقتة\n  if (fs.existsSync('package-exe.json')) {\n    fs.unlinkSync('package-exe.json');\n  }\n}","size_bytes":4036},"fix-pkg-paths.js":{"content":"import fs from 'fs';\nimport path from 'path';\n\nconsole.log('🔧 Fixing pkg paths in dist/index.js...');\n\nconst indexPath = 'dist/index.js';\nif (!fs.existsSync(indexPath)) {\n  console.error('❌ dist/index.js not found');\n  process.exit(1);\n}\n\nlet content = fs.readFileSync(indexPath, 'utf8');\n\n// إصلاح مسارات الملفات الثابتة\ncontent = content.replace(/process\\.cwd\\(\\)/g, '__dirname');\ncontent = content.replace(/import\\.meta\\.url/g, '`file://${__dirname}/index.js`');\n\n// إصلاح مسارات الملفات العامة\ncontent = content.replace(/dist\\/public/g, 'client');\ncontent = content.replace(/\\.\\/public/g, './client');\n\n// إضافة متغير __dirname للـ ES modules\nconst dirnameFix = `\nimport { fileURLToPath } from 'url';\nimport { dirname } from 'path';\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\n`;\n\ncontent = dirnameFix + content;\n\nfs.writeFileSync(indexPath, content);\nconsole.log('✅ Fixed pkg paths in dist/index.js');","size_bytes":1022},"render.yaml":{"content":"services:\n  - type: web\n    name: taskflow\n    env: node\n    plan: free\n    region: frankfurt  # غيرها إذا تريد سيرفر بمكان آخر\n    buildCommand: \"npm install && npm run build\"\n    startCommand: \"npm start\"\n    envVars:\n      - key: DATABASE_URL\n        fromDatabase:\n          name: taskflow-db\n          property: connectionString\n    postDeployCommand: \"npm run db:push\"\n\ndatabases:\n  - name: taskflow-db\n    plan: free\n    region: frankfurt\n","size_bytes":470},"TaskFlow-Complete/client/assets/index-iaNCDIdu.css":{"content":"@charset \"UTF-8\";@import\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap\";.uppy-Root{box-sizing:border-box;color:#333;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Segoe UI Symbol,Segoe UI Emoji,Apple Color Emoji,Roboto,Helvetica,Arial,sans-serif;line-height:1;position:relative;text-align:left;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.uppy-Root[dir=rtl],[dir=rtl] .uppy-Root{text-align:right}.uppy-Root *,.uppy-Root :after,.uppy-Root :before{box-sizing:inherit}.uppy-Root [hidden]{display:none}.uppy-u-reset{all:initial;-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Segoe UI Symbol,Segoe UI Emoji,Apple Color Emoji,Roboto,Helvetica,Arial,sans-serif;line-height:1}[dir=rtl] .uppy-u-reset{text-align:right}.uppy-c-textInput{background-color:#fff;border:1px solid #ddd;border-radius:4px;font-family:inherit;font-size:14px;line-height:1.5;padding:6px 8px}.uppy-size--md .uppy-c-textInput{padding:8px 10px}.uppy-c-textInput:focus{border-color:#1269cf99;box-shadow:0 0 0 3px #1269cf26;outline:none}[data-uppy-theme=dark] .uppy-c-textInput{background-color:#333;border-color:#333;color:#eaeaea}[data-uppy-theme=dark] .uppy-c-textInput:focus{border-color:#525252;box-shadow:none}.uppy-c-icon{display:inline-block;max-height:100%;max-width:100%;overflow:hidden;fill:currentColor}.uppy-c-btn{align-items:center;color:inherit;display:inline-flex;font-family:inherit;font-size:inherit;font-weight:500;justify-content:center;line-height:1;transition-duration:.3s;transition-property:background-color,color;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.uppy-c-btn,[dir=rtl] .uppy-c-btn{text-align:center}.uppy-c-btn:not(:disabled):not(.disabled){cursor:pointer}.uppy-c-btn::-moz-focus-inner{border:0}.uppy-c-btn-primary{background-color:#1269cf;border-radius:4px;color:#fff;font-size:14px;padding:10px 18px}.uppy-c-btn-primary:not(:disabled):hover{background-color:#0e51a0}.uppy-c-btn-primary:focus{box-shadow:0 0 0 3px #1269cf66;outline:none}.uppy-size--md .uppy-c-btn-primary{padding:13px 22px}[data-uppy-theme=dark] .uppy-c-btn-primary{color:#eaeaea}[data-uppy-theme=dark] .uppy-c-btn-primary:focus{outline:none}[data-uppy-theme=dark] .uppy-c-btn-primary::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-c-btn-primary:focus{box-shadow:0 0 0 2px #aae1ffd9}.uppy-c-btn-primary.uppy-c-btn--disabled{background-color:#8eb2db}.uppy-c-btn-link{background-color:initial;border-radius:4px;color:#525252;font-size:14px;line-height:1;padding:10px 15px}.uppy-c-btn-link:hover{color:#333}.uppy-c-btn-link:focus{box-shadow:0 0 0 3px #1269cf40;outline:none}.uppy-size--md .uppy-c-btn-link{padding:13px 18px}[data-uppy-theme=dark] .uppy-c-btn-link{color:#eaeaea}[data-uppy-theme=dark] .uppy-c-btn-link:focus{outline:none}[data-uppy-theme=dark] .uppy-c-btn-link::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-c-btn-link:focus{box-shadow:0 0 0 2px #aae1ffd9}[data-uppy-theme=dark] .uppy-c-btn-link:hover{color:#939393}.uppy-Informer{bottom:60px;left:0;position:absolute;right:0;text-align:center;z-index:1005}.uppy-Informer span>div{margin-bottom:6px}.uppy-Informer-animated{opacity:0;transform:translateY(350%);transition:all .3s ease-in;z-index:-1000}.uppy-Informer p{background-color:#757575;border-radius:18px;color:#fff;display:inline-block;font-size:12px;font-weight:400;line-height:1.4;margin:0;max-width:90%;padding:6px 15px}.uppy-size--md .uppy-Informer p{font-size:14px;line-height:1.3;max-width:500px;padding:10px 20px}[data-uppy-theme=dark] .uppy-Informer p{background-color:#333}.uppy-Informer p span{background-color:#fff;border-radius:50%;color:#525252;display:inline-block;font-size:10px;height:13px;inset-inline-start:3px;line-height:12px;margin-inline-start:-1px;position:relative;top:-1px;vertical-align:middle;width:13px}.uppy-Informer p span:hover{cursor:help}.uppy-Informer p span:after{line-height:1.3;word-wrap:break-word}.uppy-Root [aria-label][role~=tooltip]{position:relative}.uppy-Root [aria-label][role~=tooltip]:after,.uppy-Root [aria-label][role~=tooltip]:before{backface-visibility:hidden;box-sizing:border-box;opacity:0;pointer-events:none;position:absolute;transform:translateZ(0);transform-origin:top;transition:all var(--microtip-transition-duration,.18s) var(--microtip-transition-easing,ease-in-out) var(--microtip-transition-delay,0s);will-change:transform;z-index:10}.uppy-Root [aria-label][role~=tooltip]:before{background-size:100% auto!important;content:\"\"}.uppy-Root [aria-label][role~=tooltip]:after{background:#111111e6;border-radius:4px;box-sizing:initial;color:#fff;content:attr(aria-label);font-size:var(--microtip-font-size,13px);font-weight:var(--microtip-font-weight,normal);padding:.5em 1em;text-transform:var(--microtip-text-transform,none);white-space:nowrap}.uppy-Root [aria-label][role~=tooltip]:focus:after,.uppy-Root [aria-label][role~=tooltip]:focus:before,.uppy-Root [aria-label][role~=tooltip]:hover:after,.uppy-Root [aria-label][role~=tooltip]:hover:before{opacity:1;pointer-events:auto}.uppy-Root [role~=tooltip][data-microtip-position|=top]:before{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M2.658 0h32.004c-6 0-11.627 12.002-16.002 12.002S8.594 0 2.658 0'/%3E%3C/svg%3E\") no-repeat;bottom:100%;height:6px;left:50%;margin-bottom:5px;transform:translate3d(-50%,0,0);width:18px}.uppy-Root [role~=tooltip][data-microtip-position|=top]:after{bottom:100%;left:50%;margin-bottom:11px;transform:translate3d(-50%,0,0)}.uppy-Root [role~=tooltip][data-microtip-position=top]:hover:after,.uppy-Root [role~=tooltip][data-microtip-position|=top]:hover:before{transform:translate3d(-50%,-5px,0)}.uppy-Root [role~=tooltip][data-microtip-position=top-left]:after{bottom:100%;transform:translate3d(calc(-100% + 16px),0,0)}.uppy-Root [role~=tooltip][data-microtip-position=top-left]:hover:after{transform:translate3d(calc(-100% + 16px),-5px,0)}.uppy-Root [role~=tooltip][data-microtip-position=top-right]:after{bottom:100%;transform:translate3d(-16px,0,0)}.uppy-Root [role~=tooltip][data-microtip-position=top-right]:hover:after{transform:translate3d(-16px,-5px,0)}.uppy-Root [role~=tooltip][data-microtip-position|=bottom]:before{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M33.342 12H1.338c6 0 11.627-12.002 16.002-12.002S27.406 12 33.342 12'/%3E%3C/svg%3E\") no-repeat;bottom:auto;height:6px;left:50%;margin-bottom:0;margin-top:5px;top:100%;transform:translate3d(-50%,-10px,0);width:18px}.uppy-Root [role~=tooltip][data-microtip-position|=bottom]:after{left:50%;margin-top:11px;top:100%;transform:translate3d(-50%,-10px,0)}.uppy-Root [role~=tooltip][data-microtip-position=bottom]:hover:after,.uppy-Root [role~=tooltip][data-microtip-position|=bottom]:hover:before{transform:translate3d(-50%,0,0)}.uppy-Root [role~=tooltip][data-microtip-position=bottom-left]:after{top:100%;transform:translate3d(calc(-100% + 16px),-10px,0)}.uppy-Root [role~=tooltip][data-microtip-position=bottom-left]:hover:after{transform:translate3d(calc(-100% + 16px),0,0)}.uppy-Root [role~=tooltip][data-microtip-position=bottom-right]:after{top:100%;transform:translate3d(-16px,-10px,0)}.uppy-Root [role~=tooltip][data-microtip-position=bottom-right]:hover:after{transform:translate3d(-16px,0,0)}.uppy-Root [role~=tooltip][data-microtip-position=left]:after,.uppy-Root [role~=tooltip][data-microtip-position=left]:before{bottom:auto;left:auto;right:100%;top:50%;transform:translate3d(10px,-50%,0)}.uppy-Root [role~=tooltip][data-microtip-position=left]:before{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='36'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M0 33.342V1.338c0 6 12.002 11.627 12.002 16.002S0 27.406 0 33.342'/%3E%3C/svg%3E\") no-repeat;height:18px;margin-bottom:0;margin-right:5px;width:6px}.uppy-Root [role~=tooltip][data-microtip-position=left]:after{margin-right:11px}.uppy-Root [role~=tooltip][data-microtip-position=left]:hover:after,.uppy-Root [role~=tooltip][data-microtip-position=left]:hover:before{transform:translate3d(0,-50%,0)}.uppy-Root [role~=tooltip][data-microtip-position=right]:after,.uppy-Root [role~=tooltip][data-microtip-position=right]:before{bottom:auto;left:100%;top:50%;transform:translate3d(-10px,-50%,0)}.uppy-Root [role~=tooltip][data-microtip-position=right]:before{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='36'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M12 2.658v32.004c0-6-12.002-11.627-12.002-16.002S12 8.594 12 2.658'/%3E%3C/svg%3E\") no-repeat;height:18px;margin-bottom:0;margin-left:5px;width:6px}.uppy-Root [role~=tooltip][data-microtip-position=right]:after{margin-left:11px}.uppy-Root [role~=tooltip][data-microtip-position=right]:hover:after,.uppy-Root [role~=tooltip][data-microtip-position=right]:hover:before{transform:translate3d(0,-50%,0)}.uppy-Root [role~=tooltip][data-microtip-size=small]:after{white-space:normal;width:80px}.uppy-Root [role~=tooltip][data-microtip-size=medium]:after{white-space:normal;width:150px}.uppy-Root [role~=tooltip][data-microtip-size=large]:after{white-space:normal;width:260px}.uppy-StatusBar{background-color:#fff;color:#fff;display:flex;font-size:12px;font-weight:400;height:46px;line-height:40px;position:relative;transition:height .2s;z-index:1001}[data-uppy-theme=dark] .uppy-StatusBar{background-color:#1f1f1f}.uppy-StatusBar:before{background-color:#eaeaea;bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0;top:0;width:100%}[data-uppy-theme=dark] .uppy-StatusBar:before{background-color:#757575}.uppy-StatusBar[aria-hidden=true]{height:0;overflow-y:hidden}.uppy-StatusBar.is-complete .uppy-StatusBar-progress{background-color:#1bb240}.uppy-StatusBar.is-error .uppy-StatusBar-progress{background-color:#e32437}.uppy-StatusBar.is-complete .uppy-StatusBar-statusIndicator{color:#1bb240}.uppy-StatusBar.is-error .uppy-StatusBar-statusIndicator{color:#e32437}.uppy-StatusBar:not([aria-hidden=true]).is-waiting{background-color:#fff;border-top:1px solid #eaeaea;height:65px}[data-uppy-theme=dark] .uppy-StatusBar:not([aria-hidden=true]).is-waiting{background-color:#1f1f1f;border-top:1px solid #333}.uppy-StatusBar-progress{background-color:#1269cf;height:2px;position:absolute;transition:background-color,width .3s ease-out;z-index:1001}.uppy-StatusBar-progress.is-indeterminate{animation:uppy-StatusBar-ProgressStripes 1s linear infinite;background-image:linear-gradient(45deg,#0000004d 25%,#0000 0,#0000 50%,#0000004d 0,#0000004d 75%,#0000 0,#0000);background-size:64px 64px}@keyframes uppy-StatusBar-ProgressStripes{0%{background-position:0 0}to{background-position:64px 0}}.uppy-StatusBar.is-postprocessing .uppy-StatusBar-progress,.uppy-StatusBar.is-preprocessing .uppy-StatusBar-progress{background-color:#f6a623}.uppy-StatusBar.is-waiting .uppy-StatusBar-progress{display:none}.uppy-StatusBar-content{align-items:center;color:#333;display:flex;height:100%;padding-inline-start:10px;position:relative;text-overflow:ellipsis;white-space:nowrap;z-index:1002}.uppy-size--md .uppy-StatusBar-content{padding-inline-start:15px}[data-uppy-theme=dark] .uppy-StatusBar-content{color:#eaeaea}.uppy-StatusBar-status{display:flex;flex-direction:column;font-weight:400;justify-content:center;line-height:1.4;padding-inline-end:.3em}.uppy-StatusBar-statusPrimary{display:flex;font-weight:500;line-height:1}.uppy-StatusBar-statusPrimary button.uppy-StatusBar-details{margin-left:5px}[data-uppy-theme=dark] .uppy-StatusBar-statusPrimary{color:#eaeaea}.uppy-StatusBar-statusSecondary{color:#757575;display:inline-block;font-size:11px;line-height:1.2;margin-top:1px;white-space:nowrap}[data-uppy-theme=dark] .uppy-StatusBar-statusSecondary{color:#bbb}.uppy-StatusBar-statusSecondaryHint{display:inline-block;line-height:1;margin-inline-end:5px;vertical-align:middle}.uppy-size--md .uppy-StatusBar-statusSecondaryHint{margin-inline-end:8px}.uppy-StatusBar-statusIndicator{color:#525252;margin-inline-end:7px;position:relative;top:1px}.uppy-StatusBar-statusIndicator svg{vertical-align:text-bottom}.uppy-StatusBar-actions{align-items:center;bottom:0;display:flex;inset-inline-end:10px;position:absolute;top:0;z-index:1004}.uppy-StatusBar.is-waiting .uppy-StatusBar-actions{background-color:#fafafa;height:100%;padding:0 15px;position:static;width:100%}[data-uppy-theme=dark] .uppy-StatusBar.is-waiting .uppy-StatusBar-actions{background-color:#1f1f1f}.uppy-StatusBar:not([aria-hidden=true]).is-waiting.has-ghosts{flex-direction:column;height:90px}.uppy-size--md .uppy-StatusBar:not([aria-hidden=true]).is-waiting.has-ghosts{flex-direction:row;height:65px}.uppy-StatusBar:not([aria-hidden=true]).is-waiting.has-ghosts .uppy-StatusBar-actions{flex-direction:column;justify-content:center}.uppy-size--md .uppy-StatusBar:not([aria-hidden=true]).is-waiting.has-ghosts .uppy-StatusBar-actions{flex-direction:row;justify-content:normal}.uppy-StatusBar-actionCircleBtn{cursor:pointer;line-height:1;margin:3px;opacity:.9}.uppy-StatusBar-actionCircleBtn:focus{outline:none}.uppy-StatusBar-actionCircleBtn::-moz-focus-inner{border:0}.uppy-StatusBar-actionCircleBtn:focus{box-shadow:0 0 0 3px #1269cf80}[data-uppy-theme=dark] .uppy-StatusBar-actionCircleBtn:focus{outline:none}[data-uppy-theme=dark] .uppy-StatusBar-actionCircleBtn::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-StatusBar-actionCircleBtn:focus{box-shadow:0 0 0 2px #aae1ffd9}.uppy-StatusBar-actionCircleBtn:hover{opacity:1}.uppy-StatusBar-actionCircleBtn:focus{border-radius:50%}.uppy-StatusBar-actionCircleBtn svg{vertical-align:bottom}.uppy-StatusBar-actionBtn{color:#1269cf;display:inline-block;font-size:10px;line-height:inherit;vertical-align:middle}.uppy-size--md .uppy-StatusBar-actionBtn{font-size:11px}.uppy-StatusBar-actionBtn--disabled{opacity:.4}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--disabled{opacity:.7}.uppy-StatusBar-actionBtn--retry{background-color:#ff4b23;border-radius:8px;color:#fff;height:16px;line-height:1;margin-inline-end:6px;padding:1px 6px 3px 18px;position:relative}.uppy-StatusBar-actionBtn--retry:focus{outline:none}.uppy-StatusBar-actionBtn--retry::-moz-focus-inner{border:0}.uppy-StatusBar-actionBtn--retry:focus{box-shadow:0 0 0 3px #1269cf80}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--retry:focus{outline:none}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--retry::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--retry:focus{box-shadow:0 0 0 2px #aae1ffd9}.uppy-StatusBar-actionBtn--retry:hover{background-color:#f92d00}.uppy-StatusBar-actionBtn--retry svg{inset-inline-start:6px;position:absolute;top:3px}.uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload{background-color:#1bb240;color:#fff;font-size:14px;line-height:1;padding:15px 10px;width:100%}.uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload:hover{background-color:#189c38}[data-uppy-theme=dark] .uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload{background-color:#1c8b37}[data-uppy-theme=dark] .uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload:hover{background-color:#18762f}.uppy-size--md .uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload{padding:13px 22px;width:auto}.uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload.uppy-StatusBar-actionBtn--disabled:hover{background-color:#1bb240;cursor:not-allowed}[data-uppy-theme=dark] .uppy-StatusBar.is-waiting .uppy-StatusBar-actionBtn--upload.uppy-StatusBar-actionBtn--disabled:hover{background-color:#1c8b37}.uppy-StatusBar:not(.is-waiting) .uppy-StatusBar-actionBtn--upload{background-color:initial;color:#1269cf}.uppy-StatusBar-actionBtn--uploadNewlyAdded{border-radius:3px;padding-inline-end:3px;padding-bottom:1px;padding-inline-start:3px}.uppy-StatusBar-actionBtn--uploadNewlyAdded:focus{outline:none}.uppy-StatusBar-actionBtn--uploadNewlyAdded::-moz-focus-inner{border:0}.uppy-StatusBar-actionBtn--uploadNewlyAdded:focus{box-shadow:0 0 0 3px #1269cf80}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--uploadNewlyAdded:focus{outline:none}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--uploadNewlyAdded::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--uploadNewlyAdded:focus{box-shadow:0 0 0 2px #aae1ffd9}.uppy-StatusBar.is-postprocessing .uppy-StatusBar-actionBtn--uploadNewlyAdded,.uppy-StatusBar.is-preprocessing .uppy-StatusBar-actionBtn--uploadNewlyAdded{display:none}.uppy-StatusBar-actionBtn--done{border-radius:3px;line-height:1;padding:7px 8px}.uppy-StatusBar-actionBtn--done:focus{outline:none}.uppy-StatusBar-actionBtn--done::-moz-focus-inner{border:0}.uppy-StatusBar-actionBtn--done:hover{color:#0e51a0}.uppy-StatusBar-actionBtn--done:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--done:focus{background-color:#333}[data-uppy-theme=dark] .uppy-StatusBar-actionBtn--done{color:#02baf2}.uppy-size--md .uppy-StatusBar-actionBtn--done{font-size:14px}.uppy-StatusBar-serviceMsg{color:#000;font-size:11px;line-height:1.1;padding-left:10px}.uppy-size--md .uppy-StatusBar-serviceMsg{font-size:14px;padding-left:15px}[data-uppy-theme=dark] .uppy-StatusBar-serviceMsg{color:#eaeaea}.uppy-StatusBar-serviceMsg-ghostsIcon{left:6px;opacity:.5;position:relative;top:2px;vertical-align:text-bottom;width:10px}.uppy-size--md .uppy-StatusBar-serviceMsg-ghostsIcon{left:10px;top:1px;width:15px}.uppy-StatusBar-details{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#939393;border-radius:50%;color:#fff;cursor:help;display:inline-block;font-size:10px;font-weight:600;height:13px;inset-inline-start:2px;line-height:12px;position:relative;text-align:center;top:0;vertical-align:middle;width:13px}.uppy-StatusBar-details:after{line-height:1.3;word-wrap:break-word}.uppy-StatusBar-spinner{animation-duration:1s;animation-iteration-count:infinite;animation-name:uppy-StatusBar-spinnerAnimation;animation-timing-function:linear;fill:#1269cf;margin-inline-end:10px}.uppy-StatusBar.is-postprocessing .uppy-StatusBar-spinner,.uppy-StatusBar.is-preprocessing .uppy-StatusBar-spinner{fill:#f6a623}@keyframes uppy-StatusBar-spinnerAnimation{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.uppy-ProviderBrowser-viewType--grid ul.uppy-ProviderBrowser-list,.uppy-ProviderBrowser-viewType--unsplash ul.uppy-ProviderBrowser-list{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;padding:6px}.uppy-ProviderBrowser-viewType--grid ul.uppy-ProviderBrowser-list:after,.uppy-ProviderBrowser-viewType--unsplash ul.uppy-ProviderBrowser-list:after{content:\"\";flex:auto}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem{margin:0;position:relative;width:50%}.uppy-size--md .uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem,.uppy-size--md .uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem{width:33.3333%}.uppy-size--lg .uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem,.uppy-size--lg .uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem{width:25%}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem:before,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem:before{content:\"\";display:block;padding-top:100%}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--selected img,.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--selected svg,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--selected img,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--selected svg{opacity:.85}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--disabled,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--disabled{opacity:.5}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--noPreview .uppy-ProviderBrowserItem-inner,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--noPreview .uppy-ProviderBrowserItem-inner{background-color:#93939333}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--noPreview .uppy-ProviderBrowserItem-inner,[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--noPreview .uppy-ProviderBrowserItem-inner{background-color:#eaeaea33}.uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--noPreview svg,.uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--noPreview svg{height:30%;width:30%;fill:#000000b3}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--grid li.uppy-ProviderBrowserItem--noPreview svg,[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--unsplash li.uppy-ProviderBrowserItem--noPreview svg{fill:#fffc}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-inner,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-inner{border-radius:4px;bottom:7px;height:calc(100% - 14px);left:7px;overflow:hidden;position:absolute;right:7px;text-align:center;top:7px;width:calc(100% - 14px)}@media (hover:none){.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-inner .uppy-ProviderBrowserItem-author,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-inner .uppy-ProviderBrowserItem-author{display:block}}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-inner,[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-inner{box-shadow:0 0 0 3px #aae1ffb3}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-inner img,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-inner img{border-radius:4px;height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-author,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-author{background:#0000004d;bottom:0;color:#fff;display:none;font-size:12px;font-weight:500;left:0;margin:0;padding:5px;position:absolute;text-decoration:none;width:100%}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-author:hover,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-author:hover{background:#0006;text-decoration:underline}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox{background-color:#1269cf;border-radius:50%;height:26px;opacity:0;position:absolute;right:16px;top:16px;width:26px;z-index:1002}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox:after,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox:after{height:7px;inset-inline-start:7px;top:8px;width:12px}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox{opacity:1}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox--grid:focus+label .uppy-ProviderBrowserItem-author,.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox--grid:hover+label .uppy-ProviderBrowserItem-author,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox--grid:focus+label .uppy-ProviderBrowserItem-author,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox--grid:hover+label .uppy-ProviderBrowserItem-author{display:block}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox--grid:focus+label,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox--grid:focus+label{box-shadow:0 0 0 3px #1269cf80}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox--grid:focus+label:focus,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox--grid:focus+label:focus{outline:none}.uppy-ProviderBrowser-viewType--grid .uppy-ProviderBrowserItem-checkbox--grid:focus+label::-moz-focus-inner,.uppy-ProviderBrowser-viewType--unsplash .uppy-ProviderBrowserItem-checkbox--grid:focus+label::-moz-focus-inner{border:0}.uppy-ProviderBrowser-viewType--list{background-color:#fff}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--list{background-color:#1f1f1f}.uppy-ProviderBrowser-viewType--list li.uppy-ProviderBrowserItem{align-items:center;display:flex;margin:0;padding:7px 15px}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--list li.uppy-ProviderBrowserItem{color:#eaeaea}.uppy-ProviderBrowser-viewType--list li.uppy-ProviderBrowserItem--disabled{opacity:.6}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-checkbox{background-color:#fff;border:1px solid #cfcfcf;border-radius:3px;height:17px;margin-inline-end:15px;width:17px}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-checkbox:focus{border:1px solid #1269cf;box-shadow:0 0 0 3px #1269cf40;outline:none}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-checkbox:after{height:5px;inset-inline-start:3px;opacity:0;top:4px;width:9px}[data-uppy-theme=dark] .uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-checkbox:focus{border-color:#02baf2b3;box-shadow:0 0 0 3px #02baf233}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox,.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem--is-partial .uppy-ProviderBrowserItem-checkbox{background-color:#1269cf;border-color:#1269cf}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox:after,.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem--is-partial .uppy-ProviderBrowserItem-checkbox:after{opacity:1}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-inner{align-items:center;color:inherit;display:flex;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Segoe UI Symbol,Segoe UI Emoji,Apple Color Emoji,Roboto,Helvetica,Arial,sans-serif;overflow:hidden;padding:2px;text-overflow:ellipsis;white-space:nowrap}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-inner:focus{outline:none;text-decoration:underline}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-inner img,.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-inner svg{margin-inline-end:8px}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-inner span{line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem--disabled .uppy-ProviderBrowserItem-inner{cursor:default}.uppy-ProviderBrowser-viewType--list .uppy-ProviderBrowserItem-iconWrap{margin-inline-end:7px;width:20px}.uppy-ProviderBrowserItem-checkbox{cursor:pointer;flex-shrink:0;position:relative}.uppy-ProviderBrowserItem-checkbox:disabled,.uppy-ProviderBrowserItem-checkbox:disabled:after{cursor:default}[data-uppy-theme=dark] .uppy-ProviderBrowserItem-checkbox{background-color:#1f1f1f;border-color:#939393}[data-uppy-theme=dark] .uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox{background-color:#333}.uppy-ProviderBrowserItem--is-checked .uppy-ProviderBrowserItem-checkbox:after{border-bottom:2px solid #eaeaea;border-left:2px solid #eaeaea;content:\"\";cursor:pointer;position:absolute;transform:rotate(-45deg)}.uppy-ProviderBrowserItem--is-partial .uppy-ProviderBrowserItem-checkbox:after{background-color:#eaeaea!important;content:\"\"!important;height:2px!important;left:20%!important;position:absolute!important;right:20%!important;top:50%!important;transform:translateY(-50%)!important}.uppy-SearchProvider{align-items:center;display:flex;flex:1;flex-direction:column;height:100%;justify-content:center;width:100%}[data-uppy-theme=dark] .uppy-SearchProvider{background-color:#1f1f1f}.uppy-SearchProvider-input{margin-bottom:15px;max-width:650px;width:90%}.uppy-size--md .uppy-SearchProvider-input{margin-bottom:20px}.uppy-SearchProvider-input::-webkit-search-cancel-button{display:none}.uppy-SearchProvider-searchButton{padding:13px 25px}.uppy-size--md .uppy-SearchProvider-searchButton{padding:13px 30px}.uppy-DashboardContent-panelBody{align-items:center;display:flex;flex:1;justify-content:center}[data-uppy-theme=dark] .uppy-DashboardContent-panelBody{background-color:#1f1f1f}.uppy-Provider-auth,.uppy-Provider-empty,.uppy-Provider-error,.uppy-Provider-loading{align-items:center;color:#939393;display:flex;flex:1;flex-flow:column wrap;justify-content:center}.uppy-Provider-empty{color:#939393}.uppy-Provider-authIcon svg{height:75px;width:100px}.uppy-Provider-authTitle{color:#757575;font-size:17px;font-weight:400;line-height:1.4;margin-bottom:30px;max-width:500px;padding:0 15px;text-align:center}.uppy-size--md .uppy-Provider-authTitle{font-size:20px}[data-uppy-theme=dark] .uppy-Provider-authTitle{color:#cfcfcf}.uppy-Provider-btn-google{align-items:center;background:#4285f4;display:flex;padding:8px 12px!important}.uppy-Provider-btn-google:hover{background-color:#1266f1}.uppy-Provider-btn-google:focus{box-shadow:0 0 0 3px #4285f466;outline:none}.uppy-Provider-btn-google svg{margin-right:8px}.uppy-Provider-breadcrumbs{color:#525252;flex:1;font-size:12px;margin-bottom:10px;text-align:start}.uppy-size--md .uppy-Provider-breadcrumbs{margin-bottom:0}[data-uppy-theme=dark] .uppy-Provider-breadcrumbs{color:#eaeaea}.uppy-Provider-breadcrumbsIcon{color:#525252;display:inline-block;line-height:1;margin-inline-end:4px;vertical-align:middle}.uppy-Provider-breadcrumbsIcon svg{height:13px;width:13px;fill:#525252}.uppy-Provider-breadcrumbs button{border-radius:3px;display:inline-block;line-height:inherit;padding:4px}.uppy-Provider-breadcrumbs button:focus{outline:none}.uppy-Provider-breadcrumbs button::-moz-focus-inner{border:0}.uppy-Provider-breadcrumbs button:hover{color:#0e51a0}.uppy-Provider-breadcrumbs button:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-Provider-breadcrumbs button:focus{background-color:#333}.uppy-Provider-breadcrumbs button:not(:last-of-type){text-decoration:underline}.uppy-Provider-breadcrumbs button:last-of-type{color:#333;cursor:normal;font-weight:500;pointer-events:none}.uppy-Provider-breadcrumbs button:hover{cursor:pointer}[data-uppy-theme=dark] .uppy-Provider-breadcrumbs button{color:#eaeaea}.uppy-ProviderBrowser{display:flex;flex:1;flex-direction:column;font-size:14px;font-weight:400;height:100%}.uppy-ProviderBrowser-user{color:#333;font-weight:500;margin:0 8px 0 0}[data-uppy-theme=dark] .uppy-ProviderBrowser-user{color:#eaeaea}.uppy-ProviderBrowser-user:after{color:#939393;content:\"·\";font-weight:400;inset-inline-start:4px;position:relative}.uppy-ProviderBrowser-header{border-bottom:1px solid #eaeaea;position:relative;z-index:1001}[data-uppy-theme=dark] .uppy-ProviderBrowser-header{border-bottom:1px solid #333}.uppy-ProviderBrowser-headerBar{background-color:#fafafa;color:#757575;font-size:12px;line-height:1.4;padding:7px 15px;z-index:1001}.uppy-size--md .uppy-ProviderBrowser-headerBar{align-items:center;display:flex}[data-uppy-theme=dark] .uppy-ProviderBrowser-headerBar{background-color:#1f1f1f}.uppy-ProviderBrowser-headerBar--simple{display:block;justify-content:center;text-align:center}.uppy-ProviderBrowser-headerBar--simple .uppy-Provider-breadcrumbsWrap{display:inline-block;flex:none;vertical-align:middle}.uppy-ProviderBrowser-searchFilter{align-items:center;display:flex;height:30px;margin-bottom:15px;margin-top:15px;padding-left:8px;padding-right:8px;position:relative;width:100%}.uppy-ProviderBrowser-searchFilterInput{background-color:#eaeaea;border:0;border-radius:4px;color:#333;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Segoe UI Symbol,Segoe UI Emoji,Apple Color Emoji,Roboto,Helvetica,Arial,sans-serif;font-size:13px;height:30px;line-height:1.4;outline:0;padding-inline-end:30px;padding-inline-start:30px;width:100%;z-index:1001}.uppy-ProviderBrowser-searchFilterInput::-webkit-search-cancel-button{display:none}[data-uppy-theme=dark] .uppy-ProviderBrowser-searchFilterInput{background-color:#1f1f1f;color:#eaeaea}.uppy-ProviderBrowser-searchFilterInput:focus{background-color:#cfcfcf;border:0}[data-uppy-theme=dark] .uppy-ProviderBrowser-searchFilterInput:focus{background-color:#333}.uppy-ProviderBrowser-searchFilterIcon{color:#757575;height:12px;inset-inline-start:16px;position:absolute;width:12px;z-index:1002}.uppy-ProviderBrowser-searchFilterInput::-moz-placeholder{color:#939393;opacity:1}.uppy-ProviderBrowser-searchFilterInput::placeholder{color:#939393;opacity:1}.uppy-ProviderBrowser-searchFilterReset{border-radius:3px;color:#939393;cursor:pointer;height:22px;inset-inline-end:16px;padding:6px;position:absolute;width:22px;z-index:1002}.uppy-ProviderBrowser-searchFilterReset:focus{outline:none}.uppy-ProviderBrowser-searchFilterReset::-moz-focus-inner{border:0}.uppy-ProviderBrowser-searchFilterReset:focus{box-shadow:0 0 0 3px #1269cf80}.uppy-ProviderBrowser-searchFilterReset:hover{color:#757575}.uppy-ProviderBrowser-searchFilterReset svg{vertical-align:text-top}.uppy-ProviderBrowser-userLogout{border-radius:3px;color:#1269cf;cursor:pointer;line-height:inherit;padding:4px}.uppy-ProviderBrowser-userLogout:focus{outline:none}.uppy-ProviderBrowser-userLogout::-moz-focus-inner{border:0}.uppy-ProviderBrowser-userLogout:hover{color:#0e51a0}.uppy-ProviderBrowser-userLogout:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-ProviderBrowser-userLogout:focus{background-color:#333}.uppy-ProviderBrowser-userLogout:hover{text-decoration:underline}[data-uppy-theme=dark] .uppy-ProviderBrowser-userLogout{color:#eaeaea}.uppy-ProviderBrowser-body{flex:1;position:relative}.uppy-ProviderBrowser-list{background-color:#fff;border-spacing:0;bottom:0;display:block;flex:1;height:100%;left:0;list-style:none;margin:0;overflow-x:hidden;overflow-y:auto;padding:0;position:absolute;right:0;top:0;width:100%;-webkit-overflow-scrolling:touch}[data-uppy-theme=dark] .uppy-ProviderBrowser-list{background-color:#1f1f1f}.uppy-ProviderBrowser-list:focus{outline:none}.uppy-ProviderBrowserItem-inner{cursor:pointer;font-size:13px;font-weight:500}.uppy-ProviderBrowser-footer{align-items:center;background-color:#fff;border-top:1px solid #eaeaea;display:flex;justify-content:space-between;padding:15px}.uppy-ProviderBrowser-footer button{margin-inline-end:8px}[data-uppy-theme=dark] .uppy-ProviderBrowser-footer{background-color:#1f1f1f;border-top:1px solid #333}.uppy-ProviderBrowser-footer-buttons{flex-shrink:0}.uppy-ProviderBrowser-footer-error{color:#e32437;line-height:18px}@media (max-width:426px){.uppy-ProviderBrowser-footer{align-items:stretch;flex-direction:column-reverse}.uppy-ProviderBrowser-footer-error{padding-bottom:10px}}.picker-dialog-bg{z-index:20000!important}.picker-dialog{z-index:20001!important}.uppy-Dashboard-Item-previewInnerWrap{align-items:center;border-radius:3px;box-shadow:0 0 2px #0006;display:flex;flex-direction:column;height:100%;justify-content:center;overflow:hidden;position:relative;width:100%}.uppy-size--md .uppy-Dashboard-Item-previewInnerWrap{box-shadow:0 1px 2px #00000026}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-previewInnerWrap{box-shadow:none}.uppy-Dashboard-Item-previewInnerWrap:after{background-color:#000000a6;bottom:0;content:\"\";display:none;left:0;position:absolute;right:0;top:0;z-index:1001}.uppy-Dashboard-Item-previewLink{bottom:0;left:0;position:absolute;right:0;top:0;z-index:1002}.uppy-Dashboard-Item-previewLink:focus{box-shadow:inset 0 0 0 3px #579df0}[data-uppy-theme=dark] .uppy-Dashboard-Item-previewLink:focus{box-shadow:inset 0 0 0 3px #016c8d}.uppy-Dashboard-Item-preview img.uppy-Dashboard-Item-previewImg{border-radius:3px;height:100%;-o-object-fit:cover;object-fit:cover;transform:translateZ(0);width:100%}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-preview img.uppy-Dashboard-Item-previewImg{height:auto;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain;padding:10px;width:auto}.uppy-Dashboard-Item-progress{color:#fff;left:50%;position:absolute;text-align:center;top:50%;transform:translate(-50%,-50%);transition:all .35 ease;width:120px;z-index:1002}.uppy-Dashboard-Item-progressIndicator{color:#fff;display:inline-block;height:38px;opacity:.9;width:38px}.uppy-size--md .uppy-Dashboard-Item-progressIndicator{height:55px;width:55px}button.uppy-Dashboard-Item-progressIndicator{cursor:pointer}button.uppy-Dashboard-Item-progressIndicator:focus{outline:none}button.uppy-Dashboard-Item-progressIndicator::-moz-focus-inner{border:0}button.uppy-Dashboard-Item-progressIndicator:focus .uppy-Dashboard-Item-progressIcon--bg,button.uppy-Dashboard-Item-progressIndicator:focus .uppy-Dashboard-Item-progressIcon--retry{fill:#579df0}.uppy-Dashboard-Item-progressIcon--circle{height:100%;width:100%}.uppy-Dashboard-Item-progressIcon--bg{stroke:#fff6}.uppy-Dashboard-Item-progressIcon--progress{transition:stroke-dashoffset .5s ease-out;stroke:#fff}.uppy-Dashboard-Item-progressIcon--play{transition:all .2s;fill:#fff;stroke:#fff}.uppy-Dashboard-Item-progressIcon--cancel{transition:all .2s;fill:#fff}.uppy-Dashboard-Item-progressIcon--pause{transition:all .2s;fill:#fff;stroke:#fff}.uppy-Dashboard-Item-progressIcon--check{transition:all .2s;fill:#fff}.uppy-Dashboard-Item-progressIcon--retry{fill:#fff}.uppy-Dashboard-Item.is-complete .uppy-Dashboard-Item-progress{inset-inline-end:-8px;inset-inline-start:auto;top:-9px;transform:none;width:auto}.uppy-Dashboard-Item.is-error .uppy-Dashboard-Item-progressIndicator{height:18px;width:18px}.uppy-size--md .uppy-Dashboard-Item.is-error .uppy-Dashboard-Item-progressIndicator{height:28px;width:28px}.uppy-Dashboard-Item.is-complete .uppy-Dashboard-Item-progressIndicator{height:18px;opacity:1;width:18px}.uppy-size--md .uppy-Dashboard-Item.is-complete .uppy-Dashboard-Item-progressIndicator{height:22px;width:22px}.uppy-Dashboard-Item.is-processing .uppy-Dashboard-Item-progress{opacity:0}.uppy-Dashboard-Item-fileInfo{padding-inline-end:5px}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-fileInfo{padding-inline-end:10px}.uppy-size--md.uppy-Dashboard--singleFile .uppy-Dashboard-Item-fileInfo{padding-inline-end:15px}.uppy-Dashboard-Item-name{font-size:12px;font-weight:500;line-height:1.3;margin-bottom:5px;word-wrap:anywhere;word-break:break-all}[data-uppy-theme=dark] .uppy-Dashboard-Item-name{color:#eaeaea}.uppy-size--md.uppy-Dashboard--singleFile .uppy-Dashboard-Item-name{font-size:14px;line-height:1.4}.uppy-Dashboard-Item-fileName{align-items:baseline;display:flex}.uppy-Dashboard-Item-fileName button{margin-left:5px}.uppy-Dashboard-Item-author{color:#757575;display:inline-block;font-size:11px;font-weight:400;line-height:1;margin-bottom:5px;vertical-align:bottom}.uppy-Dashboard-Item-author a{color:#757575}.uppy-Dashboard-Item-status{color:#757575;font-size:11px;font-weight:400;line-height:1}[data-uppy-theme=dark] .uppy-Dashboard-Item-status{color:#bbb}.uppy-Dashboard-Item-statusSize{display:inline-block;margin-bottom:5px;text-transform:uppercase;vertical-align:bottom}.uppy-Dashboard-Item-reSelect{color:#1269cf;font-family:inherit;font-size:inherit;font-weight:600}.uppy-Dashboard-Item-errorMessage{background-color:#fdeff1;color:#a51523;font-size:11px;font-weight:500;line-height:1.3;padding:5px 6px}.uppy-Dashboard-Item-errorMessageBtn{color:#a51523;cursor:pointer;font-size:11px;font-weight:500;text-decoration:underline}.uppy-Dashboard-Item-preview .uppy-Dashboard-Item-errorMessage{display:none}.uppy-size--md .uppy-Dashboard-Item-preview .uppy-Dashboard-Item-errorMessage{border-bottom-left-radius:3px;border-bottom-right-radius:3px;border-top:1px solid #f7c2c8;bottom:0;display:block;left:0;line-height:1.4;padding:6px 8px;position:absolute;right:0}.uppy-Dashboard-Item-fileInfo .uppy-Dashboard-Item-errorMessage{border:1px solid #f7c2c8;border-radius:3px;display:inline-block;position:static}.uppy-size--md .uppy-Dashboard-Item-fileInfo .uppy-Dashboard-Item-errorMessage{display:none}.uppy-Dashboard-Item-action{color:#939393;cursor:pointer}.uppy-Dashboard-Item-action:focus{outline:none}.uppy-Dashboard-Item-action::-moz-focus-inner{border:0}.uppy-Dashboard-Item-action:focus{box-shadow:0 0 0 3px #1269cf80}.uppy-Dashboard-Item-action:hover{color:#1f1f1f;opacity:1}[data-uppy-theme=dark] .uppy-Dashboard-Item-action{color:#cfcfcf}[data-uppy-theme=dark] .uppy-Dashboard-Item-action:focus{outline:none}[data-uppy-theme=dark] .uppy-Dashboard-Item-action::-moz-focus-inner{border:0}[data-uppy-theme=dark] .uppy-Dashboard-Item-action:focus{box-shadow:0 0 0 2px #aae1ffd9}[data-uppy-theme=dark] .uppy-Dashboard-Item-action:hover{color:#eaeaea}.uppy-Dashboard-Item-action--remove{color:#1f1f1f;opacity:.95}.uppy-Dashboard-Item-action--remove:hover{color:#000;opacity:1}.uppy-size--md .uppy-Dashboard-Item-action--remove{height:18px;inset-inline-end:-8px;padding:0;position:absolute;top:-8px;width:18px;z-index:1002}.uppy-size--md .uppy-Dashboard-Item-action--remove:focus{border-radius:50%}.uppy-Dashboard--singleFile.uppy-size--height-md .uppy-Dashboard-Item-action--remove{inset-inline-end:8px;position:absolute;top:8px}[data-uppy-theme=dark] .uppy-Dashboard-Item-action--remove{color:#525252}[data-uppy-theme=dark] .uppy-Dashboard-Item-action--remove:hover{color:#333}.uppy-Dashboard:not(.uppy-size--md):not(.uppy-Dashboard--singleFile.uppy-size--height-md) .uppy-Dashboard-Item-actionWrapper{align-items:center;display:flex}.uppy-Dashboard:not(.uppy-size--md):not(.uppy-Dashboard--singleFile.uppy-size--height-md) .uppy-Dashboard-Item-action{height:22px;margin-left:3px;padding:3px;width:22px}.uppy-Dashboard:not(.uppy-size--md):not(.uppy-Dashboard--singleFile.uppy-size--height-md) .uppy-Dashboard-Item-action:focus{border-radius:3px}.uppy-size--md .uppy-Dashboard-Item-action--copyLink,.uppy-size--md .uppy-Dashboard-Item-action--edit{height:16px;padding:0;width:16px}.uppy-size--md .uppy-Dashboard-Item-action--copyLink:focus,.uppy-size--md .uppy-Dashboard-Item-action--edit:focus{border-radius:3px}.uppy-Dashboard-Item{align-items:center;border-bottom:1px solid #eaeaea;display:flex;padding:10px}.uppy-Dashboard:not(.uppy-Dashboard--singleFile) .uppy-Dashboard-Item{padding-inline-end:0}[data-uppy-theme=dark] .uppy-Dashboard-Item{border-bottom:1px solid #333}.uppy-size--md .uppy-Dashboard-Item{border-bottom:0;display:block;float:inline-start;height:215px;margin:5px 15px;padding:0;position:relative;width:calc(33.333% - 30px)}.uppy-size--lg .uppy-Dashboard-Item{height:190px;margin:5px 15px;padding:0;width:calc(25% - 30px)}.uppy-size--xl .uppy-Dashboard-Item{height:210px;padding:0;width:calc(20% - 30px)}.uppy-Dashboard--singleFile .uppy-Dashboard-Item{border-bottom:0;display:flex;flex-direction:column;height:100%;max-width:400px;padding:15px;position:relative;width:100%}.uppy-Dashboard-Item.is-ghost .uppy-Dashboard-Item-previewInnerWrap{opacity:.2}.uppy-Dashboard-Item.is-ghost .uppy-Dashboard-Item-name{opacity:.7}.uppy-Dashboard-Item.is-ghost .uppy-Dashboard-Item-preview:before{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='35' height='39' viewBox='0 0 35 39'%3E%3Cpath fill='%2523000' d='M1.708 38.66c1.709 0 3.417-3.417 6.834-3.417s5.125 3.417 8.61 3.417c3.348 0 5.056-3.417 8.473-3.417 4.305 0 5.125 3.417 6.833 3.417.889 0 1.709-.889 1.709-1.709v-19.68C34.167-5.757 0-5.757 0 17.271v19.68c0 .82.888 1.709 1.708 1.709m8.542-17.084a3.383 3.383 0 0 1-3.417-3.416 3.383 3.383 0 0 1 3.417-3.417 3.383 3.383 0 0 1 3.417 3.417 3.383 3.383 0 0 1-3.417 3.416m13.667 0A3.383 3.383 0 0 1 20.5 18.16a3.383 3.383 0 0 1 3.417-3.417 3.383 3.383 0 0 1 3.416 3.417 3.383 3.383 0 0 1-3.416 3.416'/%3E%3C/svg%3E\");background-position:50% 10px;background-repeat:no-repeat;background-size:25px;bottom:0;content:\"\";left:0;opacity:.5;position:absolute;right:0;top:0;z-index:1005}.uppy-size--md .uppy-Dashboard-Item.is-ghost .uppy-Dashboard-Item-preview:before{background-position:50% 50%;background-size:40px}.uppy-Dashboard--singleFile .uppy-Dashboard-Item.is-ghost .uppy-Dashboard-Item-preview:before{background-position:50% 50%;background-size:30%}.uppy-Dashboard-Item-preview{flex-grow:0;flex-shrink:0;height:50px;position:relative;width:50px}.uppy-size--md .uppy-Dashboard-Item-preview{height:140px;width:100%}.uppy-size--lg .uppy-Dashboard-Item-preview{height:120px}.uppy-size--xl .uppy-Dashboard-Item-preview{height:140px}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-preview{flex-grow:1;max-height:75%;width:100%}.uppy-Dashboard--singleFile.uppy-size--md .uppy-Dashboard-Item-preview{max-height:100%}.uppy-Dashboard-Item-fileInfoAndButtons{align-items:center;display:flex;flex-grow:1;justify-content:space-between;padding-inline-end:8px;padding-inline-start:12px}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-fileInfoAndButtons,.uppy-size--md .uppy-Dashboard-Item-fileInfoAndButtons{align-items:flex-start;padding:9px 0 0}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-fileInfoAndButtons{flex-grow:0;width:100%}.uppy-Dashboard-Item-fileInfo{flex-grow:1;flex-shrink:1}.uppy-Dashboard-Item-actionWrapper{flex-grow:0;flex-shrink:0}.uppy-Dashboard-Item.is-error .uppy-Dashboard-Item-previewInnerWrap:after,.uppy-Dashboard-Item.is-inprogress .uppy-Dashboard-Item-previewInnerWrap:after{display:block}.uppy-Dashboard-Item-errorDetails{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#939393;border:none;border-radius:50%;color:#fff;cursor:help;flex-shrink:0;font-size:10px;font-weight:600;height:13px;inset-inline-start:2px;line-height:12px;position:relative;text-align:center;top:0;width:13px}.uppy-Dashboard-Item-errorDetails:after{line-height:1.3;word-wrap:break-word}.uppy-Dashboard-FileCard{background-color:#fff;border-radius:5px;bottom:0;box-shadow:0 0 10px 4px #0000001a;display:flex;flex-direction:column;height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:1005}.uppy-Dashboard-FileCard .uppy-DashboardContent-bar{border-top-left-radius:5px;border-top-right-radius:5px}.uppy-Dashboard-FileCard .uppy-Dashboard-FileCard-actions{border-bottom-left-radius:5px;border-bottom-right-radius:5px}.uppy-Dashboard-FileCard-inner{display:flex;flex-direction:column;flex-grow:1;flex-shrink:1;height:100%;min-height:0}.uppy-Dashboard-FileCard-preview{align-items:center;border-bottom:1px solid #eaeaea;display:flex;flex-grow:0;flex-shrink:1;height:60%;justify-content:center;min-height:0;position:relative}[data-uppy-theme=dark] .uppy-Dashboard-FileCard-preview{background-color:#333;border-bottom:0}.uppy-Dashboard-FileCard-preview img.uppy-Dashboard-Item-previewImg{border-radius:3px;box-shadow:0 3px 20px #00000026;flex:0 0 auto;max-height:90%;max-width:90%;-o-object-fit:cover;object-fit:cover}.uppy-Dashboard-FileCard-edit{background-color:#00000080;border-radius:50px;color:#fff;font-size:13px;inset-inline-end:10px;padding:7px 15px;position:absolute;top:10px}.uppy-Dashboard-FileCard-edit:focus{outline:none}.uppy-Dashboard-FileCard-edit::-moz-focus-inner{border:0}.uppy-Dashboard-FileCard-edit:focus{box-shadow:0 0 0 3px #1269cf80}.uppy-Dashboard-FileCard-edit:hover{background-color:#000c}.uppy-Dashboard-FileCard-info{flex-grow:0;flex-shrink:0;height:40%;overflow-y:auto;padding:30px 20px 20px;-webkit-overflow-scrolling:touch}[data-uppy-theme=dark] .uppy-Dashboard-FileCard-info{background-color:#1f1f1f}.uppy-Dashboard-FileCard-fieldset{border:0;font-size:0;margin:auto auto 12px;max-width:640px;padding:0}.uppy-Dashboard-FileCard-label{color:#525252;display:inline-block;font-size:12px;vertical-align:middle;width:22%}.uppy-size--md .uppy-Dashboard-FileCard-label{font-size:14px}[data-uppy-theme=dark] .uppy-Dashboard-FileCard-label{color:#eaeaea}.uppy-Dashboard-FileCard-input{display:inline-block;vertical-align:middle;width:78%}.uppy-Dashboard-FileCard-actions{align-items:center;background-color:#fafafa;border-top:1px solid #eaeaea;display:flex;flex-grow:0;flex-shrink:0;height:55px;padding:0 15px}.uppy-size--md .uppy-Dashboard-FileCard-actions{height:65px}[data-uppy-theme=dark] .uppy-Dashboard-FileCard-actions{background-color:#1f1f1f;border-top:1px solid #333}.uppy-Dashboard-FileCard-actionsBtn{margin-inline-end:10px}.uppy-transition-slideDownUp-enter{opacity:.01;transform:translate3d(0,-105%,0);transition:transform .25s ease-in-out,opacity .25s ease-in-out}.uppy-transition-slideDownUp-enter.uppy-transition-slideDownUp-enter-active{opacity:1;transform:translateZ(0)}.uppy-transition-slideDownUp-leave{opacity:1;transform:translateZ(0);transition:transform .25s ease-in-out,opacity .25s ease-in-out}.uppy-transition-slideDownUp-leave.uppy-transition-slideDownUp-leave-active{opacity:.01;transform:translate3d(0,-105%,0)}@keyframes uppy-Dashboard-fadeIn{0%{opacity:0}to{opacity:1}}@keyframes uppy-Dashboard-fadeOut{0%{opacity:1}to{opacity:0}}@keyframes uppy-Dashboard-slideDownAndFadeIn{0%{opacity:0;transform:translate3d(-50%,-70%,0)}to{opacity:1;transform:translate3d(-50%,-50%,0)}}@keyframes uppy-Dashboard-slideDownAndFadeIn--small{0%{opacity:0;transform:translate3d(0,-20%,0)}to{opacity:1;transform:translateZ(0)}}@keyframes uppy-Dashboard-slideUpFadeOut{0%{opacity:1;transform:translate3d(-50%,-50%,0)}to{opacity:0;transform:translate3d(-50%,-70%,0)}}@keyframes uppy-Dashboard-slideUpFadeOut--small{0%{opacity:1;transform:translateZ(0)}to{opacity:0;transform:translate3d(0,-20%,0)}}.uppy-Dashboard--modal{z-index:1001}.uppy-Dashboard--modal[aria-hidden=true]{display:none}.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose>.uppy-Dashboard-inner{animation:uppy-Dashboard-slideDownAndFadeIn--small .3s cubic-bezier(0,0,.2,1)}@media only screen and (min-width:820px){.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose>.uppy-Dashboard-inner{animation:uppy-Dashboard-slideDownAndFadeIn .3s cubic-bezier(0,0,.2,1)}}.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose>.uppy-Dashboard-overlay{animation:uppy-Dashboard-fadeIn .3s cubic-bezier(0,0,.2,1)}.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose.uppy-Dashboard--isClosing>.uppy-Dashboard-inner{animation:uppy-Dashboard-slideUpFadeOut--small .3s cubic-bezier(0,0,.2,1)}@media only screen and (min-width:820px){.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose.uppy-Dashboard--isClosing>.uppy-Dashboard-inner{animation:uppy-Dashboard-slideUpFadeOut .3s cubic-bezier(0,0,.2,1)}}.uppy-Dashboard--modal.uppy-Dashboard--animateOpenClose.uppy-Dashboard--isClosing>.uppy-Dashboard-overlay{animation:uppy-Dashboard-fadeOut .3s cubic-bezier(0,0,.2,1)}.uppy-Dashboard-isFixed{height:100vh;overflow:hidden}.uppy-Dashboard--modal .uppy-Dashboard-overlay{background-color:#00000080;bottom:0;left:0;position:fixed;right:0;top:0;z-index:1001}.uppy-Dashboard-inner{background-color:#f4f4f4;border:1px solid #eaeaea;border-radius:5px;max-height:100%;max-width:100%;outline:none;position:relative}.uppy-size--md .uppy-Dashboard-inner{min-height:auto}@media only screen and (min-width:820px){.uppy-Dashboard-inner{height:500px;width:650px}}.uppy-Dashboard--modal .uppy-Dashboard-inner{z-index:1002}[data-uppy-theme=dark] .uppy-Dashboard-inner{background-color:#1f1f1f}.uppy-Dashboard--isDisabled .uppy-Dashboard-inner{cursor:not-allowed}.uppy-Dashboard-innerWrap{border-radius:5px;display:flex;flex-direction:column;height:100%;opacity:0;overflow:hidden;position:relative}.uppy-Dashboard--isInnerWrapVisible .uppy-Dashboard-innerWrap{opacity:1}.uppy-Dashboard--isDisabled .uppy-Dashboard-innerWrap{cursor:not-allowed;filter:grayscale(100%);opacity:.6;-webkit-user-select:none;-moz-user-select:none;user-select:none}.uppy-Dashboard--isDisabled .uppy-ProviderIconBg{fill:#9f9f9f}.uppy-Dashboard--isDisabled [aria-disabled],.uppy-Dashboard--isDisabled [disabled]{cursor:not-allowed;pointer-events:none}.uppy-Dashboard--modal .uppy-Dashboard-inner{border:none;bottom:15px;left:15px;position:fixed;right:15px;top:35px}@media only screen and (min-width:820px){.uppy-Dashboard--modal .uppy-Dashboard-inner{box-shadow:0 5px 15px 4px #00000026;left:50%;right:auto;top:50%;transform:translate(-50%,-50%)}}.uppy-Dashboard-close{color:#ffffffe6;cursor:pointer;display:block;font-size:27px;inset-inline-end:-2px;position:absolute;top:-33px;z-index:1005}.uppy-Dashboard-close:focus{outline:none}.uppy-Dashboard-close::-moz-focus-inner{border:0}.uppy-Dashboard-close:focus{color:#6eabf2}@media only screen and (min-width:820px){.uppy-Dashboard-close{font-size:35px;inset-inline-end:-35px;top:-10px}}.uppy-Dashboard-serviceMsg{background-color:#fffbf7;border-bottom:1px solid #edd4b9;border-top:1px solid #edd4b9;font-size:12px;font-weight:500;line-height:1.3;padding:12px 0;position:relative;top:-1px;z-index:1004}.uppy-size--md .uppy-Dashboard-serviceMsg{font-size:14px;line-height:1.4}[data-uppy-theme=dark] .uppy-Dashboard-serviceMsg{background-color:#1f1f1f;border-bottom:1px solid #333;border-top:1px solid #333;color:#eaeaea}.uppy-Dashboard-serviceMsg-title{display:block;line-height:1;margin-bottom:4px;padding-left:42px}.uppy-Dashboard-serviceMsg-text{padding:0 15px}.uppy-Dashboard-serviceMsg-actionBtn{color:#1269cf;font-size:inherit;font-weight:inherit;vertical-align:initial}[data-uppy-theme=dark] .uppy-Dashboard-serviceMsg-actionBtn{color:#02baf2e6}.uppy-Dashboard-serviceMsg-icon{left:15px;position:absolute;top:10px}.uppy-Dashboard-AddFiles{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;position:relative;text-align:center}[data-uppy-drag-drop-supported=true] .uppy-Dashboard-AddFiles{border:1px dashed #dfdfdf;border-radius:3px;height:calc(100% - 14px);margin:7px}.uppy-Dashboard-AddFilesPanel .uppy-Dashboard-AddFiles{border:none;height:calc(100% - 54px)}.uppy-Dashboard--modal .uppy-Dashboard-AddFiles{border-color:#cfcfcf}[data-uppy-theme=dark] .uppy-Dashboard-AddFiles{border-color:#757575}.uppy-Dashboard-AddFiles-info{display:none;margin-top:auto;padding-bottom:15px;padding-top:15px}.uppy-size--height-md .uppy-Dashboard-AddFiles-info{display:block}.uppy-size--md .uppy-Dashboard-AddFiles-info{bottom:25px;left:0;padding-bottom:0;padding-top:30px;position:absolute;right:0}[data-uppy-num-acquirers=\"0\"] .uppy-Dashboard-AddFiles-info{margin-top:0}.uppy-Dashboard-browse{color:#1269cf;cursor:pointer}.uppy-Dashboard-browse:focus{outline:none}.uppy-Dashboard-browse::-moz-focus-inner{border:0}.uppy-Dashboard-browse:focus,.uppy-Dashboard-browse:hover{border-bottom:1px solid #1269cf}[data-uppy-theme=dark] .uppy-Dashboard-browse{color:#02baf2e6}[data-uppy-theme=dark] .uppy-Dashboard-browse:focus,[data-uppy-theme=dark] .uppy-Dashboard-browse:hover{border-bottom:1px solid #02baf2}.uppy-Dashboard-browseBtn{display:block;font-size:14px;font-weight:500;margin-bottom:5px;margin-top:8px;width:100%}.uppy-size--md .uppy-Dashboard-browseBtn{font-size:15px;margin:15px auto;padding:13px 44px;width:auto}.uppy-Dashboard-AddFiles-list{display:flex;flex:1;flex-direction:column;margin-top:2px;overflow-y:auto;padding:2px 0;width:100%;-webkit-overflow-scrolling:touch}.uppy-size--md .uppy-Dashboard-AddFiles-list{flex:none;flex-direction:row;flex-wrap:wrap;justify-content:center;margin-top:15px;max-width:600px;overflow-y:visible;padding-top:0}.uppy-DashboardTab{border-bottom:1px solid #eaeaea;text-align:center;width:100%}[data-uppy-theme=dark] .uppy-DashboardTab{border-bottom:1px solid #333}.uppy-size--md .uppy-DashboardTab{border-bottom:none;display:inline-block;margin-bottom:10px;width:auto}.uppy-DashboardTab-btn{align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:initial;color:#525252;cursor:pointer;flex-direction:row;height:100%;justify-content:left;padding:12px 15px;width:100%}.uppy-DashboardTab-btn:focus{outline:none}.uppy-size--md .uppy-DashboardTab-btn{border-radius:5px;flex-direction:column;margin-inline-end:1px;padding:10px 3px;width:86px}[data-uppy-theme=dark] .uppy-DashboardTab-btn{color:#eaeaea}.uppy-DashboardTab-btn::-moz-focus-inner{border:0}.uppy-DashboardTab-btn:hover{background-color:#e9ecef}[data-uppy-theme=dark] .uppy-DashboardTab-btn:hover{background-color:#333}.uppy-DashboardTab-btn:active,.uppy-DashboardTab-btn:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-DashboardTab-btn:active,[data-uppy-theme=dark] .uppy-DashboardTab-btn:focus{background-color:#525252}.uppy-DashboardTab-btn svg{display:inline-block;max-height:100%;max-width:100%;overflow:hidden;transition:transform .15s ease-in-out;vertical-align:text-top}.uppy-DashboardTab-inner{align-items:center;background-color:#fff;border-radius:8px;box-shadow:0 1px 1px #0000001a,0 1px 2px #0000001a,0 2px 3px #00000005;display:flex;height:32px;justify-content:center;margin-inline-end:10px;width:32px}.uppy-size--md .uppy-DashboardTab-inner{margin-inline-end:0}[data-uppy-theme=dark] .uppy-DashboardTab-inner{background-color:#323232;box-shadow:0 1px 1px #0003,0 1px 2px #0003,0 2px 3px #00000014}.uppy-DashboardTab-name{font-size:14px;font-weight:400}.uppy-size--md .uppy-DashboardTab-name{font-size:12px;line-height:15px;margin-bottom:0;margin-top:8px}.uppy-DashboardTab-iconMyDevice{color:#1269cf}[data-uppy-theme=dark] .uppy-DashboardTab-iconMyDevice{color:#02baf2}.uppy-DashboardTab-iconBox{color:#0061d5}[data-uppy-theme=dark] .uppy-DashboardTab-iconBox{color:#eaeaea}.uppy-DashboardTab-iconDropbox{color:#0061fe}[data-uppy-theme=dark] .uppy-DashboardTab-iconDropbox{color:#eaeaea}.uppy-DashboardTab-iconUnsplash{color:#111}[data-uppy-theme=dark] .uppy-DashboardTab-iconUnsplash{color:#eaeaea}.uppy-DashboardTab-iconWebdav{color:#111}[data-uppy-theme=dark] .uppy-DashboardTab-iconWebdav{color:#eaeaea}.uppy-DashboardTab-iconScreenRec{color:#2c3e50}[data-uppy-theme=dark] .uppy-DashboardTab-iconScreenRec{color:#eaeaea}.uppy-DashboardTab-iconAudio{color:#8030a3}[data-uppy-theme=dark] .uppy-DashboardTab-iconAudio{color:#bf6ee3}.uppy-Dashboard-input{height:.1px;opacity:0;overflow:hidden;position:absolute;width:.1px;z-index:-1}.uppy-DashboardContent-bar{align-items:center;background-color:#fafafa;border-bottom:1px solid #eaeaea;display:flex;flex-shrink:0;height:40px;justify-content:space-between;padding:0 10px;position:relative;width:100%;z-index:1004}.uppy-size--md .uppy-DashboardContent-bar{height:50px;padding:0 15px}[data-uppy-theme=dark] .uppy-DashboardContent-bar{background-color:#1f1f1f;border-bottom:1px solid #333}.uppy-DashboardContent-title{font-size:12px;font-weight:500;left:0;line-height:40px;margin:auto;max-width:170px;overflow-x:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0;white-space:nowrap;width:100%}.uppy-size--md .uppy-DashboardContent-title{font-size:14px;line-height:50px;max-width:300px}[data-uppy-theme=dark] .uppy-DashboardContent-title{color:#eaeaea}.uppy-DashboardContent-back,.uppy-DashboardContent-save{-webkit-appearance:none;background:none;border:0;border-radius:3px;color:inherit;color:#1269cf;cursor:pointer;font-family:inherit;font-size:inherit;font-size:12px;font-weight:400;line-height:1;margin:0;margin-inline-start:-6px;padding:7px 6px}.uppy-DashboardContent-back:focus,.uppy-DashboardContent-save:focus{outline:none}.uppy-DashboardContent-back::-moz-focus-inner,.uppy-DashboardContent-save::-moz-focus-inner{border:0}.uppy-DashboardContent-back:hover,.uppy-DashboardContent-save:hover{color:#0e51a0}.uppy-DashboardContent-back:focus,.uppy-DashboardContent-save:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-DashboardContent-back:focus,[data-uppy-theme=dark] .uppy-DashboardContent-save:focus{background-color:#333}.uppy-size--md .uppy-DashboardContent-back,.uppy-size--md .uppy-DashboardContent-save{font-size:14px}[data-uppy-theme=dark] .uppy-DashboardContent-back,[data-uppy-theme=dark] .uppy-DashboardContent-save{color:#02baf2}.uppy-DashboardContent-addMore{-webkit-appearance:none;background:none;border:0;border-radius:3px;color:inherit;color:#1269cf;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:500;height:29px;line-height:1;margin:0;margin-inline-end:-5px;padding:7px 8px;width:29px}.uppy-DashboardContent-addMore:focus{outline:none}.uppy-DashboardContent-addMore::-moz-focus-inner{border:0}.uppy-DashboardContent-addMore:hover{color:#0e51a0}.uppy-DashboardContent-addMore:focus{background-color:#dfe6f1}[data-uppy-theme=dark] .uppy-DashboardContent-addMore:focus{background-color:#333}.uppy-size--md .uppy-DashboardContent-addMore{font-size:14px;height:auto;margin-inline-end:-8px;width:auto}[data-uppy-theme=dark] .uppy-DashboardContent-addMore{color:#02baf2}.uppy-DashboardContent-addMore svg{margin-inline-end:4px;vertical-align:initial}.uppy-size--md .uppy-DashboardContent-addMore svg{height:11px;width:11px}.uppy-DashboardContent-addMoreCaption{display:none}.uppy-size--md .uppy-DashboardContent-addMoreCaption{display:inline}.uppy-DashboardContent-panel{background-color:#f5f5f5;flex:1}.uppy-Dashboard-AddFilesPanel,.uppy-DashboardContent-panel{border-radius:5px;bottom:0;display:flex;flex-direction:column;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:1005}.uppy-Dashboard-AddFilesPanel{background:#fafafa;background:linear-gradient(0deg,#fafafa 35%,#fafafad9);box-shadow:0 0 10px 5px #00000026}[data-uppy-theme=dark] .uppy-Dashboard-AddFilesPanel{background-color:#333;background-image:linear-gradient(0deg,#1f1f1f 35%,#1f1f1fd9)}.uppy-Dashboard--isAddFilesPanelVisible .uppy-Dashboard-files{filter:blur(2px)}.uppy-Dashboard-progress{bottom:0;height:12%;left:0;position:absolute;width:100%}.uppy-Dashboard-progressBarContainer.is-active{height:100%;left:0;position:absolute;top:0;width:100%;z-index:1004}.uppy-Dashboard-filesContainer{flex:1;margin:0;overflow-y:hidden;position:relative}.uppy-Dashboard-filesContainer:after{clear:both;content:\"\";display:table}.uppy-Dashboard-files{flex:1;margin:0;overflow-y:auto;padding:0 0 10px;-webkit-overflow-scrolling:touch}.uppy-size--md .uppy-Dashboard-files{padding-top:10px}.uppy-Dashboard--singleFile .uppy-Dashboard-filesInner{align-items:center;display:flex;height:100%;justify-content:center}.uppy-Dashboard-dropFilesHereHint{align-items:center;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Cpath fill='%231269CF' d='M24 1v1C11.85 2 2 11.85 2 24s9.85 22 22 22 22-9.85 22-22S36.15 2 24 2zm0 0V0c13.254 0 24 10.746 24 24S37.254 48 24 48 0 37.254 0 24 10.746 0 24 0zm7.707 19.293a.999.999 0 1 1-1.414 1.414L25 16.414V34a1 1 0 1 1-2 0V16.414l-5.293 5.293a.999.999 0 1 1-1.414-1.414l7-7a1 1 0 0 1 1.414 0z'/%3E%3C/svg%3E\");background-position:50% 50%;background-repeat:no-repeat;border:1px dashed #1269cf;border-radius:3px;bottom:7px;color:#757575;display:flex;font-size:16px;justify-content:center;left:7px;padding-top:90px;position:absolute;right:7px;text-align:center;top:7px;visibility:hidden;z-index:2000}[data-uppy-theme=dark] .uppy-Dashboard-dropFilesHereHint{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Cpath fill='%2302BAF2' d='M24 1v1C11.85 2 2 11.85 2 24s9.85 22 22 22 22-9.85 22-22S36.15 2 24 2zm0 0V0c13.254 0 24 10.746 24 24S37.254 48 24 48 0 37.254 0 24 10.746 0 24 0zm7.707 19.293a.999.999 0 1 1-1.414 1.414L25 16.414V34a1 1 0 1 1-2 0V16.414l-5.293 5.293a.999.999 0 1 1-1.414-1.414l7-7a1 1 0 0 1 1.414 0z'/%3E%3C/svg%3E\");border-color:#02baf2;color:#bbb}.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-Dashboard-dropFilesHereHint{pointer-events:none;visibility:visible}.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-Dashboard-files,.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-Dashboard-progressindicators,.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-Dashboard-serviceMsg,.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-DashboardContent-bar{opacity:.15}.uppy-Dashboard.uppy-Dashboard--isDraggingOver .uppy-Dashboard-AddFiles{opacity:.03}.uppy-Dashboard-AddFiles-title{color:#000;font-size:17px;font-weight:500;line-height:1.35;margin-bottom:5px;margin-top:15px;padding:0 15px;text-align:inline-start;width:100%}.uppy-size--md .uppy-Dashboard-AddFiles-title{font-size:21px;font-weight:400;margin-top:5px;max-width:480px;padding:0 35px;text-align:center}[data-uppy-num-acquirers=\"0\"] .uppy-Dashboard-AddFiles-title{text-align:center}[data-uppy-theme=dark] .uppy-Dashboard-AddFiles-title{color:#eaeaea}.uppy-Dashboard-AddFiles-title button{font-weight:500}.uppy-size--md .uppy-Dashboard-AddFiles-title button{font-weight:400}.uppy-Dashboard-note{color:#757575;font-size:14px;line-height:1.25;margin:auto;max-width:350px;padding:0 15px;text-align:center}.uppy-size--md .uppy-Dashboard-note{line-height:1.35;max-width:600px}[data-uppy-theme=dark] .uppy-Dashboard-note{color:#cfcfcf}a.uppy-Dashboard-poweredBy{color:#939393;display:inline-block;font-size:11px;margin-top:8px;text-align:center;text-decoration:none}.uppy-Dashboard-poweredByIcon{margin-left:1px;margin-right:1px;opacity:.9;position:relative;top:1px;vertical-align:text-top;fill:none;stroke:#939393}.uppy-Dashboard-Item-previewIcon{height:25px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:25px;z-index:100}.uppy-size--md .uppy-Dashboard-Item-previewIcon{height:38px;width:38px}.uppy-Dashboard-Item-previewIcon svg{height:100%;width:100%}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-previewIcon{height:100%;max-height:60%;max-width:60%;width:100%}.uppy-Dashboard-Item-previewIconWrap{height:76px;max-height:75%;position:relative}.uppy-Dashboard--singleFile .uppy-Dashboard-Item-previewIconWrap{height:100%;width:100%}.uppy-Dashboard-Item-previewIconBg{filter:drop-shadow(rgba(0,0,0,.1) 0 1px 1px);height:100%;width:100%}.uppy-Dashboard-upload{height:50px;position:relative;width:50px}.uppy-size--md .uppy-Dashboard-upload{height:60px;width:60px}.uppy-Dashboard-upload .uppy-c-icon{position:relative;top:1px;width:50%}.uppy-Dashboard-uploadCount{background-color:#1bb240;border-radius:50%;color:#fff;font-size:8px;height:16px;inset-inline-end:-12px;line-height:16px;position:absolute;top:-12px;width:16px}.uppy-size--md .uppy-Dashboard-uploadCount{font-size:9px;height:18px;line-height:18px;width:18px}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: \"\"}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:var(--font-sans);font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--font-mono);font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*{border-color:var(--border)}body{background-color:var(--background);font-family:var(--font-sans);color:var(--foreground);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:\"Roboto\",var(--font-sans)}[dir=rtl]{text-align:right}[dir=rtl] *{direction:rtl}[dir=rtl] .flex:not(.flex-col):not(.flex-row){flex-direction:row-reverse}[dir=rtl] .justify-between{flex-direction:row-reverse}[dir=rtl] .space-x-1>:not([hidden])~:not([hidden]),[dir=rtl] .space-x-2>:not([hidden])~:not([hidden]),[dir=rtl] .space-x-3>:not([hidden])~:not([hidden]),[dir=rtl] .space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1;margin-right:var(--tw-space-x-reverse) * var(--tw-space-x);margin-left:calc(1 - var(--tw-space-x-reverse)) * var(--tw-space-x)}[dir=rtl] .text-left{text-align:right}[dir=rtl] .text-right{text-align:left}[dir=rtl] .fixed.right-4{right:auto;left:1rem}[dir=rtl] .fixed.left-1\\/2{left:auto;right:50%;transform:translate(50%)}[dir=rtl] .ml-2{margin-left:0;margin-right:.5rem}[dir=rtl] .ml-3{margin-left:0;margin-right:.75rem}[dir=rtl] .mr-2{margin-right:0;margin-left:.5rem}[dir=rtl] .grid{direction:rtl}[dir=rtl] .task-card,[dir=rtl] .stat-card{text-align:right}.stat-card{border-radius:var(--radius);border-width:1px;border-color:var(--surface-variant);background-color:var(--card);padding:.75rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 640px){.stat-card{padding:1rem}}@media (min-width: 1024px){.stat-card{padding:1.25rem}}.stat-card{min-height:80px;display:flex;align-items:center;transition:all .2s ease}.stat-card:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transform:translateY(-1px)}@media (min-width: 640px){.stat-card{min-height:96px}}@media (min-width: 1024px){.stat-card{min-height:112px}}.safe-area-bottom{padding-bottom:env(safe-area-inset-bottom)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}[data-testid^=scheduler-task-]{animation:fadeInUp .4s ease-out forwards}[data-testid^=upcoming-task-]{animation:slideInRight .5s ease-out forwards}.group:hover{transition:all .2s ease}.line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[dir=rtl] .bottom-navigation{direction:rtl}[dir=rtl] input,[dir=rtl] textarea,[dir=rtl] select{text-align:right}[dir=rtl] input[type=date],[dir=rtl] input[type=time],[dir=rtl] input[type=number]{text-align:left}html{scroll-behavior:smooth}@media (max-width: 768px){body{-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;touch-action:manipulation}}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.stat-card{border-radius:.75rem;border-width:0px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;animation-duration:.3s}.stat-card:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.stat-card{background:linear-gradient(135deg,hsl(var(--surface)),hsl(var(--muted)));border:1px solid hsl(var(--border) / .2);min-height:110px;position:relative;overflow:hidden}.stat-card:before{content:\"\";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,hsl(var(--primary)),hsl(var(--secondary)))}.task-card{border-radius:.75rem;border-width:1px;background-color:var(--surface);padding:1.25rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;animation-duration:.3s}.task-card:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.task-card{border-color:hsl(var(--border) / .3);background:linear-gradient(135deg,hsl(var(--surface)),hsl(var(--muted) / .3));position:relative;overflow:hidden}.task-card:before{content:\"\";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,hsl(var(--primary) / .6),hsl(var(--secondary) / .6))}.availability-available{background-color:var(--success)}.availability-busy{background-color:var(--warning)}.availability-offline{background-color:var(--surface-variant)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.-bottom-12{bottom:-3rem}.-left-12{left:-3rem}.-right-0\\.5{right:-.125rem}.-right-12{right:-3rem}.-top-0\\.5{top:-.125rem}.-top-12{top:-3rem}.bottom-0{bottom:0}.bottom-20{bottom:5rem}.bottom-32{bottom:8rem}.left-0{left:0}.left-1{left:.25rem}.left-1\\/2{left:50%}.left-2{left:.5rem}.left-3{left:.75rem}.left-\\[50\\%\\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.right-4{right:1rem}.top-0{top:0}.top-1\\.5{top:.375rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-3{top:.75rem}.top-3\\.5{top:.875rem}.top-4{top:1rem}.top-\\[1px\\]{top:1px}.top-\\[50\\%\\]{top:50%}.top-\\[60\\%\\]{top:60%}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.z-\\[100\\]{z-index:100}.z-\\[1\\]{z-index:1}.col-span-2{grid-column:span 2 / span 2}.m-4{margin:1rem}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3\\.5{margin-left:.875rem;margin-right:.875rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mr-4{margin-right:-1rem}.-mt-4{margin-top:-1rem}.mb-1{margin-bottom:.25rem}.mb-1\\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-1\\.5{margin-top:.375rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.size-4{width:1rem;height:1rem}.h-1{height:.25rem}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\\.5{height:.625rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-72{height:18rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-96{height:24rem}.h-\\[1px\\]{height:1px}.h-\\[80vh\\]{height:80vh}.h-\\[var\\(--radix-navigation-menu-viewport-height\\)\\]{height:var(--radix-navigation-menu-viewport-height)}.h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.h-svh{height:100svh}.max-h-20{max-height:5rem}.max-h-24{max-height:6rem}.max-h-32{max-height:8rem}.max-h-96{max-height:24rem}.max-h-\\[--radix-context-menu-content-available-height\\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[80vh\\]{max-height:80vh}.max-h-\\[85vh\\]{max-height:85vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[var\\(--radix-dropdown-menu-content-available-height\\)\\]{max-height:var(--radix-dropdown-menu-content-available-height)}.max-h-screen{max-height:100vh}.min-h-0{min-height:0px}.min-h-32{min-height:8rem}.min-h-96{min-height:24rem}.min-h-\\[100px\\]{min-height:100px}.min-h-\\[120px\\]{min-height:120px}.min-h-\\[2\\.5rem\\]{min-height:2.5rem}.min-h-\\[280px\\]{min-height:280px}.min-h-\\[2rem\\]{min-height:2rem}.min-h-\\[80px\\]{min-height:80px}.min-h-full{min-height:100%}.min-h-screen{min-height:100vh}.min-h-svh{min-height:100svh}.w-0{width:0px}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-1\\/2{width:50%}.w-1\\/4{width:25%}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\\.5{width:.625rem}.w-20{width:5rem}.w-24{width:6rem}.w-28{width:7rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-3\\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-9{width:2.25rem}.w-\\[--sidebar-width\\]{width:var(--sidebar-width)}.w-\\[100px\\]{width:100px}.w-\\[1px\\]{width:1px}.w-\\[95vw\\]{width:95vw}.w-auto{width:auto}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-11{min-width:2.75rem}.min-w-5{min-width:1.25rem}.min-w-9{min-width:2.25rem}.min-w-\\[120px\\]{min-width:120px}.min-w-\\[12rem\\]{min-width:12rem}.min-w-\\[16px\\]{min-width:16px}.min-w-\\[200px\\]{min-width:200px}.min-w-\\[20px\\]{min-width:20px}.min-w-\\[8rem\\]{min-width:8rem}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.max-w-4xl{max-width:56rem}.max-w-\\[--skeleton-width\\]{max-width:var(--skeleton-width)}.max-w-\\[70\\%\\]{max-width:70%}.max-w-\\[80\\%\\]{max-width:80%}.max-w-full{max-width:100%}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-md{max-width:28rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink{flex-shrink:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\\[--radix-context-menu-content-transform-origin\\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\\[--radix-dropdown-menu-content-transform-origin\\]{transform-origin:var(--radix-dropdown-menu-content-transform-origin)}.origin-\\[--radix-hover-card-content-transform-origin\\]{transform-origin:var(--radix-hover-card-content-transform-origin)}.origin-\\[--radix-menubar-content-transform-origin\\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-\\[--radix-popover-content-transform-origin\\]{transform-origin:var(--radix-popover-content-transform-origin)}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-px{--tw-translate-x: -1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-50\\%\\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-px{--tw-translate-x: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[-50\\%\\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-baseline{align-items:baseline}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.125rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.125rem * var(--tw-space-y-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-x-reverse>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-\\[2px\\]{border-radius:2px}.rounded-\\[inherit\\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-none{border-radius:0}.rounded-sm{border-radius:calc(var(--radius) - 4px)}.rounded-xl{border-radius:.75rem}.rounded-t-\\[10px\\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-t-full{border-top-left-radius:9999px;border-top-right-radius:9999px}.rounded-tl-sm{border-top-left-radius:calc(var(--radius) - 4px)}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-\\[1\\.5px\\]{border-width:1.5px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-\\[--color-border\\]{border-color:var(--color-border)}.border-amber-200{--tw-border-opacity: 1;border-color:rgb(253 230 138 / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-current{border-color:currentColor}.border-destructive{border-color:var(--destructive)}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-600{--tw-border-opacity: 1;border-color:rgb(22 163 74 / var(--tw-border-opacity, 1))}.border-input{border-color:var(--input)}.border-orange-300{--tw-border-opacity: 1;border-color:rgb(253 186 116 / var(--tw-border-opacity, 1))}.border-primary{border-color:var(--primary)}.border-purple-200{--tw-border-opacity: 1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-purple-300{--tw-border-opacity: 1;border-color:rgb(216 180 254 / var(--tw-border-opacity, 1))}.border-purple-600{--tw-border-opacity: 1;border-color:rgb(147 51 234 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-300{--tw-border-opacity: 1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.border-sidebar-border{border-color:var(--sidebar-border)}.border-transparent{border-color:transparent}.border-white\\/20{border-color:#fff3}.border-white\\/30{border-color:#ffffff4d}.border-yellow-200{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-l-blue-500{--tw-border-opacity: 1;border-left-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-l-green-400{--tw-border-opacity: 1;border-left-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-l-green-500{--tw-border-opacity: 1;border-left-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-l-red-400{--tw-border-opacity: 1;border-left-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-l-transparent{border-left-color:transparent}.border-l-yellow-400{--tw-border-opacity: 1;border-left-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.border-t-white{--tw-border-opacity: 1;border-top-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.bg-\\[--color-bg\\]{background-color:var(--color-bg)}.bg-accent{background-color:var(--accent)}.bg-amber-50{--tw-bg-opacity: 1;background-color:rgb(255 251 235 / var(--tw-bg-opacity, 1))}.bg-background{background-color:var(--background)}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\\/50{background-color:#00000080}.bg-black\\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-border{background-color:var(--border)}.bg-card{background-color:var(--card)}.bg-cyan-100{--tw-bg-opacity: 1;background-color:rgb(207 250 254 / var(--tw-bg-opacity, 1))}.bg-destructive{background-color:var(--destructive)}.bg-foreground{background-color:var(--foreground)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-400{--tw-bg-opacity: 1;background-color:rgb(74 222 128 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity: 1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:var(--muted)}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-50{--tw-bg-opacity: 1;background-color:rgb(255 247 237 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-popover{background-color:var(--popover)}.bg-primary{background-color:var(--primary)}.bg-primary-dark{background-color:var(--primary-dark)}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-400{--tw-bg-opacity: 1;background-color:rgb(248 113 113 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-secondary{background-color:var(--secondary)}.bg-sidebar{background-color:var(--sidebar)}.bg-sidebar-border{background-color:var(--sidebar-border)}.bg-success{background-color:var(--success)}.bg-surface{background-color:var(--surface)}.bg-surface-variant{background-color:var(--surface-variant)}.bg-transparent{background-color:transparent}.bg-warning{background-color:var(--warning)}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/20{background-color:#fff3}.bg-white\\/50{background-color:#ffffff80}.bg-white\\/80{background-color:#fffc}.bg-white\\/90{background-color:#ffffffe6}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-400{--tw-bg-opacity: 1;background-color:rgb(250 204 21 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity: .5}.bg-opacity-80{--tw-bg-opacity: .8}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-background{--tw-gradient-from: var(--background) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-100{--tw-gradient-from: #dbeafe var(--tw-gradient-from-position);--tw-gradient-to: rgb(219 234 254 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-400{--tw-gradient-from: #60a5fa var(--tw-gradient-from-position);--tw-gradient-to: rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-50{--tw-gradient-from: #eff6ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from: #3b82f6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-50{--tw-gradient-from: #f9fafb var(--tw-gradient-from-position);--tw-gradient-to: rgb(249 250 251 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary{--tw-gradient-from: var(--primary) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from: transparent var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/80{--tw-gradient-from: rgb(255 255 255 / .8) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/95{--tw-gradient-from: rgb(255 255 255 / .95) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-50{--tw-gradient-from: #fefce8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(254 252 232 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-purple-400{--tw-gradient-to: rgb(192 132 252 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #c084fc var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-secondary{--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--secondary) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-white\\/20{--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(255 255 255 / .2) var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blue-200{--tw-gradient-to: #bfdbfe var(--tw-gradient-to-position)}.to-blue-50{--tw-gradient-to: #eff6ff var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to: #2563eb var(--tw-gradient-to-position)}.to-cyan-400{--tw-gradient-to: #22d3ee var(--tw-gradient-to-position)}.to-green-50{--tw-gradient-to: #f0fdf4 var(--tw-gradient-to-position)}.to-indigo-100{--tw-gradient-to: #e0e7ff var(--tw-gradient-to-position)}.to-orange-50{--tw-gradient-to: #fff7ed var(--tw-gradient-to-position)}.to-primary{--tw-gradient-to: var(--primary) var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to: #faf5ff var(--tw-gradient-to-position)}.to-secondary{--tw-gradient-to: var(--secondary) var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.to-white\\/60{--tw-gradient-to: rgb(255 255 255 / .6) var(--tw-gradient-to-position)}.to-white\\/90{--tw-gradient-to: rgb(255 255 255 / .9) var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-current{fill:currentColor}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-2\\.5{padding:.625rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\\[1px\\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-20{padding-bottom:5rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pb-6{padding-bottom:1.5rem}.pb-8{padding-bottom:2rem}.pl-10{padding-left:2.5rem}.pl-12{padding-left:3rem}.pl-2\\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-12{padding-right:3rem}.pr-2{padding-right:.5rem}.pr-2\\.5{padding-right:.625rem}.pr-4{padding-right:1rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-8{padding-top:2rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-\\[0\\.8rem\\]{font-size:.8rem}.text-\\[10px\\]{font-size:10px}.text-\\[8px\\]{font-size:8px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.tabular-nums{--tw-numeric-spacing: tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-widest{letter-spacing:.1em}.text-accent-foreground{color:var(--accent-foreground)}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-amber-700{--tw-text-opacity: 1;color:rgb(180 83 9 / var(--tw-text-opacity, 1))}.text-amber-800{--tw-text-opacity: 1;color:rgb(146 64 14 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-card-foreground{color:var(--card-foreground)}.text-current{color:currentColor}.text-cyan-800{--tw-text-opacity: 1;color:rgb(21 94 117 / var(--tw-text-opacity, 1))}.text-destructive{color:var(--destructive)}.text-destructive-foreground{color:var(--destructive-foreground)}.text-error{color:var(--error)}.text-foreground{color:var(--foreground)}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity: 1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-muted-foreground{color:var(--muted-foreground)}.text-on-surface{color:var(--on-surface)}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-orange-800{--tw-text-opacity: 1;color:rgb(154 52 18 / var(--tw-text-opacity, 1))}.text-popover-foreground{color:var(--popover-foreground)}.text-primary{color:var(--primary)}.text-primary-foreground{color:var(--primary-foreground)}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity: 1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-secondary{color:var(--secondary)}.text-secondary-foreground{color:var(--secondary-foreground)}.text-sidebar-foreground{color:var(--sidebar-foreground)}.text-success{color:var(--success)}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-border\\)\\)\\]{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-border));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-blue-100{--tw-shadow-color: #dbeafe;--tw-shadow: var(--tw-shadow-colored)}.shadow-gray-100{--tw-shadow-color: #f3f4f6;--tw-shadow: var(--tw-shadow-colored)}.shadow-green-100{--tw-shadow-color: #dcfce7;--tw-shadow: var(--tw-shadow-colored)}.shadow-orange-100{--tw-shadow-color: #ffedd5;--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-200\\/60{--tw-ring-color: rgb(191 219 254 / .6)}.ring-ring{--tw-ring-color: var(--ring)}.ring-sidebar-ring{--tw-ring-color: var(--sidebar-ring)}.ring-offset-2{--tw-ring-offset-width: 2px}.ring-offset-background{--tw-ring-offset-color: var(--background)}.drop-shadow-sm{--tw-drop-shadow: drop-shadow(0 1px 1px rgb(0 0 0 / .05));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-lg{--tw-backdrop-blur: blur(16px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[left\\,right\\,width\\]{transition-property:left,right,width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\,opacity\\]{transition-property:margin,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,padding\\]{transition-property:width,height,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.duration-700{transition-duration:.7s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.fade-in-80{--tw-enter-opacity: .8}.zoom-in-95{--tw-enter-scale: .95}.duration-1000{animation-duration:1s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.duration-500{animation-duration:.5s}.duration-700{animation-duration:.7s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}.ease-out{animation-timing-function:cubic-bezier(0,0,.2,1)}.touch-manipulation{touch-action:manipulation}:root{--background: hsl(0 0% 100%);--foreground: hsl(215 8% 13%);--card: hsl(0 0% 100%);--card-foreground: hsl(215 8% 13%);--popover: hsl(0 0% 100%);--popover-foreground: hsl(215 8% 13%);--primary: hsl(207 90% 42%);--primary-foreground: hsl(0 0% 100%);--primary-dark: hsl(207 90% 38%);--secondary: hsl(174 100% 29%);--secondary-foreground: hsl(0 0% 100%);--muted: hsl(210 40% 98%);--muted-foreground: hsl(215 16% 47%);--accent: hsl(210 40% 96%);--accent-foreground: hsl(215 8% 13%);--destructive: hsl(0 84% 60%);--destructive-foreground: hsl(0 0% 100%);--success: hsl(122 39% 49%);--success-foreground: hsl(0 0% 100%);--warning: hsl(36 100% 50%);--warning-foreground: hsl(0 0% 100%);--error: hsl(4 90% 58%);--error-foreground: hsl(0 0% 100%);--border: hsl(214 32% 91%);--input: hsl(214 32% 91%);--ring: hsl(207 90% 42%);--surface: hsl(0 0% 100%);--on-surface: hsl(215 8% 13%);--surface-variant: hsl(0 0% 88%);--chart-1: hsl(207 90% 42%);--chart-2: hsl(174 100% 29%);--chart-3: hsl(36 100% 50%);--chart-4: hsl(122 39% 49%);--chart-5: hsl(4 90% 58%);--sidebar: hsl(0 0% 100%);--sidebar-foreground: hsl(215 8% 13%);--sidebar-primary: hsl(207 90% 42%);--sidebar-primary-foreground: hsl(0 0% 100%);--sidebar-accent: hsl(210 40% 96%);--sidebar-accent-foreground: hsl(215 8% 13%);--sidebar-border: hsl(214 32% 91%);--sidebar-ring: hsl(207 90% 42%);--font-sans: \"Roboto\", \"Open Sans\", sans-serif;--font-serif: Georgia, serif;--font-mono: Menlo, monospace;--radius: .5rem}*{box-sizing:border-box}html{font-size:16px;overflow-x:hidden}body{margin:0;padding:0;min-height:100vh;overflow-x:hidden;background:hsl(var(--background))}.mobile-container{min-height:100vh;display:flex;flex-direction:column;width:100%;max-width:100vw;overflow-x:hidden}@media (min-width: 640px){html{font-size:17px}.mobile-container{max-width:640px;margin:0 auto}}@media (min-width: 768px){html{font-size:18px}.mobile-container{max-width:768px}}@media (min-width: 1024px){html{font-size:19px}.mobile-container{max-width:1024px}.desktop-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.desktop-grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}}@media (min-width: 1280px){html{font-size:20px}.mobile-container{max-width:1280px}.desktop-grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem}}@media (min-width: 1536px){.mobile-container{max-width:1536px}}@media (max-width: 640px){.touch-target{min-height:44px;min-width:44px}button,.button,input,select,textarea{min-height:44px}}@media (orientation: landscape) and (max-height: 600px){.mobile-container{padding-bottom:0}.landscape-adjust{padding:.5rem}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){.crisp-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@container (min-width: 640px){.responsive-card{display:grid;grid-template-columns:1fr 1fr;gap:1rem}}.responsive-padding{padding:.5rem}@media (min-width: 640px){.responsive-padding{padding:1rem}}@media (min-width: 1024px){.responsive-padding{padding:1.5rem}}.responsive-text{font-size:.875rem}@media (min-width: 640px){.responsive-text{font-size:1rem}}@media (min-width: 1024px){.responsive-text{font-size:1.125rem}}*{transition:font-size .2s ease,padding .2s ease,margin .2s ease}.dark{--background: hsl(222 84% 5%);--foreground: hsl(210 40% 98%);--card: hsl(222 84% 5%);--card-foreground: hsl(210 40% 98%);--popover: hsl(222 84% 5%);--popover-foreground: hsl(210 40% 98%);--primary: hsl(207 90% 54%);--primary-foreground: hsl(222 84% 5%);--primary-dark: hsl(207 90% 50%);--secondary: hsl(174 100% 35%);--secondary-foreground: hsl(222 84% 5%);--muted: hsl(217 32% 17%);--muted-foreground: hsl(215 20% 65%);--accent: hsl(217 32% 17%);--accent-foreground: hsl(210 40% 98%);--destructive: hsl(0 62% 30%);--destructive-foreground: hsl(210 40% 98%);--success: hsl(122 39% 35%);--success-foreground: hsl(210 40% 98%);--warning: hsl(36 100% 40%);--warning-foreground: hsl(210 40% 98%);--error: hsl(4 90% 48%);--error-foreground: hsl(210 40% 98%);--border: hsl(217 32% 17%);--input: hsl(217 32% 17%);--ring: hsl(207 90% 54%);--surface: hsl(222 84% 5%);--on-surface: hsl(210 40% 98%);--surface-variant: hsl(217 32% 17%);--chart-1: hsl(207 90% 54%);--chart-2: hsl(174 100% 35%);--chart-3: hsl(36 100% 40%);--chart-4: hsl(122 39% 35%);--chart-5: hsl(4 90% 48%);--sidebar: hsl(222 84% 5%);--sidebar-foreground: hsl(210 40% 98%);--sidebar-primary: hsl(207 90% 54%);--sidebar-primary-foreground: hsl(222 84% 5%);--sidebar-accent: hsl(217 32% 17%);--sidebar-accent-foreground: hsl(210 40% 98%);--sidebar-border: hsl(217 32% 17%);--sidebar-ring: hsl(207 90% 54%)}[data-scroll-container],[role=dialog],.overflow-auto,.overflow-y-auto,main{scroll-behavior:smooth}.route-transition{animation:fadeInFromTop .2s ease-in-out}@keyframes fadeInFromTop{0%{opacity:.95;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}[dir=rtl] .after\\:left-1\\/2.fixed:after{content:var(--tw-content);left:auto;right:50%;transform:translate(50%)}@media (min-width: 640px){[dir=rtl] .sm\\:flex:not(.flex-col):not(.flex-row){flex-direction:row-reverse}[dir=rtl] .sm\\:justify-between{flex-direction:row-reverse}[dir=rtl] .sm\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1;margin-right:var(--tw-space-x-reverse) * var(--tw-space-x);margin-left:calc(1 - var(--tw-space-x-reverse)) * var(--tw-space-x)}[dir=rtl] .sm\\:space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1;margin-right:var(--tw-space-x-reverse) * var(--tw-space-x);margin-left:calc(1 - var(--tw-space-x-reverse)) * var(--tw-space-x)}[dir=rtl] .sm\\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1;margin-right:var(--tw-space-x-reverse) * var(--tw-space-x);margin-left:calc(1 - var(--tw-space-x-reverse)) * var(--tw-space-x)}[dir=rtl] .sm\\:text-left{text-align:right}}@media (min-width: 768px){[dir=rtl] .md\\:flex:not(.flex-col):not(.flex-row){flex-direction:row-reverse}[dir=rtl] .md\\:grid{direction:rtl}[dir=rtl] .peer[data-state=collapsed][data-variant=inset]~.md\\:peer-data-\\[state\\=collapsed\\]\\:peer-data-\\[variant\\=inset\\]\\:ml-2{margin-left:0;margin-right:.5rem}}[dir=rtl] .rtl\\:mr-3:where([dir=rtl],[dir=rtl] *){margin-right:0;margin-left:.75rem}@media (min-width: 768px){.md\\:container{width:100%}@media (min-width: 640px){.md\\:container{max-width:640px}}.md\\:container{max-width:768px}@media (min-width: 1024px){.md\\:container{max-width:1024px}}@media (min-width: 1280px){.md\\:container{max-width:1280px}}@media (min-width: 1536px){.md\\:container{max-width:1536px}}}.file\\:border-0::file-selector-button{border-width:0px}.file\\:bg-transparent::file-selector-button{background-color:transparent}.file\\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\\:font-medium::file-selector-button{font-weight:500}.placeholder\\:text-muted-foreground::-moz-placeholder{color:var(--muted-foreground)}.placeholder\\:text-muted-foreground::placeholder{color:var(--muted-foreground)}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:-inset-2:after{content:var(--tw-content);top:-.5rem;right:-.5rem;bottom:-.5rem;left:-.5rem}.after\\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:w-1:after{content:var(--tw-content);width:.25rem}.after\\:w-\\[2px\\]:after{content:var(--tw-content);width:2px}.after\\:-translate-x-1\\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.first\\:rounded-l-md:first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.first\\:border-l:first-child{border-left-width:1px}.last\\:rounded-r-md:last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.last\\:border-r-0:last-child{border-right-width:0px}.focus-within\\:relative:focus-within{position:relative}.focus-within\\:z-20:focus-within{z-index:20}.hover\\:-translate-y-1:hover{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-blue-300:hover{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.hover\\:border-red-300:hover{--tw-border-opacity: 1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.hover\\:bg-accent:hover{background-color:var(--accent)}.hover\\:bg-black\\/10:hover{background-color:#0000001a}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\\:bg-blue-50:hover{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-50:hover{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\\:bg-muted:hover{background-color:var(--muted)}.hover\\:bg-primary:hover{background-color:var(--primary)}.hover\\:bg-primary-dark:hover{background-color:var(--primary-dark)}.hover\\:bg-purple-50:hover{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-600\\/20:hover{background-color:#dc262633}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\\:bg-secondary:hover{background-color:var(--secondary)}.hover\\:bg-sidebar-accent:hover{background-color:var(--sidebar-accent)}.hover\\:bg-transparent:hover{background-color:transparent}.hover\\:bg-white\\/20:hover{background-color:#fff3}.hover\\:text-accent-foreground:hover{color:var(--accent-foreground)}.hover\\:text-blue-700:hover{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\\:text-destructive:hover{color:var(--destructive)}.hover\\:text-foreground:hover{color:var(--foreground)}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\\:text-muted-foreground:hover{color:var(--muted-foreground)}.hover\\:text-on-surface:hover{color:var(--on-surface)}.hover\\:text-primary-dark:hover{color:var(--primary-dark)}.hover\\:text-primary-foreground:hover{color:var(--primary-foreground)}.hover\\:text-red-700:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.hover\\:text-sidebar-accent-foreground:hover{color:var(--sidebar-accent-foreground)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:opacity-90:hover{opacity:.9}.hover\\:shadow-2xl:hover{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-accent\\)\\)\\]:hover{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-accent));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:after\\:bg-sidebar-border:hover:after{content:var(--tw-content);background-color:var(--sidebar-border)}.focus\\:bg-accent:focus{background-color:var(--accent)}.focus\\:bg-primary:focus{background-color:var(--primary)}.focus\\:bg-white:focus{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.focus\\:text-accent-foreground:focus{color:var(--accent-foreground)}.focus\\:text-primary-foreground:focus{color:var(--primary-foreground)}.focus\\:opacity-100:focus{opacity:1}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\\:ring-ring:focus{--tw-ring-color: var(--ring)}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-ring:focus-visible{--tw-ring-color: var(--ring)}.focus-visible\\:ring-sidebar-ring:focus-visible{--tw-ring-color: var(--sidebar-ring)}.focus-visible\\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\\:ring-offset-background:focus-visible{--tw-ring-offset-color: var(--background)}.active\\:bg-sidebar-accent:active{background-color:var(--sidebar-accent)}.active\\:text-sidebar-accent-foreground:active{color:var(--sidebar-accent-foreground)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group\\/menu-item:focus-within .group-focus-within\\/menu-item\\:opacity-100{opacity:1}.group:hover .group-hover\\:text-primary{color:var(--primary)}.group\\/menu-item:hover .group-hover\\/menu-item\\:opacity-100,.group:hover .group-hover\\:opacity-100{opacity:1}.group:hover .group-hover\\:ring-blue-400\\/80{--tw-ring-color: rgb(96 165 250 / .8)}.group.destructive .group-\\[\\.destructive\\]\\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:bg-destructive:hover{background-color:var(--destructive)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-destructive-foreground:hover{color:var(--destructive-foreground)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-destructive:focus{--tw-ring-color: var(--destructive)}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer\\/menu-button:hover~.peer-hover\\/menu-button\\:text-sidebar-accent-foreground{color:var(--sidebar-accent-foreground)}.peer:disabled~.peer-disabled\\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\\:opacity-70{opacity:.7}.has-\\[\\[data-variant\\=inset\\]\\]\\:bg-sidebar:has([data-variant=inset]){background-color:var(--sidebar)}.has-\\[\\:disabled\\]\\:opacity-50:has(:disabled){opacity:.5}.group\\/menu-item:has([data-sidebar=menu-action]) .group-has-\\[\\[data-sidebar\\=menu-action\\]\\]\\/menu-item\\:pr-8{padding-right:2rem}.aria-disabled\\:pointer-events-none[aria-disabled=true]{pointer-events:none}.aria-disabled\\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\\:bg-accent[aria-selected=true]{background-color:var(--accent)}.aria-selected\\:text-accent-foreground[aria-selected=true]{color:var(--accent-foreground)}.aria-selected\\:text-muted-foreground[aria-selected=true]{color:var(--muted-foreground)}.aria-selected\\:opacity-100[aria-selected=true]{opacity:1}.data-\\[disabled\\=true\\]\\:pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:pointer-events-none[data-disabled]{pointer-events:none}.data-\\[panel-group-direction\\=vertical\\]\\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\\[panel-group-direction\\=vertical\\]\\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\\[side\\=bottom\\]\\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=right\\]\\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=checked\\]\\:translate-x-5[data-state=checked]{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=unchecked\\]\\:translate-x-0[data-state=unchecked],.data-\\[swipe\\=cancel\\]\\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=end\\]\\:translate-x-\\[var\\(--radix-toast-swipe-end-x\\)\\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=move\\]\\:translate-x-\\[var\\(--radix-toast-swipe-move-x\\)\\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\\[state\\=open\\]\\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\\[panel-group-direction\\=vertical\\]\\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\\[active\\=true\\]\\:bg-sidebar-accent[data-active=true]{background-color:var(--sidebar-accent)}.data-\\[selected\\=\\'true\\'\\]\\:bg-accent[data-selected=true]{background-color:var(--accent)}.data-\\[state\\=active\\]\\:bg-background[data-state=active]{background-color:var(--background)}.data-\\[state\\=checked\\]\\:bg-primary[data-state=checked]{background-color:var(--primary)}.data-\\[state\\=on\\]\\:bg-accent[data-state=on],.data-\\[state\\=open\\]\\:bg-accent[data-state=open]{background-color:var(--accent)}.data-\\[state\\=open\\]\\:bg-secondary[data-state=open]{background-color:var(--secondary)}.data-\\[state\\=selected\\]\\:bg-muted[data-state=selected]{background-color:var(--muted)}.data-\\[state\\=unchecked\\]\\:bg-input[data-state=unchecked]{background-color:var(--input)}.data-\\[active\\=true\\]\\:font-medium[data-active=true]{font-weight:500}.data-\\[active\\=true\\]\\:text-sidebar-accent-foreground[data-active=true]{color:var(--sidebar-accent-foreground)}.data-\\[selected\\=true\\]\\:text-accent-foreground[data-selected=true]{color:var(--accent-foreground)}.data-\\[state\\=active\\]\\:text-foreground[data-state=active]{color:var(--foreground)}.data-\\[state\\=checked\\]\\:text-primary-foreground[data-state=checked]{color:var(--primary-foreground)}.data-\\[state\\=on\\]\\:text-accent-foreground[data-state=on],.data-\\[state\\=open\\]\\:text-accent-foreground[data-state=open]{color:var(--accent-foreground)}.data-\\[state\\=open\\]\\:text-muted-foreground[data-state=open]{color:var(--muted-foreground)}.data-\\[disabled\\=true\\]\\:opacity-50[data-disabled=true],.data-\\[disabled\\]\\:opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=open\\]\\:opacity-100[data-state=open]{opacity:1}.data-\\[state\\=active\\]\\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[swipe\\=move\\]\\:transition-none[data-swipe=move]{transition-property:none}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{transition-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{transition-duration:.5s}.data-\\[motion\\^\\=from-\\]\\:animate-in[data-motion^=from-],.data-\\[state\\=open\\]\\:animate-in[data-state=open],.data-\\[state\\=visible\\]\\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\\[motion\\^\\=to-\\]\\:animate-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:animate-out[data-state=closed],.data-\\[state\\=hidden\\]\\:animate-out[data-state=hidden],.data-\\[swipe\\=end\\]\\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\\[motion\\^\\=from-\\]\\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\\[motion\\^\\=to-\\]\\:fade-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\\[state\\=closed\\]\\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\\[state\\=hidden\\]\\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\\[state\\=open\\]\\:fade-in-0[data-state=open],.data-\\[state\\=visible\\]\\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\\[state\\=closed\\]\\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\\[state\\=open\\]\\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\\[state\\=open\\]\\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\\[motion\\=from-end\\]\\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\\[motion\\=from-start\\]\\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\\[motion\\=to-end\\]\\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\\[motion\\=to-start\\]\\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\\[side\\=bottom\\]\\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\\[side\\=left\\]\\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\\[side\\=right\\]\\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\\[side\\=top\\]\\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\\[state\\=closed\\]\\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\\[state\\=closed\\]\\:slide-out-to-right[data-state=closed],.data-\\[state\\=closed\\]\\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\\[state\\=open\\]\\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\\[state\\=open\\]\\:slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\\[state\\=open\\]\\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\\[state\\=open\\]\\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=open\\]\\:slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{animation-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{animation-duration:.5s}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:-translate-y-1\\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=open\\]\\:hover\\:bg-accent:hover[data-state=open]{background-color:var(--accent)}.data-\\[state\\=open\\]\\:hover\\:bg-sidebar-accent:hover[data-state=open]{background-color:var(--sidebar-accent)}.data-\\[state\\=open\\]\\:hover\\:text-sidebar-accent-foreground:hover[data-state=open]{color:var(--sidebar-accent-foreground)}.data-\\[state\\=open\\]\\:focus\\:bg-accent:focus[data-state=open]{background-color:var(--accent)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:left-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{left:calc(var(--sidebar-width) * -1)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:right-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{right:calc(var(--sidebar-width) * -1)}.group[data-side=left] .group-data-\\[side\\=left\\]\\:-right-4{right:-1rem}.group[data-side=right] .group-data-\\[side\\=right\\]\\:left-0{left:0}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:-mt-8{margin-top:-2rem}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:hidden{display:none}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!size-8{width:2rem!important;height:2rem!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[--sidebar-width-icon\\]{width:var(--sidebar-width-icon)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)_\\+_theme\\(spacing\\.4\\)\\)\\]{width:calc(var(--sidebar-width-icon) + 1rem)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)_\\+_theme\\(spacing\\.4\\)_\\+2px\\)\\]{width:calc(var(--sidebar-width-icon) + 1rem + 2px)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:w-0{width:0px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-side=right] .group-data-\\[side\\=right\\]\\:rotate-180,.group[data-state=open] .group-data-\\[state\\=open\\]\\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:overflow-hidden{overflow:hidden}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:rounded-lg{border-radius:var(--radius)}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border{border-width:1px}.group[data-side=left] .group-data-\\[side\\=left\\]\\:border-r{border-right-width:1px}.group[data-side=right] .group-data-\\[side\\=right\\]\\:border-l{border-left-width:1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border-sidebar-border{border-color:var(--sidebar-border)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!p-0{padding:0!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!p-2{padding:.5rem!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:opacity-0{opacity:0}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:after\\:left-full:after{content:var(--tw-content);left:100%}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:hover\\:bg-sidebar:hover{background-color:var(--sidebar)}.peer\\/menu-button[data-size=default]~.peer-data-\\[size\\=default\\]\\/menu-button\\:top-1\\.5{top:.375rem}.peer\\/menu-button[data-size=lg]~.peer-data-\\[size\\=lg\\]\\/menu-button\\:top-2\\.5{top:.625rem}.peer\\/menu-button[data-size=sm]~.peer-data-\\[size\\=sm\\]\\/menu-button\\:top-1{top:.25rem}.peer\\/menu-button[data-active=true]~.peer-data-\\[active\\=true\\]\\/menu-button\\:text-sidebar-accent-foreground{color:var(--sidebar-accent-foreground)}.dark\\:border-destructive:is(.dark *){border-color:var(--destructive)}.dark\\:bg-blue-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(30 58 138 / var(--tw-bg-opacity, 1))}.dark\\:bg-blue-900\\/20:is(.dark *){background-color:#1e3a8a33}.dark\\:bg-blue-950\\/20:is(.dark *){background-color:#17255433}.dark\\:bg-gray-800:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-900\\/20:is(.dark *){background-color:#11182733}.dark\\:bg-green-900\\/20:is(.dark *){background-color:#14532d33}.dark\\:bg-purple-900\\/20:is(.dark *){background-color:#581c8733}.dark\\:bg-red-900\\/20:is(.dark *){background-color:#7f1d1d33}.dark\\:from-blue-950\\/20:is(.dark *){--tw-gradient-from: rgb(23 37 84 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 37 84 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:from-yellow-950\\/20:is(.dark *){--tw-gradient-from: rgb(66 32 6 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(66 32 6 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:to-orange-950\\/20:is(.dark *){--tw-gradient-to: rgb(67 20 7 / .2) var(--tw-gradient-to-position)}.dark\\:to-purple-950\\/20:is(.dark *){--tw-gradient-to: rgb(59 7 100 / .2) var(--tw-gradient-to-position)}.dark\\:text-blue-200:is(.dark *){--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}@media (min-width: 640px){.sm\\:-right-1{right:-.25rem}.sm\\:-top-1{top:-.25rem}.sm\\:bottom-0{bottom:0}.sm\\:right-0{right:0}.sm\\:top-auto{top:auto}.sm\\:mt-0{margin-top:0}.sm\\:flex{display:flex}.sm\\:h-10{height:2.5rem}.sm\\:h-14{height:3.5rem}.sm\\:h-16{height:4rem}.sm\\:h-24{height:6rem}.sm\\:h-5{height:1.25rem}.sm\\:h-6{height:1.5rem}.sm\\:h-8{height:2rem}.sm\\:w-10{width:2.5rem}.sm\\:w-14{width:3.5rem}.sm\\:w-5{width:1.25rem}.sm\\:w-6{width:1.5rem}.sm\\:w-8{width:2rem}.sm\\:w-auto{width:auto}.sm\\:min-w-\\[20px\\]{min-width:20px}.sm\\:max-w-lg{max-width:32rem}.sm\\:max-w-md{max-width:28rem}.sm\\:max-w-sm{max-width:24rem}.sm\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:flex-row{flex-direction:row}.sm\\:flex-col{flex-direction:column}.sm\\:items-center{align-items:center}.sm\\:justify-end{justify-content:flex-end}.sm\\:justify-between{justify-content:space-between}.sm\\:gap-2\\.5{gap:.625rem}.sm\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\\:space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.sm\\:rounded-lg{border-radius:var(--radius)}.sm\\:px-4{padding-left:1rem;padding-right:1rem}.sm\\:py-3{padding-top:.75rem;padding-bottom:.75rem}.sm\\:text-left{text-align:left}.sm\\:text-lg{font-size:1.125rem;line-height:1.75rem}.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:text-xs{font-size:.75rem;line-height:1rem}.data-\\[state\\=open\\]\\:sm\\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\\:absolute{position:absolute}.md\\:col-span-4{grid-column:span 4 / span 4}.md\\:col-span-8{grid-column:span 8 / span 8}.md\\:mx-auto{margin-left:auto;margin-right:auto}.md\\:mb-4{margin-bottom:1rem}.md\\:block{display:block}.md\\:flex{display:flex}.md\\:grid{display:grid}.md\\:hidden{display:none}.md\\:h-\\[600px\\]{height:600px}.md\\:h-\\[calc\\(100vh-2rem\\)\\]{height:calc(100vh - 2rem)}.md\\:w-\\[var\\(--radix-navigation-menu-viewport-width\\)\\]{width:var(--radix-navigation-menu-viewport-width)}.md\\:w-auto{width:auto}.md\\:max-w-6xl{max-width:72rem}.md\\:max-w-\\[420px\\]{max-width:420px}.md\\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:items-center{align-items:center}.md\\:gap-4{gap:1rem}.md\\:border-0{border-width:0px}.md\\:bg-transparent{background-color:transparent}.md\\:p-0{padding:0}.md\\:p-4{padding:1rem}.md\\:opacity-0{opacity:0}.after\\:md\\:hidden:after{content:var(--tw-content);display:none}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:m-2{margin:.5rem}.peer[data-state=collapsed][data-variant=inset]~.md\\:peer-data-\\[state\\=collapsed\\]\\:peer-data-\\[variant\\=inset\\]\\:ml-2{margin-left:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:ml-0{margin-left:0}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:rounded-xl{border-radius:.75rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}@media (min-width: 1024px){.lg\\:h-10{height:2.5rem}.lg\\:h-11{height:2.75rem}.lg\\:h-16{height:4rem}.lg\\:h-18{height:4.5rem}.lg\\:h-28{height:7rem}.lg\\:h-6{height:1.5rem}.lg\\:h-7{height:1.75rem}.lg\\:h-80{height:20rem}.lg\\:h-9{height:2.25rem}.lg\\:w-10{width:2.5rem}.lg\\:w-11{width:2.75rem}.lg\\:w-16{width:4rem}.lg\\:w-6{width:1.5rem}.lg\\:w-7{width:1.75rem}.lg\\:w-9{width:2.25rem}.lg\\:max-w-xl{max-width:36rem}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.lg\\:text-sm{font-size:.875rem;line-height:1.25rem}.lg\\:text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width: 1280px){.xl\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}.rtl\\:ml-0:where([dir=rtl],[dir=rtl] *){margin-left:0}.rtl\\:mr-3:where([dir=rtl],[dir=rtl] *){margin-right:.75rem}.rtl\\:flex-row:where([dir=rtl],[dir=rtl] *){flex-direction:row}.rtl\\:flex-row-reverse:where([dir=rtl],[dir=rtl] *){flex-direction:row-reverse}.rtl\\:space-x-reverse:where([dir=rtl],[dir=rtl] *)>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 1}.\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:bg-accent:has([aria-selected]){background-color:var(--accent)}.first\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.last\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-range-end\\)\\]\\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\\[\\&\\:has\\(\\[role\\=checkbox\\]\\)\\]\\:pr-0:has([role=checkbox]){padding-right:0}.\\[\\&\\>button\\]\\:hidden>button{display:none}.\\[\\&\\>span\\:last-child\\]\\:truncate>span:last-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.\\[\\&\\>span\\]\\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\\[\\&\\>svg\\+div\\]\\:translate-y-\\[-3px\\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\>svg\\]\\:absolute>svg{position:absolute}.\\[\\&\\>svg\\]\\:left-4>svg{left:1rem}.\\[\\&\\>svg\\]\\:top-4>svg{top:1rem}.\\[\\&\\>svg\\]\\:size-4>svg{width:1rem;height:1rem}.\\[\\&\\>svg\\]\\:h-2\\.5>svg{height:.625rem}.\\[\\&\\>svg\\]\\:h-3>svg{height:.75rem}.\\[\\&\\>svg\\]\\:h-3\\.5>svg{height:.875rem}.\\[\\&\\>svg\\]\\:w-2\\.5>svg{width:.625rem}.\\[\\&\\>svg\\]\\:w-3>svg{width:.75rem}.\\[\\&\\>svg\\]\\:w-3\\.5>svg{width:.875rem}.\\[\\&\\>svg\\]\\:shrink-0>svg{flex-shrink:0}.\\[\\&\\>svg\\]\\:text-destructive>svg{color:var(--destructive)}.\\[\\&\\>svg\\]\\:text-foreground>svg{color:var(--foreground)}.\\[\\&\\>svg\\]\\:text-muted-foreground>svg{color:var(--muted-foreground)}.\\[\\&\\>svg\\]\\:text-sidebar-accent-foreground>svg{color:var(--sidebar-accent-foreground)}.\\[\\&\\>svg\\~\\*\\]\\:pl-7>svg~*{padding-left:1.75rem}.\\[\\&\\>tr\\]\\:last\\:border-b-0:last-child>tr{border-bottom-width:0px}.\\[\\&\\[data-panel-group-direction\\=vertical\\]\\>div\\]\\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&_\\.recharts-cartesian-axis-tick_text\\]\\:fill-muted-foreground .recharts-cartesian-axis-tick text{fill:var(--muted-foreground)}.\\[\\&_\\.recharts-curve\\.recharts-tooltip-cursor\\]\\:stroke-border .recharts-curve.recharts-tooltip-cursor{stroke:var(--border)}.\\[\\&_\\.recharts-dot\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-dot[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-layer\\]\\:outline-none .recharts-layer{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\.recharts-polar-grid_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-polar-grid [stroke=\"#ccc\"]{stroke:var(--border)}.\\[\\&_\\.recharts-radial-bar-background-sector\\]\\:fill-muted .recharts-radial-bar-background-sector,.\\[\\&_\\.recharts-rectangle\\.recharts-tooltip-cursor\\]\\:fill-muted .recharts-rectangle.recharts-tooltip-cursor{fill:var(--muted)}.\\[\\&_\\.recharts-reference-line_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-reference-line [stroke=\"#ccc\"]{stroke:var(--border)}.\\[\\&_\\.recharts-sector\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-sector[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-sector\\]\\:outline-none .recharts-sector,.\\[\\&_\\.recharts-surface\\]\\:outline-none .recharts-surface{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:py-1\\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-muted-foreground [cmdk-group-heading]{color:var(--muted-foreground)}.\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\\[\\&_\\[cmdk-group\\]\\]\\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\\[\\&_\\[cmdk-input\\]\\]\\:h-12 [cmdk-input]{height:3rem}.\\[\\&_\\[cmdk-item\\]\\]\\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-item\\]\\]\\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:h-5 [cmdk-item] svg{height:1.25rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:w-5 [cmdk-item] svg{width:1.25rem}.\\[\\&_p\\]\\:leading-relaxed p{line-height:1.625}.\\[\\&_svg\\]\\:pointer-events-none svg{pointer-events:none}.\\[\\&_svg\\]\\:size-4 svg{width:1rem;height:1rem}.\\[\\&_svg\\]\\:shrink-0 svg{flex-shrink:0}.\\[\\&_tr\\:last-child\\]\\:border-0 tr:last-child{border-width:0px}.\\[\\&_tr\\]\\:border-b tr{border-bottom-width:1px}[data-side=left][data-collapsible=offcanvas] .\\[\\[data-side\\=left\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-right-2{right:-.5rem}[data-side=left][data-state=collapsed] .\\[\\[data-side\\=left\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}[data-side=left] .\\[\\[data-side\\=left\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}[data-side=right][data-collapsible=offcanvas] .\\[\\[data-side\\=right\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-left-2{left:-.5rem}[data-side=right][data-state=collapsed] .\\[\\[data-side\\=right\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}[data-side=right] .\\[\\[data-side\\=right\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}\n","size_bytes":163150},"setup-users-production.js":{"content":"#!/usr/bin/env node\n/**\n * Script لإعداد المستخدمين الأساسيين في قاعدة البيانات الإنتاج\n * تشغيل: node setup-users-production.js\n */\n\nimport { pool } from \"./server/db.js\";\nimport bcrypt from \"bcryptjs\";\n\nconst USERS_TO_CREATE = [\n  {\n    username: \"admin\",\n    password: \"123456\",\n    role: \"admin\",\n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مدير\",\n    lastName: \"النظام\",\n    email: \"admin@company.com\"\n  },\n  {\n    username: \"supervisor\",\n    password: \"123456\", \n    role: \"supervisor\",\n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مشرف\",\n    lastName: \"النظام\",\n    email: \"supervisor@company.com\"\n  },\n  {\n    username: \"user1\",\n    password: \"123456\",\n    role: \"user\", \n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مستخدم\",\n    lastName: \"عادي\",\n    email: \"user1@company.com\"\n  }\n];\n\nasync function setupUsers() {\n  console.log(\"🚀 بدء إعداد المستخدمين في قاعدة البيانات...\");\n  \n  const client = await pool.connect();\n  \n  try {\n    for (const userData of USERS_TO_CREATE) {\n      // التحقق من وجود المستخدم\n      const existingUser = await client.query(\n        'SELECT id FROM users WHERE username = $1',\n        [userData.username]\n      );\n      \n      if (existingUser.rows.length > 0) {\n        console.log(`✅ المستخدم ${userData.username} موجود بالفعل`);\n        continue;\n      }\n      \n      // تشفير كلمة المرور\n      const hashedPassword = await bcrypt.hash(userData.password, 10);\n      \n      // إنشاء المستخدم\n      await client.query(`\n        INSERT INTO users (username, password, role, is_approved, is_active, first_name, last_name, email) \n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n      `, [\n        userData.username,\n        hashedPassword,\n        userData.role,\n        userData.isApproved,\n        userData.isActive,\n        userData.firstName,\n        userData.lastName,\n        userData.email\n      ]);\n      \n      console.log(`✅ تم إنشاء المستخدم: ${userData.username} (${userData.role})`);\n    }\n    \n    console.log(\"\\n🎉 تم إعداد جميع المستخدمين بنجاح!\");\n    console.log(\"\\nالمستخدمين المتاحين للدخول:\");\n    console.log(\"👑 admin / 123456 (مدير النظام)\");\n    console.log(\"🔧 supervisor / 123456 (مشرف)\");\n    console.log(\"👤 user1 / 123456 (مستخدم عادي)\");\n    console.log(\"\\n⚠️  تذكر تغيير كلمات المرور بعد أول تسجيل دخول!\");\n    \n  } catch (error) {\n    console.error(\"❌ خطأ في إعداد المستخدمين:\", error);\n    throw error;\n  } finally {\n    client.release();\n    pool.end();\n  }\n}\n\n// تشغيل إعداد المستخدمين\nsetupUsers()\n  .then(() => {\n    console.log(\"\\n✅ تم الانتهاء بنجاح!\");\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error(\"❌ فشل في إعداد المستخدمين:\", error);\n    process.exit(1);\n  });","size_bytes":3134},"scripts/setup-production-users.js":{"content":"#!/usr/bin/env node\n/**\n * Script لإعداد المستخدمين الأساسيين في قاعدة البيانات\n * يستخدم في الإنتاج لإنشاء المستخدمين الضروريين\n */\n\nimport { db } from \"../server/db.js\";\nimport { users } from \"../shared/schema.js\";\nimport bcrypt from \"bcryptjs\";\nimport { eq } from \"drizzle-orm\";\n\nconst USERS_TO_CREATE = [\n  {\n    username: \"admin\",\n    password: \"123456\",\n    role: \"admin\",\n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مدير\",\n    lastName: \"النظام\",\n    email: \"admin@company.com\"\n  },\n  {\n    username: \"supervisor\",\n    password: \"123456\", \n    role: \"supervisor\",\n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مشرف\",\n    lastName: \"النظام\",\n    email: \"supervisor@company.com\"\n  },\n  {\n    username: \"user1\",\n    password: \"123456\",\n    role: \"user\", \n    isApproved: \"approved\",\n    isActive: \"true\",\n    firstName: \"مستخدم\",\n    lastName: \"عادي\",\n    email: \"user1@company.com\"\n  }\n];\n\nasync function setupUsers() {\n  console.log(\"🚀 بدء إعداد المستخدمين في قاعدة البيانات...\");\n  \n  try {\n    for (const userData of USERS_TO_CREATE) {\n      // التحقق من وجود المستخدم\n      const [existingUser] = await db\n        .select()\n        .from(users)\n        .where(eq(users.username, userData.username));\n      \n      if (existingUser) {\n        console.log(`✅ المستخدم ${userData.username} موجود بالفعل`);\n        continue;\n      }\n      \n      // تشفير كلمة المرور\n      const hashedPassword = await bcrypt.hash(userData.password, 10);\n      \n      // إنشاء المستخدم\n      await db.insert(users).values({\n        username: userData.username,\n        password: hashedPassword,\n        role: userData.role,\n        isApproved: userData.isApproved,\n        isActive: userData.isActive,\n        firstName: userData.firstName,\n        lastName: userData.lastName,\n        email: userData.email\n      });\n      \n      console.log(`✅ تم إنشاء المستخدم: ${userData.username} (${userData.role})`);\n    }\n    \n    console.log(\"\\n🎉 تم إعداد جميع المستخدمين بنجاح!\");\n    console.log(\"\\nالمستخدمين المتاحين:\");\n    console.log(\"- admin / 123456 (مدير النظام)\");\n    console.log(\"- supervisor / 123456 (مشرف)\");\n    console.log(\"- user1 / 123456 (مستخدم عادي)\");\n    \n  } catch (error) {\n    console.error(\"❌ خطأ في إعداد المستخدمين:\", error);\n    process.exit(1);\n  }\n}\n\n// تشغيل إعداد المستخدمين\nif (import.meta.url === `file://${process.argv[1]}`) {\n  setupUsers()\n    .then(() => process.exit(0))\n    .catch((error) => {\n      console.error(\"❌ فشل في إعداد المستخدمين:\", error);\n      process.exit(1);\n    });\n}\n\nexport { setupUsers };","size_bytes":2941},"server/setup-users-production.js":{"content":"// setup-users-production.js\nimport \"dotenv/config\";\nimport bcrypt from \"bcryptjs\";\nimport { drizzle } from \"drizzle-orm/node-postgres\";\nimport pkg from \"pg\";\nimport * as schema from \"./server/db/schema.js\"; // تأكد من المسار الصحيح للـ schema\n\nconst { Pool } = pkg;\n\nasync function main() {\n  console.log(\"🚀 بدء زرع المستخدمين في قاعدة بيانات الإنتاج...\");\n\n  // إعداد الاتصال بقاعدة البيانات\n  const pool = new Pool({\n    connectionString: process.env.DATABASE_URL, // لازم يكون عندك DATABASE_URL بالـ .env.production\n  });\n  const db = drizzle(pool, { schema });\n\n  // تعريف المستخدمين الأساسيين\n  const users = [\n    { username: \"admin\", password: \"123456\", role: \"admin\" },\n    { username: \"supervisor\", password: \"123456\", role: \"supervisor\" },\n    { username: \"user1\", password: \"123456\", role: \"user\" },\n  ];\n\n  for (const user of users) {\n    const hashedPassword = bcrypt.hashSync(user.password, 10);\n\n    try {\n      // إدخال المستخدمين\n      await db\n        .insert(schema.users)\n        .values({\n          username: user.username,\n          password: hashedPassword,\n          role: user.role,\n        })\n        .onConflictDoNothing(); // إذا موجود، يتجاهل\n      console.log(`✅ تمت إضافة/تأكيد المستخدم: ${user.username}`);\n    } catch (err) {\n      console.error(`❌ خطأ مع المستخدم ${user.username}:`, err.message);\n    }\n  }\n\n  await pool.end();\n  console.log(\"🎉 تم زرع المستخدمين بنجاح!\");\n}\n\nmain().catch((err) => {\n  console.error(\"❌ خطأ عام:\", err);\n});\n","size_bytes":1701}},"version":1}